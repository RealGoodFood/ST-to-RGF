DEPRECATION WARNING: config.action_view.debug_rjs will be removed in 3.1, from 3.1 onwards you will need to install prototype-rails to continue to use RJS templates . (called from <top (required)> at /home/chaitanya/workArea/ST-to-RGF/config/environment.rb:10)
Starting the New Relic Agent.
NewRelic Agent Developer Mode enabled.
To view performance information, go to http://localhost:3000/newrelic
Installed New Relic Browser Monitoring middleware
  [1m[36mSQL (0.3ms)[0m  [1mSHOW client_min_messages[0m
  [1m[35mSQL (0.2ms)[0m  SET client_min_messages TO 'panic'
  [1m[36mSQL (0.4ms)[0m  [1mSET standard_conforming_strings = on[0m
  [1m[35mSQL (0.4ms)[0m  SET client_min_messages TO 'notice'
  [1m[36mSQL (0.6ms)[0m  [1mSET time zone 'UTC'[0m
  [1m[35mSQL (0.4ms)[0m  SHOW TIME ZONE
  [1m[36mPK and serial sequence (4.9ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (2.1ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
DEPRECATION WARNING: RAILS_ROOT is deprecated. Please use ::Rails.root.to_s. (called from <class:Person> at /home/chaitanya/workArea/ST-to-RGF/app/models/person.rb:134)


Started GET "/en/homepage" for 127.0.0.1 at 2013-02-12 16:18:14 +0530
  [1m[36mSQL (0.4ms)[0m  [1mSHOW client_min_messages[0m
  [1m[35mSQL (0.3ms)[0m  SET client_min_messages TO 'panic'
  [1m[36mSQL (0.3ms)[0m  [1mSET standard_conforming_strings = on[0m
  [1m[35mSQL (0.2ms)[0m  SET client_min_messages TO 'notice'
  [1m[36mSQL (0.5ms)[0m  [1mSET time zone 'UTC'[0m
  [1m[35mSQL (0.5ms)[0m  SHOW TIME ZONE
  Processing by HomepageController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mSQL (6.9ms)[0m  [1m SELECT tablename
 FROM pg_tables
 WHERE schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (5.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (4.2ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (5.9ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (1.6ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (1.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.1ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (2.1ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (1.0ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'bTFw-gDdur4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"delayed_jobs"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.6ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"delayed_jobs"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.6ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"delayed_jobs"'::regclass
[0m
  [1m[35mSQL (2.4ms)[0m  INSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bHZoLm1l
', NULL, '2013-02-12 10:48:15.605290', NULL, NULL, NULL, '2013-02-12 10:48:15.605475', '2013-02-12 10:48:15.605475', NULL) RETURNING "id"
  [1m[36mSQL (22.1ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (1.5ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (2.0ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mSQL (1.7ms)[0m  SELECT 1 FROM "people" INNER JOIN "community_memberships" ON "people".id = "community_memberships".person_id WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' AND (("community_memberships".community_id = 1)) LIMIT 1
  [1m[36mSQL (2.3ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.3ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (3.1ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (2.5ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (1.9ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.8ms)[0m  [1mSELECT "communities".* FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY'))[0m
~~~~~~~~~~~~~~~not request.xhr~~~~~~~~~
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"news_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.4ms)[0m  [1mSELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 1)[0m
  [1m[35mCommunity Load (1.0ms)[0m  SELECT "communities".* FROM "communities"
  [1m[36mSQL (1.0ms)[0m  [1mSELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 1) LIMIT 2[0m
  [1m[35mSQL (25.2ms)[0m  SELECT COUNT(*) FROM "listings" WHERE "listings"."listing_type" = 'offer' AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')
 ) AND (open = '1' AND (valid_until IS NULL OR valid_until > '2013-02-12 10:48:15'))
  [1m[36mListing Load (4.0ms)[0m  [1mSELECT "listings".* FROM "listings" WHERE "listings"."listing_type" = 'offer' AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')
 ) AND (open = '1' AND (valid_until IS NULL OR valid_until > '2013-02-12 10:48:15')) ORDER BY listings.created_at DESC LIMIT 3 OFFSET 0[0m
  [1m[35mListingImage Load (1.7ms)[0m  SELECT "listing_images".* FROM "listing_images" WHERE ("listing_images".listing_id IN (4,3,1))
  [1m[36mPerson Load (2.4ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"diet_listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.3ms)[0m  [1mSELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 4)[0m
  [1m[35mSQL (1.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"comments"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.3ms)[0m  [1mSELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 4)[0m
  [1m[35mPerson Load (1.5ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bmEhbODeyr4Oap3a6HdQnY' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mSELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 3)[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 3)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  SELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 1)
  [1m[36mSQL (0.8ms)[0m  [1mSELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 1)[0m
Rendered homepage/_recent_listing.haml (107.7ms)
Rendered common/_staples.haml (2.2ms)
  [1m[35mCommunityMembership Load (1.3ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'bTFw-gDdur4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
Rendered homepage/_user_communities.haml (16.5ms)
Rendered common/_staples.haml (6.1ms)
  [1m[36mLocation Load (1.7ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'bTFw-gDdur4Oaa3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
Rendered common/_staples.haml (2.2ms)
Rendered homepage/_profile_info_empty_notification.haml (3.6ms)
Rendered common/_staples.haml (2.1ms)
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"event_feed_events"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.2ms)[0m  [1mSELECT COUNT(*) FROM "event_feed_events" WHERE ("event_feed_events".community_id = 1)[0m
Rendered common/_staples.haml (2.3ms)
  [1m[35mEventFeedEvent Load (1.9ms)[0m  SELECT "event_feed_events".* FROM "event_feed_events" WHERE ("event_feed_events".community_id = 1) ORDER BY id DESC LIMIT 5
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1[0m
Rendered event_feed_events/_login.haml (4.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bmEhbODeyr4Oap3a6HdQnY' LIMIT 1
Rendered event_feed_events/_login.haml (3.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bmEhbODeyr4Oap3a6HdQnY' LIMIT 1[0m
Rendered event_feed_events/_login.haml (3.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1
Rendered event_feed_events/_login.haml (3.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bmEhbODeyr4Oap3a6HdQnY' LIMIT 1[0m
Rendered event_feed_events/_login.haml (3.8ms)
Rendered homepage/_event_feed_event.haml (39.5ms)
Rendered homepage/_event_feed.haml (46.3ms)
Rendered common/_staples.haml (2.1ms)
Rendered common/_staples.haml (58.5ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 1) LIMIT 2
Rendered homepage/_news_items.haml (5.6ms)
Rendered common/_staples.haml (2.3ms)
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"polls"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPoll Load (1.6ms)[0m  SELECT "polls".* FROM "polls" WHERE "polls"."active" = 't' AND ("polls".community_id = 1) LIMIT 1
Rendered layouts/_kissmetrics.haml (3.2ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.6ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.1ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (95.2ms)
Rendered communities/default/logo/logo.haml (2.2ms)
Rendered layouts/_no_javascript.haml (16.2ms)
Rendered layouts/_facebook_sdk.haml (2.6ms)
  [1m[36mSQL (2.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.7ms)[0m  [1mSELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'bTFw-gDdur4Oaa3a6HdQnY')) AND participations.person_id = 'bTFw-gDdur4Oaa3a6HdQnY')[0m
Rendered layouts/_logged_in_messages_icon.haml (17.3ms)
  [1m[35mSQL (1.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.7ms)[0m  [1mSELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'bTFw-gDdur4Oaa3a6HdQnY')[0m
Rendered layouts/_logged_in_notifications_icon.haml (12.8ms)
  [1m[35mSQL (1.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.8ms)[0m  [1mSELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'bTFw-gDdur4Oaa3a6HdQnY') AND (acceptance is null)[0m
Rendered layouts/_logged_in_swap_offers_icon.haml (12.6ms)
  [1m[35mCommunityMembership Load (0.6ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."community_id" = 1 AND ("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY') LIMIT 1
Rendered layouts/_logged_in.haml (58.2ms)
Rendered layouts/_notifications.haml (5.1ms)
Rendered layouts/_display_popup.haml (62.2ms)
Rendered homepage/index.haml within layouts/application (19015.3ms)
Completed 200 OK in 20434ms (Views: 18950.0ms | ActiveRecord: 176.9ms | Sphinx: 0.0ms)


Started GET "/en/people/bTFw-gDdur4Oaa3a6HdQnY/invitations/new" for 127.0.0.1 at 2013-02-12 16:28:24 +0530
  Processing by InvitationsController#new as HTML
  Parameters: {"locale"=>"en", "person_id"=>"bTFw-gDdur4Oaa3a6HdQnY"}
  [1m[36mPK and serial sequence (6.4ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (3.6ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (4.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (3.8ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (1.6ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.5ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (3.4ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (3.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (2.6ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (1.4ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (0.4ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'bTFw-gDdur4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bHZoLm1l
', NULL, '2013-02-12 10:58:25.534947', NULL, NULL, NULL, '2013-02-12 10:58:25.535094', '2013-02-12 10:58:25.535094', NULL) RETURNING "id"
  [1m[36mSQL (12.9ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (0.6ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (0.7ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mSQL (15.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"invitations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
Rendered layouts/_kissmetrics.haml (3.7ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.7ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.0ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (9.8ms)
Rendered communities/default/logo/logo.haml (2.2ms)
Rendered layouts/_no_javascript.haml (16.2ms)
Rendered layouts/_facebook_sdk.haml (2.7ms)
  [1m[36mSQL (4.4ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.5ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (3.5ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (6.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (3.4ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (3.6ms)[0m  SELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'bTFw-gDdur4Oaa3a6HdQnY')) AND participations.person_id = 'bTFw-gDdur4Oaa3a6HdQnY')
Rendered layouts/_logged_in_messages_icon.haml (756.1ms)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.4ms)[0m  SELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'bTFw-gDdur4Oaa3a6HdQnY')
Rendered layouts/_logged_in_notifications_icon.haml (14.9ms)
  [1m[36mSQL (2.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.4ms)[0m  SELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'bTFw-gDdur4Oaa3a6HdQnY') AND (acceptance is null)
Rendered layouts/_logged_in_swap_offers_icon.haml (15.5ms)
  [1m[36mCommunityMembership Load (1.0ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."community_id" = 1 AND ("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY') LIMIT 1[0m
Rendered layouts/_logged_in.haml (804.5ms)
Rendered layouts/_notifications.haml (7.9ms)
  [1m[35mLocation Load (1.2ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'bTFw-gDdur4Oaa3a6HdQnY' AND (location_type = 'person')) LIMIT 1
Rendered layouts/_display_popup.haml (12.0ms)
Rendered invitations/new.html.haml within layouts/application (991.3ms)
Completed 200 OK in 1561ms (Views: 980.6ms | ActiveRecord: 117.5ms | Sphinx: 0.0ms)


Started POST "/en/people/bTFw-gDdur4Oaa3a6HdQnY/invitations" for 127.0.0.1 at 2013-02-12 16:36:24 +0530
  Processing by InvitationsController#create as JS
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"RJmvwMjQFWvaMzZiMzkHUJSPCqX4xPUC88lFSv9+cMM=", "invitation"=>{"email"=>"saraf.chaitanya@gmail.com", "message"=>"Compliment a cook", "community_id"=>"1", "inviter_id"=>"bTFw-gDdur4Oaa3a6HdQnY"}, "commit"=>"Send Invitation", "locale"=>"en", "person_id"=>"bTFw-gDdur4Oaa3a6HdQnY"}
  [1m[36mPK and serial sequence (6.5ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.0ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (1.4ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (5.8ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (1.4ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.6ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (1.5ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (1.1ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'bTFw-gDdur4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.2ms)[0m  INSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bHZoLm1l
', NULL, '2013-02-12 11:06:25.020867', NULL, NULL, NULL, '2013-02-12 11:06:25.020978', '2013-02-12 11:06:25.020978', NULL) RETURNING "id"
  [1m[36mSQL (20.6ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (1.6ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (1.1ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"invitations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.6ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.8ms)[0m  SELECT 1 FROM "invitations" WHERE ("invitations"."code" = 'J66ZPP') LIMIT 1
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"invitations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (7.3ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"invitations"'::regclass
  [1m[36mSQL (44.0ms)[0m  [1mINSERT INTO "invitations" ("code", "community_id", "usages_left", "valid_until", "information", "created_at", "updated_at", "inviter_id", "message", "email") VALUES ('J66ZPP', 1, 1, NULL, NULL, '2013-02-12 11:06:25.188498', '2013-02-12 11:06:25.188498', 'bTFw-gDdur4Oaa3a6HdQnY', 'Compliment a cook', 'saraf.chaitanya@gmail.com') RETURNING "id"[0m
  [1m[35mSQL (16.9ms)[0m  COMMIT
  [1m[36mSQL (0.7ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:InvitationCreatedJob
invitation_id: 1
host: !binary |-
 bHZoLm1l
', NULL, '2013-02-12 11:06:25.279673', NULL, NULL, NULL, '2013-02-12 11:06:25.279959', '2013-02-12 11:06:25.279959', NULL) RETURNING "id"
  [1m[36mSQL (4.4ms)[0m  [1mCOMMIT[0m
Rendered layouts/_notifications.haml (8.8ms)
Rendered invitations/create.js.erb (14.3ms)
Completed 200 OK in 750ms (Views: 32.9ms | ActiveRecord: 142.9ms | Sphinx: 0.0ms)


Started GET "/en/homepage" for 127.0.0.1 at 2013-02-12 16:50:56 +0530
  Processing by HomepageController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[35mPK and serial sequence (2.5ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (3.5ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.6ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.5ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (3.6ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.6ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.5ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.5ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (1.0ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'bTFw-gDdur4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  BEGIN
  [1m[36mSQL (1.2ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bHZoLm1l
', NULL, '2013-02-12 11:20:57.340658', NULL, NULL, NULL, '2013-02-12 11:20:57.340810', '2013-02-12 11:20:57.340810', NULL) RETURNING "id"[0m
  [1m[35mSQL (12.7ms)[0m  COMMIT
  [1m[36mSQL (2.0ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (0.6ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mSQL (1.4ms)[0m  [1mSELECT 1 FROM "people" INNER JOIN "community_memberships" ON "people".id = "community_memberships".person_id WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' AND (("community_memberships".community_id = 1)) LIMIT 1[0m
  [1m[35mSQL (1.2ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (2.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (2.5ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (1.5ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (2.4ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (1.4ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (1.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.6ms)[0m  SELECT "communities".* FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY'))
~~~~~~~~~~~~~~~not request.xhr~~~~~~~~~
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"news_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.3ms)[0m  SELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 1)
  [1m[36mCommunity Load (1.0ms)[0m  [1mSELECT "communities".* FROM "communities"[0m
  [1m[35mSQL (1.0ms)[0m  SELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 1) LIMIT 2
  [1m[36mSQL (3.1ms)[0m  [1mSELECT COUNT(*) FROM "listings" WHERE "listings"."listing_type" = 'offer' AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')
 ) AND (open = '1' AND (valid_until IS NULL OR valid_until > '2013-02-12 11:20:57'))[0m
  [1m[35mListing Load (4.0ms)[0m  SELECT "listings".* FROM "listings" WHERE "listings"."listing_type" = 'offer' AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')
 ) AND (open = '1' AND (valid_until IS NULL OR valid_until > '2013-02-12 11:20:57')) ORDER BY listings.created_at DESC LIMIT 3 OFFSET 0
  [1m[36mListingImage Load (1.1ms)[0m  [1mSELECT "listing_images".* FROM "listing_images" WHERE ("listing_images".listing_id IN (4,3,1))[0m
  [1m[35mPerson Load (1.2ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (1.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"diet_listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.7ms)[0m  SELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 4)
  [1m[36mSQL (1.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"comments"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.4ms)[0m  SELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 4)
  [1m[36mPerson Load (1.6ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bmEhbODeyr4Oap3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  SELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 3)
  [1m[36mSQL (0.8ms)[0m  [1mSELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 3)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 1)[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 1)
Rendered homepage/_recent_listing.haml (49.9ms)
Rendered common/_staples.haml (2.6ms)
  [1m[36mCommunityMembership Load (1.1ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'bTFw-gDdur4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
Rendered homepage/_user_communities.haml (7.1ms)
Rendered common/_staples.haml (2.1ms)
  [1m[35mLocation Load (1.1ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'bTFw-gDdur4Oaa3a6HdQnY' AND (location_type = 'person')) LIMIT 1
Rendered common/_staples.haml (2.0ms)
Rendered homepage/_profile_info_empty_notification.haml (3.3ms)
Rendered common/_staples.haml (2.2ms)
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"event_feed_events"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.4ms)[0m  SELECT COUNT(*) FROM "event_feed_events" WHERE ("event_feed_events".community_id = 1)
Rendered common/_staples.haml (72.0ms)
  [1m[36mEventFeedEvent Load (0.9ms)[0m  [1mSELECT "event_feed_events".* FROM "event_feed_events" WHERE ("event_feed_events".community_id = 1) ORDER BY id DESC LIMIT 5[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1
Rendered event_feed_events/_login.haml (5.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bmEhbODeyr4Oap3a6HdQnY' LIMIT 1[0m
Rendered event_feed_events/_login.haml (3.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bmEhbODeyr4Oap3a6HdQnY' LIMIT 1
Rendered event_feed_events/_login.haml (3.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1[0m
Rendered event_feed_events/_login.haml (3.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bmEhbODeyr4Oap3a6HdQnY' LIMIT 1
Rendered event_feed_events/_login.haml (4.1ms)
Rendered homepage/_event_feed_event.haml (39.8ms)
Rendered homepage/_event_feed.haml (45.6ms)
Rendered common/_staples.haml (2.2ms)
Rendered common/_staples.haml (2.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 1) LIMIT 2[0m
Rendered homepage/_news_items.haml (5.9ms)
Rendered common/_staples.haml (2.1ms)
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"polls"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPoll Load (1.5ms)[0m  [1mSELECT "polls".* FROM "polls" WHERE "polls"."active" = 't' AND ("polls".community_id = 1) LIMIT 1[0m
Rendered layouts/_kissmetrics.haml (3.0ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.7ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.0ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (10.6ms)
Rendered communities/default/logo/logo.haml (2.4ms)
Rendered layouts/_no_javascript.haml (79.5ms)
Rendered layouts/_facebook_sdk.haml (2.6ms)
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.7ms)[0m  SELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'bTFw-gDdur4Oaa3a6HdQnY')) AND participations.person_id = 'bTFw-gDdur4Oaa3a6HdQnY')
Rendered layouts/_logged_in_messages_icon.haml (16.9ms)
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'bTFw-gDdur4Oaa3a6HdQnY')
Rendered layouts/_logged_in_notifications_icon.haml (12.6ms)
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.8ms)[0m  SELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'bTFw-gDdur4Oaa3a6HdQnY') AND (acceptance is null)
Rendered layouts/_logged_in_swap_offers_icon.haml (12.7ms)
  [1m[36mCommunityMembership Load (1.1ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."community_id" = 1 AND ("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY') LIMIT 1[0m
Rendered layouts/_logged_in.haml (59.3ms)
Rendered layouts/_notifications.haml (7.0ms)
Rendered layouts/_display_popup.haml (7.3ms)
Rendered homepage/index.haml within layouts/application (510.6ms)
Completed 200 OK in 1808ms (Views: 471.8ms | ActiveRecord: 117.9ms | Sphinx: 0.0ms)


Started GET "/en/homepage" for 127.0.0.1 at 2013-02-12 17:58:58 +0530
  Processing by HomepageController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[35mPK and serial sequence (6.4ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (3.2ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.3ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.8ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (3.7ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.3ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.4ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (1.0ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'bTFw-gDdur4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  BEGIN
  [1m[36mSQL (1.2ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bHZoLm1l
', NULL, '2013-02-12 12:28:59.165338', NULL, NULL, NULL, '2013-02-12 12:28:59.165476', '2013-02-12 12:28:59.165476', NULL) RETURNING "id"[0m
  [1m[35mSQL (33.1ms)[0m  COMMIT
  [1m[36mSQL (1.4ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.0ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mSQL (1.4ms)[0m  [1mSELECT 1 FROM "people" INNER JOIN "community_memberships" ON "people".id = "community_memberships".person_id WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' AND (("community_memberships".community_id = 1)) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (0.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (2.4ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (3.3ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (5.7ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (3.6ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (1.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.7ms)[0m  SELECT "communities".* FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY'))
~~~~~~~~~~~~~~~not request.xhr~~~~~~~~~
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"news_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.8ms)[0m  SELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 1)
  [1m[36mCommunity Load (1.3ms)[0m  [1mSELECT "communities".* FROM "communities"[0m
  [1m[35mSQL (1.0ms)[0m  SELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 1) LIMIT 2
  [1m[36mSQL (2.3ms)[0m  [1mSELECT COUNT(*) FROM "listings" WHERE "listings"."listing_type" = 'offer' AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')
 ) AND (open = '1' AND (valid_until IS NULL OR valid_until > '2013-02-12 12:28:59'))[0m
  [1m[35mListing Load (1.9ms)[0m  SELECT "listings".* FROM "listings" WHERE "listings"."listing_type" = 'offer' AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')
 ) AND (open = '1' AND (valid_until IS NULL OR valid_until > '2013-02-12 12:28:59')) ORDER BY listings.created_at DESC LIMIT 3 OFFSET 0
  [1m[36mListingImage Load (0.5ms)[0m  [1mSELECT "listing_images".* FROM "listing_images" WHERE ("listing_images".listing_id IN (4,3,1))[0m
  [1m[35mPerson Load (0.7ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (1.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"diet_listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 4)
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"comments"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.0ms)[0m  SELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 4)
  [1m[36mPerson Load (1.6ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bmEhbODeyr4Oap3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 3)
  [1m[36mSQL (0.8ms)[0m  [1mSELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 3)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mSELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 1)[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 1)
Rendered homepage/_recent_listing.haml (114.8ms)
Rendered common/_staples.haml (2.2ms)
  [1m[36mCommunityMembership Load (1.2ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'bTFw-gDdur4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
Rendered homepage/_user_communities.haml (6.6ms)
Rendered common/_staples.haml (2.3ms)
  [1m[35mLocation Load (1.1ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'bTFw-gDdur4Oaa3a6HdQnY' AND (location_type = 'person')) LIMIT 1
Rendered common/_staples.haml (2.2ms)
Rendered homepage/_profile_info_empty_notification.haml (4.1ms)
Rendered common/_staples.haml (2.2ms)
  [1m[36mSQL (2.6ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"event_feed_events"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.8ms)[0m  SELECT COUNT(*) FROM "event_feed_events" WHERE ("event_feed_events".community_id = 1)
Rendered common/_staples.haml (2.2ms)
  [1m[36mEventFeedEvent Load (1.5ms)[0m  [1mSELECT "event_feed_events".* FROM "event_feed_events" WHERE ("event_feed_events".community_id = 1) ORDER BY id DESC LIMIT 5[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1
Rendered event_feed_events/_login.haml (4.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bmEhbODeyr4Oap3a6HdQnY' LIMIT 1[0m
Rendered event_feed_events/_login.haml (3.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bmEhbODeyr4Oap3a6HdQnY' LIMIT 1
Rendered event_feed_events/_login.haml (3.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1[0m
Rendered event_feed_events/_login.haml (4.5ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bmEhbODeyr4Oap3a6HdQnY' LIMIT 1
Rendered event_feed_events/_login.haml (3.9ms)
Rendered homepage/_event_feed_event.haml (39.6ms)
Rendered homepage/_event_feed.haml (46.1ms)
Rendered common/_staples.haml (3.1ms)
Rendered common/_staples.haml (2.2ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 1) LIMIT 2[0m
Rendered homepage/_news_items.haml (5.2ms)
Rendered common/_staples.haml (67.7ms)
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"polls"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPoll Load (1.0ms)[0m  [1mSELECT "polls".* FROM "polls" WHERE "polls"."active" = 't' AND ("polls".community_id = 1) LIMIT 1[0m
Rendered layouts/_kissmetrics.haml (3.8ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.8ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.0ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (9.9ms)
Rendered communities/default/logo/logo.haml (2.5ms)
Rendered layouts/_no_javascript.haml (16.0ms)
Rendered layouts/_facebook_sdk.haml (2.4ms)
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.7ms)[0m  SELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'bTFw-gDdur4Oaa3a6HdQnY')) AND participations.person_id = 'bTFw-gDdur4Oaa3a6HdQnY')
Rendered layouts/_logged_in_messages_icon.haml (15.3ms)
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'bTFw-gDdur4Oaa3a6HdQnY')
Rendered layouts/_logged_in_notifications_icon.haml (10.2ms)
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'bTFw-gDdur4Oaa3a6HdQnY') AND (acceptance is null)
Rendered layouts/_logged_in_swap_offers_icon.haml (11.5ms)
  [1m[36mCommunityMembership Load (1.0ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."community_id" = 1 AND ("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY') LIMIT 1[0m
Rendered layouts/_logged_in.haml (51.5ms)
Rendered layouts/_notifications.haml (6.9ms)
Rendered layouts/_display_popup.haml (7.5ms)
Rendered homepage/index.haml within layouts/application (503.5ms)
Completed 200 OK in 1700ms (Views: 467.9ms | ActiveRecord: 142.3ms | Sphinx: 0.0ms)


Started GET "/en/people/bTFw-gDdur4Oaa3a6HdQnY/invitations/new" for 127.0.0.1 at 2013-02-12 17:59:03 +0530
  Processing by InvitationsController#new as HTML
  Parameters: {"locale"=>"en", "person_id"=>"bTFw-gDdur4Oaa3a6HdQnY"}
  [1m[35mPK and serial sequence (6.4ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (1.6ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (1.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.3ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.7ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (1.9ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.3ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.4ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (0.9ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'bTFw-gDdur4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  BEGIN
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bHZoLm1l
', NULL, '2013-02-12 12:29:04.153974', NULL, NULL, NULL, '2013-02-12 12:29:04.154081', '2013-02-12 12:29:04.154081', NULL) RETURNING "id"[0m
  [1m[35mSQL (34.0ms)[0m  COMMIT
  [1m[36mSQL (1.3ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.0ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"invitations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
Rendered layouts/_kissmetrics.haml (3.3ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.7ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (1.9ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (9.8ms)
Rendered communities/default/logo/logo.haml (73.3ms)
Rendered layouts/_no_javascript.haml (88.9ms)
Rendered layouts/_facebook_sdk.haml (2.5ms)
  [1m[35mSQL (0.9ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (0.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (2.9ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (2.3ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (2.5ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (1.8ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.7ms)[0m  [1mSELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'bTFw-gDdur4Oaa3a6HdQnY')) AND participations.person_id = 'bTFw-gDdur4Oaa3a6HdQnY')[0m
Rendered layouts/_logged_in_messages_icon.haml (745.2ms)
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.7ms)[0m  [1mSELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'bTFw-gDdur4Oaa3a6HdQnY')[0m
Rendered layouts/_logged_in_notifications_icon.haml (18.4ms)
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.8ms)[0m  [1mSELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'bTFw-gDdur4Oaa3a6HdQnY') AND (acceptance is null)[0m
Rendered layouts/_logged_in_swap_offers_icon.haml (10.8ms)
  [1m[35mCommunityMembership Load (1.0ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."community_id" = 1 AND ("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY') LIMIT 1
Rendered layouts/_logged_in.haml (792.1ms)
Rendered layouts/_notifications.haml (4.6ms)
  [1m[36mLocation Load (1.1ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'bTFw-gDdur4Oaa3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
Rendered layouts/_display_popup.haml (10.2ms)
Rendered invitations/new.html.haml within layouts/application (983.4ms)
Completed 200 OK in 1626ms (Views: 963.6ms | ActiveRecord: 100.7ms | Sphinx: 0.0ms)


Started GET "/en/people/bTFw-gDdur4Oaa3a6HdQnY/invitations/new" for 127.0.0.1 at 2013-02-12 17:59:24 +0530
  Processing by InvitationsController#new as HTML
  Parameters: {"locale"=>"en", "person_id"=>"bTFw-gDdur4Oaa3a6HdQnY"}
  [1m[35mPK and serial sequence (6.3ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (3.5ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.4ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.5ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (3.5ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (1.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (0.6ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.5ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mSQL (2.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (0.8ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'bTFw-gDdur4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  BEGIN
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bHZoLm1l
', NULL, '2013-02-12 12:29:25.206992', NULL, NULL, NULL, '2013-02-12 12:29:25.207105', '2013-02-12 12:29:25.207105', NULL) RETURNING "id"[0m
  [1m[35mSQL (35.6ms)[0m  COMMIT
  [1m[36mSQL (1.9ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (0.5ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mSQL (1.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"invitations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
Rendered layouts/_kissmetrics.haml (5.2ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (3.1ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.2ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (10.2ms)
Rendered communities/default/logo/logo.haml (2.3ms)
Rendered layouts/_no_javascript.haml (15.8ms)
Rendered layouts/_facebook_sdk.haml (2.4ms)
  [1m[35mSQL (2.1ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (3.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (7.3ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (3.6ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (6.5ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (3.4ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.8ms)[0m  [1mSELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'bTFw-gDdur4Oaa3a6HdQnY')) AND participations.person_id = 'bTFw-gDdur4Oaa3a6HdQnY')[0m
Rendered layouts/_logged_in_messages_icon.haml (733.3ms)
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'bTFw-gDdur4Oaa3a6HdQnY')[0m
Rendered layouts/_logged_in_notifications_icon.haml (13.8ms)
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'bTFw-gDdur4Oaa3a6HdQnY') AND (acceptance is null)[0m
Rendered layouts/_logged_in_swap_offers_icon.haml (13.5ms)
  [1m[35mCommunityMembership Load (1.0ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."community_id" = 1 AND ("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY') LIMIT 1
Rendered layouts/_logged_in.haml (843.7ms)
Rendered layouts/_notifications.haml (7.2ms)
  [1m[36mLocation Load (1.1ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'bTFw-gDdur4Oaa3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
Rendered layouts/_display_popup.haml (13.4ms)
Rendered invitations/new.html.haml within layouts/application (984.7ms)
Completed 200 OK in 1640ms (Views: 952.5ms | ActiveRecord: 120.2ms | Sphinx: 0.0ms)


Started GET "/en/homepage" for 127.0.0.1 at 2013-02-12 18:00:33 +0530
  Processing by HomepageController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[35mPK and serial sequence (7.6ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (3.7ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (3.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.9ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (3.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (5.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (2.2ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.5ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.1ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (0.6ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'bTFw-gDdur4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  BEGIN
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bHZoLm1l
', NULL, '2013-02-12 12:30:34.096324', NULL, NULL, NULL, '2013-02-12 12:30:34.096435', '2013-02-12 12:30:34.096435', NULL) RETURNING "id"[0m
  [1m[35mSQL (34.3ms)[0m  COMMIT
  [1m[36mSQL (0.8ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (0.6ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mSQL (0.9ms)[0m  [1mSELECT 1 FROM "people" INNER JOIN "community_memberships" ON "people".id = "community_memberships".person_id WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' AND (("community_memberships".community_id = 1)) LIMIT 1[0m
  [1m[35mSQL (1.9ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (2.4ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (1.3ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (2.3ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (1.8ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.6ms)[0m  SELECT "communities".* FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY'))
~~~~~~~~~~~~~~~not request.xhr~~~~~~~~~
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"news_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.8ms)[0m  SELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 1)
  [1m[36mCommunity Load (1.0ms)[0m  [1mSELECT "communities".* FROM "communities"[0m
  [1m[35mSQL (1.0ms)[0m  SELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 1) LIMIT 2
  [1m[36mSQL (2.4ms)[0m  [1mSELECT COUNT(*) FROM "listings" WHERE "listings"."listing_type" = 'offer' AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')
 ) AND (open = '1' AND (valid_until IS NULL OR valid_until > '2013-02-12 12:30:34'))[0m
  [1m[35mListing Load (3.0ms)[0m  SELECT "listings".* FROM "listings" WHERE "listings"."listing_type" = 'offer' AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')
 ) AND (open = '1' AND (valid_until IS NULL OR valid_until > '2013-02-12 12:30:34')) ORDER BY listings.created_at DESC LIMIT 3 OFFSET 0
  [1m[36mListingImage Load (1.3ms)[0m  [1mSELECT "listing_images".* FROM "listing_images" WHERE ("listing_images".listing_id IN (4,3,1))[0m
  [1m[35mPerson Load (1.5ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"diet_listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 4)
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"comments"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 4)
  [1m[36mPerson Load (1.5ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bmEhbODeyr4Oap3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 3)
  [1m[36mSQL (1.1ms)[0m  [1mSELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 3)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 1)[0m
  [1m[35mSQL (1.2ms)[0m  SELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 1)
Rendered homepage/_recent_listing.haml (53.3ms)
Rendered common/_staples.haml (3.1ms)
  [1m[36mCommunityMembership Load (1.1ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'bTFw-gDdur4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
Rendered homepage/_user_communities.haml (8.6ms)
Rendered common/_staples.haml (3.2ms)
  [1m[35mLocation Load (1.2ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'bTFw-gDdur4Oaa3a6HdQnY' AND (location_type = 'person')) LIMIT 1
Rendered common/_staples.haml (3.0ms)
Rendered homepage/_profile_info_empty_notification.haml (5.0ms)
Rendered common/_staples.haml (3.2ms)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"event_feed_events"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.7ms)[0m  SELECT COUNT(*) FROM "event_feed_events" WHERE ("event_feed_events".community_id = 1)
Rendered common/_staples.haml (3.2ms)
  [1m[36mEventFeedEvent Load (1.2ms)[0m  [1mSELECT "event_feed_events".* FROM "event_feed_events" WHERE ("event_feed_events".community_id = 1) ORDER BY id DESC LIMIT 5[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1
Rendered event_feed_events/_login.haml (5.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bmEhbODeyr4Oap3a6HdQnY' LIMIT 1[0m
Rendered event_feed_events/_login.haml (4.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bmEhbODeyr4Oap3a6HdQnY' LIMIT 1
Rendered event_feed_events/_login.haml (5.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1[0m
Rendered event_feed_events/_login.haml (5.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bmEhbODeyr4Oap3a6HdQnY' LIMIT 1
Rendered event_feed_events/_login.haml (4.1ms)
Rendered homepage/_event_feed_event.haml (111.4ms)
Rendered homepage/_event_feed.haml (117.5ms)
Rendered common/_staples.haml (2.3ms)
Rendered common/_staples.haml (2.5ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 1) LIMIT 2[0m
Rendered homepage/_news_items.haml (5.6ms)
Rendered common/_staples.haml (2.2ms)
  [1m[35mSQL (1.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"polls"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPoll Load (0.7ms)[0m  [1mSELECT "polls".* FROM "polls" WHERE "polls"."active" = 't' AND ("polls".community_id = 1) LIMIT 1[0m
Rendered layouts/_kissmetrics.haml (3.1ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.7ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.0ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (10.3ms)
Rendered communities/default/logo/logo.haml (2.3ms)
Rendered layouts/_no_javascript.haml (17.2ms)
Rendered layouts/_facebook_sdk.haml (2.3ms)
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.9ms)[0m  SELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'bTFw-gDdur4Oaa3a6HdQnY')) AND participations.person_id = 'bTFw-gDdur4Oaa3a6HdQnY')
Rendered layouts/_logged_in_messages_icon.haml (93.1ms)
  [1m[36mSQL (1.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'bTFw-gDdur4Oaa3a6HdQnY')
Rendered layouts/_logged_in_notifications_icon.haml (10.7ms)
  [1m[36mSQL (1.6ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'bTFw-gDdur4Oaa3a6HdQnY') AND (acceptance is null)
Rendered layouts/_logged_in_swap_offers_icon.haml (10.5ms)
  [1m[36mCommunityMembership Load (1.1ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."community_id" = 1 AND ("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY') LIMIT 1[0m
Rendered layouts/_logged_in.haml (129.2ms)
Rendered layouts/_notifications.haml (4.9ms)
Rendered layouts/_display_popup.haml (7.5ms)
Rendered homepage/index.haml within layouts/application (603.7ms)
Completed 200 OK in 1834ms (Views: 567.5ms | ActiveRecord: 137.8ms | Sphinx: 0.0ms)


Started GET "/en/people/bTFw-gDdur4Oaa3a6HdQnY/invitations/new?compliment=true" for 127.0.0.1 at 2013-02-12 18:00:38 +0530
  Processing by InvitationsController#new as HTML
  Parameters: {"compliment"=>"true", "locale"=>"en", "person_id"=>"bTFw-gDdur4Oaa3a6HdQnY"}
  [1m[35mPK and serial sequence (6.4ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.2ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.7ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.3ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (3.6ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (1.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (0.9ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (2.0ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mSQL (2.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (0.7ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'bTFw-gDdur4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  BEGIN
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bHZoLm1l
', NULL, '2013-02-12 12:30:39.665313', NULL, NULL, NULL, '2013-02-12 12:30:39.665424', '2013-02-12 12:30:39.665424', NULL) RETURNING "id"[0m
  [1m[35mSQL (20.9ms)[0m  COMMIT
  [1m[36mSQL (1.8ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.0ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"invitations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
Rendered layouts/_kissmetrics.haml (3.3ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (2.8ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.9ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (11.7ms)
Rendered communities/default/logo/logo.haml (2.2ms)
Rendered layouts/_no_javascript.haml (16.5ms)
Rendered layouts/_facebook_sdk.haml (3.9ms)
  [1m[35mSQL (1.9ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (2.5ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (1.5ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (2.5ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (1.5ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.8ms)[0m  [1mSELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'bTFw-gDdur4Oaa3a6HdQnY')) AND participations.person_id = 'bTFw-gDdur4Oaa3a6HdQnY')[0m
Rendered layouts/_logged_in_messages_icon.haml (754.5ms)
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.7ms)[0m  [1mSELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'bTFw-gDdur4Oaa3a6HdQnY')[0m
Rendered layouts/_logged_in_notifications_icon.haml (15.9ms)
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.5ms)[0m  [1mSELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'bTFw-gDdur4Oaa3a6HdQnY') AND (acceptance is null)[0m
Rendered layouts/_logged_in_swap_offers_icon.haml (77.1ms)
  [1m[35mCommunityMembership Load (0.6ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."community_id" = 1 AND ("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY') LIMIT 1
Rendered layouts/_logged_in.haml (867.9ms)
Rendered layouts/_notifications.haml (5.1ms)
  [1m[36mLocation Load (0.5ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'bTFw-gDdur4Oaa3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
Rendered layouts/_display_popup.haml (10.5ms)
Rendered invitations/new.html.haml within layouts/application (1080.9ms)
Completed 200 OK in 1703ms (Views: 1062.0ms | ActiveRecord: 90.7ms | Sphinx: 0.0ms)


Started GET "/en/people/bTFw-gDdur4Oaa3a6HdQnY/invitations/new?compliment=true" for 127.0.0.1 at 2013-02-12 18:05:42 +0530
  Processing by InvitationsController#new as HTML
  Parameters: {"compliment"=>"true", "locale"=>"en", "person_id"=>"bTFw-gDdur4Oaa3a6HdQnY"}
  [1m[35mPK and serial sequence (6.7ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (3.7ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.5ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (3.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.3ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.2ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (3.6ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (0.9ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.9ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (0.7ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'bTFw-gDdur4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bHZoLm1l
', NULL, '2013-02-12 12:35:42.718141', NULL, NULL, NULL, '2013-02-12 12:35:42.718253', '2013-02-12 12:35:42.718253', NULL) RETURNING "id"[0m
  [1m[35mSQL (35.4ms)[0m  COMMIT
  [1m[36mSQL (1.6ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.0ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mSQL (1.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"invitations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
Rendered layouts/_kissmetrics.haml (4.1ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.6ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.2ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (79.3ms)
Rendered communities/default/logo/logo.haml (2.7ms)
Rendered layouts/_no_javascript.haml (17.7ms)
Rendered layouts/_facebook_sdk.haml (2.4ms)
  [1m[35mSQL (2.1ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.3ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (3.4ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (5.8ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (1.4ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.7ms)[0m  [1mSELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'bTFw-gDdur4Oaa3a6HdQnY')) AND participations.person_id = 'bTFw-gDdur4Oaa3a6HdQnY')[0m
Rendered layouts/_logged_in_messages_icon.haml (730.7ms)
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'bTFw-gDdur4Oaa3a6HdQnY')[0m
Rendered layouts/_logged_in_notifications_icon.haml (14.5ms)
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.2ms)[0m  [1mSELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'bTFw-gDdur4Oaa3a6HdQnY') AND (acceptance is null)[0m
Rendered layouts/_logged_in_swap_offers_icon.haml (14.8ms)
  [1m[35mCommunityMembership Load (1.0ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."community_id" = 1 AND ("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY') LIMIT 1
Rendered layouts/_logged_in.haml (778.8ms)
Rendered layouts/_notifications.haml (6.2ms)
  [1m[36mLocation Load (1.1ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'bTFw-gDdur4Oaa3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
Rendered layouts/_display_popup.haml (75.6ms)
Rendered invitations/new.html.haml within layouts/application (1055.0ms)
Completed 200 OK in 1710ms (Views: 1026.1ms | ActiveRecord: 119.4ms | Sphinx: 0.0ms)


Started GET "/en/people/bTFw-gDdur4Oaa3a6HdQnY/invitations/new?compliment=true" for 127.0.0.1 at 2013-02-12 18:12:34 +0530
  Processing by InvitationsController#new as HTML
  Parameters: {"compliment"=>"true", "locale"=>"en", "person_id"=>"bTFw-gDdur4Oaa3a6HdQnY"}
  [1m[35mPK and serial sequence (6.4ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (3.7ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (3.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.9ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (2.4ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (1.4ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.7ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.5ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (1.1ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'bTFw-gDdur4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  BEGIN
  [1m[36mSQL (1.3ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bHZoLm1l
', NULL, '2013-02-12 12:42:35.000965', NULL, NULL, NULL, '2013-02-12 12:42:35.001081', '2013-02-12 12:42:35.001081', NULL) RETURNING "id"[0m
  [1m[35mSQL (25.7ms)[0m  COMMIT
  [1m[36mSQL (1.4ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.1ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"invitations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
Rendered layouts/_kissmetrics.haml (3.0ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.7ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.2ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (11.1ms)
Rendered communities/default/logo/logo.haml (2.3ms)
Rendered layouts/_no_javascript.haml (16.5ms)
Rendered layouts/_facebook_sdk.haml (2.6ms)
  [1m[35mSQL (2.0ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (2.4ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (2.8ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (3.0ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (2.5ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (0.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.7ms)[0m  [1mSELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'bTFw-gDdur4Oaa3a6HdQnY')) AND participations.person_id = 'bTFw-gDdur4Oaa3a6HdQnY')[0m
Rendered layouts/_logged_in_messages_icon.haml (746.7ms)
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'bTFw-gDdur4Oaa3a6HdQnY')[0m
Rendered layouts/_logged_in_notifications_icon.haml (10.3ms)
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'bTFw-gDdur4Oaa3a6HdQnY') AND (acceptance is null)[0m
Rendered layouts/_logged_in_swap_offers_icon.haml (10.4ms)
  [1m[35mCommunityMembership Load (1.1ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."community_id" = 1 AND ("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY') LIMIT 1
Rendered layouts/_logged_in.haml (782.7ms)
Rendered layouts/_notifications.haml (5.7ms)
  [1m[36mLocation Load (1.1ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'bTFw-gDdur4Oaa3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
Rendered layouts/_display_popup.haml (11.7ms)
Rendered invitations/new.html.haml within layouts/application (979.6ms)
Completed 200 OK in 1636ms (Views: 968.5ms | ActiveRecord: 94.5ms | Sphinx: 0.0ms)


Started GET "/en/homepage" for 127.0.0.1 at 2013-02-12 18:14:26 +0530
  Processing by HomepageController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[35mPK and serial sequence (6.3ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (3.4ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.3ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.3ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (3.5ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.2ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.3ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (0.9ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'bTFw-gDdur4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bHZoLm1l
', NULL, '2013-02-12 12:44:26.790764', NULL, NULL, NULL, '2013-02-12 12:44:26.790909', '2013-02-12 12:44:26.790909', NULL) RETURNING "id"[0m
  [1m[35mSQL (31.6ms)[0m  COMMIT
  [1m[36mSQL (0.6ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (0.5ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mSQL (0.6ms)[0m  [1mSELECT 1 FROM "people" INNER JOIN "community_memberships" ON "people".id = "community_memberships".person_id WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' AND (("community_memberships".community_id = 1)) LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (0.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (5.5ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (2.0ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (6.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (2.2ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.6ms)[0m  SELECT "communities".* FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY'))
~~~~~~~~~~~~~~~not request.xhr~~~~~~~~~
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"news_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 1)
  [1m[36mCommunity Load (1.0ms)[0m  [1mSELECT "communities".* FROM "communities"[0m
  [1m[35mSQL (1.0ms)[0m  SELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 1) LIMIT 2
  [1m[36mSQL (2.3ms)[0m  [1mSELECT COUNT(*) FROM "listings" WHERE "listings"."listing_type" = 'offer' AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')
 ) AND (open = '1' AND (valid_until IS NULL OR valid_until > '2013-02-12 12:44:27'))[0m
  [1m[35mListing Load (3.0ms)[0m  SELECT "listings".* FROM "listings" WHERE "listings"."listing_type" = 'offer' AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')
 ) AND (open = '1' AND (valid_until IS NULL OR valid_until > '2013-02-12 12:44:27')) ORDER BY listings.created_at DESC LIMIT 3 OFFSET 0
  [1m[36mListingImage Load (1.2ms)[0m  [1mSELECT "listing_images".* FROM "listing_images" WHERE ("listing_images".listing_id IN (4,3,1))[0m
  [1m[35mPerson Load (0.7ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"diet_listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.4ms)[0m  SELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 4)
  [1m[36mSQL (0.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"comments"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.5ms)[0m  SELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 4)
  [1m[36mPerson Load (0.7ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bmEhbODeyr4Oap3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  SELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 3)
  [1m[36mSQL (0.6ms)[0m  [1mSELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 3)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mSELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 1)[0m
  [1m[35mSQL (0.6ms)[0m  SELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 1)
Rendered homepage/_recent_listing.haml (52.2ms)
Rendered common/_staples.haml (2.2ms)
  [1m[36mCommunityMembership Load (1.1ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'bTFw-gDdur4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
Rendered homepage/_user_communities.haml (7.1ms)
Rendered common/_staples.haml (2.2ms)
  [1m[35mLocation Load (1.1ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'bTFw-gDdur4Oaa3a6HdQnY' AND (location_type = 'person')) LIMIT 1
Rendered common/_staples.haml (2.1ms)
Rendered homepage/_profile_info_empty_notification.haml (3.3ms)
Rendered common/_staples.haml (2.0ms)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"event_feed_events"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "event_feed_events" WHERE ("event_feed_events".community_id = 1)
Rendered common/_staples.haml (2.1ms)
  [1m[36mEventFeedEvent Load (1.4ms)[0m  [1mSELECT "event_feed_events".* FROM "event_feed_events" WHERE ("event_feed_events".community_id = 1) ORDER BY id DESC LIMIT 5[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1
Rendered event_feed_events/_login.haml (4.6ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bmEhbODeyr4Oap3a6HdQnY' LIMIT 1[0m
Rendered event_feed_events/_login.haml (71.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bmEhbODeyr4Oap3a6HdQnY' LIMIT 1
Rendered event_feed_events/_login.haml (4.2ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1[0m
Rendered event_feed_events/_login.haml (4.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bmEhbODeyr4Oap3a6HdQnY' LIMIT 1
Rendered event_feed_events/_login.haml (4.0ms)
Rendered homepage/_event_feed_event.haml (108.9ms)
Rendered homepage/_event_feed.haml (114.9ms)
Rendered common/_staples.haml (2.2ms)
Rendered common/_staples.haml (2.2ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 1) LIMIT 2[0m
Rendered homepage/_news_items.haml (6.1ms)
Rendered common/_staples.haml (3.0ms)
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"polls"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPoll Load (1.0ms)[0m  [1mSELECT "polls".* FROM "polls" WHERE "polls"."active" = 't' AND ("polls".community_id = 1) LIMIT 1[0m
Rendered layouts/_kissmetrics.haml (3.0ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.5ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.0ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (9.9ms)
Rendered communities/default/logo/logo.haml (2.2ms)
Rendered layouts/_no_javascript.haml (15.8ms)
Rendered layouts/_facebook_sdk.haml (2.4ms)
  [1m[35mSQL (1.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.7ms)[0m  SELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'bTFw-gDdur4Oaa3a6HdQnY')) AND participations.person_id = 'bTFw-gDdur4Oaa3a6HdQnY')
Rendered layouts/_logged_in_messages_icon.haml (15.1ms)
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.0ms)[0m  SELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'bTFw-gDdur4Oaa3a6HdQnY')
Rendered layouts/_logged_in_notifications_icon.haml (83.9ms)
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'bTFw-gDdur4Oaa3a6HdQnY') AND (acceptance is null)
Rendered layouts/_logged_in_swap_offers_icon.haml (12.2ms)
  [1m[36mCommunityMembership Load (1.1ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."community_id" = 1 AND ("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY') LIMIT 1[0m
Rendered layouts/_logged_in.haml (126.3ms)
Rendered layouts/_notifications.haml (6.9ms)
Rendered layouts/_display_popup.haml (7.3ms)
Rendered homepage/index.haml within layouts/application (584.6ms)
Completed 200 OK in 1800ms (Views: 552.6ms | ActiveRecord: 134.6ms | Sphinx: 0.0ms)


Started GET "/en/people/bTFw-gDdur4Oaa3a6HdQnY/invitations/new?compliment=true" for 127.0.0.1 at 2013-02-12 18:15:07 +0530
  Processing by InvitationsController#new as HTML
  Parameters: {"compliment"=>"true", "locale"=>"en", "person_id"=>"bTFw-gDdur4Oaa3a6HdQnY"}
  [1m[35mPK and serial sequence (2.5ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.4ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (3.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.5ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.4ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (3.6ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (3.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (4.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.5ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.6ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (1.1ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'bTFw-gDdur4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  BEGIN
  [1m[36mSQL (1.3ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bHZoLm1l
', NULL, '2013-02-12 12:45:08.481073', NULL, NULL, NULL, '2013-02-12 12:45:08.481223', '2013-02-12 12:45:08.481223', NULL) RETURNING "id"[0m
  [1m[35mSQL (28.7ms)[0m  COMMIT
  [1m[36mSQL (1.6ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (0.8ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"invitations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
Rendered layouts/_kissmetrics.haml (71.3ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.8ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.2ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (10.6ms)
Rendered communities/default/logo/logo.haml (2.2ms)
Rendered layouts/_no_javascript.haml (16.1ms)
Rendered layouts/_facebook_sdk.haml (2.5ms)
  [1m[35mSQL (2.6ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (2.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.7ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (3.9ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (4.5ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (3.6ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.8ms)[0m  [1mSELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'bTFw-gDdur4Oaa3a6HdQnY')) AND participations.person_id = 'bTFw-gDdur4Oaa3a6HdQnY')[0m
Rendered layouts/_logged_in_messages_icon.haml (750.9ms)
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'bTFw-gDdur4Oaa3a6HdQnY')[0m
Rendered layouts/_logged_in_notifications_icon.haml (12.2ms)
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.8ms)[0m  [1mSELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'bTFw-gDdur4Oaa3a6HdQnY') AND (acceptance is null)[0m
Rendered layouts/_logged_in_swap_offers_icon.haml (14.0ms)
  [1m[35mCommunityMembership Load (1.1ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."community_id" = 1 AND ("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY') LIMIT 1
Rendered layouts/_logged_in.haml (793.8ms)
Rendered layouts/_notifications.haml (4.9ms)
  [1m[36mLocation Load (1.1ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'bTFw-gDdur4Oaa3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
Rendered layouts/_display_popup.haml (10.7ms)
Rendered invitations/new.html.haml within layouts/application (1054.6ms)
Completed 200 OK in 1701ms (Views: 1021.3ms | ActiveRecord: 114.6ms | Sphinx: 0.0ms)


Started GET "/en/people/bTFw-gDdur4Oaa3a6HdQnY/invitations/new" for 127.0.0.1 at 2013-02-12 18:15:15 +0530
  Processing by InvitationsController#new as HTML
  Parameters: {"locale"=>"en", "person_id"=>"bTFw-gDdur4Oaa3a6HdQnY"}
  [1m[35mPK and serial sequence (6.4ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (3.4ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (1.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.1ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (1.5ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (1.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (3.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.6ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.5ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (0.9ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'bTFw-gDdur4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  BEGIN
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bHZoLm1l
', NULL, '2013-02-12 12:45:16.062035', NULL, NULL, NULL, '2013-02-12 12:45:16.062158', '2013-02-12 12:45:16.062158', NULL) RETURNING "id"[0m
  [1m[35mSQL (36.8ms)[0m  COMMIT
  [1m[36mSQL (1.8ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.3ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mSQL (2.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"invitations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
Rendered layouts/_kissmetrics.haml (3.2ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.6ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.0ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (10.0ms)
Rendered communities/default/logo/logo.haml (2.3ms)
Rendered layouts/_no_javascript.haml (20.6ms)
Rendered layouts/_facebook_sdk.haml (2.4ms)
  [1m[35mSQL (2.0ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (1.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (3.1ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (2.1ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (2.8ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (1.7ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.8ms)[0m  [1mSELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'bTFw-gDdur4Oaa3a6HdQnY')) AND participations.person_id = 'bTFw-gDdur4Oaa3a6HdQnY')[0m
Rendered layouts/_logged_in_messages_icon.haml (757.2ms)
  [1m[35mSQL (3.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.1ms)[0m  [1mSELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'bTFw-gDdur4Oaa3a6HdQnY')[0m
Rendered layouts/_logged_in_notifications_icon.haml (16.7ms)
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.6ms)[0m  [1mSELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'bTFw-gDdur4Oaa3a6HdQnY') AND (acceptance is null)[0m
Rendered layouts/_logged_in_swap_offers_icon.haml (14.3ms)
  [1m[35mCommunityMembership Load (1.0ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."community_id" = 1 AND ("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY') LIMIT 1
Rendered layouts/_logged_in.haml (807.4ms)
Rendered layouts/_notifications.haml (4.7ms)
  [1m[36mLocation Load (1.1ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'bTFw-gDdur4Oaa3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
Rendered layouts/_display_popup.haml (9.9ms)
Rendered invitations/new.html.haml within layouts/application (1011.0ms)
Completed 200 OK in 1700ms (Views: 997.5ms | ActiveRecord: 108.6ms | Sphinx: 0.0ms)


Started GET "/en/homepage" for 127.0.0.1 at 2013-02-12 18:16:53 +0530
  Processing by HomepageController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[35mPK and serial sequence (8.4ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (2.8ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (1.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (0.5ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (2.5ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (1.3ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (1.6ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (0.6ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (0.4ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'bTFw-gDdur4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  BEGIN
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bHZoLm1l
', NULL, '2013-02-12 12:46:54.118921', NULL, NULL, NULL, '2013-02-12 12:46:54.119030', '2013-02-12 12:46:54.119030', NULL) RETURNING "id"[0m
  [1m[35mSQL (20.5ms)[0m  COMMIT
  [1m[36mSQL (1.4ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.0ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mSQL (0.9ms)[0m  [1mSELECT 1 FROM "people" INNER JOIN "community_memberships" ON "people".id = "community_memberships".person_id WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' AND (("community_memberships".community_id = 1)) LIMIT 1[0m
  [1m[35mSQL (1.9ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.0ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (3.7ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (8.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.5ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (0.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.1ms)[0m  SELECT "communities".* FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY'))
~~~~~~~~~~~~~~~not request.xhr~~~~~~~~~
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"news_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.5ms)[0m  SELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 1)
  [1m[36mCommunity Load (1.3ms)[0m  [1mSELECT "communities".* FROM "communities"[0m
  [1m[35mSQL (1.0ms)[0m  SELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 1) LIMIT 2
  [1m[36mSQL (2.4ms)[0m  [1mSELECT COUNT(*) FROM "listings" WHERE "listings"."listing_type" = 'offer' AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')
 ) AND (open = '1' AND (valid_until IS NULL OR valid_until > '2013-02-12 12:46:54'))[0m
  [1m[35mListing Load (3.0ms)[0m  SELECT "listings".* FROM "listings" WHERE "listings"."listing_type" = 'offer' AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')
 ) AND (open = '1' AND (valid_until IS NULL OR valid_until > '2013-02-12 12:46:54')) ORDER BY listings.created_at DESC LIMIT 3 OFFSET 0
  [1m[36mListingImage Load (1.1ms)[0m  [1mSELECT "listing_images".* FROM "listing_images" WHERE ("listing_images".listing_id IN (4,3,1))[0m
  [1m[35mPerson Load (0.8ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (1.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"diet_listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.5ms)[0m  SELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 4)
  [1m[36mSQL (1.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"comments"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.5ms)[0m  SELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 4)
  [1m[36mPerson Load (1.6ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bmEhbODeyr4Oap3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 3)
  [1m[36mSQL (0.8ms)[0m  [1mSELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 3)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (1.0ms)[0m  [1mSELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 1)[0m
  [1m[35mSQL (0.8ms)[0m  SELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 1)
Rendered homepage/_recent_listing.haml (51.0ms)
Rendered common/_staples.haml (2.3ms)
  [1m[36mCommunityMembership Load (1.1ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'bTFw-gDdur4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
Rendered homepage/_user_communities.haml (6.8ms)
Rendered common/_staples.haml (2.2ms)
  [1m[35mLocation Load (1.1ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'bTFw-gDdur4Oaa3a6HdQnY' AND (location_type = 'person')) LIMIT 1
Rendered common/_staples.haml (2.2ms)
Rendered homepage/_profile_info_empty_notification.haml (3.4ms)
Rendered common/_staples.haml (2.1ms)
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"event_feed_events"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "event_feed_events" WHERE ("event_feed_events".community_id = 1)
Rendered common/_staples.haml (2.7ms)
  [1m[36mEventFeedEvent Load (1.6ms)[0m  [1mSELECT "event_feed_events".* FROM "event_feed_events" WHERE ("event_feed_events".community_id = 1) ORDER BY id DESC LIMIT 5[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1
Rendered event_feed_events/_login.haml (4.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bmEhbODeyr4Oap3a6HdQnY' LIMIT 1[0m
Rendered event_feed_events/_login.haml (3.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bmEhbODeyr4Oap3a6HdQnY' LIMIT 1
Rendered event_feed_events/_login.haml (3.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1[0m
Rendered event_feed_events/_login.haml (75.5ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bmEhbODeyr4Oap3a6HdQnY' LIMIT 1
Rendered event_feed_events/_login.haml (5.7ms)
Rendered homepage/_event_feed_event.haml (113.8ms)
Rendered homepage/_event_feed.haml (120.8ms)
Rendered common/_staples.haml (2.5ms)
Rendered common/_staples.haml (2.2ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 1) LIMIT 2[0m
Rendered homepage/_news_items.haml (5.5ms)
Rendered common/_staples.haml (2.3ms)
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"polls"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPoll Load (1.0ms)[0m  [1mSELECT "polls".* FROM "polls" WHERE "polls"."active" = 't' AND ("polls".community_id = 1) LIMIT 1[0m
Rendered layouts/_kissmetrics.haml (3.3ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.7ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.1ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (10.3ms)
Rendered communities/default/logo/logo.haml (2.1ms)
Rendered layouts/_no_javascript.haml (15.4ms)
Rendered layouts/_facebook_sdk.haml (2.9ms)
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.8ms)[0m  SELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'bTFw-gDdur4Oaa3a6HdQnY')) AND participations.person_id = 'bTFw-gDdur4Oaa3a6HdQnY')
Rendered layouts/_logged_in_messages_icon.haml (15.2ms)
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'bTFw-gDdur4Oaa3a6HdQnY')
Rendered layouts/_logged_in_notifications_icon.haml (10.2ms)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.4ms)[0m  SELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'bTFw-gDdur4Oaa3a6HdQnY') AND (acceptance is null)
Rendered layouts/_logged_in_swap_offers_icon.haml (86.8ms)
  [1m[36mCommunityMembership Load (1.1ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."community_id" = 1 AND ("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY') LIMIT 1[0m
Rendered layouts/_logged_in.haml (126.6ms)
Rendered layouts/_notifications.haml (5.0ms)
Rendered layouts/_display_popup.haml (7.4ms)
Rendered homepage/index.haml within layouts/application (586.5ms)
Completed 200 OK in 1886ms (Views: 550.5ms | ActiveRecord: 122.7ms | Sphinx: 0.0ms)


Started GET "/en/people/bTFw-gDdur4Oaa3a6HdQnY/invitations/new" for 127.0.0.1 at 2013-02-12 18:17:03 +0530
  Processing by InvitationsController#new as HTML
  Parameters: {"locale"=>"en", "person_id"=>"bTFw-gDdur4Oaa3a6HdQnY"}
  [1m[35mPK and serial sequence (3.9ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (2.5ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.9ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (5.5ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (2.6ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (1.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.3ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (0.5ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'bTFw-gDdur4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bHZoLm1l
', NULL, '2013-02-12 12:47:03.909386', NULL, NULL, NULL, '2013-02-12 12:47:03.909497', '2013-02-12 12:47:03.909497', NULL) RETURNING "id"[0m
  [1m[35mSQL (108.6ms)[0m  COMMIT
  [1m[36mSQL (0.8ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (0.5ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mSQL (1.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"invitations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
Rendered layouts/_kissmetrics.haml (3.0ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.6ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (3.3ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (16.0ms)
Rendered communities/default/logo/logo.haml (2.3ms)
Rendered layouts/_no_javascript.haml (16.3ms)
Rendered layouts/_facebook_sdk.haml (2.4ms)
  [1m[35mSQL (1.8ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (5.9ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (3.3ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (3.8ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.8ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.2ms)[0m  [1mSELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'bTFw-gDdur4Oaa3a6HdQnY')) AND participations.person_id = 'bTFw-gDdur4Oaa3a6HdQnY')[0m
Rendered layouts/_logged_in_messages_icon.haml (801.6ms)
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'bTFw-gDdur4Oaa3a6HdQnY')[0m
Rendered layouts/_logged_in_notifications_icon.haml (10.5ms)
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.0ms)[0m  [1mSELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'bTFw-gDdur4Oaa3a6HdQnY') AND (acceptance is null)[0m
Rendered layouts/_logged_in_swap_offers_icon.haml (10.5ms)
  [1m[35mCommunityMembership Load (1.1ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."community_id" = 1 AND ("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY') LIMIT 1
Rendered layouts/_logged_in.haml (837.6ms)
Rendered layouts/_notifications.haml (6.7ms)
  [1m[36mLocation Load (1.4ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'bTFw-gDdur4Oaa3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
Rendered layouts/_display_popup.haml (84.1ms)
Rendered invitations/new.html.haml within layouts/application (1129.7ms)
Completed 200 OK in 1890ms (Views: 1099.1ms | ActiveRecord: 180.0ms | Sphinx: 0.0ms)


Started GET "/en/people/bTFw-gDdur4Oaa3a6HdQnY/invitations/new?complement=true" for 127.0.0.1 at 2013-02-12 18:17:12 +0530
  Processing by InvitationsController#new as HTML
  Parameters: {"complement"=>"true", "locale"=>"en", "person_id"=>"bTFw-gDdur4Oaa3a6HdQnY"}
  [1m[35mPK and serial sequence (6.4ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (3.5ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (1.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (0.6ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (1.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.3ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (3.4ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.1ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (0.6ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'bTFw-gDdur4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bHZoLm1l
', NULL, '2013-02-12 12:47:13.543332', NULL, NULL, NULL, '2013-02-12 12:47:13.543446', '2013-02-12 12:47:13.543446', NULL) RETURNING "id"[0m
  [1m[35mSQL (63.2ms)[0m  COMMIT
  [1m[36mSQL (1.6ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.1ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mSQL (2.6ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"invitations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
Rendered layouts/_kissmetrics.haml (3.2ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.6ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.0ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (10.1ms)
Rendered communities/default/logo/logo.haml (75.5ms)
Rendered layouts/_no_javascript.haml (89.3ms)
Rendered layouts/_facebook_sdk.haml (2.5ms)
  [1m[35mSQL (2.0ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (3.4ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (6.3ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.3ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'bTFw-gDdur4Oaa3a6HdQnY')) AND participations.person_id = 'bTFw-gDdur4Oaa3a6HdQnY')[0m
Rendered layouts/_logged_in_messages_icon.haml (787.3ms)
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'bTFw-gDdur4Oaa3a6HdQnY')[0m
Rendered layouts/_logged_in_notifications_icon.haml (12.0ms)
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'bTFw-gDdur4Oaa3a6HdQnY') AND (acceptance is null)[0m
Rendered layouts/_logged_in_swap_offers_icon.haml (12.1ms)
  [1m[35mCommunityMembership Load (1.0ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."community_id" = 1 AND ("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY') LIMIT 1
Rendered layouts/_logged_in.haml (827.6ms)
Rendered layouts/_notifications.haml (7.3ms)
  [1m[36mLocation Load (1.1ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'bTFw-gDdur4Oaa3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
Rendered layouts/_display_popup.haml (11.6ms)
Rendered invitations/new.html.haml within layouts/application (1024.9ms)
Completed 200 OK in 1760ms (Views: 993.4ms | ActiveRecord: 140.9ms | Sphinx: 0.0ms)


Started GET "/en/people/bTFw-gDdur4Oaa3a6HdQnY/invitations/new?complement=true" for 127.0.0.1 at 2013-02-12 18:17:14 +0530
  Processing by InvitationsController#new as HTML
  Parameters: {"complement"=>"true", "locale"=>"en", "person_id"=>"bTFw-gDdur4Oaa3a6HdQnY"}
  [1m[35mPK and serial sequence (6.4ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (3.6ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (3.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.7ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (7.4ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (5.4ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (0.7ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (0.4ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'bTFw-gDdur4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  BEGIN
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bHZoLm1l
', NULL, '2013-02-12 12:47:15.528535', NULL, NULL, NULL, '2013-02-12 12:47:15.528647', '2013-02-12 12:47:15.528647', NULL) RETURNING "id"[0m
  [1m[35mSQL (32.5ms)[0m  COMMIT
  [1m[36mSQL (1.4ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (0.9ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"invitations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
Rendered layouts/_kissmetrics.haml (3.1ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.6ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.0ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (10.3ms)
Rendered communities/default/logo/logo.haml (2.2ms)
Rendered layouts/_no_javascript.haml (16.6ms)
Rendered layouts/_facebook_sdk.haml (2.4ms)
  [1m[35mSQL (1.9ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.3ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (3.5ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (6.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (3.4ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.8ms)[0m  [1mSELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'bTFw-gDdur4Oaa3a6HdQnY')) AND participations.person_id = 'bTFw-gDdur4Oaa3a6HdQnY')[0m
Rendered layouts/_logged_in_messages_icon.haml (847.6ms)
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.8ms)[0m  [1mSELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'bTFw-gDdur4Oaa3a6HdQnY')[0m
Rendered layouts/_logged_in_notifications_icon.haml (13.3ms)
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'bTFw-gDdur4Oaa3a6HdQnY') AND (acceptance is null)[0m
Rendered layouts/_logged_in_swap_offers_icon.haml (14.6ms)
  [1m[35mCommunityMembership Load (1.1ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."community_id" = 1 AND ("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY') LIMIT 1
Rendered layouts/_logged_in.haml (892.9ms)
Rendered layouts/_notifications.haml (8.1ms)
  [1m[36mLocation Load (1.1ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'bTFw-gDdur4Oaa3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
Rendered layouts/_display_popup.haml (10.6ms)
Rendered invitations/new.html.haml within layouts/application (1019.5ms)
Completed 200 OK in 1719ms (Views: 987.0ms | ActiveRecord: 116.3ms | Sphinx: 0.0ms)


Started GET "/en/homepage" for 127.0.0.1 at 2013-02-12 18:17:22 +0530
  Processing by HomepageController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[35mPK and serial sequence (6.4ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (2.0ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.3ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.3ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (3.4ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (1.6ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (0.6ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.5ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (0.9ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'bTFw-gDdur4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  BEGIN
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bHZoLm1l
', NULL, '2013-02-12 12:47:22.970491', NULL, NULL, NULL, '2013-02-12 12:47:22.970603', '2013-02-12 12:47:22.970603', NULL) RETURNING "id"[0m
  [1m[35mSQL (34.9ms)[0m  COMMIT
  [1m[36mSQL (1.7ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.3ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mSQL (1.7ms)[0m  [1mSELECT 1 FROM "people" INNER JOIN "community_memberships" ON "people".id = "community_memberships".person_id WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' AND (("community_memberships".community_id = 1)) LIMIT 1[0m
  [1m[35mSQL (2.2ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (2.4ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (2.4ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (3.5ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (1.3ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (2.1ms)[0m  SELECT "communities".* FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY'))
~~~~~~~~~~~~~~~not request.xhr~~~~~~~~~
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"news_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 1)
  [1m[36mCommunity Load (0.8ms)[0m  [1mSELECT "communities".* FROM "communities"[0m
  [1m[35mSQL (1.1ms)[0m  SELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 1) LIMIT 2
  [1m[36mSQL (2.6ms)[0m  [1mSELECT COUNT(*) FROM "listings" WHERE "listings"."listing_type" = 'offer' AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')
 ) AND (open = '1' AND (valid_until IS NULL OR valid_until > '2013-02-12 12:47:23'))[0m
  [1m[35mListing Load (3.6ms)[0m  SELECT "listings".* FROM "listings" WHERE "listings"."listing_type" = 'offer' AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')
 ) AND (open = '1' AND (valid_until IS NULL OR valid_until > '2013-02-12 12:47:23')) ORDER BY listings.created_at DESC LIMIT 3 OFFSET 0
  [1m[36mListingImage Load (0.7ms)[0m  [1mSELECT "listing_images".* FROM "listing_images" WHERE ("listing_images".listing_id IN (4,3,1))[0m
  [1m[35mPerson Load (1.4ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"diet_listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.8ms)[0m  SELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 4)
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"comments"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.8ms)[0m  SELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 4)
  [1m[36mPerson Load (1.5ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bmEhbODeyr4Oap3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 3)
  [1m[36mSQL (0.8ms)[0m  [1mSELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 3)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mSELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 1)[0m
  [1m[35mSQL (0.5ms)[0m  SELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 1)
Rendered homepage/_recent_listing.haml (54.2ms)
Rendered common/_staples.haml (2.1ms)
  [1m[36mCommunityMembership Load (1.1ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'bTFw-gDdur4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
Rendered homepage/_user_communities.haml (6.7ms)
Rendered common/_staples.haml (2.2ms)
  [1m[35mLocation Load (1.1ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'bTFw-gDdur4Oaa3a6HdQnY' AND (location_type = 'person')) LIMIT 1
Rendered common/_staples.haml (2.3ms)
Rendered homepage/_profile_info_empty_notification.haml (8.8ms)
Rendered common/_staples.haml (77.6ms)
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"event_feed_events"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "event_feed_events" WHERE ("event_feed_events".community_id = 1)
Rendered common/_staples.haml (2.3ms)
  [1m[36mEventFeedEvent Load (1.5ms)[0m  [1mSELECT "event_feed_events".* FROM "event_feed_events" WHERE ("event_feed_events".community_id = 1) ORDER BY id DESC LIMIT 5[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1
Rendered event_feed_events/_login.haml (5.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bmEhbODeyr4Oap3a6HdQnY' LIMIT 1[0m
Rendered event_feed_events/_login.haml (4.1ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bmEhbODeyr4Oap3a6HdQnY' LIMIT 1
Rendered event_feed_events/_login.haml (4.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1[0m
Rendered event_feed_events/_login.haml (4.1ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bmEhbODeyr4Oap3a6HdQnY' LIMIT 1
Rendered event_feed_events/_login.haml (4.0ms)
Rendered homepage/_event_feed_event.haml (43.0ms)
Rendered homepage/_event_feed.haml (49.4ms)
Rendered common/_staples.haml (2.2ms)
Rendered common/_staples.haml (2.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 1) LIMIT 2[0m
Rendered homepage/_news_items.haml (5.3ms)
Rendered common/_staples.haml (2.1ms)
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"polls"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPoll Load (1.0ms)[0m  [1mSELECT "polls".* FROM "polls" WHERE "polls"."active" = 't' AND ("polls".community_id = 1) LIMIT 1[0m
Rendered layouts/_kissmetrics.haml (3.0ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.6ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.0ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (10.1ms)
Rendered communities/default/logo/logo.haml (2.3ms)
Rendered layouts/_no_javascript.haml (17.1ms)
Rendered layouts/_facebook_sdk.haml (2.4ms)
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.7ms)[0m  SELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'bTFw-gDdur4Oaa3a6HdQnY')) AND participations.person_id = 'bTFw-gDdur4Oaa3a6HdQnY')
Rendered layouts/_logged_in_messages_icon.haml (16.0ms)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'bTFw-gDdur4Oaa3a6HdQnY')
Rendered layouts/_logged_in_notifications_icon.haml (12.5ms)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'bTFw-gDdur4Oaa3a6HdQnY') AND (acceptance is null)
Rendered layouts/_logged_in_swap_offers_icon.haml (14.4ms)
  [1m[36mCommunityMembership Load (0.8ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."community_id" = 1 AND ("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY') LIMIT 1[0m
Rendered layouts/_logged_in.haml (59.9ms)
Rendered layouts/_notifications.haml (4.7ms)
Rendered layouts/_display_popup.haml (6.9ms)
Rendered homepage/index.haml within layouts/application (542.9ms)
Completed 200 OK in 1857ms (Views: 505.0ms | ActiveRecord: 140.7ms | Sphinx: 0.0ms)


Started GET "/en/homepage" for 127.0.0.1 at 2013-02-12 18:18:15 +0530
  Processing by HomepageController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[35mPK and serial sequence (6.6ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (3.5ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (0.6ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (1.6ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (1.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (0.6ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (0.8ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'bTFw-gDdur4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bHZoLm1l
', NULL, '2013-02-12 12:48:16.737058', NULL, NULL, NULL, '2013-02-12 12:48:16.737213', '2013-02-12 12:48:16.737213', NULL) RETURNING "id"[0m
  [1m[35mSQL (33.7ms)[0m  COMMIT
  [1m[36mSQL (1.6ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.0ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mSQL (1.4ms)[0m  [1mSELECT 1 FROM "people" INNER JOIN "community_memberships" ON "people".id = "community_memberships".person_id WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' AND (("community_memberships".community_id = 1)) LIMIT 1[0m
  [1m[35mSQL (1.9ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (2.6ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (3.4ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (6.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (3.9ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (1.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.6ms)[0m  SELECT "communities".* FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY'))
~~~~~~~~~~~~~~~not request.xhr~~~~~~~~~
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"news_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.8ms)[0m  SELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 1)
  [1m[36mCommunity Load (1.0ms)[0m  [1mSELECT "communities".* FROM "communities"[0m
  [1m[35mSQL (1.0ms)[0m  SELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 1) LIMIT 2
  [1m[36mSQL (2.2ms)[0m  [1mSELECT COUNT(*) FROM "listings" WHERE "listings"."listing_type" = 'offer' AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')
 ) AND (open = '1' AND (valid_until IS NULL OR valid_until > '2013-02-12 12:48:17'))[0m
  [1m[35mListing Load (2.9ms)[0m  SELECT "listings".* FROM "listings" WHERE "listings"."listing_type" = 'offer' AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')
 ) AND (open = '1' AND (valid_until IS NULL OR valid_until > '2013-02-12 12:48:17')) ORDER BY listings.created_at DESC LIMIT 3 OFFSET 0
  [1m[36mListingImage Load (1.0ms)[0m  [1mSELECT "listing_images".* FROM "listing_images" WHERE ("listing_images".listing_id IN (4,3,1))[0m
  [1m[35mPerson Load (1.5ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"diet_listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.8ms)[0m  SELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 4)
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"comments"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.8ms)[0m  SELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 4)
  [1m[36mPerson Load (1.6ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bmEhbODeyr4Oap3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  SELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 3)
  [1m[36mSQL (0.8ms)[0m  [1mSELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 3)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mSELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 1)[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 1)
Rendered homepage/_recent_listing.haml (50.0ms)
Rendered common/_staples.haml (2.7ms)
  [1m[36mCommunityMembership Load (2.2ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'bTFw-gDdur4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
Rendered homepage/_user_communities.haml (84.3ms)
Rendered common/_staples.haml (2.4ms)
  [1m[35mLocation Load (1.1ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'bTFw-gDdur4Oaa3a6HdQnY' AND (location_type = 'person')) LIMIT 1
Rendered common/_staples.haml (2.4ms)
Rendered homepage/_profile_info_empty_notification.haml (3.5ms)
Rendered common/_staples.haml (2.7ms)
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"event_feed_events"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "event_feed_events" WHERE ("event_feed_events".community_id = 1)
Rendered common/_staples.haml (2.4ms)
  [1m[36mEventFeedEvent Load (1.5ms)[0m  [1mSELECT "event_feed_events".* FROM "event_feed_events" WHERE ("event_feed_events".community_id = 1) ORDER BY id DESC LIMIT 5[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1
Rendered event_feed_events/_login.haml (4.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bmEhbODeyr4Oap3a6HdQnY' LIMIT 1[0m
Rendered event_feed_events/_login.haml (4.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bmEhbODeyr4Oap3a6HdQnY' LIMIT 1
Rendered event_feed_events/_login.haml (3.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1[0m
Rendered event_feed_events/_login.haml (3.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bmEhbODeyr4Oap3a6HdQnY' LIMIT 1
Rendered event_feed_events/_login.haml (4.6ms)
Rendered homepage/_event_feed_event.haml (41.1ms)
Rendered homepage/_event_feed.haml (47.9ms)
Rendered common/_staples.haml (2.3ms)
Rendered common/_staples.haml (2.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 1) LIMIT 2[0m
Rendered homepage/_news_items.haml (6.1ms)
Rendered common/_staples.haml (2.2ms)
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"polls"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPoll Load (0.9ms)[0m  [1mSELECT "polls".* FROM "polls" WHERE "polls"."active" = 't' AND ("polls".community_id = 1) LIMIT 1[0m
Rendered layouts/_kissmetrics.haml (3.1ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.8ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.2ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (10.7ms)
Rendered communities/default/logo/logo.haml (2.4ms)
Rendered layouts/_no_javascript.haml (16.5ms)
Rendered layouts/_facebook_sdk.haml (3.3ms)
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.7ms)[0m  SELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'bTFw-gDdur4Oaa3a6HdQnY')) AND participations.person_id = 'bTFw-gDdur4Oaa3a6HdQnY')
Rendered layouts/_logged_in_messages_icon.haml (15.7ms)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'bTFw-gDdur4Oaa3a6HdQnY')
Rendered layouts/_logged_in_notifications_icon.haml (10.5ms)
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.8ms)[0m  SELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'bTFw-gDdur4Oaa3a6HdQnY') AND (acceptance is null)
Rendered layouts/_logged_in_swap_offers_icon.haml (11.3ms)
  [1m[36mCommunityMembership Load (1.0ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."community_id" = 1 AND ("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY') LIMIT 1[0m
Rendered layouts/_logged_in.haml (52.1ms)
Rendered layouts/_notifications.haml (5.8ms)
Rendered layouts/_display_popup.haml (7.2ms)
Rendered homepage/index.haml within layouts/application (528.0ms)
Completed 200 OK in 1843ms (Views: 489.6ms | ActiveRecord: 142.9ms | Sphinx: 0.0ms)
DEPRECATION WARNING: config.action_view.debug_rjs will be removed in 3.1, from 3.1 onwards you will need to install prototype-rails to continue to use RJS templates . (called from <top (required)> at /home/chaitanya/workArea/ST-to-RGF/config/environment.rb:10)
New Relic Agent not running.
  [1m[36mSQL (0.6ms)[0m  [1mSHOW client_min_messages[0m
  [1m[35mSQL (0.4ms)[0m  SET client_min_messages TO 'panic'
  [1m[36mSQL (0.5ms)[0m  [1mSET standard_conforming_strings = on[0m
  [1m[35mSQL (0.4ms)[0m  SET client_min_messages TO 'notice'
  [1m[36mSQL (0.7ms)[0m  [1mSET time zone 'UTC'[0m
  [1m[35mSQL (0.4ms)[0m  SHOW TIME ZONE
  [1m[36mPK and serial sequence (4.9ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (2.2ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
DEPRECATION WARNING: RAILS_ROOT is deprecated. Please use ::Rails.root.to_s. (called from <class:Person> at /home/chaitanya/workArea/ST-to-RGF/app/models/person.rb:134)
Starting the New Relic Agent.
NewRelic Agent Developer Mode enabled.
To view performance information, go to http://localhost:port/newrelic
Installed New Relic Browser Monitoring middleware
  [1m[36mSQL (3.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"delayed_jobs"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mAREL (38.7ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:13:24.990377', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 1 and (locked_at is null or locked_at < '2013-02-12 09:13:24.990377') and (run_at <= '2013-02-12 13:13:24.990377'))
  [1m[36mPK and serial sequence (6.5ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (3.4ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (3.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.4ms)[0m   SELECT tablename
 FROM pg_tables
 WHERE schemaname = ANY (current_schemas(false))
  [1m[36mSQL (1.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.0ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1
  [1m[36mSQL (2.1ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.4ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (3.4ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (6.1ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (3.4ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mListing Load (2.4ms)[0m  [1mSELECT "listings".* FROM "listings" WHERE "listings"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (2.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (2.9ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.1ms)[0m  [1mSELECT COUNT(*) FROM "listings" WHERE ("listings".author_id = 'bTFw-gDdur4Oaa3a6HdQnY')[0m
  [1m[35mSQL (1.2ms)[0m  SELECT COUNT(*) FROM "listings" WHERE ("listings".author_id = 'bTFw-gDdur4Oaa3a6HdQnY') AND (open = '1' AND (valid_until IS NULL OR valid_until > '2013-02-12 13:13:25'))
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mListing Load (1.8ms)[0m  SELECT "listings".* FROM "listings" WHERE ("listings".author_id = 'bTFw-gDdur4Oaa3a6HdQnY' AND ("listings"."listing_type" = 'offer')) AND (open = '1' AND (valid_until IS NULL OR valid_until > '2013-02-12 13:13:25')) ORDER BY id DESC
  [1m[36mListing Load (1.2ms)[0m  [1mSELECT "listings".* FROM "listings" WHERE ("listings".author_id = 'bTFw-gDdur4Oaa3a6HdQnY' AND ("listings"."listing_type" = 'offer')) ORDER BY id DESC[0m
  [1m[35mSQL (0.4ms)[0m  BEGIN
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"delayed_jobs"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mAREL (1.2ms)[0m  DELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 1
  [1m[36mSQL (37.9ms)[0m  [1mCOMMIT[0m
  [1m[35mAREL (58.0ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:13:26.114254', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 2 and (locked_at is null or locked_at < '2013-02-12 09:13:26.114254') and (run_at <= '2013-02-12 13:13:26.114254'))
  [1m[36mCommunity Load (1.5ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1[0m
  [1m[35mPerson Load (1.4ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bmEhbODeyr4Oap3a6HdQnY' LIMIT 1
  [1m[36mCommunity Load (1.4ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"event_feed_events"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.5ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"event_feed_events"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.4ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"event_feed_events"'::regclass
[0m
  [1m[35mSQL (1.7ms)[0m  INSERT INTO "event_feed_events" ("person1_id", "person2_id", "community_id", "eventable_id", "eventable_type", "category", "members_only", "created_at", "updated_at") VALUES ('bmEhbODeyr4Oap3a6HdQnY', NULL, 1, NULL, NULL, 'join', 'f', '2013-02-12 13:13:26.288696', '2013-02-12 13:13:26.288696') RETURNING "id"
  [1m[36mSQL (4.4ms)[0m  [1mCOMMIT[0m
  [1m[35mListing Load (1.6ms)[0m  SELECT "listings".* FROM "listings" WHERE ("listings".author_id = 'bmEhbODeyr4Oap3a6HdQnY')
  [1m[36mSQL (1.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities_listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.5ms)[0m  SELECT 1 FROM "communities" INNER JOIN "communities_listings" ON "communities".id = "communities_listings".community_id WHERE "communities"."id" = 1 AND ("communities_listings".listing_id = 3 ) LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (0.8ms)[0m  DELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 2
  [1m[36mSQL (13.4ms)[0m  [1mCOMMIT[0m
  [1m[35mAREL (4.6ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:13:26.356739', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 3 and (locked_at is null or locked_at < '2013-02-12 09:13:26.356739') and (run_at <= '2013-02-12 13:13:26.356739'))
  [1m[36mCommunity Load (1.2ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1[0m
  [1m[35mListing Load (0.7ms)[0m  SELECT "listings".* FROM "listings" WHERE "listings"."id" = 2 LIMIT 1
  [1m[36mPerson Load (1.2ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bmEhbODeyr4Oap3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "listings" WHERE ("listings".author_id = 'bmEhbODeyr4Oap3a6HdQnY')
  [1m[36mSQL (1.0ms)[0m  [1mSELECT COUNT(*) FROM "listings" WHERE ("listings".author_id = 'bmEhbODeyr4Oap3a6HdQnY') AND (open = '1' AND (valid_until IS NULL OR valid_until > '2013-02-12 13:13:25'))[0m
  [1m[35mListing Load (1.4ms)[0m  SELECT "listings".* FROM "listings" WHERE ("listings".author_id = 'bmEhbODeyr4Oap3a6HdQnY' AND ("listings"."listing_type" = 'offer')) AND (open = '1' AND (valid_until IS NULL OR valid_until > '2013-02-12 13:13:25')) ORDER BY id DESC
  [1m[36mListing Load (0.9ms)[0m  [1mSELECT "listings".* FROM "listings" WHERE ("listings".author_id = 'bmEhbODeyr4Oap3a6HdQnY' AND ("listings"."listing_type" = 'offer')) ORDER BY id DESC[0m
  [1m[35mSQL (0.5ms)[0m  BEGIN
  [1m[36mAREL (0.8ms)[0m  [1mDELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 3[0m
  [1m[35mSQL (12.5ms)[0m  COMMIT
  [1m[36mAREL (8.0ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:13:26.419781', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 4 and (locked_at is null or locked_at < '2013-02-12 09:13:26.419781') and (run_at <= '2013-02-12 13:13:26.419781'))[0m
  [1m[35mCommunity Load (1.2ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1
  [1m[36mListing Load (1.0ms)[0m  [1mSELECT "listings".* FROM "listings" WHERE "listings"."id" = 3 LIMIT 1[0m
  [1m[35mPerson Load (1.2ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bmEhbODeyr4Oap3a6HdQnY' LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mSELECT COUNT(*) FROM "listings" WHERE ("listings".author_id = 'bmEhbODeyr4Oap3a6HdQnY')[0m
  [1m[35mSQL (1.0ms)[0m  SELECT COUNT(*) FROM "listings" WHERE ("listings".author_id = 'bmEhbODeyr4Oap3a6HdQnY') AND (open = '1' AND (valid_until IS NULL OR valid_until > '2013-02-12 13:13:25'))
  [1m[36mListing Load (1.3ms)[0m  [1mSELECT "listings".* FROM "listings" WHERE ("listings".author_id = 'bmEhbODeyr4Oap3a6HdQnY' AND ("listings"."listing_type" = 'offer')) AND (open = '1' AND (valid_until IS NULL OR valid_until > '2013-02-12 13:13:25')) ORDER BY id DESC[0m
  [1m[35mListing Load (1.2ms)[0m  SELECT "listings".* FROM "listings" WHERE ("listings".author_id = 'bmEhbODeyr4Oap3a6HdQnY' AND ("listings"."listing_type" = 'offer')) ORDER BY id DESC
  [1m[36mSQL (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (0.8ms)[0m  DELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 4
  [1m[36mSQL (11.1ms)[0m  [1mCOMMIT[0m
  [1m[35mAREL (8.4ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:13:26.486017', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 5 and (locked_at is null or locked_at < '2013-02-12 09:13:26.486017') and (run_at <= '2013-02-12 13:13:26.486017'))
  [1m[36mCommunity Load (1.3ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1[0m
  [1m[35mSQL (1.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSwapItem Load (0.9ms)[0m  [1mSELECT "swap_items".* FROM "swap_items" WHERE "swap_items"."id" = 2 LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  BEGIN
  [1m[36mAREL (3.2ms)[0m  [1mUPDATE "delayed_jobs" SET "locked_at" = NULL, "locked_by" = NULL, "last_error" = '{Couldn''t find SwapItem with ID=2
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/activerecord-3.0.17/lib/active_record/relation/finder_methods.rb:306:in `find_one''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/activerecord-3.0.17/lib/active_record/relation/finder_methods.rb:291:in `find_with_ids''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/activerecord-3.0.17/lib/active_record/relation/finder_methods.rb:107:in `find''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/activerecord-3.0.17/lib/active_record/base.rb:444:in `find''
/home/chaitanya/workArea/ST-to-RGF/app/jobs/swap_offer_job.rb:12:in `perform''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/backend/base.rb:94:in `block in invoke_job''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:60:in `call''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:60:in `block in initialize''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:65:in `call''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:65:in `execute''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:38:in `run_callbacks''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/backend/base.rb:91:in `invoke_job''
(eval):3:in `block in invoke_job_with_newrelic_transaction_trace''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/newrelic_rpm-3.5.0.1/lib/new_relic/agent/instrumentation/controller_instrumentation.rb:268:in `block in perform_action_with_newrelic_trace''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/newrelic_rpm-3.5.0.1/lib/new_relic/agent/method_tracer.rb:242:in `trace_execution_scoped''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/newrelic_rpm-3.5.0.1/lib/new_relic/agent/instrumentation/controller_instrumentation.rb:263:in `perform_action_with_newrelic_trace''
(eval):2:in `invoke_job_with_newrelic_transaction_trace''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/worker.rb:182:in `block (2 levels) in run''
/home/chaitanya/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/timeout.rb:68:in `timeout''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/worker.rb:182:in `block in run''
/home/chaitanya/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/benchmark.rb:295:in `realtime''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/worker.rb:181:in `run''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/worker.rb:238:in `block in reserve_and_run_one_job''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:60:in `call''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:60:in `block in initialize''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:65:in `call''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:65:in `execute''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:38:in `run_callbacks''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/worker.rb:238:in `reserve_and_run_one_job''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/worker.rb:166:in `block in work_off''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/worker.rb:165:in `times''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/worker.rb:165:in `work_off''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/worker.rb:133:in `block (4 levels) in start''
/home/chaitanya/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/benchmark.rb:295:in `realtime''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/worker.rb:132:in `block (3 levels) in start''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:60:in `call''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:60:in `block in initialize''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:65:in `call''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:65:in `execute''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:38:in `run_callbacks''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/worker.rb:129:in `block (2 levels) in start''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/worker.rb:128:in `loop''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/worker.rb:128:in `block in start''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/plugins/clear_locks.rb:7:in `call''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/plugins/clear_locks.rb:7:in `block (2 levels) in <class:ClearLocks>''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:78:in `call''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:78:in `block (2 levels) in add''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:60:in `call''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:60:in `block in initialize''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:78:in `call''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:78:in `block in add''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:65:in `call''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:65:in `execute''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:38:in `run_callbacks''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/worker.rb:127:in `start''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/tasks.rb:9:in `block (2 levels) in <top (required)>''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/rake-0.8.7/lib/rake.rb:636:in `call''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/rake-0.8.7/lib/rake.rb:636:in `block in execute''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/rake-0.8.7/lib/rake.rb:631:in `each''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/rake-0.8.7/lib/rake.rb:631:in `execute''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/rake-0.8.7/lib/rake.rb:597:in `block in invoke_with_call_chain''
/home/chaitanya/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/rake-0.8.7/lib/rake.rb:590:in `invoke_with_call_chain''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/rake-0.8.7/lib/rake.rb:583:in `invoke''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/rake-0.8.7/lib/rake.rb:2051:in `invoke_task''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/rake-0.8.7/lib/rake.rb:2029:in `block (2 levels) in top_level''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/rake-0.8.7/lib/rake.rb:2029:in `each''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/rake-0.8.7/lib/rake.rb:2029:in `block in top_level''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/airbrake-3.1.5/lib/airbrake/rake_handler.rb:39:in `standard_exception_handling''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/rake-0.8.7/lib/rake.rb:2023:in `top_level''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/rake-0.8.7/lib/rake.rb:2001:in `block in run''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/rake-0.8.7/lib/rake.rb:2068:in `standard_exception_handling''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/rake-0.8.7/lib/rake.rb:1998:in `run''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/rake-0.8.7/bin/rake:31:in `<top (required)>''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/bin/rake:19:in `load''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/bin/rake:19:in `<main>''', "attempts" = 1, "run_at" = '2013-02-12 13:13:32.579824', "updated_at" = '2013-02-12 13:13:26.582747' WHERE "delayed_jobs"."id" = 5[0m
  [1m[35mSQL (6.2ms)[0m  COMMIT
  [1m[36mAREL (7.4ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:13:26.608679', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 6 and (locked_at is null or locked_at < '2013-02-12 09:13:26.608679') and (run_at <= '2013-02-12 13:13:26.608679'))[0m
  [1m[35mCommunity Load (1.3ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1
  [1m[36mSwapItem Load (0.9ms)[0m  [1mSELECT "swap_items".* FROM "swap_items" WHERE "swap_items"."id" = 3 LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  BEGIN
  [1m[36mAREL (1.3ms)[0m  [1mUPDATE "delayed_jobs" SET "locked_at" = NULL, "locked_by" = NULL, "last_error" = '{Couldn''t find SwapItem with ID=3
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/activerecord-3.0.17/lib/active_record/relation/finder_methods.rb:306:in `find_one''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/activerecord-3.0.17/lib/active_record/relation/finder_methods.rb:291:in `find_with_ids''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/activerecord-3.0.17/lib/active_record/relation/finder_methods.rb:107:in `find''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/activerecord-3.0.17/lib/active_record/base.rb:444:in `find''
/home/chaitanya/workArea/ST-to-RGF/app/jobs/swap_offer_job.rb:12:in `perform''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/backend/base.rb:94:in `block in invoke_job''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:60:in `call''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:60:in `block in initialize''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:65:in `call''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:65:in `execute''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:38:in `run_callbacks''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/backend/base.rb:91:in `invoke_job''
(eval):3:in `block in invoke_job_with_newrelic_transaction_trace''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/newrelic_rpm-3.5.0.1/lib/new_relic/agent/instrumentation/controller_instrumentation.rb:268:in `block in perform_action_with_newrelic_trace''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/newrelic_rpm-3.5.0.1/lib/new_relic/agent/method_tracer.rb:242:in `trace_execution_scoped''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/newrelic_rpm-3.5.0.1/lib/new_relic/agent/instrumentation/controller_instrumentation.rb:263:in `perform_action_with_newrelic_trace''
(eval):2:in `invoke_job_with_newrelic_transaction_trace''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/worker.rb:182:in `block (2 levels) in run''
/home/chaitanya/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/timeout.rb:68:in `timeout''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/worker.rb:182:in `block in run''
/home/chaitanya/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/benchmark.rb:295:in `realtime''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/worker.rb:181:in `run''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/worker.rb:238:in `block in reserve_and_run_one_job''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:60:in `call''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:60:in `block in initialize''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:65:in `call''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:65:in `execute''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:38:in `run_callbacks''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/worker.rb:238:in `reserve_and_run_one_job''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/worker.rb:166:in `block in work_off''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/worker.rb:165:in `times''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/worker.rb:165:in `work_off''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/worker.rb:133:in `block (4 levels) in start''
/home/chaitanya/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/benchmark.rb:295:in `realtime''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/worker.rb:132:in `block (3 levels) in start''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:60:in `call''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:60:in `block in initialize''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:65:in `call''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:65:in `execute''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:38:in `run_callbacks''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/worker.rb:129:in `block (2 levels) in start''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/worker.rb:128:in `loop''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/worker.rb:128:in `block in start''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/plugins/clear_locks.rb:7:in `call''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/plugins/clear_locks.rb:7:in `block (2 levels) in <class:ClearLocks>''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:78:in `call''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:78:in `block (2 levels) in add''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:60:in `call''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:60:in `block in initialize''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:78:in `call''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:78:in `block in add''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:65:in `call''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:65:in `execute''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:38:in `run_callbacks''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/worker.rb:127:in `start''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/tasks.rb:9:in `block (2 levels) in <top (required)>''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/rake-0.8.7/lib/rake.rb:636:in `call''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/rake-0.8.7/lib/rake.rb:636:in `block in execute''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/rake-0.8.7/lib/rake.rb:631:in `each''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/rake-0.8.7/lib/rake.rb:631:in `execute''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/rake-0.8.7/lib/rake.rb:597:in `block in invoke_with_call_chain''
/home/chaitanya/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/rake-0.8.7/lib/rake.rb:590:in `invoke_with_call_chain''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/rake-0.8.7/lib/rake.rb:583:in `invoke''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/rake-0.8.7/lib/rake.rb:2051:in `invoke_task''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/rake-0.8.7/lib/rake.rb:2029:in `block (2 levels) in top_level''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/rake-0.8.7/lib/rake.rb:2029:in `each''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/rake-0.8.7/lib/rake.rb:2029:in `block in top_level''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/airbrake-3.1.5/lib/airbrake/rake_handler.rb:39:in `standard_exception_handling''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/rake-0.8.7/lib/rake.rb:2023:in `top_level''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/rake-0.8.7/lib/rake.rb:2001:in `block in run''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/rake-0.8.7/lib/rake.rb:2068:in `standard_exception_handling''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/rake-0.8.7/lib/rake.rb:1998:in `run''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/rake-0.8.7/bin/rake:31:in `<top (required)>''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/bin/rake:19:in `load''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/bin/rake:19:in `<main>''', "attempts" = 1, "run_at" = '2013-02-12 13:13:32.635245', "updated_at" = '2013-02-12 13:13:26.636352' WHERE "delayed_jobs"."id" = 6[0m
  [1m[35mSQL (12.4ms)[0m  COMMIT
  [1m[36mAREL (8.8ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:13:26.663670', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 7 and (locked_at is null or locked_at < '2013-02-12 09:13:26.663670') and (run_at <= '2013-02-12 13:13:26.663670'))[0m
  [1m[35mCommunity Load (1.2ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1
  [1m[36mSwapItem Load (0.8ms)[0m  [1mSELECT "swap_items".* FROM "swap_items" WHERE "swap_items"."id" = 4 LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  BEGIN
  [1m[36mAREL (1.8ms)[0m  [1mUPDATE "delayed_jobs" SET "locked_at" = NULL, "locked_by" = NULL, "last_error" = '{Couldn''t find SwapItem with ID=4
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/activerecord-3.0.17/lib/active_record/relation/finder_methods.rb:306:in `find_one''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/activerecord-3.0.17/lib/active_record/relation/finder_methods.rb:291:in `find_with_ids''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/activerecord-3.0.17/lib/active_record/relation/finder_methods.rb:107:in `find''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/activerecord-3.0.17/lib/active_record/base.rb:444:in `find''
/home/chaitanya/workArea/ST-to-RGF/app/jobs/swap_offer_job.rb:12:in `perform''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/backend/base.rb:94:in `block in invoke_job''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:60:in `call''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:60:in `block in initialize''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:65:in `call''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:65:in `execute''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:38:in `run_callbacks''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/backend/base.rb:91:in `invoke_job''
(eval):3:in `block in invoke_job_with_newrelic_transaction_trace''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/newrelic_rpm-3.5.0.1/lib/new_relic/agent/instrumentation/controller_instrumentation.rb:268:in `block in perform_action_with_newrelic_trace''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/newrelic_rpm-3.5.0.1/lib/new_relic/agent/method_tracer.rb:242:in `trace_execution_scoped''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/newrelic_rpm-3.5.0.1/lib/new_relic/agent/instrumentation/controller_instrumentation.rb:263:in `perform_action_with_newrelic_trace''
(eval):2:in `invoke_job_with_newrelic_transaction_trace''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/worker.rb:182:in `block (2 levels) in run''
/home/chaitanya/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/timeout.rb:68:in `timeout''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/worker.rb:182:in `block in run''
/home/chaitanya/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/benchmark.rb:295:in `realtime''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/worker.rb:181:in `run''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/worker.rb:238:in `block in reserve_and_run_one_job''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:60:in `call''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:60:in `block in initialize''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:65:in `call''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:65:in `execute''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:38:in `run_callbacks''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/worker.rb:238:in `reserve_and_run_one_job''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/worker.rb:166:in `block in work_off''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/worker.rb:165:in `times''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/worker.rb:165:in `work_off''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/worker.rb:133:in `block (4 levels) in start''
/home/chaitanya/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/benchmark.rb:295:in `realtime''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/worker.rb:132:in `block (3 levels) in start''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:60:in `call''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:60:in `block in initialize''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:65:in `call''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:65:in `execute''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:38:in `run_callbacks''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/worker.rb:129:in `block (2 levels) in start''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/worker.rb:128:in `loop''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/worker.rb:128:in `block in start''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/plugins/clear_locks.rb:7:in `call''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/plugins/clear_locks.rb:7:in `block (2 levels) in <class:ClearLocks>''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:78:in `call''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:78:in `block (2 levels) in add''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:60:in `call''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:60:in `block in initialize''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:78:in `call''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:78:in `block in add''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:65:in `call''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:65:in `execute''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:38:in `run_callbacks''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/worker.rb:127:in `start''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/delayed_job-3.0.3/lib/delayed/tasks.rb:9:in `block (2 levels) in <top (required)>''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/rake-0.8.7/lib/rake.rb:636:in `call''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/rake-0.8.7/lib/rake.rb:636:in `block in execute''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/rake-0.8.7/lib/rake.rb:631:in `each''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/rake-0.8.7/lib/rake.rb:631:in `execute''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/rake-0.8.7/lib/rake.rb:597:in `block in invoke_with_call_chain''
/home/chaitanya/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/rake-0.8.7/lib/rake.rb:590:in `invoke_with_call_chain''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/rake-0.8.7/lib/rake.rb:583:in `invoke''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/rake-0.8.7/lib/rake.rb:2051:in `invoke_task''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/rake-0.8.7/lib/rake.rb:2029:in `block (2 levels) in top_level''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/rake-0.8.7/lib/rake.rb:2029:in `each''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/rake-0.8.7/lib/rake.rb:2029:in `block in top_level''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/airbrake-3.1.5/lib/airbrake/rake_handler.rb:39:in `standard_exception_handling''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/rake-0.8.7/lib/rake.rb:2023:in `top_level''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/rake-0.8.7/lib/rake.rb:2001:in `block in run''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/rake-0.8.7/lib/rake.rb:2068:in `standard_exception_handling''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/rake-0.8.7/lib/rake.rb:1998:in `run''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/rake-0.8.7/bin/rake:31:in `<top (required)>''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/bin/rake:19:in `load''
/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/bin/rake:19:in `<main>''', "attempts" = 1, "run_at" = '2013-02-12 13:13:32.692414', "updated_at" = '2013-02-12 13:13:26.693483' WHERE "delayed_jobs"."id" = 7[0m
  [1m[35mSQL (10.2ms)[0m  COMMIT
  [1m[36mAREL (8.7ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:13:26.719298', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 8 and (locked_at is null or locked_at < '2013-02-12 09:13:26.719298') and (run_at <= '2013-02-12 13:13:26.719298'))[0m
  [1m[35mCommunity Load (1.7ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1
  [1m[36mListing Load (1.4ms)[0m  [1mSELECT "listings".* FROM "listings" WHERE "listings"."id" = 4 LIMIT 1[0m
  [1m[35mPerson Load (1.5ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "listings" WHERE ("listings".author_id = 'bTFw-gDdur4Oaa3a6HdQnY')[0m
  [1m[35mSQL (0.8ms)[0m  SELECT COUNT(*) FROM "listings" WHERE ("listings".author_id = 'bTFw-gDdur4Oaa3a6HdQnY') AND (open = '1' AND (valid_until IS NULL OR valid_until > '2013-02-12 13:13:25'))
  [1m[36mListing Load (1.7ms)[0m  [1mSELECT "listings".* FROM "listings" WHERE ("listings".author_id = 'bTFw-gDdur4Oaa3a6HdQnY' AND ("listings"."listing_type" = 'offer')) AND (open = '1' AND (valid_until IS NULL OR valid_until > '2013-02-12 13:13:25')) ORDER BY id DESC[0m
  [1m[35mListing Load (1.3ms)[0m  SELECT "listings".* FROM "listings" WHERE ("listings".author_id = 'bTFw-gDdur4Oaa3a6HdQnY' AND ("listings"."listing_type" = 'offer')) ORDER BY id DESC
  [1m[36mSQL (0.5ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (0.9ms)[0m  DELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 8
  [1m[36mSQL (3.3ms)[0m  [1mCOMMIT[0m
  [1m[35mAREL (5.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:13:26.778385', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 9 and (locked_at is null or locked_at < '2013-02-12 09:13:26.778385') and (run_at <= '2013-02-12 13:13:26.778385'))
  [1m[36mCommunity Load (1.3ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1[0m
  [1m[35mSwapItem Load (0.5ms)[0m  SELECT "swap_items".* FROM "swap_items" WHERE "swap_items"."id" = 5 LIMIT 1
  [1m[36mSQL (1.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.5ms)[0m  BEGIN
  [1m[36mPK and serial sequence (6.6ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"delayed_jobs"'::regclass
[0m
  [1m[35mSQL (1.3ms)[0m  INSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/object:Delayed::PerformableMailer
object: !ruby/class ''PersonMailer''
method_name: :swap_offer_acceptance
args:
- !ruby/ActiveRecord:SwapItem
 attributes:
 id: ''5''
 offerer_id: bTFw-gDdur4Oaa3a6HdQnY
 receiver_id: bmEhbODeyr4Oap3a6HdQnY
 offerer_listing_id: ''4''
 receiver_listing_id: ''3''
 acceptance: t
 community_id: ''1''
 created_at: ''2013-02-11 13:46:23.362409''
 updated_at: ''2013-02-12 07:42:16.808912''
 receiver_communication_mode: ! ''phone ''
- !binary |-
 bHZoLm1l
- 1
', NULL, '2013-02-12 13:13:26.904787', NULL, NULL, NULL, '2013-02-12 13:13:26.904909', '2013-02-12 13:13:26.904909', NULL) RETURNING "id"
  [1m[36mSQL (24.9ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (0.4ms)[0m  BEGIN
  [1m[36mAREL (0.7ms)[0m  [1mDELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 9[0m
  [1m[35mSQL (7.1ms)[0m  COMMIT
  [1m[36mAREL (4.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:13:26.956970', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 10 and (locked_at is null or locked_at < '2013-02-12 09:13:26.956970') and (run_at <= '2013-02-12 13:13:26.956970'))[0m
  [1m[35mCommunity Load (0.8ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (25.9ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."id" = 2 LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.3ms)[0m  BEGIN
  [1m[36mAREL (0.6ms)[0m  [1mUPDATE "community_memberships" SET "last_page_load_date" = '2013-02-12 13:13:27.000000', "updated_at" = '2013-02-12 13:13:27.073356' WHERE "community_memberships"."id" = 2[0m
  [1m[35mSQL (45.4ms)[0m  COMMIT
  [1m[36mSQL (0.5ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (1.0ms)[0m  DELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 10
  [1m[36mSQL (6.7ms)[0m  [1mCOMMIT[0m
  [1m[35mAREL (14.8ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:13:27.224107', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 11 and (locked_at is null or locked_at < '2013-02-12 09:13:27.224107') and (run_at <= '2013-02-12 13:13:27.224107'))
  [1m[36mCommunity Load (1.2ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1[0m
  [1m[35mCommunityMembership Load (0.6ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."id" = 2 LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (0.8ms)[0m  DELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 11
  [1m[36mSQL (13.6ms)[0m  [1mCOMMIT[0m
  [1m[35mAREL (4.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:13:27.279455', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 12 and (locked_at is null or locked_at < '2013-02-12 09:13:27.279455') and (run_at <= '2013-02-12 13:13:27.279455'))
  [1m[36mCommunity Load (1.3ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1[0m
  [1m[35mCommunityMembership Load (0.9ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."id" = 2 LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (0.7ms)[0m  DELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 12
  [1m[36mSQL (12.6ms)[0m  [1mCOMMIT[0m
  [1m[35mAREL (4.8ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:13:27.323215', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 13 and (locked_at is null or locked_at < '2013-02-12 09:13:27.323215') and (run_at <= '2013-02-12 13:13:27.323215'))
  [1m[36mCommunity Load (1.2ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1[0m
  [1m[35mCommunityMembership Load (0.9ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."id" = 2 LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (0.5ms)[0m  DELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 13
  [1m[36mSQL (10.2ms)[0m  [1mCOMMIT[0m
  [1m[35mAREL (5.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:13:27.367485', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 14 and (locked_at is null or locked_at < '2013-02-12 09:13:27.367485') and (run_at <= '2013-02-12 13:13:27.367485'))
  [1m[36mCommunity Load (0.6ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1[0m
  [1m[35mCommunityMembership Load (0.8ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."id" = 2 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (0.3ms)[0m  DELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 14
  [1m[36mSQL (5.1ms)[0m  [1mCOMMIT[0m
  [1m[35mAREL (6.0ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:13:27.411390', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 15 and (locked_at is null or locked_at < '2013-02-12 09:13:27.411390') and (run_at <= '2013-02-12 13:13:27.411390'))
  [1m[36mCommunity Load (1.2ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1[0m
  [1m[35mCommunityMembership Load (0.9ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."id" = 2 LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (0.7ms)[0m  DELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 15
  [1m[36mSQL (10.4ms)[0m  [1mCOMMIT[0m
  [1m[35mAREL (4.4ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:13:27.501111', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 16 and (locked_at is null or locked_at < '2013-02-12 09:13:27.501111') and (run_at <= '2013-02-12 13:13:27.501111'))
  [1m[36mCommunity Load (1.0ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1[0m
  [1m[35mCommunityMembership Load (0.5ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."id" = 2 LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (0.9ms)[0m  DELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 16
  [1m[36mSQL (8.2ms)[0m  [1mCOMMIT[0m
  [1m[35mAREL (7.8ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:13:27.543367', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 17 and (locked_at is null or locked_at < '2013-02-12 09:13:27.543367') and (run_at <= '2013-02-12 13:13:27.543367'))
  [1m[36mCommunity Load (1.2ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1[0m
  [1m[35mCommunityMembership Load (0.9ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."id" = 2 LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (0.7ms)[0m  DELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 17
  [1m[36mSQL (5.4ms)[0m  [1mCOMMIT[0m
  [1m[35mAREL (5.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:13:27.578558', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 18 and (locked_at is null or locked_at < '2013-02-12 09:13:27.578558') and (run_at <= '2013-02-12 13:13:27.578558'))
  [1m[36mCommunity Load (1.2ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1[0m
  [1m[35mCommunityMembership Load (0.8ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."id" = 2 LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (0.7ms)[0m  DELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 18
  [1m[36mSQL (11.5ms)[0m  [1mCOMMIT[0m
  [1m[35mAREL (5.7ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:13:27.622231', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 19 and (locked_at is null or locked_at < '2013-02-12 09:13:27.622231') and (run_at <= '2013-02-12 13:13:27.622231'))
  [1m[36mCommunity Load (1.3ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1[0m
  [1m[35mCommunityMembership Load (0.9ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."id" = 2 LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (0.7ms)[0m  DELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 19
  [1m[36mSQL (10.3ms)[0m  [1mCOMMIT[0m
  [1m[35mAREL (4.8ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:13:27.667694', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 20 and (locked_at is null or locked_at < '2013-02-12 09:13:27.667694') and (run_at <= '2013-02-12 13:13:27.667694'))
  [1m[36mCommunity Load (1.3ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1[0m
  [1m[35mCommunityMembership Load (0.9ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."id" = 2 LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (0.7ms)[0m  DELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 20
  [1m[36mSQL (5.1ms)[0m  [1mCOMMIT[0m
  [1m[35mAREL (4.6ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:13:27.756780', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 21 and (locked_at is null or locked_at < '2013-02-12 09:13:27.756780') and (run_at <= '2013-02-12 13:13:27.756780'))
  [1m[36mCommunity Load (0.8ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1[0m
  [1m[35mCommunityMembership Load (0.9ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."id" = 2 LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (0.7ms)[0m  DELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 21
  [1m[36mSQL (11.7ms)[0m  [1mCOMMIT[0m
  [1m[35mAREL (4.4ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:13:27.801272', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 22 and (locked_at is null or locked_at < '2013-02-12 09:13:27.801272') and (run_at <= '2013-02-12 13:13:27.801272'))
  [1m[36mCommunity Load (1.6ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1[0m
  [1m[35mCommunityMembership Load (0.9ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."id" = 2 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (0.7ms)[0m  DELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 22
  [1m[36mSQL (7.6ms)[0m  [1mCOMMIT[0m
  [1m[35mAREL (4.7ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:13:27.845576', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 23 and (locked_at is null or locked_at < '2013-02-12 09:13:27.845576') and (run_at <= '2013-02-12 13:13:27.845576'))
  [1m[36mCommunity Load (1.6ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1[0m
  [1m[35mCommunityMembership Load (1.4ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."id" = 2 LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (0.8ms)[0m  DELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 23
  [1m[36mSQL (3.4ms)[0m  [1mCOMMIT[0m
  [1m[35mAREL (4.7ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:13:27.890019', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 24 and (locked_at is null or locked_at < '2013-02-12 09:13:27.890019') and (run_at <= '2013-02-12 13:13:27.890019'))
  [1m[36mCommunity Load (1.2ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1[0m
  [1m[35mCommunityMembership Load (0.8ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."id" = 2 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (0.8ms)[0m  DELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 24
  [1m[36mSQL (11.5ms)[0m  [1mCOMMIT[0m
  [1m[35mAREL (4.4ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:13:27.934170', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 25 and (locked_at is null or locked_at < '2013-02-12 09:13:27.934170') and (run_at <= '2013-02-12 13:13:27.934170'))
  [1m[36mCommunity Load (1.2ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1[0m
  [1m[35mCommunityMembership Load (0.9ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."id" = 2 LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (0.7ms)[0m  DELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 25
  [1m[36mSQL (8.4ms)[0m  [1mCOMMIT[0m
  [1m[35mAREL (3.8ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:13:28.023700', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 26 and (locked_at is null or locked_at < '2013-02-12 09:13:28.023700') and (run_at <= '2013-02-12 13:13:28.023700'))
  [1m[36mCommunity Load (1.2ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1[0m
  [1m[35mCommunityMembership Load (0.5ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."id" = 2 LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (0.7ms)[0m  DELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 26
  [1m[36mSQL (13.3ms)[0m  [1mCOMMIT[0m
  [1m[35mAREL (4.7ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:13:28.067845', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 27 and (locked_at is null or locked_at < '2013-02-12 09:13:28.067845') and (run_at <= '2013-02-12 13:13:28.067845'))
  [1m[36mCommunity Load (1.2ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1[0m
  [1m[35mCommunityMembership Load (0.5ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."id" = 2 LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (0.6ms)[0m  DELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 27
  [1m[36mSQL (9.4ms)[0m  [1mCOMMIT[0m
  [1m[35mAREL (5.9ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:13:28.111398', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 28 and (locked_at is null or locked_at < '2013-02-12 09:13:28.111398') and (run_at <= '2013-02-12 13:13:28.111398'))
  [1m[36mCommunity Load (1.3ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1[0m
  [1m[35mCommunityMembership Load (0.6ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."id" = 2 LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (0.6ms)[0m  DELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 28
  [1m[36mSQL (5.2ms)[0m  [1mCOMMIT[0m
  [1m[35mAREL (4.8ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:13:28.156561', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 29 and (locked_at is null or locked_at < '2013-02-12 09:13:28.156561') and (run_at <= '2013-02-12 13:13:28.156561'))
  [1m[36mCommunity Load (1.3ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1[0m
  [1m[35mCommunityMembership Load (1.0ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."id" = 2 LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (0.9ms)[0m  DELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 29
  [1m[36mSQL (9.5ms)[0m  [1mCOMMIT[0m
  [1m[35mAREL (7.4ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:13:28.243494', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 30 and (locked_at is null or locked_at < '2013-02-12 09:13:28.243494') and (run_at <= '2013-02-12 13:13:28.243494'))
  [1m[36mCommunity Load (1.3ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1[0m
  [1m[35mCommunityMembership Load (0.4ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."id" = 2 LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (0.7ms)[0m  DELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 30
  [1m[36mSQL (7.7ms)[0m  [1mCOMMIT[0m
  [1m[35mAREL (4.9ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:13:28.279472', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 31 and (locked_at is null or locked_at < '2013-02-12 09:13:28.279472') and (run_at <= '2013-02-12 13:13:28.279472'))
  [1m[36mCommunity Load (0.9ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1[0m
  [1m[35mCommunityMembership Load (0.6ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."id" = 2 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (0.5ms)[0m  DELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 31
  [1m[36mSQL (11.4ms)[0m  [1mCOMMIT[0m
  [1m[35mAREL (12.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:13:28.315109', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 32 and (locked_at is null or locked_at < '2013-02-12 09:13:28.315109') and (run_at <= '2013-02-12 13:13:28.315109'))
  [1m[36mCommunity Load (1.3ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1[0m
  [1m[35mCommunityMembership Load (0.8ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."id" = 2 LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (0.7ms)[0m  DELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 32
  [1m[36mSQL (8.8ms)[0m  [1mCOMMIT[0m
  [1m[35mAREL (8.5ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:13:28.364918', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 33 and (locked_at is null or locked_at < '2013-02-12 09:13:28.364918') and (run_at <= '2013-02-12 13:13:28.364918'))
  [1m[36mCommunity Load (2.1ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1[0m
  [1m[35mCommunityMembership Load (1.4ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."id" = 2 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (1.2ms)[0m  DELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 33
  [1m[36mSQL (3.4ms)[0m  [1mCOMMIT[0m
  [1m[35mAREL (13.9ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:13:28.414075', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 34 and (locked_at is null or locked_at < '2013-02-12 09:13:28.414075') and (run_at <= '2013-02-12 13:13:28.414075'))
  [1m[36mCommunity Load (1.6ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1[0m
  [1m[35mCommunityMembership Load (1.0ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."id" = 2 LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (0.8ms)[0m  DELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 34
  [1m[36mSQL (11.2ms)[0m  [1mCOMMIT[0m
  [1m[35mAREL (4.6ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:13:28.523360', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 35 and (locked_at is null or locked_at < '2013-02-12 09:13:28.523360') and (run_at <= '2013-02-12 13:13:28.523360'))
  [1m[36mCommunity Load (1.0ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1[0m
  [1m[35mCommunityMembership Load (0.6ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."id" = 2 LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (0.6ms)[0m  DELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 35
  [1m[36mSQL (7.7ms)[0m  [1mCOMMIT[0m
  [1m[35mAREL (4.4ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:13:28.556664', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 36 and (locked_at is null or locked_at < '2013-02-12 09:13:28.556664') and (run_at <= '2013-02-12 13:13:28.556664'))
  [1m[36mCommunity Load (1.5ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1[0m
  [1m[35mCommunityMembership Load (0.7ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."id" = 2 LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (0.4ms)[0m  DELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 36
  [1m[36mSQL (3.9ms)[0m  [1mCOMMIT[0m
  [1m[35mAREL (7.6ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:13:28.588064', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 37 and (locked_at is null or locked_at < '2013-02-12 09:13:28.588064') and (run_at <= '2013-02-12 13:13:28.588064'))
  [1m[36mCommunity Load (1.6ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1[0m
  [1m[35mCommunityMembership Load (1.9ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."id" = 2 LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (0.8ms)[0m  DELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 37
  [1m[36mSQL (7.1ms)[0m  [1mCOMMIT[0m
  [1m[35mAREL (7.5ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:13:28.632268', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 38 and (locked_at is null or locked_at < '2013-02-12 09:13:28.632268') and (run_at <= '2013-02-12 13:13:28.632268'))
  [1m[36mCommunity Load (1.2ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1[0m
  [1m[35mCommunityMembership Load (0.8ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."id" = 2 LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (0.5ms)[0m  DELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 38
  [1m[36mSQL (6.8ms)[0m  [1mCOMMIT[0m
  [1m[35mAREL (8.4ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:13:28.676170', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 39 and (locked_at is null or locked_at < '2013-02-12 09:13:28.676170') and (run_at <= '2013-02-12 13:13:28.676170'))
  [1m[36mCommunity Load (1.3ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1[0m
  [1m[35mCommunityMembership Load (0.9ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."id" = 2 LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (0.8ms)[0m  DELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 39
  [1m[36mSQL (6.0ms)[0m  [1mCOMMIT[0m
  [1m[35mAREL (6.1ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:13:28.767533', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 40 and (locked_at is null or locked_at < '2013-02-12 09:13:28.767533') and (run_at <= '2013-02-12 13:13:28.767533'))
  [1m[36mCommunity Load (0.7ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1[0m
  [1m[35mCommunityMembership Load (1.2ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."id" = 2 LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (1.0ms)[0m  DELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 40
  [1m[36mSQL (8.9ms)[0m  [1mCOMMIT[0m
  [1m[35mAREL (8.0ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:13:28.809864', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 41 and (locked_at is null or locked_at < '2013-02-12 09:13:28.809864') and (run_at <= '2013-02-12 13:13:28.809864'))
  [1m[36mCommunity Load (1.3ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1[0m
  [1m[35mCommunityMembership Load (0.9ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."id" = 2 LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (0.7ms)[0m  DELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 41
  [1m[36mSQL (7.3ms)[0m  [1mCOMMIT[0m
  [1m[35mAREL (7.4ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:13:28.855028', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 42 and (locked_at is null or locked_at < '2013-02-12 09:13:28.855028') and (run_at <= '2013-02-12 13:13:28.855028'))
  [1m[36mCommunity Load (1.6ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1[0m
  [1m[35mCommunityMembership Load (1.2ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."id" = 2 LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (1.0ms)[0m  DELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 42
  [1m[36mSQL (64.2ms)[0m  [1mCOMMIT[0m
  [1m[35mAREL (14.8ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:13:28.957919', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 43 and (locked_at is null or locked_at < '2013-02-12 09:13:28.957919') and (run_at <= '2013-02-12 13:13:28.957919'))
  [1m[36mCommunity Load (2.0ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1[0m
  [1m[35mCommunityMembership Load (1.3ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."id" = 2 LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (1.1ms)[0m  DELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 43
  [1m[36mSQL (4.3ms)[0m  [1mCOMMIT[0m
  [1m[35mAREL (6.9ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:13:28.999683', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 44 and (locked_at is null or locked_at < '2013-02-12 09:13:28.999683') and (run_at <= '2013-02-12 13:13:28.999683'))
  [1m[36mCommunity Load (1.3ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1[0m
  [1m[35mCommunityMembership Load (0.9ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."id" = 2 LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (0.7ms)[0m  DELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 44
  [1m[36mSQL (5.3ms)[0m  [1mCOMMIT[0m
  [1m[35mAREL (6.5ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:13:29.088504', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 45 and (locked_at is null or locked_at < '2013-02-12 09:13:29.088504') and (run_at <= '2013-02-12 13:13:29.088504'))
  [1m[36mCommunity Load (2.0ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1[0m
  [1m[35mCommunityMembership Load (0.6ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."id" = 2 LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (0.5ms)[0m  DELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 45
  [1m[36mSQL (6.3ms)[0m  [1mCOMMIT[0m
  [1m[35mAREL (6.5ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:13:29.133026', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 46 and (locked_at is null or locked_at < '2013-02-12 09:13:29.133026') and (run_at <= '2013-02-12 13:13:29.133026'))
  [1m[36mCommunity Load (1.3ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1[0m
  [1m[35mCommunityMembership Load (0.9ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."id" = 2 LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (0.7ms)[0m  DELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 46
  [1m[36mSQL (8.6ms)[0m  [1mCOMMIT[0m
  [1m[35mAREL (15.0ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:13:29.179847', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 47 and (locked_at is null or locked_at < '2013-02-12 09:13:29.179847') and (run_at <= '2013-02-12 13:13:29.179847'))
  [1m[36mCommunity Load (0.7ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1[0m
  [1m[35mCommunityMembership Load (0.7ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."id" = 2 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (0.3ms)[0m  DELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 47
  [1m[36mSQL (4.8ms)[0m  [1mCOMMIT[0m
  [1m[35mAREL (8.1ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:13:29.231853', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 48 and (locked_at is null or locked_at < '2013-02-12 09:13:29.231853') and (run_at <= '2013-02-12 13:13:29.231853'))
  [1m[36mCommunity Load (1.7ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1[0m
  [1m[35mCommunityMembership Load (0.9ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."id" = 2 LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (0.5ms)[0m  DELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 48
  [1m[36mSQL (10.7ms)[0m  [1mCOMMIT[0m
  [1m[35mAREL (9.7ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:13:29.278018', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 49 and (locked_at is null or locked_at < '2013-02-12 09:13:29.278018') and (run_at <= '2013-02-12 13:13:29.278018'))
  [1m[36mCommunity Load (1.0ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1[0m
  [1m[35mCommunityMembership Load (0.6ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."id" = 2 LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (0.6ms)[0m  DELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 49
  [1m[36mSQL (11.9ms)[0m  [1mCOMMIT[0m
  [1m[35mAREL (3.9ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:13:29.390852', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 50 and (locked_at is null or locked_at < '2013-02-12 09:13:29.390852') and (run_at <= '2013-02-12 13:13:29.390852'))
  [1m[36mCommunity Load (2.0ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1[0m
  [1m[35mCommunityMembership Load (0.7ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."id" = 1 LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (0.6ms)[0m  UPDATE "community_memberships" SET "last_page_load_date" = '2013-02-12 13:13:29.000000', "updated_at" = '2013-02-12 13:13:29.420531' WHERE "community_memberships"."id" = 1
  [1m[36mSQL (5.5ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (0.3ms)[0m  BEGIN
  [1m[36mAREL (0.6ms)[0m  [1mDELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 50[0m
  [1m[35mSQL (8.6ms)[0m  COMMIT
  [1m[36mAREL (5.1ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:13:29.445729', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 51 and (locked_at is null or locked_at < '2013-02-12 09:13:29.445729') and (run_at <= '2013-02-12 13:13:29.445729'))[0m
  [1m[35mCommunity Load (1.4ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1
  [1m[36mCommunityMembership Load (0.8ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  BEGIN
  [1m[36mAREL (0.5ms)[0m  [1mDELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 51[0m
  [1m[35mSQL (4.2ms)[0m  COMMIT
  [1m[36mAREL (7.7ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:13:29.487865', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 52 and (locked_at is null or locked_at < '2013-02-12 09:13:29.487865') and (run_at <= '2013-02-12 13:13:29.487865'))[0m
  [1m[35mCommunity Load (0.8ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1
  [1m[36mCommunityMembership Load (0.9ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  BEGIN
  [1m[36mAREL (0.9ms)[0m  [1mDELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 52[0m
  [1m[35mSQL (3.4ms)[0m  COMMIT
  [1m[36mAREL (7.0ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:13:29.521664', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 53 and (locked_at is null or locked_at < '2013-02-12 09:13:29.521664') and (run_at <= '2013-02-12 13:13:29.521664'))[0m
  [1m[35mCommunity Load (1.3ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1
  [1m[36mCommunityMembership Load (0.9ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  BEGIN
  [1m[36mAREL (0.3ms)[0m  [1mDELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 53[0m
  [1m[35mSQL (3.9ms)[0m  COMMIT
  [1m[36mAREL (7.8ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:13:29.619789', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 54 and (locked_at is null or locked_at < '2013-02-12 09:13:29.619789') and (run_at <= '2013-02-12 13:13:29.619789'))[0m
  [1m[35mCommunity Load (0.9ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1
  [1m[36mCommunityMembership Load (0.8ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  BEGIN
  [1m[36mAREL (0.7ms)[0m  [1mDELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 54[0m
  [1m[35mSQL (5.1ms)[0m  COMMIT
  [1m[36mAREL (6.6ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:13:29.675819', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 55 and (locked_at is null or locked_at < '2013-02-12 09:13:29.675819') and (run_at <= '2013-02-12 13:13:29.675819'))[0m
  [1m[35mCommunity Load (1.3ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1
  [1m[36mCommunityMembership Load (0.8ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  BEGIN
  [1m[36mAREL (0.5ms)[0m  [1mDELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 55[0m
  [1m[35mSQL (10.6ms)[0m  COMMIT
  [1m[36mAREL (6.0ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:13:29.722266', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 56 and (locked_at is null or locked_at < '2013-02-12 09:13:29.722266') and (run_at <= '2013-02-12 13:13:29.722266'))[0m
  [1m[35mCommunity Load (1.4ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1
  [1m[36mSQL (2.6ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"invitations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mInvitation Load (0.8ms)[0m  SELECT "invitations".* FROM "invitations" WHERE "invitations"."id" = 1 LIMIT 1
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"invitations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (2.1ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1
  [1m[36mCommunity Load (1.6ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
Rendered person_mailer/invitation_to_kassi.html.haml within layouts/email (10.8ms)

Sent mail to saraf.chaitanya@gmail.com (6448ms)
Date: Tue, 12 Feb 2013 18:43:45 +0530
From: no-reply@realgoodfood.org
Reply-To: chaitanya.saraf1985@gmail.com
To: saraf.chaitanya@gmail.com
Message-ID: <511a4009a6c56_4e234217010282aa@chaitanya-laptop.mail>
Subject: chs has invited you to use the RealGoodFood web service of the pune
 city community.
Mime-Version: 1.0
Content-Type: text/html;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

<!DOCTYPE html>
<html lang='en-US' xml:lang='en-US' xmlns='http://www.w3.org/1999/xhtml'>
  <head></head>
  <body>
    <table border='0' cellpadding='0' cellspacing='0' style='width:550px; border-top:4px solid #223f05; font: 12px arial, sans-serif; margin: 0 auto;'>
      <tr>
        <td>
          <h1 style='font-size: 22px; margin:7px 0 12px 0; padding:0;'>
            RealGoodFood
          </h1>
          Hi!
          <br>
          <br>
          chs has invited you to use the RealGoodFood web service of the pune city community.
          <br>
          <br>
          RealGoodFood is a service where the members of the community can, for example, lend, swap and sell goods, share rides and help each other out in several ways.
          <br>
          <br>
          Here is a personal message from chs:
          <div style='margin: 15px 0; padding: 10px; background-color: #d1c9b4;'>
            Compliment a cook<br />
          </div>
          You can join RealGoodFood at
          <a href="http://lvh.me/">http://lvh.me/</a>
          <br>
          <br>
          Thanks,
          <br>
          The RealGoodFood Team
          <br>
          <br>
        </td>
      </tr>
    </table>
  </body>
</html>
  [1m[35mSQL (0.7ms)[0m  BEGIN
  [1m[36mAREL (1.0ms)[0m  [1mDELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 56[0m
  [1m[35mSQL (38.0ms)[0m  COMMIT
  [1m[36mAREL (25.0ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:13:52.058024', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 57 and (locked_at is null or locked_at < '2013-02-12 09:13:52.058024') and (run_at <= '2013-02-12 13:13:52.058024'))[0m
  [1m[35mCommunity Load (0.8ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1
  [1m[36mCommunityMembership Load (0.8ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  BEGIN
  [1m[36mAREL (0.4ms)[0m  [1mDELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 57[0m
  [1m[35mSQL (159.2ms)[0m  COMMIT
  [1m[36mAREL (105.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:13:52.266971', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 58 and (locked_at is null or locked_at < '2013-02-12 09:13:52.266971') and (run_at <= '2013-02-12 13:13:52.266971'))[0m
  [1m[35mCommunity Load (1.2ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1
  [1m[36mCommunityMembership Load (0.8ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  BEGIN
  [1m[36mAREL (0.7ms)[0m  [1mDELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 58[0m
  [1m[35mSQL (10.2ms)[0m  COMMIT
  [1m[36mAREL (26.8ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:13:52.412264', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 59 and (locked_at is null or locked_at < '2013-02-12 09:13:52.412264') and (run_at <= '2013-02-12 13:13:52.412264'))[0m
  [1m[35mCommunity Load (1.2ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1
  [1m[36mCommunityMembership Load (0.8ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  BEGIN
  [1m[36mAREL (0.5ms)[0m  [1mDELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 59[0m
  [1m[35mSQL (4.9ms)[0m  COMMIT
  [1m[36mAREL (6.6ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:13:52.476646', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 60 and (locked_at is null or locked_at < '2013-02-12 09:13:52.476646') and (run_at <= '2013-02-12 13:13:52.476646'))[0m
  [1m[35mCommunity Load (1.5ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1
  [1m[36mCommunityMembership Load (0.9ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  BEGIN
  [1m[36mAREL (0.5ms)[0m  [1mDELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 60[0m
  [1m[35mSQL (6.8ms)[0m  COMMIT
  [1m[36mAREL (15.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:13:52.590084', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 61 and (locked_at is null or locked_at < '2013-02-12 09:13:52.590084') and (run_at <= '2013-02-12 13:13:52.590084'))[0m
  [1m[35mCommunity Load (0.8ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1
  [1m[36mCommunityMembership Load (0.7ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  BEGIN
  [1m[36mAREL (0.4ms)[0m  [1mDELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 61[0m
  [1m[35mSQL (10.8ms)[0m  COMMIT
  [1m[36mAREL (5.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:13:52.644408', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 62 and (locked_at is null or locked_at < '2013-02-12 09:13:52.644408') and (run_at <= '2013-02-12 13:13:52.644408'))[0m
  [1m[35mCommunity Load (1.0ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1
  [1m[36mCommunityMembership Load (0.9ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  BEGIN
  [1m[36mAREL (0.4ms)[0m  [1mDELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 62[0m
  [1m[35mSQL (19.6ms)[0m  COMMIT
  [1m[36mAREL (4.6ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:13:52.700929', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 63 and (locked_at is null or locked_at < '2013-02-12 09:13:52.700929') and (run_at <= '2013-02-12 13:13:52.700929'))[0m
  [1m[35mCommunity Load (1.3ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1
  [1m[36mCommunityMembership Load (1.0ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  BEGIN
  [1m[36mAREL (0.5ms)[0m  [1mDELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 63[0m
  [1m[35mSQL (3.0ms)[0m  COMMIT
  [1m[36mAREL (18.7ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:13:52.743597', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 64 and (locked_at is null or locked_at < '2013-02-12 09:13:52.743597') and (run_at <= '2013-02-12 13:13:52.743597'))[0m
  [1m[35mCommunity Load (1.2ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1
  [1m[36mCommunityMembership Load (1.0ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  BEGIN
  [1m[36mAREL (1.1ms)[0m  [1mDELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 64[0m
  [1m[35mSQL (8.7ms)[0m  COMMIT
  [1m[36mAREL (37.9ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:13:52.800900', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 65 and (locked_at is null or locked_at < '2013-02-12 09:13:52.800900') and (run_at <= '2013-02-12 13:13:52.800900'))[0m
  [1m[35mCommunity Load (1.3ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1
  [1m[36mCommunityMembership Load (0.9ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  BEGIN
  [1m[36mAREL (0.6ms)[0m  [1mDELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 65[0m
  [1m[35mSQL (18.0ms)[0m  COMMIT
  [1m[36mAREL (3.9ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:13:52.934413', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 66 and (locked_at is null or locked_at < '2013-02-12 09:13:52.934413') and (run_at <= '2013-02-12 13:13:52.934413'))[0m
  [1m[35mCommunity Load (1.9ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1
  [1m[36mCommunityMembership Load (1.0ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  BEGIN
  [1m[36mAREL (0.5ms)[0m  [1mDELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 66[0m
  [1m[35mSQL (4.7ms)[0m  COMMIT
  [1m[36mAREL (8.0ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:13:52.975563', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 67 and (locked_at is null or locked_at < '2013-02-12 09:13:52.975563') and (run_at <= '2013-02-12 13:13:52.975563'))[0m
  [1m[35mCommunity Load (1.3ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1
  [1m[36mCommunityMembership Load (1.2ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  BEGIN
  [1m[36mAREL (0.4ms)[0m  [1mDELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 67[0m
  [1m[35mSQL (13.8ms)[0m  COMMIT
  [1m[36mAREL (7.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:13:53.020805', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 68 and (locked_at is null or locked_at < '2013-02-12 09:13:53.020805') and (run_at <= '2013-02-12 13:13:53.020805'))[0m
  [1m[35mCommunity Load (1.2ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1
  [1m[36mCommunityMembership Load (0.9ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  BEGIN
  [1m[36mAREL (0.7ms)[0m  [1mDELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 68[0m
  [1m[35mSQL (13.0ms)[0m  COMMIT
  [1m[36mAREL (16.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:13:53.066976', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 69 and (locked_at is null or locked_at < '2013-02-12 09:13:53.066976') and (run_at <= '2013-02-12 13:13:53.066976'))[0m
  [1m[35mCommunity Load (1.3ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1
  [1m[36mCommunityMembership Load (0.8ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  BEGIN
  [1m[36mAREL (1.1ms)[0m  [1mDELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 69[0m
  [1m[35mSQL (8.3ms)[0m  COMMIT
  [1m[36mAREL (5.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:13:53.121984', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 70 and (locked_at is null or locked_at < '2013-02-12 09:13:53.121984') and (run_at <= '2013-02-12 13:13:53.121984'))[0m
  [1m[35mCommunity Load (1.3ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1
  [1m[36mCommunityMembership Load (0.8ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  BEGIN
  [1m[36mAREL (0.8ms)[0m  [1mDELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 70[0m
  [1m[35mSQL (4.7ms)[0m  COMMIT
  [1m[36mAREL (6.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:13:53.210448', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 71 and (locked_at is null or locked_at < '2013-02-12 09:13:53.210448') and (run_at <= '2013-02-12 13:13:53.210448'))[0m
  [1m[35mCommunity Load (1.4ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1
  [1m[36mCommunityMembership Load (1.1ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  BEGIN
  [1m[36mAREL (0.7ms)[0m  [1mDELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 71[0m
  [1m[35mSQL (21.4ms)[0m  COMMIT
  [1m[36mAREL (12.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:13:53.270114', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 72 and (locked_at is null or locked_at < '2013-02-12 09:13:53.270114') and (run_at <= '2013-02-12 13:13:53.270114'))[0m
  [1m[35mCommunity Load (1.1ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1
  [1m[36mCommunityMembership Load (0.9ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  BEGIN
  [1m[36mAREL (0.7ms)[0m  [1mDELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 72[0m
  [1m[35mSQL (5.3ms)[0m  COMMIT
  [1m[36mAREL (6.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:13:53.310985', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 73 and (locked_at is null or locked_at < '2013-02-12 09:13:53.310985') and (run_at <= '2013-02-12 13:13:53.310985'))[0m
  [1m[35mCommunity Load (0.8ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1
  [1m[36mCommunityMembership Load (1.1ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  BEGIN
  [1m[36mAREL (0.8ms)[0m  [1mDELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 73[0m
  [1m[35mSQL (4.1ms)[0m  COMMIT
  [1m[36mAREL (6.4ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:13:53.354653', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 74 and (locked_at is null or locked_at < '2013-02-12 09:13:53.354653') and (run_at <= '2013-02-12 13:13:53.354653'))[0m
  [1m[35mSwapItem Load (1.4ms)[0m  SELECT "swap_items".* FROM "swap_items" WHERE "swap_items"."id" = 5 LIMIT 1
  [1m[36mPerson Load (1.3ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mPerson Load (0.9ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bmEhbODeyr4Oap3a6HdQnY' LIMIT 1
  [1m[36mListing Load (1.0ms)[0m  [1mSELECT "listings".* FROM "listings" WHERE "listings"."id" = 3 LIMIT 1[0m
  [1m[35mListing Load (1.4ms)[0m  SELECT "listings".* FROM "listings" WHERE "listings"."id" = 4 LIMIT 1
Rendered person_mailer/_email_signature.html.haml (3.4ms)
Rendered person_mailer/swap_offer_acceptance.html.haml within layouts/email (20.1ms)

Sent mail to chaitanya.saraf1985@gmail.com (5856ms)
Date: Tue, 12 Feb 2013 18:43:53 +0530
From: no-reply@realgoodfood.org
Sender: konark
Reply-To: no-reply@realgoodfood.org
To: chaitanya.saraf1985@gmail.com
Message-ID: <511a4011806cf_4e23421701028391@chaitanya-laptop.mail>
Subject: Swap offer status
Mime-Version: 1.0
Content-Type: text/html;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

<!DOCTYPE html>
<html lang='en-US' xml:lang='en-US' xmlns='http://www.w3.org/1999/xhtml'>
  <head></head>
  <body>
    <table border='0' cellpadding='0' cellspacing='0' style='width:550px; border-top:4px solid #223f05; font: 12px arial, sans-serif; margin: 0 auto;'>
      <tr>
        <td>
          <h1 style='font-size: 22px; margin:7px 0 12px 0; padding:0;'>
            RealGoodFood
          </h1>
          Hi chs,
          <br>
          <br>
          Congradulations, your swap offer is accepted by
          chs
          <br>
          <!-- /- if @swap_item.acceptance == true -->
          <!-- /Now you can see the recipe details by login and visiting -->
          <!-- /  %a{:href => "#{@url}listings/#{@receiver_recipe.id}-#{@receiver_recipe.title}"} -->
          <!-- /  click here -->
          Check
          <a href='http://lvh.me/people/bTFw-gDdur4Oaa3a6HdQnY/swap_items?cid=1'>
            here
          </a>
          <br>
          <br>
          Note: do not reply directly to this email. Use the reply link above instead.
          <br>
          <br>
          Thanks,
          <br>
          The RealGoodFood Team
          <div style='margin-top: 6px; border-bottom: 3px solid #d1c9b4; line-height:3px'>
            &nbsp;
          </div>
          <div style='margin-top: 3px; font-size: 0.9em;'>
            Want to control which emails you receive from RealGoodFood?
            <a href="http://lvh.me/en/people/bTFw-gDdur4Oaa3a6HdQnY/settings/notifications?ref=email">Check your settings</a>
          </div>
        </td>
      </tr>
    </table>
  </body>
</html>
  [1m[36mSQL (0.6ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (0.9ms)[0m  DELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 74
  [1m[36mSQL (20.0ms)[0m  [1mCOMMIT[0m
  [1m[35mAREL (14.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:13:59.413924', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 5 and (locked_at is null or locked_at < '2013-02-12 09:13:59.413924') and (run_at <= '2013-02-12 13:13:59.413924'))
  [1m[36mCommunity Load (1.0ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1[0m
  [1m[35mSwapItem Load (0.8ms)[0m  SELECT "swap_items".* FROM "swap_items" WHERE "swap_items"."id" = 2 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (0.5ms)[0m  UPDATE "delayed_jobs" SET "locked_at" = NULL, "locked_by" = NULL, "attempts" = 2, "run_at" = '2013-02-12 13:14:20.454713', "updated_at" = '2013-02-12 13:13:59.455629' WHERE "delayed_jobs"."id" = 5
  [1m[36mSQL (4.6ms)[0m  [1mCOMMIT[0m
  [1m[35mAREL (7.4ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:13:59.474296', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 6 and (locked_at is null or locked_at < '2013-02-12 09:13:59.474296') and (run_at <= '2013-02-12 13:13:59.474296'))
  [1m[36mCommunity Load (1.2ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1[0m
  [1m[35mSwapItem Load (1.0ms)[0m  SELECT "swap_items".* FROM "swap_items" WHERE "swap_items"."id" = 3 LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (1.0ms)[0m  UPDATE "delayed_jobs" SET "locked_at" = NULL, "locked_by" = NULL, "attempts" = 2, "run_at" = '2013-02-12 13:14:20.567861', "updated_at" = '2013-02-12 13:13:59.569279' WHERE "delayed_jobs"."id" = 6
  [1m[36mSQL (12.4ms)[0m  [1mCOMMIT[0m
  [1m[35mAREL (13.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:13:59.591744', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 7 and (locked_at is null or locked_at < '2013-02-12 09:13:59.591744') and (run_at <= '2013-02-12 13:13:59.591744'))
  [1m[36mCommunity Load (1.2ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1[0m
  [1m[35mSwapItem Load (0.8ms)[0m  SELECT "swap_items".* FROM "swap_items" WHERE "swap_items"."id" = 4 LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (0.7ms)[0m  UPDATE "delayed_jobs" SET "locked_at" = NULL, "locked_by" = NULL, "attempts" = 2, "run_at" = '2013-02-12 13:14:20.632703', "updated_at" = '2013-02-12 13:13:59.634937' WHERE "delayed_jobs"."id" = 7
  [1m[36mSQL (12.6ms)[0m  [1mCOMMIT[0m
  [1m[35mAREL (32.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:14:24.694066', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 5 and (locked_at is null or locked_at < '2013-02-12 09:14:24.694066') and (run_at <= '2013-02-12 13:14:24.694066'))
  [1m[36mCommunity Load (1.2ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1[0m
  [1m[35mSwapItem Load (0.8ms)[0m  SELECT "swap_items".* FROM "swap_items" WHERE "swap_items"."id" = 2 LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (1.0ms)[0m  UPDATE "delayed_jobs" SET "locked_at" = NULL, "locked_by" = NULL, "attempts" = 3, "run_at" = '2013-02-12 13:15:50.746275', "updated_at" = '2013-02-12 13:14:24.747354' WHERE "delayed_jobs"."id" = 5
  [1m[36mSQL (22.9ms)[0m  [1mCOMMIT[0m
  [1m[35mAREL (12.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:14:24.780085', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 6 and (locked_at is null or locked_at < '2013-02-12 09:14:24.780085') and (run_at <= '2013-02-12 13:14:24.780085'))
  [1m[36mCommunity Load (1.4ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1[0m
  [1m[35mSwapItem Load (0.8ms)[0m  SELECT "swap_items".* FROM "swap_items" WHERE "swap_items"."id" = 3 LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (1.0ms)[0m  UPDATE "delayed_jobs" SET "locked_at" = NULL, "locked_by" = NULL, "attempts" = 3, "run_at" = '2013-02-12 13:15:50.817946', "updated_at" = '2013-02-12 13:14:24.819020' WHERE "delayed_jobs"."id" = 6
  [1m[36mSQL (6.8ms)[0m  [1mCOMMIT[0m
  [1m[35mAREL (4.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:14:24.833461', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 7 and (locked_at is null or locked_at < '2013-02-12 09:14:24.833461') and (run_at <= '2013-02-12 13:14:24.833461'))
  [1m[36mCommunity Load (1.3ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1[0m
  [1m[35mSwapItem Load (0.7ms)[0m  SELECT "swap_items".* FROM "swap_items" WHERE "swap_items"."id" = 4 LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (0.6ms)[0m  UPDATE "delayed_jobs" SET "locked_at" = NULL, "locked_by" = NULL, "attempts" = 3, "run_at" = '2013-02-12 13:15:50.927008', "updated_at" = '2013-02-12 13:14:24.928599' WHERE "delayed_jobs"."id" = 7
  [1m[36mSQL (74.9ms)[0m  [1mCOMMIT[0m
  [1m[35mAREL (60.9ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:15:55.239039', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 5 and (locked_at is null or locked_at < '2013-02-12 09:15:55.239039') and (run_at <= '2013-02-12 13:15:55.239039'))
  [1m[36mCommunity Load (1.7ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1[0m
  [1m[35mSwapItem Load (1.0ms)[0m  SELECT "swap_items".* FROM "swap_items" WHERE "swap_items"."id" = 2 LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (0.8ms)[0m  UPDATE "delayed_jobs" SET "locked_at" = NULL, "locked_by" = NULL, "attempts" = 4, "run_at" = '2013-02-12 13:20:16.317148', "updated_at" = '2013-02-12 13:15:55.318289' WHERE "delayed_jobs"."id" = 5
  [1m[36mSQL (4.6ms)[0m  [1mCOMMIT[0m
  [1m[35mAREL (7.1ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:15:55.328256', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 6 and (locked_at is null or locked_at < '2013-02-12 09:15:55.328256') and (run_at <= '2013-02-12 13:15:55.328256'))
  [1m[36mCommunity Load (1.2ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1[0m
  [1m[35mSwapItem Load (0.5ms)[0m  SELECT "swap_items".* FROM "swap_items" WHERE "swap_items"."id" = 3 LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (0.7ms)[0m  UPDATE "delayed_jobs" SET "locked_at" = NULL, "locked_by" = NULL, "attempts" = 4, "run_at" = '2013-02-12 13:20:16.361826', "updated_at" = '2013-02-12 13:15:55.363227' WHERE "delayed_jobs"."id" = 6
  [1m[36mSQL (3.6ms)[0m  [1mCOMMIT[0m
  [1m[35mAREL (7.5ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:15:55.372563', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 7 and (locked_at is null or locked_at < '2013-02-12 09:15:55.372563') and (run_at <= '2013-02-12 13:15:55.372563'))
  [1m[36mCommunity Load (1.7ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1[0m
  [1m[35mSwapItem Load (0.5ms)[0m  SELECT "swap_items".* FROM "swap_items" WHERE "swap_items"."id" = 4 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (0.5ms)[0m  UPDATE "delayed_jobs" SET "locked_at" = NULL, "locked_by" = NULL, "attempts" = 4, "run_at" = '2013-02-12 13:20:16.405689', "updated_at" = '2013-02-12 13:15:55.406567' WHERE "delayed_jobs"."id" = 7
  [1m[36mSQL (5.6ms)[0m  [1mCOMMIT[0m


Started GET "/en/people/bTFw-gDdur4Oaa3a6HdQnY/invitations/new?complement=true" for 127.0.0.1 at 2013-02-12 18:46:02 +0530
  Processing by InvitationsController#new as HTML
  Parameters: {"complement"=>"true", "locale"=>"en", "person_id"=>"bTFw-gDdur4Oaa3a6HdQnY"}
  [1m[35mPK and serial sequence (9.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (2.9ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (1.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (0.7ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (1.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (8.1ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (5.4ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.4ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.6ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.6ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (1.0ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'bTFw-gDdur4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (0.9ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"invitations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
Rendered layouts/_kissmetrics.haml (3.1ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.6ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.0ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (10.0ms)
Rendered communities/default/logo/logo.haml (2.1ms)
Rendered layouts/_no_javascript.haml (16.4ms)
Rendered layouts/_facebook_sdk.haml (2.3ms)
  [1m[36mSQL (2.0ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.4ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (3.5ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (6.3ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (3.6ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.7ms)[0m  SELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'bTFw-gDdur4Oaa3a6HdQnY')) AND participations.person_id = 'bTFw-gDdur4Oaa3a6HdQnY')
Rendered layouts/_logged_in_messages_icon.haml (857.9ms)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.5ms)[0m  SELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'bTFw-gDdur4Oaa3a6HdQnY')
Rendered layouts/_logged_in_notifications_icon.haml (14.3ms)
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.8ms)[0m  SELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'bTFw-gDdur4Oaa3a6HdQnY') AND (acceptance is null)
Rendered layouts/_logged_in_swap_offers_icon.haml (18.3ms)
  [1m[36mCommunityMembership Load (0.6ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."community_id" = 1 AND ("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY') LIMIT 1[0m
Rendered layouts/_logged_in.haml (905.8ms)
Rendered layouts/_notifications.haml (5.1ms)
  [1m[35mLocation Load (0.5ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'bTFw-gDdur4Oaa3a6HdQnY' AND (location_type = 'person')) LIMIT 1
Rendered layouts/_display_popup.haml (9.7ms)
Rendered invitations/new.html.haml within layouts/application (1025.3ms)
Completed 200 OK in 1651ms (Views: 1000.1ms | ActiveRecord: 83.6ms | Sphinx: 0.0ms)


Started GET "/en/homepage" for 127.0.0.1 at 2013-02-12 18:48:08 +0530
  Processing by HomepageController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mPK and serial sequence (7.0ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (3.6ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (1.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (0.7ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (5.7ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (3.6ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.5ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (1.6ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (0.6ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'bTFw-gDdur4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.2ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mSQL (1.5ms)[0m  [1mSELECT 1 FROM "people" INNER JOIN "community_memberships" ON "people".id = "community_memberships".person_id WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' AND (("community_memberships".community_id = 1)) LIMIT 1[0m
  [1m[35mSQL (1.1ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (1.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.3ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (3.5ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (3.1ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (3.8ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.7ms)[0m  SELECT "communities".* FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY'))
~~~~~~~~~~~~~~~not request.xhr~~~~~~~~~
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"news_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.8ms)[0m  SELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 1)
  [1m[36mCommunity Load (0.9ms)[0m  [1mSELECT "communities".* FROM "communities"[0m
  [1m[35mSQL (1.0ms)[0m  SELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 1) LIMIT 2
  [1m[36mSQL (2.3ms)[0m  [1mSELECT COUNT(*) FROM "listings" WHERE "listings"."listing_type" = 'offer' AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')
 ) AND (open = '1' AND (valid_until IS NULL OR valid_until > '2013-02-12 13:18:09'))[0m
  [1m[35mListing Load (3.3ms)[0m  SELECT "listings".* FROM "listings" WHERE "listings"."listing_type" = 'offer' AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')
 ) AND (open = '1' AND (valid_until IS NULL OR valid_until > '2013-02-12 13:18:09')) ORDER BY listings.created_at DESC LIMIT 3 OFFSET 0
  [1m[36mListingImage Load (1.1ms)[0m  [1mSELECT "listing_images".* FROM "listing_images" WHERE ("listing_images".listing_id IN (4,3,1))[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"diet_listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.8ms)[0m  SELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 4)
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"comments"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 4)
  [1m[36mPerson Load (1.6ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bmEhbODeyr4Oap3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  SELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 3)
  [1m[36mSQL (0.7ms)[0m  [1mSELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 3)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mSELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 1)[0m
  [1m[35mSQL (0.5ms)[0m  SELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 1)
Rendered homepage/_recent_listing.haml (55.9ms)
Rendered common/_staples.haml (2.3ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'bTFw-gDdur4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
Rendered homepage/_user_communities.haml (5.4ms)
Rendered common/_staples.haml (2.3ms)
  [1m[35mLocation Load (1.1ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'bTFw-gDdur4Oaa3a6HdQnY' AND (location_type = 'person')) LIMIT 1
Rendered common/_staples.haml (2.3ms)
Rendered homepage/_profile_info_empty_notification.haml (3.5ms)
Rendered common/_staples.haml (2.2ms)
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"event_feed_events"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.0ms)[0m  SELECT COUNT(*) FROM "event_feed_events" WHERE ("event_feed_events".community_id = 1)
Rendered common/_staples.haml (2.3ms)
  [1m[36mEventFeedEvent Load (1.4ms)[0m  [1mSELECT "event_feed_events".* FROM "event_feed_events" WHERE ("event_feed_events".community_id = 1) ORDER BY id DESC LIMIT 5[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bmEhbODeyr4Oap3a6HdQnY' LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
Rendered event_feed_events/_join.haml (10.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1
Rendered event_feed_events/_login.haml (4.2ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bmEhbODeyr4Oap3a6HdQnY' LIMIT 1[0m
Rendered event_feed_events/_login.haml (3.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bmEhbODeyr4Oap3a6HdQnY' LIMIT 1
Rendered event_feed_events/_login.haml (4.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1[0m
Rendered event_feed_events/_login.haml (4.4ms)
Rendered homepage/_event_feed_event.haml (86.9ms)
Rendered homepage/_event_feed.haml (93.5ms)
Rendered common/_staples.haml (2.1ms)
Rendered common/_staples.haml (2.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 1) LIMIT 2
Rendered homepage/_news_items.haml (6.8ms)
Rendered common/_staples.haml (3.4ms)
  [1m[36mSQL (2.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"polls"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPoll Load (1.0ms)[0m  SELECT "polls".* FROM "polls" WHERE "polls"."active" = 't' AND ("polls".community_id = 1) LIMIT 1
Rendered layouts/_kissmetrics.haml (3.4ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (2.6ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.5ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (11.4ms)
Rendered communities/default/logo/logo.haml (3.1ms)
Rendered layouts/_no_javascript.haml (20.4ms)
Rendered layouts/_facebook_sdk.haml (2.5ms)
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.8ms)[0m  [1mSELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'bTFw-gDdur4Oaa3a6HdQnY')) AND participations.person_id = 'bTFw-gDdur4Oaa3a6HdQnY')[0m
Rendered layouts/_logged_in_messages_icon.haml (15.7ms)
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'bTFw-gDdur4Oaa3a6HdQnY')[0m
Rendered layouts/_logged_in_notifications_icon.haml (10.6ms)
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.0ms)[0m  [1mSELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'bTFw-gDdur4Oaa3a6HdQnY') AND (acceptance is null)[0m
Rendered layouts/_logged_in_swap_offers_icon.haml (12.3ms)
  [1m[35mCommunityMembership Load (1.7ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."community_id" = 1 AND ("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY') LIMIT 1
Rendered layouts/_logged_in.haml (55.6ms)
Rendered layouts/_notifications.haml (6.0ms)
Rendered layouts/_display_popup.haml (7.0ms)
Rendered homepage/index.haml within layouts/application (597.8ms)
Completed 200 OK in 1783ms (Views: 560.8ms | ActiveRecord: 106.9ms | Sphinx: 0.0ms)


Started GET "/en/people/bTFw-gDdur4Oaa3a6HdQnY/invitations/new" for 127.0.0.1 at 2013-02-12 18:48:13 +0530
  Processing by InvitationsController#new as HTML
  Parameters: {"locale"=>"en", "person_id"=>"bTFw-gDdur4Oaa3a6HdQnY"}
  [1m[36mPK and serial sequence (6.4ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (3.5ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (1.5ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (5.5ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (1.4ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (1.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (0.6ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (1.4ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (0.9ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'bTFw-gDdur4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.0ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"invitations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
Rendered layouts/_kissmetrics.haml (3.0ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.8ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.1ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (10.3ms)
Rendered communities/default/logo/logo.haml (2.0ms)
Rendered layouts/_no_javascript.haml (15.1ms)
Rendered layouts/_facebook_sdk.haml (2.2ms)
  [1m[35mSQL (0.9ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (0.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (5.3ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (1.4ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (2.5ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (1.5ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.7ms)[0m  [1mSELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'bTFw-gDdur4Oaa3a6HdQnY')) AND participations.person_id = 'bTFw-gDdur4Oaa3a6HdQnY')[0m
Rendered layouts/_logged_in_messages_icon.haml (852.8ms)
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'bTFw-gDdur4Oaa3a6HdQnY')[0m
Rendered layouts/_logged_in_notifications_icon.haml (10.7ms)
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.8ms)[0m  [1mSELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'bTFw-gDdur4Oaa3a6HdQnY') AND (acceptance is null)[0m
Rendered layouts/_logged_in_swap_offers_icon.haml (10.7ms)
  [1m[35mCommunityMembership Load (1.1ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."community_id" = 1 AND ("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY') LIMIT 1
Rendered layouts/_logged_in.haml (889.4ms)
Rendered layouts/_notifications.haml (5.9ms)
  [1m[36mLocation Load (1.1ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'bTFw-gDdur4Oaa3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
Rendered layouts/_display_popup.haml (10.6ms)
Rendered invitations/new.html.haml within layouts/application (1008.6ms)
Completed 200 OK in 1620ms (Views: 987.6ms | ActiveRecord: 63.2ms | Sphinx: 0.0ms)


Started GET "/en/people/bTFw-gDdur4Oaa3a6HdQnY/invitations/new?complement=true" for 127.0.0.1 at 2013-02-12 18:48:20 +0530
  Processing by InvitationsController#new as HTML
  Parameters: {"complement"=>"true", "locale"=>"en", "person_id"=>"bTFw-gDdur4Oaa3a6HdQnY"}
  [1m[35mPK and serial sequence (6.4ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (3.4ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.3ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.4ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (3.5ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.3ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.5ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (1.1ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'bTFw-gDdur4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (1.0ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"invitations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
Rendered layouts/_kissmetrics.haml (3.2ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.7ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.0ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (9.9ms)
Rendered communities/default/logo/logo.haml (2.0ms)
Rendered layouts/_no_javascript.haml (15.0ms)
Rendered layouts/_facebook_sdk.haml (2.4ms)
  [1m[36mSQL (2.2ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (2.5ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (2.1ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (2.4ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (1.4ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.7ms)[0m  SELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'bTFw-gDdur4Oaa3a6HdQnY')) AND participations.person_id = 'bTFw-gDdur4Oaa3a6HdQnY')
Rendered layouts/_logged_in_messages_icon.haml (841.4ms)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'bTFw-gDdur4Oaa3a6HdQnY')
Rendered layouts/_logged_in_notifications_icon.haml (13.6ms)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.8ms)[0m  SELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'bTFw-gDdur4Oaa3a6HdQnY') AND (acceptance is null)
Rendered layouts/_logged_in_swap_offers_icon.haml (13.8ms)
  [1m[36mCommunityMembership Load (1.1ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."community_id" = 1 AND ("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY') LIMIT 1[0m
Rendered layouts/_logged_in.haml (885.6ms)
Rendered layouts/_notifications.haml (7.4ms)
  [1m[35mLocation Load (1.1ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'bTFw-gDdur4Oaa3a6HdQnY' AND (location_type = 'person')) LIMIT 1
Rendered layouts/_display_popup.haml (16.3ms)
Rendered invitations/new.html.haml within layouts/application (1088.8ms)
Completed 200 OK in 1635ms (Views: 1066.6ms | ActiveRecord: 69.9ms | Sphinx: 0.0ms)
  [1m[35mAREL (21.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:20:20.648570', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 5 and (locked_at is null or locked_at < '2013-02-12 09:20:20.648570') and (run_at <= '2013-02-12 13:20:20.648570'))
  [1m[36mCommunity Load (1.6ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1[0m
  [1m[35mSwapItem Load (0.9ms)[0m  SELECT "swap_items".* FROM "swap_items" WHERE "swap_items"."id" = 2 LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (1.0ms)[0m  UPDATE "delayed_jobs" SET "locked_at" = NULL, "locked_by" = NULL, "attempts" = 5, "run_at" = '2013-02-12 13:30:50.691918', "updated_at" = '2013-02-12 13:20:20.693310' WHERE "delayed_jobs"."id" = 5
  [1m[36mSQL (8.9ms)[0m  [1mCOMMIT[0m
  [1m[35mAREL (4.4ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:20:20.709494', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 6 and (locked_at is null or locked_at < '2013-02-12 09:20:20.709494') and (run_at <= '2013-02-12 13:20:20.709494'))
  [1m[36mCommunity Load (1.2ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1[0m
  [1m[35mSwapItem Load (0.8ms)[0m  SELECT "swap_items".* FROM "swap_items" WHERE "swap_items"."id" = 3 LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (1.0ms)[0m  UPDATE "delayed_jobs" SET "locked_at" = NULL, "locked_by" = NULL, "attempts" = 5, "run_at" = '2013-02-12 13:30:50.805146', "updated_at" = '2013-02-12 13:20:20.806386' WHERE "delayed_jobs"."id" = 6
  [1m[36mSQL (6.9ms)[0m  [1mCOMMIT[0m
  [1m[35mAREL (7.4ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:20:20.818242', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 7 and (locked_at is null or locked_at < '2013-02-12 09:20:20.818242') and (run_at <= '2013-02-12 13:20:20.818242'))
  [1m[36mCommunity Load (0.9ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1[0m
  [1m[35mSwapItem Load (0.9ms)[0m  SELECT "swap_items".* FROM "swap_items" WHERE "swap_items"."id" = 4 LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (1.2ms)[0m  UPDATE "delayed_jobs" SET "locked_at" = NULL, "locked_by" = NULL, "attempts" = 5, "run_at" = '2013-02-12 13:30:50.851049', "updated_at" = '2013-02-12 13:20:20.852456' WHERE "delayed_jobs"."id" = 7
  [1m[36mSQL (4.7ms)[0m  [1mCOMMIT[0m


Started POST "/en/people/bTFw-gDdur4Oaa3a6HdQnY/invitations" for 127.0.0.1 at 2013-02-12 18:53:01 +0530
  Processing by InvitationsController#create as JS
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"RJmvwMjQFWvaMzZiMzkHUJSPCqX4xPUC88lFSv9+cMM=", "invitation"=>{"email"=>"saraf.chaitanya@gmail.com", "name"=>"chaitanya", "community_id"=>"1", "inviter_id"=>"bTFw-gDdur4Oaa3a6HdQnY", "complement"=>"true"}, "commit"=>"Send Invitation", "locale"=>"en", "person_id"=>"bTFw-gDdur4Oaa3a6HdQnY"}
  [1m[36mPK and serial sequence (6.5ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (3.6ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.6ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (1.4ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.3ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (3.4ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.5ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (1.4ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (1.0ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'bTFw-gDdur4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.0ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mSQL (1.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"invitations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
Completed 500 Internal Server Error in 542ms

ActiveRecord::UnknownAttributeError (unknown attribute: complement):
  app/controllers/invitations_controller.rb:17:in `new'
  app/controllers/invitations_controller.rb:17:in `create'

Rendered /home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/actionpack-3.0.17/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.6ms)
Rendered /home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/actionpack-3.0.17/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (806.3ms)
Rendered /home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/actionpack-3.0.17/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (814.3ms)


Started GET "/en/people/bTFw-gDdur4Oaa3a6HdQnY/invitations/new" for 127.0.0.1 at 2013-02-12 18:56:07 +0530
  Processing by InvitationsController#new as HTML
  Parameters: {"locale"=>"en", "person_id"=>"bTFw-gDdur4Oaa3a6HdQnY"}
  [1m[35mPK and serial sequence (2.7ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (1.8ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (1.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.4ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.3ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (1.9ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.3ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.4ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (0.8ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'bTFw-gDdur4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (1.0ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"invitations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
Rendered layouts/_kissmetrics.haml (3.4ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.8ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.1ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (10.4ms)
Rendered communities/default/logo/logo.haml (2.1ms)
Rendered layouts/_no_javascript.haml (15.7ms)
Rendered layouts/_facebook_sdk.haml (2.4ms)
  [1m[36mSQL (1.9ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (3.5ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (6.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (2.1ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.9ms)[0m  SELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'bTFw-gDdur4Oaa3a6HdQnY')) AND participations.person_id = 'bTFw-gDdur4Oaa3a6HdQnY')
Rendered layouts/_logged_in_messages_icon.haml (802.1ms)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.3ms)[0m  SELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'bTFw-gDdur4Oaa3a6HdQnY')
Rendered layouts/_logged_in_notifications_icon.haml (91.0ms)
  [1m[36mSQL (1.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.6ms)[0m  SELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'bTFw-gDdur4Oaa3a6HdQnY') AND (acceptance is null)
Rendered layouts/_logged_in_swap_offers_icon.haml (9.6ms)
  [1m[36mCommunityMembership Load (1.0ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."community_id" = 1 AND ("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY') LIMIT 1[0m
Rendered layouts/_logged_in.haml (917.7ms)
Rendered layouts/_notifications.haml (4.7ms)
  [1m[35mLocation Load (1.1ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'bTFw-gDdur4Oaa3a6HdQnY' AND (location_type = 'person')) LIMIT 1
Rendered layouts/_display_popup.haml (10.5ms)
Rendered invitations/new.html.haml within layouts/application (1114.5ms)
Completed 200 OK in 1666ms (Views: 1083.4ms | ActiveRecord: 70.6ms | Sphinx: 0.0ms)


Started POST "/en/people/bTFw-gDdur4Oaa3a6HdQnY/invitations" for 127.0.0.1 at 2013-02-12 18:56:18 +0530
  Processing by InvitationsController#create as JS
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"RJmvwMjQFWvaMzZiMzkHUJSPCqX4xPUC88lFSv9+cMM=", "invitation"=>{"email"=>"saraf.chaitanya@gmail.com", "message"=>"test", "community_id"=>"1", "inviter_id"=>"bTFw-gDdur4Oaa3a6HdQnY"}, "commit"=>"Send Invitation", "locale"=>"en", "person_id"=>"bTFw-gDdur4Oaa3a6HdQnY"}
  [1m[36mPK and serial sequence (5.9ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (3.7ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (1.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.3ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (1.4ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (0.8ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (1.4ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (0.9ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'bTFw-gDdur4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.0ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mSQL (1.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"invitations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mSELECT 1 FROM "invitations" WHERE ("invitations"."code" = 'B8FF86') LIMIT 1[0m
  [1m[35mSQL (1.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"invitations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (2.6ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"invitations"'::regclass
[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "invitations" ("code", "community_id", "usages_left", "valid_until", "information", "created_at", "updated_at", "inviter_id", "message", "email", "name") VALUES ('B8FF86', 1, 1, NULL, NULL, '2013-02-12 13:26:19.692779', '2013-02-12 13:26:19.692779', 'bTFw-gDdur4Oaa3a6HdQnY', 'test', 'saraf.chaitanya@gmail.com', NULL) RETURNING "id"
  [1m[36mSQL (21.1ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (0.6ms)[0m  BEGIN
  [1m[36mSQL (1.8ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:InvitationCreatedJob
invitation_id: 2
host: !binary |-
 bHZoLm1l
', NULL, '2013-02-12 13:26:19.737657', NULL, NULL, NULL, '2013-02-12 13:26:19.737957', '2013-02-12 13:26:19.737957', NULL) RETURNING "id"[0m
  [1m[35mSQL (13.6ms)[0m  COMMIT
Rendered layouts/_notifications.haml (11.5ms)
Rendered invitations/create.js.erb (16.7ms)
Completed 200 OK in 734ms (Views: 40.8ms | ActiveRecord: 80.0ms | Sphinx: 0.0ms)
  [1m[35mAREL (26.4ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:26:21.185884', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 75 and (locked_at is null or locked_at < '2013-02-12 09:26:21.185884') and (run_at <= '2013-02-12 13:26:21.185884'))
  [1m[36mCommunity Load (1.2ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1[0m
  [1m[35mInvitation Load (1.2ms)[0m  SELECT "invitations".* FROM "invitations" WHERE "invitations"."id" = 2 LIMIT 1
  [1m[36mPerson Load (1.9ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mCommunity Load (1.4ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
Rendered person_mailer/invitation_to_kassi.html.haml within layouts/email (9.2ms)

Sent mail to saraf.chaitanya@gmail.com (4625ms)
Date: Tue, 12 Feb 2013 18:56:21 +0530
From: no-reply@realgoodfood.org
Reply-To: chaitanya.saraf1985@gmail.com
To: saraf.chaitanya@gmail.com
Message-ID: <511a42fd40100_4e23421701028453@chaitanya-laptop.mail>
Subject: chs has invited you to use the RealGoodFood web service of the pune
 city community.
Mime-Version: 1.0
Content-Type: text/html;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

<!DOCTYPE html>
<html lang='en-US' xml:lang='en-US' xmlns='http://www.w3.org/1999/xhtml'>
  <head></head>
  <body>
    <table border='0' cellpadding='0' cellspacing='0' style='width:550px; border-top:4px solid #223f05; font: 12px arial, sans-serif; margin: 0 auto;'>
      <tr>
        <td>
          <h1 style='font-size: 22px; margin:7px 0 12px 0; padding:0;'>
            RealGoodFood
          </h1>
          Hi!
          <br>
          <br>
          chs has invited you to use the RealGoodFood web service of the pune city community.
          <br>
          <br>
          RealGoodFood is a service where the members of the community can, for example, lend, swap and sell goods, share rides and help each other out in several ways.
          <br>
          <br>
          Here is a personal message from chs:
          <div style='margin: 15px 0; padding: 10px; background-color: #d1c9b4;'>
            test<br />
          </div>
          You can join RealGoodFood at
          <a href="http://lvh.me/">http://lvh.me/</a>
          <br>
          <br>
          Thanks,
          <br>
          The RealGoodFood Team
          <br>
          <br>
        </td>
      </tr>
    </table>
  </body>
</html>
  [1m[36mSQL (0.7ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (1.3ms)[0m  DELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 75
  [1m[36mSQL (9.3ms)[0m  [1mCOMMIT[0m
  [1m[35mAREL (21.1ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:30:51.192839', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 5 and (locked_at is null or locked_at < '2013-02-12 09:30:51.192839') and (run_at <= '2013-02-12 13:30:51.192839'))
  [1m[36mCommunity Load (2.0ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1[0m
  [1m[35mSwapItem Load (1.0ms)[0m  SELECT "swap_items".* FROM "swap_items" WHERE "swap_items"."id" = 2 LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (0.8ms)[0m  UPDATE "delayed_jobs" SET "locked_at" = NULL, "locked_by" = NULL, "attempts" = 6, "run_at" = '2013-02-12 13:52:32.234608', "updated_at" = '2013-02-12 13:30:51.237073' WHERE "delayed_jobs"."id" = 5
  [1m[36mSQL (8.0ms)[0m  [1mCOMMIT[0m
  [1m[35mAREL (7.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:30:51.252279', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 6 and (locked_at is null or locked_at < '2013-02-12 09:30:51.252279') and (run_at <= '2013-02-12 13:30:51.252279'))
  [1m[36mCommunity Load (1.2ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1[0m
  [1m[35mSwapItem Load (0.8ms)[0m  SELECT "swap_items".* FROM "swap_items" WHERE "swap_items"."id" = 3 LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (0.7ms)[0m  UPDATE "delayed_jobs" SET "locked_at" = NULL, "locked_by" = NULL, "attempts" = 6, "run_at" = '2013-02-12 13:52:32.278596', "updated_at" = '2013-02-12 13:30:51.280731' WHERE "delayed_jobs"."id" = 6
  [1m[36mSQL (9.0ms)[0m  [1mCOMMIT[0m
  [1m[35mAREL (6.5ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:30:51.296865', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 7 and (locked_at is null or locked_at < '2013-02-12 09:30:51.296865') and (run_at <= '2013-02-12 13:30:51.296865'))
  [1m[36mCommunity Load (1.3ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1[0m
  [1m[35mSwapItem Load (0.8ms)[0m  SELECT "swap_items".* FROM "swap_items" WHERE "swap_items"."id" = 4 LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (0.8ms)[0m  UPDATE "delayed_jobs" SET "locked_at" = NULL, "locked_by" = NULL, "attempts" = 6, "run_at" = '2013-02-12 13:52:32.317932', "updated_at" = '2013-02-12 13:30:51.320027' WHERE "delayed_jobs"."id" = 7
  [1m[36mSQL (3.2ms)[0m  [1mCOMMIT[0m


Started GET "/en/people/bTFw-gDdur4Oaa3a6HdQnY/invitations/new" for 127.0.0.1 at 2013-02-12 19:02:18 +0530
  Processing by InvitationsController#new as HTML
  Parameters: {"locale"=>"en", "person_id"=>"bTFw-gDdur4Oaa3a6HdQnY"}
  [1m[36mPK and serial sequence (2.7ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (3.3ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (1.3ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (5.7ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (1.4ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (1.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (0.6ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (1.4ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (1.0ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'bTFw-gDdur4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (0.6ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mSQL (1.6ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"invitations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
Rendered layouts/_kissmetrics.haml (3.1ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.7ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.2ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (10.6ms)
Rendered communities/default/logo/logo.haml (2.1ms)
Rendered layouts/_no_javascript.haml (16.0ms)
Rendered layouts/_facebook_sdk.haml (2.4ms)
  [1m[35mSQL (2.9ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (5.4ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (3.2ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (6.1ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (3.4ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.6ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.7ms)[0m  [1mSELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'bTFw-gDdur4Oaa3a6HdQnY')) AND participations.person_id = 'bTFw-gDdur4Oaa3a6HdQnY')[0m
Rendered layouts/_logged_in_messages_icon.haml (881.1ms)
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'bTFw-gDdur4Oaa3a6HdQnY')[0m
Rendered layouts/_logged_in_notifications_icon.haml (14.5ms)
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'bTFw-gDdur4Oaa3a6HdQnY') AND (acceptance is null)[0m
Rendered layouts/_logged_in_swap_offers_icon.haml (15.4ms)
  [1m[35mCommunityMembership Load (1.2ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."community_id" = 1 AND ("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY') LIMIT 1
Rendered layouts/_logged_in.haml (931.6ms)
Rendered layouts/_notifications.haml (7.4ms)
  [1m[36mLocation Load (1.1ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'bTFw-gDdur4Oaa3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
Rendered layouts/_display_popup.haml (11.1ms)
Rendered invitations/new.html.haml within layouts/application (1058.7ms)
Completed 200 OK in 1692ms (Views: 1105.3ms | ActiveRecord: 70.9ms | Sphinx: 0.0ms)


Started POST "/en/people/bTFw-gDdur4Oaa3a6HdQnY/invitations" for 127.0.0.1 at 2013-02-12 19:02:30 +0530
  Processing by InvitationsController#create as JS
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"RJmvwMjQFWvaMzZiMzkHUJSPCqX4xPUC88lFSv9+cMM=", "invitation"=>{"email"=>"saraf.chaitanya@gmail.com", "message"=>"test again", "community_id"=>"1", "inviter_id"=>"bTFw-gDdur4Oaa3a6HdQnY"}, "commit"=>"Send Invitation", "locale"=>"en", "person_id"=>"bTFw-gDdur4Oaa3a6HdQnY"}
  [1m[35mPK and serial sequence (4.7ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (1.5ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (3.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.4ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.7ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (2.7ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.2ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.4ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (1.0ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'bTFw-gDdur4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (1.0ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mSQL (1.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"invitations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.6ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  SELECT 1 FROM "invitations" WHERE ("invitations"."code" = 'RCLW7F') LIMIT 1
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"invitations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (5.8ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"invitations"'::regclass
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO "invitations" ("code", "community_id", "usages_left", "valid_until", "information", "created_at", "updated_at", "inviter_id", "message", "email", "name") VALUES ('RCLW7F', 1, 1, NULL, NULL, '2013-02-12 13:32:31.616199', '2013-02-12 13:32:31.616199', 'bTFw-gDdur4Oaa3a6HdQnY', 'test again', 'saraf.chaitanya@gmail.com', NULL) RETURNING "id"[0m
  [1m[35mSQL (17.8ms)[0m  COMMIT
  [1m[36mSQL (0.5ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:InvitationCreatedJob
invitation_id: 3
host: !binary |-
 bHZoLm1l
', NULL, '2013-02-12 13:32:31.655874', NULL, NULL, NULL, '2013-02-12 13:32:31.655992', '2013-02-12 13:32:31.655992', NULL) RETURNING "id"
  [1m[36mSQL (9.1ms)[0m  [1mCOMMIT[0m
Rendered layouts/_notifications.haml (87.6ms)
Rendered invitations/create.js.erb (92.9ms)
Completed 200 OK in 692ms (Views: 97.4ms | ActiveRecord: 74.3ms | Sphinx: 0.0ms)
  [1m[35mAREL (13.1ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:32:36.420342', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 76 and (locked_at is null or locked_at < '2013-02-12 09:32:36.420342') and (run_at <= '2013-02-12 13:32:36.420342'))
  [1m[36mCommunity Load (1.3ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1[0m
  [1m[35mInvitation Load (0.8ms)[0m  SELECT "invitations".* FROM "invitations" WHERE "invitations"."id" = 3 LIMIT 1
  [1m[36mPerson Load (2.2ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mCommunity Load (0.8ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
Rendered person_mailer/invitation_to_kassi.html.haml within layouts/email (10.4ms)

Sent mail to saraf.chaitanya@gmail.com (4358ms)
Date: Tue, 12 Feb 2013 19:02:36 +0530
From: no-reply@realgoodfood.org
Reply-To: chaitanya.saraf1985@gmail.com
To: saraf.chaitanya@gmail.com
Message-ID: <511a447485a51_4e234217010285c4@chaitanya-laptop.mail>
Subject: chs has invited you to use the RealGoodFood web service of the pune
 city community.
Mime-Version: 1.0
Content-Type: text/html;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

<!DOCTYPE html>
<html lang='en-US' xml:lang='en-US' xmlns='http://www.w3.org/1999/xhtml'>
  <head></head>
  <body>
    <table border='0' cellpadding='0' cellspacing='0' style='width:550px; border-top:4px solid #223f05; font: 12px arial, sans-serif; margin: 0 auto;'>
      <tr>
        <td>
          <h1 style='font-size: 22px; margin:7px 0 12px 0; padding:0;'>
            RealGoodFood
          </h1>
          Hi!
          <br>
          <br>
          chs has invited you to use the RealGoodFood web service of the pune city community.
          <br>
          <br>
          RealGoodFood is a service where the members of the community can, for example, lend, swap and sell goods, share rides and help each other out in several ways.
          <br>
          <br>
          Here is a personal message from chs:
          <div style='margin: 15px 0; padding: 10px; background-color: #d1c9b4;'>
            test again<br />
          </div>
          You can join RealGoodFood at
          <a href="http://lvh.me/">http://lvh.me/</a>
          <br>
          <br>
          Thanks,
          <br>
          The RealGoodFood Team
          <br>
          <br>
        </td>
      </tr>
    </table>
  </body>
</html>
  [1m[36mSQL (0.6ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (1.0ms)[0m  DELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 76
  [1m[36mSQL (13.3ms)[0m  [1mCOMMIT[0m


Started GET "/en/people/bTFw-gDdur4Oaa3a6HdQnY/invitations/new?complement=true" for 127.0.0.1 at 2013-02-12 19:04:24 +0530
  Processing by InvitationsController#new as HTML
  Parameters: {"complement"=>"true", "locale"=>"en", "person_id"=>"bTFw-gDdur4Oaa3a6HdQnY"}
  [1m[35mPK and serial sequence (4.8ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (1.6ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (1.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (0.6ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (1.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (2.4ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (1.5ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (1.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (0.7ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.3ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (0.6ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'bTFw-gDdur4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (0.5ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"invitations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
Rendered layouts/_kissmetrics.haml (3.0ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.5ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.7ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (11.1ms)
Rendered communities/default/logo/logo.haml (2.1ms)
Rendered layouts/_no_javascript.haml (15.2ms)
Rendered layouts/_facebook_sdk.haml (2.3ms)
  [1m[36mSQL (2.0ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (3.3ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (6.1ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (3.5ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.7ms)[0m  SELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'bTFw-gDdur4Oaa3a6HdQnY')) AND participations.person_id = 'bTFw-gDdur4Oaa3a6HdQnY')
Rendered layouts/_logged_in_messages_icon.haml (885.6ms)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'bTFw-gDdur4Oaa3a6HdQnY')
Rendered layouts/_logged_in_notifications_icon.haml (14.5ms)
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'bTFw-gDdur4Oaa3a6HdQnY') AND (acceptance is null)
Rendered layouts/_logged_in_swap_offers_icon.haml (15.5ms)
  [1m[36mCommunityMembership Load (1.1ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."community_id" = 1 AND ("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY') LIMIT 1[0m
Rendered layouts/_logged_in.haml (934.5ms)
Rendered layouts/_notifications.haml (7.5ms)
  [1m[35mLocation Load (1.1ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'bTFw-gDdur4Oaa3a6HdQnY' AND (location_type = 'person')) LIMIT 1
Rendered layouts/_display_popup.haml (11.9ms)
Rendered invitations/new.html.haml within layouts/application (1058.6ms)
Completed 200 OK in 1670ms (Views: 1025.7ms | ActiveRecord: 63.6ms | Sphinx: 0.0ms)


Started POST "/en/people/bTFw-gDdur4Oaa3a6HdQnY/invitations" for 127.0.0.1 at 2013-02-12 19:04:35 +0530
  Processing by InvitationsController#create as JS
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"RJmvwMjQFWvaMzZiMzkHUJSPCqX4xPUC88lFSv9+cMM=", "invitation"=>{"email"=>"saraf.chaitanya@gmail.com", "name"=>"chaitanya", "community_id"=>"1", "inviter_id"=>"bTFw-gDdur4Oaa3a6HdQnY", "complement"=>"true"}, "commit"=>"Send Invitation", "locale"=>"en", "person_id"=>"bTFw-gDdur4Oaa3a6HdQnY"}
  [1m[36mPK and serial sequence (7.1ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (3.6ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.6ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (1.5ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (5.3ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (1.4ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.4ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (1.4ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (0.9ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'bTFw-gDdur4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.0ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"invitations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
WARNING: Can't mass-assign protected attributes: complement
  [1m[35mSQL (0.6ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mSELECT 1 FROM "invitations" WHERE ("invitations"."code" = 'UTEKNN') LIMIT 1[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"invitations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (2.6ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"invitations"'::regclass
[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "invitations" ("code", "community_id", "usages_left", "valid_until", "information", "created_at", "updated_at", "inviter_id", "message", "email", "name") VALUES ('UTEKNN', 1, 1, NULL, NULL, '2013-02-12 13:34:36.330759', '2013-02-12 13:34:36.330759', 'bTFw-gDdur4Oaa3a6HdQnY', NULL, 'saraf.chaitanya@gmail.com', 'chaitanya') RETURNING "id"
  [1m[36mSQL (21.8ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (0.6ms)[0m  BEGIN
  [1m[36mSQL (1.3ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:InvitationCreatedJob
invitation_id: 4
host: !binary |-
 bHZoLm1l
', NULL, '2013-02-12 13:34:36.376502', NULL, NULL, NULL, '2013-02-12 13:34:36.376799', '2013-02-12 13:34:36.376799', NULL) RETURNING "id"[0m
  [1m[35mSQL (13.8ms)[0m  COMMIT
Rendered layouts/_notifications.haml (5.5ms)
Rendered invitations/create.js.erb (10.3ms)
Completed 200 OK in 715ms (Views: 14.7ms | ActiveRecord: 82.3ms | Sphinx: 0.0ms)
  [1m[35mAREL (26.5ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:34:41.035174', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 77 and (locked_at is null or locked_at < '2013-02-12 09:34:41.035174') and (run_at <= '2013-02-12 13:34:41.035174'))
  [1m[36mCommunity Load (1.3ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1[0m
  [1m[35mInvitation Load (1.0ms)[0m  SELECT "invitations".* FROM "invitations" WHERE "invitations"."id" = 4 LIMIT 1
  [1m[36mPerson Load (1.3ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mCommunity Load (1.1ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
Rendered person_mailer/invitation_to_kassi.html.haml within layouts/email (9.0ms)

Sent mail to saraf.chaitanya@gmail.com (4296ms)
Date: Tue, 12 Feb 2013 19:04:41 +0530
From: no-reply@realgoodfood.org
Reply-To: chaitanya.saraf1985@gmail.com
To: saraf.chaitanya@gmail.com
Message-ID: <511a44f11a620_4e23421701028682@chaitanya-laptop.mail>
Subject: chs has invited you to use the RealGoodFood web service of the pune
 city community.
Mime-Version: 1.0
Content-Type: text/html;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

<!DOCTYPE html>
<html lang='en-US' xml:lang='en-US' xmlns='http://www.w3.org/1999/xhtml'>
  <head></head>
  <body>
    <table border='0' cellpadding='0' cellspacing='0' style='width:550px; border-top:4px solid #223f05; font: 12px arial, sans-serif; margin: 0 auto;'>
      <tr>
        <td>
          <h1 style='font-size: 22px; margin:7px 0 12px 0; padding:0;'>
            RealGoodFood
          </h1>
          Hi!
          <br>
          <br>
          chs has invited you to use the RealGoodFood web service of the pune city community.
          <br>
          <br>
          RealGoodFood is a service where the members of the community can, for example, lend, swap and sell goods, share rides and help each other out in several ways.
          You can join RealGoodFood at
          <a href="http://lvh.me/">http://lvh.me/</a>
          <br>
          <br>
          Thanks,
          <br>
          The RealGoodFood Team
          <br>
          <br>
        </td>
      </tr>
    </table>
  </body>
</html>
  [1m[36mSQL (0.6ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (0.9ms)[0m  DELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 77
  [1m[36mSQL (21.2ms)[0m  [1mCOMMIT[0m


Started GET "/en/people/bTFw-gDdur4Oaa3a6HdQnY/invitations/new?complement=true" for 127.0.0.1 at 2013-02-12 19:07:59 +0530
  Processing by InvitationsController#new as HTML
  Parameters: {"complement"=>"true", "locale"=>"en", "person_id"=>"bTFw-gDdur4Oaa3a6HdQnY"}
  [1m[36mPK and serial sequence (6.3ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (3.7ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (1.6ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (2.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (3.8ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (2.2ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (0.5ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (0.4ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'bTFw-gDdur4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (0.5ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mSQL (2.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"invitations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
Rendered layouts/_kissmetrics.haml (3.0ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.8ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.2ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (10.8ms)
Rendered communities/default/logo/logo.haml (2.1ms)
Rendered layouts/_no_javascript.haml (15.4ms)
Rendered layouts/_facebook_sdk.haml (2.2ms)
  [1m[35mSQL (2.3ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (3.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (9.5ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.8ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (2.5ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (1.6ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.8ms)[0m  [1mSELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'bTFw-gDdur4Oaa3a6HdQnY')) AND participations.person_id = 'bTFw-gDdur4Oaa3a6HdQnY')[0m
Rendered layouts/_logged_in_messages_icon.haml (839.4ms)
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'bTFw-gDdur4Oaa3a6HdQnY')[0m
Rendered layouts/_logged_in_notifications_icon.haml (13.4ms)
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.8ms)[0m  [1mSELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'bTFw-gDdur4Oaa3a6HdQnY') AND (acceptance is null)[0m
Rendered layouts/_logged_in_swap_offers_icon.haml (13.2ms)
  [1m[35mCommunityMembership Load (1.1ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."community_id" = 1 AND ("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY') LIMIT 1
Rendered layouts/_logged_in.haml (884.7ms)
Rendered layouts/_notifications.haml (7.2ms)
  [1m[36mLocation Load (1.3ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'bTFw-gDdur4Oaa3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
Rendered layouts/_display_popup.haml (11.1ms)
Rendered invitations/new.html.haml within layouts/application (1091.9ms)
Completed 200 OK in 1743ms (Views: 1060.2ms | ActiveRecord: 72.6ms | Sphinx: 0.0ms)


Started GET "/en/people/bTFw-gDdur4Oaa3a6HdQnY/invitations/new" for 127.0.0.1 at 2013-02-12 19:08:33 +0530
  Processing by InvitationsController#new as HTML
  Parameters: {"locale"=>"en", "person_id"=>"bTFw-gDdur4Oaa3a6HdQnY"}
  [1m[35mPK and serial sequence (8.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (1.8ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (2.1ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (1.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (2.4ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (1.3ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.2ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (0.9ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'bTFw-gDdur4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (1.0ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mSQL (0.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"invitations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
Rendered layouts/_kissmetrics.haml (5.5ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.7ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.1ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (10.5ms)
Rendered communities/default/logo/logo.haml (2.1ms)
Rendered layouts/_no_javascript.haml (17.1ms)
Rendered layouts/_facebook_sdk.haml (3.6ms)
  [1m[36mSQL (1.9ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (2.0ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (3.7ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (2.1ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (0.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (3.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.8ms)[0m  SELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'bTFw-gDdur4Oaa3a6HdQnY')) AND participations.person_id = 'bTFw-gDdur4Oaa3a6HdQnY')
Rendered layouts/_logged_in_messages_icon.haml (871.7ms)
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.0ms)[0m  SELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'bTFw-gDdur4Oaa3a6HdQnY')
Rendered layouts/_logged_in_notifications_icon.haml (14.1ms)
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.0ms)[0m  SELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'bTFw-gDdur4Oaa3a6HdQnY') AND (acceptance is null)
Rendered layouts/_logged_in_swap_offers_icon.haml (15.1ms)
  [1m[36mCommunityMembership Load (1.2ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."community_id" = 1 AND ("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY') LIMIT 1[0m
Rendered layouts/_logged_in.haml (920.6ms)
Rendered layouts/_notifications.haml (8.8ms)
  [1m[35mLocation Load (1.2ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'bTFw-gDdur4Oaa3a6HdQnY' AND (location_type = 'person')) LIMIT 1
Rendered layouts/_display_popup.haml (10.7ms)
Rendered invitations/new.html.haml within layouts/application (1055.9ms)
Completed 200 OK in 1713ms (Views: 1027.7ms | ActiveRecord: 67.1ms | Sphinx: 0.0ms)


Started GET "/en/people/bTFw-gDdur4Oaa3a6HdQnY/invitations/new" for 127.0.0.1 at 2013-02-12 19:19:45 +0530
  Processing by InvitationsController#new as HTML
  Parameters: {"locale"=>"en", "person_id"=>"bTFw-gDdur4Oaa3a6HdQnY"}
  [1m[36mPK and serial sequence (4.9ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.0ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (1.6ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (2.6ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (3.1ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (0.6ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (0.4ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'bTFw-gDdur4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.0ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"invitations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
Rendered layouts/_kissmetrics.haml (3.4ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.6ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.2ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (10.8ms)
Rendered communities/default/logo/logo.haml (2.2ms)
Rendered layouts/_no_javascript.haml (16.0ms)
Rendered layouts/_facebook_sdk.haml (2.3ms)
  [1m[35mSQL (2.1ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (5.7ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (3.5ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (5.6ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (3.6ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.7ms)[0m  [1mSELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'bTFw-gDdur4Oaa3a6HdQnY')) AND participations.person_id = 'bTFw-gDdur4Oaa3a6HdQnY')[0m
Rendered layouts/_logged_in_messages_icon.haml (899.8ms)
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'bTFw-gDdur4Oaa3a6HdQnY')[0m
Rendered layouts/_logged_in_notifications_icon.haml (14.8ms)
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'bTFw-gDdur4Oaa3a6HdQnY') AND (acceptance is null)[0m
Rendered layouts/_logged_in_swap_offers_icon.haml (18.0ms)
  [1m[35mCommunityMembership Load (1.2ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."community_id" = 1 AND ("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY') LIMIT 1
Rendered layouts/_logged_in.haml (952.7ms)
Rendered layouts/_notifications.haml (8.0ms)
  [1m[36mLocation Load (1.2ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'bTFw-gDdur4Oaa3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
Rendered layouts/_display_popup.haml (10.7ms)
Rendered invitations/new.html.haml within layouts/application (1162.7ms)
Completed 200 OK in 1740ms (Views: 1131.3ms | ActiveRecord: 70.1ms | Sphinx: 0.0ms)


Started POST "/en/people/bTFw-gDdur4Oaa3a6HdQnY/invitations" for 127.0.0.1 at 2013-02-12 19:20:33 +0530
  Processing by InvitationsController#create as JS
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"RJmvwMjQFWvaMzZiMzkHUJSPCqX4xPUC88lFSv9+cMM=", "invitation"=>{"email"=>"saraf.chaitanya@gmail.com", "message"=>"test", "community_id"=>"1", "inviter_id"=>"bTFw-gDdur4Oaa3a6HdQnY"}, "commit"=>"Send Invitation", "locale"=>"en", "person_id"=>"bTFw-gDdur4Oaa3a6HdQnY"}
  [1m[35mPK and serial sequence (6.3ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (3.4ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.4ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (3.7ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.6ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.3ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.4ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (0.9ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'bTFw-gDdur4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (0.9ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"invitations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.6ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  SELECT 1 FROM "invitations" WHERE ("invitations"."code" = 'FONNKU') LIMIT 1
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"invitations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.1ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"invitations"'::regclass
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO "invitations" ("code", "community_id", "usages_left", "valid_until", "information", "created_at", "updated_at", "inviter_id", "message", "email", "name") VALUES ('FONNKU', 1, 1, NULL, NULL, '2013-02-12 13:50:34.074895', '2013-02-12 13:50:34.074895', 'bTFw-gDdur4Oaa3a6HdQnY', 'test', 'saraf.chaitanya@gmail.com', NULL) RETURNING "id"[0m
  [1m[35mSQL (30.4ms)[0m  COMMIT
  [1m[36mSQL (0.6ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.5ms)[0m  INSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:InvitationCreatedJob
invitation_id: 5
host: !binary |-
 bHZoLm1l
', NULL, '2013-02-12 13:50:34.130294', NULL, NULL, NULL, '2013-02-12 13:50:34.130609', '2013-02-12 13:50:34.130609', NULL) RETURNING "id"
  [1m[36mSQL (14.6ms)[0m  [1mCOMMIT[0m
Rendered layouts/_notifications.haml (94.1ms)
Rendered invitations/create.js.erb (99.2ms)
Completed 200 OK in 738ms (Views: 103.8ms | ActiveRecord: 98.8ms | Sphinx: 0.0ms)
  [1m[35mAREL (14.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:50:36.212077', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 78 and (locked_at is null or locked_at < '2013-02-12 09:50:36.212077') and (run_at <= '2013-02-12 13:50:36.212077'))
  [1m[36mCommunity Load (1.8ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1[0m
  [1m[35mInvitation Load (1.3ms)[0m  SELECT "invitations".* FROM "invitations" WHERE "invitations"."id" = 5 LIMIT 1
  [1m[36mPerson Load (2.4ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mCommunity Load (1.8ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
Rendered person_mailer/invitation_to_kassi.html.haml within layouts/email (10.3ms)

Sent mail to saraf.chaitanya@gmail.com (4515ms)
Date: Tue, 12 Feb 2013 19:20:36 +0530
From: no-reply@realgoodfood.org
Reply-To: chaitanya.saraf1985@gmail.com
To: saraf.chaitanya@gmail.com
Message-ID: <511a48ac56007_4e234217010287c0@chaitanya-laptop.mail>
Subject: chs has invited you to use the RealGoodFood web service of the pune
 city community.
Mime-Version: 1.0
Content-Type: text/html;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

<!DOCTYPE html>
<html lang='en-US' xml:lang='en-US' xmlns='http://www.w3.org/1999/xhtml'>
  <head></head>
  <body>
    <table border='0' cellpadding='0' cellspacing='0' style='width:550px; border-top:4px solid #223f05; font: 12px arial, sans-serif; margin: 0 auto;'>
      <tr>
        <td>
          <h1 style='font-size: 22px; margin:7px 0 12px 0; padding:0;'>
            RealGoodFood
          </h1>
          Hi!
          <br>
          <br>
          chs has invited you to use the RealGoodFood web service of the pune city community.
          <br>
          <br>
          RealGoodFood is a service where the members of the community can, for example, lend, swap and sell goods, share rides and help each other out in several ways.
          <br>
          <br>
          Here is a personal message from chs:
          <div style='margin: 15px 0; padding: 10px; background-color: #d1c9b4;'>
            test<br />
          </div>
          You can join RealGoodFood at
          <a href="http://lvh.me/">http://lvh.me/</a>
          <br>
          <br>
          Thanks,
          <br>
          The RealGoodFood Team
          <br>
          <br>
        </td>
      </tr>
    </table>
  </body>
</html>
  [1m[36mSQL (0.6ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (0.9ms)[0m  DELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 78
  [1m[36mSQL (23.5ms)[0m  [1mCOMMIT[0m


Started GET "/en/people/bTFw-gDdur4Oaa3a6HdQnY/invitations/new?complement=true" for 127.0.0.1 at 2013-02-12 19:21:01 +0530
  Processing by InvitationsController#new as HTML
  Parameters: {"complement"=>"true", "locale"=>"en", "person_id"=>"bTFw-gDdur4Oaa3a6HdQnY"}
  [1m[35mPK and serial sequence (6.6ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (3.6ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.3ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (5.3ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (2.9ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (0.9ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.4ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (1.0ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'bTFw-gDdur4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (1.0ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mSQL (1.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"invitations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
Rendered layouts/_kissmetrics.haml (3.7ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.7ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.1ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (10.2ms)
Rendered communities/default/logo/logo.haml (2.6ms)
Rendered layouts/_no_javascript.haml (16.5ms)
Rendered layouts/_facebook_sdk.haml (2.4ms)
  [1m[36mSQL (2.0ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.1ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (1.4ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (2.9ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (1.5ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.7ms)[0m  SELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'bTFw-gDdur4Oaa3a6HdQnY')) AND participations.person_id = 'bTFw-gDdur4Oaa3a6HdQnY')
Rendered layouts/_logged_in_messages_icon.haml (881.1ms)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'bTFw-gDdur4Oaa3a6HdQnY')
Rendered layouts/_logged_in_notifications_icon.haml (12.3ms)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'bTFw-gDdur4Oaa3a6HdQnY') AND (acceptance is null)
Rendered layouts/_logged_in_swap_offers_icon.haml (13.5ms)
  [1m[36mCommunityMembership Load (1.1ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."community_id" = 1 AND ("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY') LIMIT 1[0m
Rendered layouts/_logged_in.haml (924.8ms)
Rendered layouts/_notifications.haml (8.2ms)
  [1m[35mLocation Load (1.1ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'bTFw-gDdur4Oaa3a6HdQnY' AND (location_type = 'person')) LIMIT 1
Rendered layouts/_display_popup.haml (12.6ms)
Rendered invitations/new.html.haml within layouts/application (1052.4ms)
Completed 200 OK in 1690ms (Views: 1026.9ms | ActiveRecord: 69.3ms | Sphinx: 0.0ms)


Started POST "/en/people/bTFw-gDdur4Oaa3a6HdQnY/invitations" for 127.0.0.1 at 2013-02-12 19:21:32 +0530
  Processing by InvitationsController#create as JS
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"RJmvwMjQFWvaMzZiMzkHUJSPCqX4xPUC88lFSv9+cMM=", "invitation"=>{"email"=>"saraf.chaitanya@gmail.com", "name"=>"chaitanya", "community_id"=>"1", "inviter_id"=>"bTFw-gDdur4Oaa3a6HdQnY", "complement"=>"true"}, "commit"=>"Send Invitation", "locale"=>"en", "person_id"=>"bTFw-gDdur4Oaa3a6HdQnY"}
  [1m[36mPK and serial sequence (6.5ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (3.7ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (1.4ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (7.9ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (3.7ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (3.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (3.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.5ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (1.5ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (1.1ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'bTFw-gDdur4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.3ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"invitations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
WARNING: Can't mass-assign protected attributes: complement
  [1m[35mSQL (0.7ms)[0m  BEGIN
  [1m[36mSQL (0.9ms)[0m  [1mSELECT 1 FROM "invitations" WHERE ("invitations"."code" = '8W6KVZ') LIMIT 1[0m
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"invitations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (5.3ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"invitations"'::regclass
[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "invitations" ("code", "community_id", "usages_left", "valid_until", "information", "created_at", "updated_at", "inviter_id", "message", "email", "name") VALUES ('8W6KVZ', 1, 1, NULL, NULL, '2013-02-12 13:51:33.614578', '2013-02-12 13:51:33.614578', 'bTFw-gDdur4Oaa3a6HdQnY', NULL, 'saraf.chaitanya@gmail.com', 'chaitanya') RETURNING "id"
  [1m[36mSQL (23.3ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (0.8ms)[0m  BEGIN
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:InvitationCreatedJob
invitation_id: 6
host: !binary |-
 bHZoLm1l
', NULL, '2013-02-12 13:51:33.666366', NULL, NULL, NULL, '2013-02-12 13:51:33.666672', '2013-02-12 13:51:33.666672', NULL) RETURNING "id"[0m
  [1m[35mSQL (9.0ms)[0m  COMMIT
Rendered layouts/_notifications.haml (5.5ms)
Rendered invitations/create.js.erb (12.3ms)
Completed 200 OK in 745ms (Views: 16.7ms | ActiveRecord: 90.1ms | Sphinx: 0.0ms)
  [1m[35mAREL (20.8ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:51:35.948432', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 79 and (locked_at is null or locked_at < '2013-02-12 09:51:35.948432') and (run_at <= '2013-02-12 13:51:35.948432'))
  [1m[36mCommunity Load (1.2ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1[0m
  [1m[35mInvitation Load (1.0ms)[0m  SELECT "invitations".* FROM "invitations" WHERE "invitations"."id" = 6 LIMIT 1
  [1m[36mPerson Load (1.2ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mCommunity Load (1.2ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
Rendered person_mailer/invitation_to_kassi.html.haml within layouts/email (9.2ms)

Sent mail to saraf.chaitanya@gmail.com (4389ms)
Date: Tue, 12 Feb 2013 19:21:36 +0530
From: no-reply@realgoodfood.org
Reply-To: chaitanya.saraf1985@gmail.com
To: saraf.chaitanya@gmail.com
Message-ID: <511a48e848b2_4e234217010288b4@chaitanya-laptop.mail>
Subject: chs has invited you to use the RealGoodFood web service of the pune
 city community.
Mime-Version: 1.0
Content-Type: text/html;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

<!DOCTYPE html>
<html lang='en-US' xml:lang='en-US' xmlns='http://www.w3.org/1999/xhtml'>
  <head></head>
  <body>
    <table border='0' cellpadding='0' cellspacing='0' style='width:550px; border-top:4px solid #223f05; font: 12px arial, sans-serif; margin: 0 auto;'>
      <tr>
        <td>
          <h1 style='font-size: 22px; margin:7px 0 12px 0; padding:0;'>
            RealGoodFood
          </h1>
          Hi!
          <br>
          <br>
          chs has invited you to use the RealGoodFood web service of the pune city community.
          <br>
          <br>
          RealGoodFood is a service where the members of the community can, for example, lend, swap and sell goods, share rides and help each other out in several ways.
          You can join RealGoodFood at
          <a href="http://lvh.me/">http://lvh.me/</a>
          <br>
          <br>
          Thanks,
          <br>
          The RealGoodFood Team
          <br>
          <br>
        </td>
      </tr>
    </table>
  </body>
</html>
  [1m[36mSQL (0.6ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (1.0ms)[0m  DELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 79
  [1m[36mSQL (14.1ms)[0m  [1mCOMMIT[0m
  [1m[35mAREL (23.6ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:52:35.487889', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 5 and (locked_at is null or locked_at < '2013-02-12 09:52:35.487889') and (run_at <= '2013-02-12 13:52:35.487889'))
  [1m[36mCommunity Load (1.6ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1[0m
  [1m[35mSwapItem Load (1.0ms)[0m  SELECT "swap_items".* FROM "swap_items" WHERE "swap_items"."id" = 2 LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (1.6ms)[0m  UPDATE "delayed_jobs" SET "locked_at" = NULL, "locked_by" = NULL, "attempts" = 7, "run_at" = '2013-02-12 14:32:41.588585', "updated_at" = '2013-02-12 13:52:35.589979' WHERE "delayed_jobs"."id" = 5
  [1m[36mSQL (8.7ms)[0m  [1mCOMMIT[0m
  [1m[35mAREL (14.7ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:52:35.607642', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 6 and (locked_at is null or locked_at < '2013-02-12 09:52:35.607642') and (run_at <= '2013-02-12 13:52:35.607642'))
  [1m[36mCommunity Load (1.6ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1[0m
  [1m[35mSwapItem Load (0.8ms)[0m  SELECT "swap_items".* FROM "swap_items" WHERE "swap_items"."id" = 3 LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (0.7ms)[0m  UPDATE "delayed_jobs" SET "locked_at" = NULL, "locked_by" = NULL, "attempts" = 7, "run_at" = '2013-02-12 14:32:41.644488', "updated_at" = '2013-02-12 13:52:35.645939' WHERE "delayed_jobs"."id" = 6
  [1m[36mSQL (8.9ms)[0m  [1mCOMMIT[0m
  [1m[35mAREL (6.7ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:52:35.660867', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 7 and (locked_at is null or locked_at < '2013-02-12 09:52:35.660867') and (run_at <= '2013-02-12 13:52:35.660867'))
  [1m[36mCommunity Load (1.2ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1[0m
  [1m[35mSwapItem Load (0.4ms)[0m  SELECT "swap_items".* FROM "swap_items" WHERE "swap_items"."id" = 4 LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (1.0ms)[0m  UPDATE "delayed_jobs" SET "locked_at" = NULL, "locked_by" = NULL, "attempts" = 7, "run_at" = '2013-02-12 14:32:41.682345', "updated_at" = '2013-02-12 13:52:35.683405' WHERE "delayed_jobs"."id" = 7
  [1m[36mSQL (5.4ms)[0m  [1mCOMMIT[0m


Started GET "/en/people/bTFw-gDdur4Oaa3a6HdQnY/invitations/new?complement=true" for 127.0.0.1 at 2013-02-12 19:24:03 +0530
  Processing by InvitationsController#new as HTML
  Parameters: {"complement"=>"true", "locale"=>"en", "person_id"=>"bTFw-gDdur4Oaa3a6HdQnY"}
  [1m[36mPK and serial sequence (6.3ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (3.5ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (1.7ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (3.4ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (2.0ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (1.5ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (0.4ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'bTFw-gDdur4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.0ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mSQL (2.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"invitations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
Rendered layouts/_kissmetrics.haml (3.1ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.7ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.1ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (10.6ms)
Rendered communities/default/logo/logo.haml (2.2ms)
Rendered layouts/_no_javascript.haml (15.7ms)
Rendered layouts/_facebook_sdk.haml (2.3ms)
  [1m[35mSQL (0.9ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (1.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (8.6ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (3.6ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (7.7ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (1.8ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.2ms)[0m  [1mSELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'bTFw-gDdur4Oaa3a6HdQnY')) AND participations.person_id = 'bTFw-gDdur4Oaa3a6HdQnY')[0m
Rendered layouts/_logged_in_messages_icon.haml (910.0ms)
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.0ms)[0m  [1mSELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'bTFw-gDdur4Oaa3a6HdQnY')[0m
Rendered layouts/_logged_in_notifications_icon.haml (13.4ms)
  [1m[35mSQL (3.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.3ms)[0m  [1mSELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'bTFw-gDdur4Oaa3a6HdQnY') AND (acceptance is null)[0m
Rendered layouts/_logged_in_swap_offers_icon.haml (16.3ms)
  [1m[35mCommunityMembership Load (1.3ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."community_id" = 1 AND ("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY') LIMIT 1
Rendered layouts/_logged_in.haml (961.4ms)
Rendered layouts/_notifications.haml (8.8ms)
  [1m[36mLocation Load (1.2ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'bTFw-gDdur4Oaa3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
Rendered layouts/_display_popup.haml (10.4ms)
Rendered invitations/new.html.haml within layouts/application (1090.1ms)
Completed 200 OK in 1751ms (Views: 1055.8ms | ActiveRecord: 82.1ms | Sphinx: 0.0ms)


Started POST "/en/people/bTFw-gDdur4Oaa3a6HdQnY/invitations" for 127.0.0.1 at 2013-02-12 19:24:31 +0530
  Processing by InvitationsController#create as JS
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"RJmvwMjQFWvaMzZiMzkHUJSPCqX4xPUC88lFSv9+cMM=", "invitation"=>{"email"=>"saraf.chaitanya@gmail.com", "name"=>"chaitanya", "community_id"=>"1", "inviter_id"=>"bTFw-gDdur4Oaa3a6HdQnY", "complement"=>"true"}, "commit"=>"Send Invitation", "locale"=>"en", "person_id"=>"bTFw-gDdur4Oaa3a6HdQnY"}
  [1m[35mPK and serial sequence (6.4ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (3.6ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (3.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.8ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.5ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (3.5ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.4ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.5ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (1.2ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'bTFw-gDdur4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (1.0ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"invitations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
WARNING: Can't mass-assign protected attributes: complement
  [1m[36mSQL (0.7ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  SELECT 1 FROM "invitations" WHERE ("invitations"."code" = 'SZWKL4') LIMIT 1
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"invitations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.5ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"invitations"'::regclass
  [1m[36mSQL (1.3ms)[0m  [1mINSERT INTO "invitations" ("code", "community_id", "usages_left", "valid_until", "information", "created_at", "updated_at", "inviter_id", "message", "email", "name") VALUES ('SZWKL4', 1, 1, NULL, NULL, '2013-02-12 13:54:32.090096', '2013-02-12 13:54:32.090096', 'bTFw-gDdur4Oaa3a6HdQnY', NULL, 'saraf.chaitanya@gmail.com', 'chaitanya') RETURNING "id"[0m
  [1m[35mSQL (27.9ms)[0m  COMMIT
Rendered layouts/_notifications.haml (8.7ms)
Rendered invitations/create.js.erb (13.8ms)
Completed 200 OK in 708ms (Views: 18.0ms | ActiveRecord: 82.6ms | Sphinx: 0.0ms)


Started GET "/en/people/bTFw-gDdur4Oaa3a6HdQnY/invitations/new" for 127.0.0.1 at 2013-02-12 19:24:53 +0530
  Processing by InvitationsController#new as HTML
  Parameters: {"locale"=>"en", "person_id"=>"bTFw-gDdur4Oaa3a6HdQnY"}
  [1m[36mPK and serial sequence (9.4ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (2.1ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.6ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (1.4ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (7.0ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (5.2ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.4ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (1.5ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (1.2ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'bTFw-gDdur4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.0ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"invitations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
Rendered layouts/_kissmetrics.haml (3.1ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.7ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.2ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (10.7ms)
Rendered communities/default/logo/logo.haml (2.1ms)
Rendered layouts/_no_javascript.haml (15.3ms)
Rendered layouts/_facebook_sdk.haml (87.2ms)
  [1m[35mSQL (2.1ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (7.9ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (2.1ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (2.5ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (1.7ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.6ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.3ms)[0m  [1mSELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'bTFw-gDdur4Oaa3a6HdQnY')) AND participations.person_id = 'bTFw-gDdur4Oaa3a6HdQnY')[0m
Rendered layouts/_logged_in_messages_icon.haml (812.8ms)
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.0ms)[0m  [1mSELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'bTFw-gDdur4Oaa3a6HdQnY')[0m
Rendered layouts/_logged_in_notifications_icon.haml (13.5ms)
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.7ms)[0m  [1mSELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'bTFw-gDdur4Oaa3a6HdQnY') AND (acceptance is null)[0m
Rendered layouts/_logged_in_swap_offers_icon.haml (15.9ms)
  [1m[35mCommunityMembership Load (1.0ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."community_id" = 1 AND ("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY') LIMIT 1
Rendered layouts/_logged_in.haml (863.2ms)
Rendered layouts/_notifications.haml (4.6ms)
  [1m[36mLocation Load (0.7ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'bTFw-gDdur4Oaa3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
Rendered layouts/_display_popup.haml (9.6ms)
Rendered invitations/new.html.haml within layouts/application (1064.4ms)
Completed 200 OK in 1711ms (Views: 1035.4ms | ActiveRecord: 81.5ms | Sphinx: 0.0ms)


Started POST "/en/people/bTFw-gDdur4Oaa3a6HdQnY/invitations" for 127.0.0.1 at 2013-02-12 19:25:20 +0530
  Processing by InvitationsController#create as JS
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"RJmvwMjQFWvaMzZiMzkHUJSPCqX4xPUC88lFSv9+cMM=", "invitation"=>{"email"=>"saraf.chaitanya@gmail.com", "message"=>"this is the test message, do you understand", "community_id"=>"1", "inviter_id"=>"bTFw-gDdur4Oaa3a6HdQnY"}, "commit"=>"Send Invitation", "locale"=>"en", "person_id"=>"bTFw-gDdur4Oaa3a6HdQnY"}
  [1m[35mPK and serial sequence (6.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (3.4ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.3ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (3.5ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.2ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.4ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (0.6ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'bTFw-gDdur4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (0.5ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mSQL (1.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"invitations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  SELECT 1 FROM "invitations" WHERE ("invitations"."code" = 'C1TV0A') LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"invitations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (3.1ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"invitations"'::regclass
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "invitations" ("code", "community_id", "usages_left", "valid_until", "information", "created_at", "updated_at", "inviter_id", "message", "email", "name") VALUES ('C1TV0A', 1, 1, NULL, NULL, '2013-02-12 13:55:21.466409', '2013-02-12 13:55:21.466409', 'bTFw-gDdur4Oaa3a6HdQnY', 'this is the test message, do you understand', 'saraf.chaitanya@gmail.com', NULL) RETURNING "id"[0m
  [1m[35mSQL (22.0ms)[0m  COMMIT
  [1m[36mSQL (0.6ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.5ms)[0m  INSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:InvitationCreatedJob
invitation_id: 8
host: !binary |-
 bHZoLm1l
', NULL, '2013-02-12 13:55:21.509771', NULL, NULL, NULL, '2013-02-12 13:55:21.510040', '2013-02-12 13:55:21.510040', NULL) RETURNING "id"
  [1m[36mSQL (13.5ms)[0m  [1mCOMMIT[0m
Rendered layouts/_notifications.haml (18.2ms)
Rendered invitations/create.js.erb (26.2ms)
Completed 200 OK in 754ms (Views: 32.2ms | ActiveRecord: 80.0ms | Sphinx: 0.0ms)
  [1m[35mAREL (58.5ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-02-12 13:55:25.846690', locked_by = 'host:chaitanya-laptop pid:20003' WHERE (id = 80 and (locked_at is null or locked_at < '2013-02-12 09:55:25.846690') and (run_at <= '2013-02-12 13:55:25.846690'))
  [1m[36mCommunity Load (1.3ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1[0m
  [1m[35mInvitation Load (1.1ms)[0m  SELECT "invitations".* FROM "invitations" WHERE "invitations"."id" = 8 LIMIT 1
  [1m[36mPerson Load (1.9ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mCommunity Load (1.4ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
Rendered person_mailer/invitation_to_kassi.html.haml within layouts/email (8.8ms)

Sent mail to saraf.chaitanya@gmail.com (4407ms)
Date: Tue, 12 Feb 2013 19:25:25 +0530
From: no-reply@realgoodfood.org
Reply-To: chaitanya.saraf1985@gmail.com
To: saraf.chaitanya@gmail.com
Message-ID: <511a49cdecd5e_4e23421701028960@chaitanya-laptop.mail>
Subject: chs has invited you to use the RealGoodFood web service of the pune
 city community.
Mime-Version: 1.0
Content-Type: text/html;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

<!DOCTYPE html>
<html lang='en-US' xml:lang='en-US' xmlns='http://www.w3.org/1999/xhtml'>
  <head></head>
  <body>
    <table border='0' cellpadding='0' cellspacing='0' style='width:550px; border-top:4px solid #223f05; font: 12px arial, sans-serif; margin: 0 auto;'>
      <tr>
        <td>
          <h1 style='font-size: 22px; margin:7px 0 12px 0; padding:0;'>
            RealGoodFood
          </h1>
          Hi!
          <br>
          <br>
          chs has invited you to use the RealGoodFood web service of the pune city community.
          <br>
          <br>
          RealGoodFood is a service where the members of the community can, for example, lend, swap and sell goods, share rides and help each other out in several ways.
          <br>
          <br>
          Here is a personal message from chs:
          <div style='margin: 15px 0; padding: 10px; background-color: #d1c9b4;'>
            this is the test message, do you understand<br />
          </div>
          You can join RealGoodFood at
          <a href="http://lvh.me/">http://lvh.me/</a>
          <br>
          <br>
          Thanks,
          <br>
          The RealGoodFood Team
          <br>
          <br>
        </td>
      </tr>
    </table>
  </body>
</html>
  [1m[36mSQL (0.7ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (1.1ms)[0m  DELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 80
  [1m[36mSQL (26.4ms)[0m  [1mCOMMIT[0m


Started GET "/en/people/bTFw-gDdur4Oaa3a6HdQnY/invitations/new?complement=true" for 127.0.0.1 at 2013-02-12 19:29:19 +0530
  Processing by InvitationsController#new as HTML
  Parameters: {"complement"=>"true", "locale"=>"en", "person_id"=>"bTFw-gDdur4Oaa3a6HdQnY"}
  [1m[35mPK and serial sequence (6.3ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (3.5ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.4ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.3ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (3.6ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.5ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.4ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (0.5ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'bTFw-gDdur4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (1.0ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"invitations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
Rendered layouts/_kissmetrics.haml (3.1ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.9ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.0ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (10.1ms)
Rendered communities/default/logo/logo.haml (86.8ms)
Rendered layouts/_no_javascript.haml (105.1ms)
Rendered layouts/_facebook_sdk.haml (2.7ms)
  [1m[36mSQL (1.9ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.3ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.1ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (6.3ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (1.4ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.8ms)[0m  SELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'bTFw-gDdur4Oaa3a6HdQnY')) AND participations.person_id = 'bTFw-gDdur4Oaa3a6HdQnY')
Rendered layouts/_logged_in_messages_icon.haml (830.4ms)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.0ms)[0m  SELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'bTFw-gDdur4Oaa3a6HdQnY')
Rendered layouts/_logged_in_notifications_icon.haml (10.9ms)
  [1m[36mSQL (4.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'bTFw-gDdur4Oaa3a6HdQnY') AND (acceptance is null)
Rendered layouts/_logged_in_swap_offers_icon.haml (13.1ms)
  [1m[36mCommunityMembership Load (1.0ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."community_id" = 1 AND ("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY') LIMIT 1[0m
Rendered layouts/_logged_in.haml (869.6ms)
Rendered layouts/_notifications.haml (5.7ms)
  [1m[35mLocation Load (1.1ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'bTFw-gDdur4Oaa3a6HdQnY' AND (location_type = 'person')) LIMIT 1
Rendered layouts/_display_popup.haml (12.4ms)
Rendered invitations/new.html.haml within layouts/application (1082.8ms)
Completed 200 OK in 1757ms (Views: 1049.8ms | ActiveRecord: 82.0ms | Sphinx: 0.0ms)


Started POST "/en/people/bTFw-gDdur4Oaa3a6HdQnY/invitations" for 127.0.0.1 at 2013-02-12 19:29:32 +0530
  Processing by InvitationsController#create as JS
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"RJmvwMjQFWvaMzZiMzkHUJSPCqX4xPUC88lFSv9+cMM=", "invitation"=>{"email"=>"saraf.chaitanya@gmail.com", "name"=>"chaitanya", "community_id"=>"1", "inviter_id"=>"bTFw-gDdur4Oaa3a6HdQnY", "complement"=>"true"}, "commit"=>"Send Invitation", "locale"=>"en", "person_id"=>"bTFw-gDdur4Oaa3a6HdQnY"}
  [1m[36mPK and serial sequence (6.0ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (3.4ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (1.3ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.3ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (3.5ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.3ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (1.4ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (0.9ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'bTFw-gDdur4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.0ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"invitations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
WARNING: Can't mass-assign protected attributes: complement
  [1m[35mSQL (0.5ms)[0m  BEGIN
  [1m[36mSQL (0.9ms)[0m  [1mSELECT 1 FROM "invitations" WHERE ("invitations"."code" = 'W1IYOV') LIMIT 1[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"invitations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.3ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"invitations"'::regclass
[0m
  [1m[35mSQL (1.2ms)[0m  INSERT INTO "invitations" ("code", "community_id", "usages_left", "valid_until", "information", "created_at", "updated_at", "inviter_id", "message", "email", "name") VALUES ('W1IYOV', 1, 1, NULL, NULL, '2013-02-12 13:59:32.964993', '2013-02-12 13:59:32.964993', 'bTFw-gDdur4Oaa3a6HdQnY', NULL, 'saraf.chaitanya@gmail.com', 'chaitanya') RETURNING "id"
  [1m[36mSQL (18.5ms)[0m  [1mCOMMIT[0m
Rendered layouts/_notifications.haml (6.8ms)
Rendered invitations/create.js.erb (11.9ms)
Completed 200 OK in 693ms (Views: 16.2ms | ActiveRecord: 69.3ms | Sphinx: 0.0ms)
  [1m[35mAREL (1.3ms)[0m  UPDATE "delayed_jobs" SET locked_by = null, locked_at = null WHERE (locked_by = 'host:chaitanya-laptop pid:20003')
Starting the New Relic Agent.
  [1m[36mAREL (1.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_by = null, locked_at = null WHERE (locked_by = 'host:chaitanya-laptop pid:20003')[0m
  [1m[35mAREL (1.0ms)[0m  UPDATE "delayed_jobs" SET locked_by = null, locked_at = null WHERE (locked_by = 'host:chaitanya-laptop pid:20003')
DEPRECATION WARNING: config.action_view.debug_rjs will be removed in 3.1, from 3.1 onwards you will need to install prototype-rails to continue to use RJS templates . (called from <top (required)> at /home/chaitanya/workArea/ST-to-RGF/config/environment.rb:10)
Starting the New Relic Agent.
NewRelic Agent Developer Mode enabled.
To view performance information, go to http://localhost:3000/newrelic
Installed New Relic Browser Monitoring middleware
  [1m[36mSQL (38.1ms)[0m  [1mSHOW client_min_messages[0m
  [1m[35mSQL (0.5ms)[0m  SET client_min_messages TO 'panic'
  [1m[36mSQL (0.4ms)[0m  [1mSET standard_conforming_strings = on[0m
  [1m[35mSQL (0.4ms)[0m  SET client_min_messages TO 'notice'
  [1m[36mSQL (0.6ms)[0m  [1mSET time zone 'UTC'[0m
  [1m[35mSQL (0.4ms)[0m  SHOW TIME ZONE
  [1m[36mPK and serial sequence (280.5ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (34.5ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
DEPRECATION WARNING: RAILS_ROOT is deprecated. Please use ::Rails.root.to_s. (called from <class:Person> at /home/chaitanya/workArea/ST-to-RGF/app/models/person.rb:134)


Started GET "/" for 127.0.0.1 at 2013-02-13 11:48:36 +0530
  [1m[36mSQL (0.6ms)[0m  [1mSHOW client_min_messages[0m
  [1m[35mSQL (0.4ms)[0m  SET client_min_messages TO 'panic'
  [1m[36mSQL (0.4ms)[0m  [1mSET standard_conforming_strings = on[0m
  [1m[35mSQL (0.3ms)[0m  SET client_min_messages TO 'notice'
  [1m[36mSQL (0.6ms)[0m  [1mSET time zone 'UTC'[0m
  [1m[35mSQL (0.4ms)[0m  SHOW TIME ZONE
  Processing by DashboardController#index as HTML
  [1m[36mSQL (102.8ms)[0m  [1m SELECT tablename
 FROM pg_tables
 WHERE schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (65.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (9.3ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mLocation Load (2.0ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
~~~~~~~~~~~~~~~dashboard#index~~~~~~~~~1
  [1m[35mPK and serial sequence (8.3ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.1ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Rendered dashboard/_header.haml (34.1ms)
  [1m[35mSQL (3.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (56.6ms)[0m  [1mSELECT COUNT(*) FROM "communities"[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "communities"
  [1m[36mCommunity Load (2.4ms)[0m  [1mSELECT "communities".* FROM "communities" ORDER BY name asc[0m
Rendered dashboard/_community_list.haml (109.2ms)
Rendered dashboard/_footer.haml (11.7ms)
Rendered layouts/_kissmetrics.haml (3.2ms)
Rendered layouts/_dashboard_no_javascript.haml (3.1ms)
Rendered dashboard/index.haml within layouts/dashboard (20268.1ms)
Completed 200 OK in 20771ms (Views: 20254.5ms | ActiveRecord: 259.9ms | Sphinx: 0.0ms)


Started GET "/?cid=1" for 127.0.0.1 at 2013-02-13 12:22:07 +0530
  Processing by DashboardController#index as HTML
  Parameters: {"cid"=>"1"}
Redirected to http://lvh.me:3000/en/homepage
Completed 302 Found in 1ms


Started GET "/en/homepage" for 127.0.0.1 at 2013-02-13 12:22:08 +0530
  Processing by HomepageController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[35mPK and serial sequence (2.7ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (1.7ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (4.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (3.8ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (2.4ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (1.6ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (1.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (2.6ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (15.4ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (1.2ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'bTFw-gDdur4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mSQL (24.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"delayed_jobs"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"delayed_jobs"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (30.4ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"delayed_jobs"'::regclass
[0m
  [1m[35mSQL (239.4ms)[0m  INSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bHZoLm1l
', NULL, '2013-02-13 06:52:09.622712', NULL, NULL, NULL, '2013-02-13 06:52:09.622837', '2013-02-13 06:52:09.622837', NULL) RETURNING "id"
  [1m[36mSQL (29.8ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (1.2ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (1.7ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mSQL (1.4ms)[0m  SELECT 1 FROM "people" INNER JOIN "community_memberships" ON "people".id = "community_memberships".person_id WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' AND (("community_memberships".community_id = 1)) LIMIT 1
  [1m[36mSQL (4.1ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (1.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (2.4ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (1.3ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (2.3ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (1.3ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (1.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (0.7ms)[0m  [1mSELECT "communities".* FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY'))[0m
~~~~~~~~~~~~~~~not request.xhr~~~~~~~~~
  [1m[35mSQL (0.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"news_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.5ms)[0m  [1mSELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 1)[0m
  [1m[35mCommunity Load (0.4ms)[0m  SELECT "communities".* FROM "communities"
  [1m[36mSQL (1.0ms)[0m  [1mSELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 1) LIMIT 2[0m
  [1m[35mSQL (68.2ms)[0m  SELECT COUNT(*) FROM "listings" WHERE "listings"."listing_type" = 'offer' AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')
 ) AND (open = '1' AND (valid_until IS NULL OR valid_until > '2013-02-13 06:52:10'))
  [1m[36mListing Load (2.0ms)[0m  [1mSELECT "listings".* FROM "listings" WHERE "listings"."listing_type" = 'offer' AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')
 ) AND (open = '1' AND (valid_until IS NULL OR valid_until > '2013-02-13 06:52:10')) ORDER BY listings.created_at DESC LIMIT 3 OFFSET 0[0m
  [1m[35mListingImage Load (25.2ms)[0m  SELECT "listing_images".* FROM "listing_images" WHERE ("listing_images".listing_id IN (4,3,1))
  [1m[36mPerson Load (0.7ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"diet_listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.5ms)[0m  [1mSELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 4)[0m
  [1m[35mSQL (0.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"comments"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.5ms)[0m  [1mSELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 4)[0m
  [1m[35mPerson Load (0.7ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bmEhbODeyr4Oap3a6HdQnY' LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 3)[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 3)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  SELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 1)
  [1m[36mSQL (0.4ms)[0m  [1mSELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 1)[0m
Rendered homepage/_recent_listing.haml (59.0ms)
Rendered common/_staples.haml (3.9ms)
  [1m[35mCommunityMembership Load (1.1ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'bTFw-gDdur4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
Rendered homepage/_user_communities.haml (6.7ms)
Rendered common/_staples.haml (2.2ms)
  [1m[36mLocation Load (1.5ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'bTFw-gDdur4Oaa3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
Rendered common/_staples.haml (2.3ms)
Rendered homepage/_profile_info_empty_notification.haml (3.9ms)
Rendered common/_staples.haml (5.0ms)
  [1m[35mSQL (18.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"event_feed_events"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (27.0ms)[0m  [1mSELECT COUNT(*) FROM "event_feed_events" WHERE ("event_feed_events".community_id = 1)[0m
Rendered common/_staples.haml (5.6ms)
  [1m[35mEventFeedEvent Load (1.0ms)[0m  SELECT "event_feed_events".* FROM "event_feed_events" WHERE ("event_feed_events".community_id = 1) ORDER BY id DESC LIMIT 5
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bmEhbODeyr4Oap3a6HdQnY' LIMIT 1[0m
  [1m[35mCommunity Load (0.6ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
Rendered event_feed_events/_join.haml (8.3ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1[0m
Rendered event_feed_events/_login.haml (6.6ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bmEhbODeyr4Oap3a6HdQnY' LIMIT 1
Rendered event_feed_events/_login.haml (4.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bmEhbODeyr4Oap3a6HdQnY' LIMIT 1[0m
Rendered event_feed_events/_login.haml (3.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1
Rendered event_feed_events/_login.haml (3.8ms)
Rendered homepage/_event_feed_event.haml (72.1ms)
Rendered homepage/_event_feed.haml (78.7ms)
Rendered common/_staples.haml (2.1ms)
Rendered common/_staples.haml (2.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 1) LIMIT 2[0m
Rendered homepage/_news_items.haml (5.3ms)
Rendered common/_staples.haml (2.1ms)
  [1m[35mSQL (20.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"polls"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPoll Load (1.4ms)[0m  [1mSELECT "polls".* FROM "polls" WHERE "polls"."active" = 't' AND ("polls".community_id = 1) LIMIT 1[0m
Rendered layouts/_kissmetrics.haml (3.2ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.8ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (3.5ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (232.6ms)
Rendered communities/default/logo/logo.haml (2.4ms)
Rendered layouts/_no_javascript.haml (43.2ms)
Rendered layouts/_facebook_sdk.haml (4.1ms)
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (19.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.9ms)[0m  SELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'bTFw-gDdur4Oaa3a6HdQnY')) AND participations.person_id = 'bTFw-gDdur4Oaa3a6HdQnY')
Rendered layouts/_logged_in_messages_icon.haml (36.9ms)
  [1m[36mSQL (1.6ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.8ms)[0m  SELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'bTFw-gDdur4Oaa3a6HdQnY')
Rendered layouts/_logged_in_notifications_icon.haml (14.1ms)
  [1m[36mSQL (1.6ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (11.2ms)[0m  SELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'bTFw-gDdur4Oaa3a6HdQnY') AND (acceptance is null)
Rendered layouts/_logged_in_swap_offers_icon.haml (24.3ms)
  [1m[36mCommunityMembership Load (0.5ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."community_id" = 1 AND ("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY') LIMIT 1[0m
Rendered layouts/_logged_in.haml (96.9ms)
Rendered layouts/_notifications.haml (4.5ms)
Rendered layouts/_display_popup.haml (6.9ms)
Rendered homepage/index.haml within layouts/application (1529.4ms)
Completed 200 OK in 3388ms (Views: 1334.5ms | ActiveRecord: 606.0ms | Sphinx: 0.0ms)


Started GET "/en/logout" for 127.0.0.1 at 2013-02-13 12:24:40 +0530
  Processing by SessionsController#destroy as HTML
  Parameters: {"method"=>:delete, "locale"=>"en"}
  [1m[35mPK and serial sequence (2.4ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (3.8ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (1.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (0.6ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (1.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (2.4ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (1.4ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (0.7ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (0.5ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'bTFw-gDdur4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bHZoLm1l
', NULL, '2013-02-13 06:54:42.507372', NULL, NULL, NULL, '2013-02-13 06:54:42.507482', '2013-02-13 06:54:42.507482', NULL) RETURNING "id"[0m
  [1m[35mSQL (26.9ms)[0m  COMMIT
  [1m[36mLocation Load (0.5ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mSQL (0.3ms)[0m  BEGIN
  [1m[36mAREL (0.7ms)[0m  [1mUPDATE "people" SET "preferences" = '---
email_about_new_messages: true
email_about_new_comments_to_own_listing: true
email_when_conversation_accepted: true
email_when_conversation_rejected: true
email_about_new_badges: true
email_about_new_received_testimonials: true
email_about_accept_reminders: true
email_about_testimonial_reminders: true
email_about_weekly_events: true
' WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY'[0m
[paperclip] Saving attachments.
  [1m[35mSQL (71.4ms)[0m  COMMIT
Redirected to http://lvh.me:3000/en
Completed 302 Found in 12588ms


Started GET "/en" for 127.0.0.1 at 2013-02-13 12:24:54 +0530
  Processing by DashboardController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mPK and serial sequence (2.4ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (1.4ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mLocation Load (0.5ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
~~~~~~~~~~~~~~~dashboard#index~~~~~~~~~
  [1m[35mPK and serial sequence (3.1ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (2.0ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Rendered dashboard/_header.haml (7.4ms)
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "communities"[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "communities"
  [1m[36mCommunity Load (0.9ms)[0m  [1mSELECT "communities".* FROM "communities" ORDER BY name asc[0m
Rendered dashboard/_community_list.haml (36.9ms)
Rendered dashboard/_footer.haml (12.3ms)
Rendered layouts/_kissmetrics.haml (3.3ms)
Rendered layouts/_dashboard_no_javascript.haml (3.3ms)
Rendered dashboard/index.haml within layouts/dashboard (230.3ms)
Completed 200 OK in 643ms (Views: 280.0ms | ActiveRecord: 134.6ms | Sphinx: 0.0ms)


Started GET "/en?cid=1" for 127.0.0.1 at 2013-02-13 12:28:10 +0530
  Processing by DashboardController#index as HTML
  Parameters: {"cid"=>"1", "locale"=>"en"}
Redirected to http://lvh.me:3000/en/homepage
Completed 302 Found in 1ms


Started GET "/en/homepage" for 127.0.0.1 at 2013-02-13 12:28:10 +0530
  Processing by HomepageController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[35mPK and serial sequence (6.5ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (3.4ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (6.8ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (5.1ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (1.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.0ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mLocation Load (0.5ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mSQL (1.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"event_feed_events"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (1.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (4.4ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (1.6ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (2.6ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (1.4ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (1.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listing_images"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (23.2ms)[0m  SELECT COUNT(DISTINCT "listings"."id") FROM "listings" LEFT OUTER JOIN "listing_images" ON "listing_images"."listing_id" = "listings"."id" WHERE "listings"."listing_type" = 'request' AND (open = '1' AND (valid_until IS NULL OR valid_until > '2013-02-13 06:58:11')) AND (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')
 )
  [1m[36mSQL (2.4ms)[0m  [1mSELECT COUNT(DISTINCT "listings"."id") FROM "listings" LEFT OUTER JOIN "listing_images" ON "listing_images"."listing_id" = "listings"."id" WHERE "listings"."listing_type" = 'offer' AND (open = '1' AND (valid_until IS NULL OR valid_until > '2013-02-13 06:58:11')) AND (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')
 )[0m
~~~~~~~~~~~~~~~not request.xhr~~~~~~~~~
  [1m[35mSQL (2.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"news_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.8ms)[0m  [1mSELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 1)[0m
  [1m[35mCommunity Load (1.0ms)[0m  SELECT "communities".* FROM "communities"
  [1m[36mSQL (1.0ms)[0m  [1mSELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 1) LIMIT 2[0m
  [1m[35mSQL (44.3ms)[0m  SELECT COUNT(*) FROM "listings" WHERE "listings"."listing_type" = 'offer' AND (listings.visibility = 'everybody' AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')) AND (open = '1' AND (valid_until IS NULL OR valid_until > '2013-02-13 06:58:11'))
  [1m[36mListing Load (3.1ms)[0m  [1mSELECT "listings".* FROM "listings" WHERE "listings"."listing_type" = 'offer' AND (listings.visibility = 'everybody' AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')) AND (open = '1' AND (valid_until IS NULL OR valid_until > '2013-02-13 06:58:11')) ORDER BY listings.created_at DESC LIMIT 3 OFFSET 0[0m
  [1m[35mListingImage Load (1.0ms)[0m  SELECT "listing_images".* FROM "listing_images" WHERE ("listing_images".listing_id IN (4,3,1))
  [1m[36mSQL (2.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (2.3ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"diet_listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.4ms)[0m  [1mSELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 4)[0m
  [1m[35mPerson Load (1.3ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bmEhbODeyr4Oap3a6HdQnY' LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mSELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 3)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mSELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 1)[0m
Rendered homepage/_recent_listing.haml (110.1ms)
  [1m[35mSQL (1.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"event_feed_events"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.4ms)[0m  [1mSELECT COUNT(*) FROM "event_feed_events" WHERE ("event_feed_events".community_id = 1)[0m
Rendered common/_staples.haml (5.4ms)
  [1m[35mEventFeedEvent Load (1.6ms)[0m  SELECT "event_feed_events".* FROM "event_feed_events" WHERE "event_feed_events"."members_only" = 'f' AND ("event_feed_events".community_id = 1) ORDER BY id DESC LIMIT 5
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bmEhbODeyr4Oap3a6HdQnY' LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
Rendered event_feed_events/_join.haml (13.2ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1[0m
Rendered event_feed_events/_login.haml (6.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bmEhbODeyr4Oap3a6HdQnY' LIMIT 1
Rendered event_feed_events/_login.haml (3.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bmEhbODeyr4Oap3a6HdQnY' LIMIT 1[0m
Rendered event_feed_events/_login.haml (4.3ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1
Rendered event_feed_events/_login.haml (5.1ms)
Rendered homepage/_event_feed_event.haml (142.7ms)
Rendered homepage/_event_feed.haml (149.7ms)
Rendered common/_staples.haml (2.5ms)
Rendered common/_staples.haml (2.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 1) LIMIT 2[0m
Rendered homepage/_news_items.haml (5.3ms)
Rendered common/_staples.haml (2.2ms)
Rendered layouts/_kissmetrics.haml (3.0ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.7ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (3.1ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (32.5ms)
Rendered communities/default/logo/logo.haml (2.2ms)
Rendered layouts/_no_javascript.haml (18.0ms)
Rendered layouts/_facebook_sdk.haml (3.1ms)
Rendered layouts/_logged_in.haml (82.3ms)
Rendered layouts/_notifications.haml (6.5ms)
Rendered layouts/_display_popup.haml (6.5ms)
Rendered homepage/index.haml within layouts/application (796.0ms)
Completed 200 OK in 1998ms (Views: 750.7ms | ActiveRecord: 139.6ms | Sphinx: 0.0ms)


Started GET "/en/homepage" for 127.0.0.1 at 2013-02-13 12:47:20 +0530
  Processing by HomepageController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[35mPK and serial sequence (35.3ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
PG::Error: FATAL:  terminating connection due to administrator command
SSL connection has been closed unexpectedly
:           SELECT attr.attname, seq.relname
          FROM pg_class      seq,
               pg_attribute  attr,
               pg_depend     dep,
               pg_namespace  name,
               pg_constraint cons
          WHERE seq.oid           = dep.objid
            AND seq.relkind       = 'S'
            AND attr.attrelid     = dep.refobjid
            AND attr.attnum       = dep.refobjsubid
            AND attr.attrelid     = cons.conrelid
            AND attr.attnum       = cons.conkey[1]
            AND cons.contype      = 'p'
            AND dep.refobjid      = '"listing_followers"'::regclass
  [1m[36mPK and serial sequence (0.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
PG::Error: no connection to the server
:           SELECT attr.attname, seq.relname
          FROM pg_class      seq,
               pg_attribute  attr,
               pg_depend     dep,
               pg_namespace  name,
               pg_constraint cons
          WHERE seq.oid           = dep.objid
            AND seq.relkind       = 'S'
            AND attr.attrelid     = dep.refobjid
            AND attr.attnum       = dep.refobjsubid
            AND attr.attrelid     = cons.conrelid
            AND attr.attnum       = cons.conkey[1]
            AND cons.contype      = 'p'
            AND dep.refobjid      = '"communities_listings"'::regclass
  [1m[35mSQL (0.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
PG::Error: no connection to the server
:             SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
              FROM pg_attribute a LEFT JOIN pg_attrdef d
                ON a.attrelid = d.adrelid AND a.attnum = d.adnum
             WHERE a.attrelid = '"communities"'::regclass
               AND a.attnum > 0 AND NOT a.attisdropped
             ORDER BY a.attnum
Completed 500 Internal Server Error in 372ms

ActiveRecord::StatementInvalid (PG::Error: no connection to the server
:             SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
              FROM pg_attribute a LEFT JOIN pg_attrdef d
                ON a.attrelid = d.adrelid AND a.attnum = d.adnum
             WHERE a.attrelid = '"communities"'::regclass
               AND a.attnum > 0 AND NOT a.attisdropped
             ORDER BY a.attnum
):
  app/controllers/application_controller.rb:161:in `fetch_community'

Rendered /home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/actionpack-3.0.17/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.4ms)
Rendered /home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/actionpack-3.0.17/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (16.6ms)
Rendered /home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/actionpack-3.0.17/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (33.8ms)
DEPRECATION WARNING: config.action_view.debug_rjs will be removed in 3.1, from 3.1 onwards you will need to install prototype-rails to continue to use RJS templates . (called from <top (required)> at /home/chaitanya/workArea/ST-to-RGF/config/environment.rb:10)
Starting the New Relic Agent.
NewRelic Agent Developer Mode enabled.
To view performance information, go to http://localhost:3000/newrelic
Installed New Relic Browser Monitoring middleware
  [1m[36mSQL (0.5ms)[0m  [1mSHOW client_min_messages[0m
  [1m[35mSQL (0.2ms)[0m  SET client_min_messages TO 'panic'
  [1m[36mSQL (0.2ms)[0m  [1mSET standard_conforming_strings = on[0m
  [1m[35mSQL (0.2ms)[0m  SET client_min_messages TO 'notice'
  [1m[36mSQL (0.6ms)[0m  [1mSET time zone 'UTC'[0m
  [1m[35mSQL (0.3ms)[0m  SHOW TIME ZONE
  [1m[36mPK and serial sequence (4.7ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (27.0ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
DEPRECATION WARNING: RAILS_ROOT is deprecated. Please use ::Rails.root.to_s. (called from <class:Person> at /home/chaitanya/workArea/ST-to-RGF/app/models/person.rb:134)


Started GET "/" for 127.0.0.1 at 2013-02-13 12:48:25 +0530
  [1m[36mSQL (0.8ms)[0m  [1mSHOW client_min_messages[0m
  [1m[35mSQL (0.6ms)[0m  SET client_min_messages TO 'panic'
  [1m[36mSQL (0.6ms)[0m  [1mSET standard_conforming_strings = on[0m
  [1m[35mSQL (0.5ms)[0m  SET client_min_messages TO 'notice'
  [1m[36mSQL (1.0ms)[0m  [1mSET time zone 'UTC'[0m
  [1m[35mSQL (0.6ms)[0m  SHOW TIME ZONE
  Processing by DashboardController#index as HTML
  [1m[36mLocation Load (67.8ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
~~~~~~~~~~~~~~~dashboard#index~~~~~~~~~1
  [1m[35mPK and serial sequence (11.9ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.8ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Rendered dashboard/_header.haml (45.6ms)
  [1m[35mSQL (48.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (39.0ms)[0m  [1mSELECT COUNT(*) FROM "communities"[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "communities"
  [1m[36mCommunity Load (1.4ms)[0m  [1mSELECT "communities".* FROM "communities" ORDER BY name asc[0m
Rendered dashboard/_community_list.haml (141.6ms)
Rendered dashboard/_footer.haml (71.2ms)
Rendered layouts/_kissmetrics.haml (3.3ms)
Rendered layouts/_dashboard_no_javascript.haml (3.1ms)
Rendered dashboard/index.haml within layouts/dashboard (19909.1ms)
Completed 200 OK in 20147ms (Views: 19876.7ms | ActiveRecord: 177.4ms | Sphinx: 0.0ms)


Started GET "/" for 127.0.0.1 at 2013-02-13 12:48:46 +0530
  Processing by DashboardController#index as HTML
  [1m[35mPK and serial sequence (6.1ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (3.7ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mLocation Load (1.8ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
~~~~~~~~~~~~~~~dashboard#index~~~~~~~~~1
  [1m[36mPK and serial sequence (6.3ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (1.4ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Rendered dashboard/_header.haml (6.4ms)
  [1m[36mSQL (4.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.9ms)[0m  SELECT COUNT(*) FROM "communities"
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "communities"[0m
  [1m[35mCommunity Load (2.5ms)[0m  SELECT "communities".* FROM "communities" ORDER BY name asc
Rendered dashboard/_community_list.haml (100.6ms)
Rendered dashboard/_footer.haml (8.5ms)
Rendered layouts/_kissmetrics.haml (3.8ms)
Rendered layouts/_dashboard_no_javascript.haml (2.9ms)
Rendered dashboard/index.haml within layouts/dashboard (151.4ms)
Completed 200 OK in 461ms (Views: 148.4ms | ActiveRecord: 27.8ms | Sphinx: 0.0ms)


Started GET "/?cid=1" for 127.0.0.1 at 2013-02-13 12:48:49 +0530
  Processing by DashboardController#index as HTML
  Parameters: {"cid"=>"1"}
Redirected to http://lvh.me:3000/en/homepage
Completed 302 Found in 3ms


Started GET "/en/homepage" for 127.0.0.1 at 2013-02-13 12:48:50 +0530
  Processing by HomepageController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mPK and serial sequence (2.4ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (3.4ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (6.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (3.5ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (49.6ms)[0m   SELECT tablename
 FROM pg_tables
 WHERE schemaname = ANY (current_schemas(false))
  [1m[36mSQL (1.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (22.8ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mLocation Load (1.3ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"event_feed_events"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.8ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (5.0ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (3.2ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (6.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (1.7ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.6ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listing_images"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (30.1ms)[0m  SELECT COUNT(DISTINCT "listings"."id") FROM "listings" LEFT OUTER JOIN "listing_images" ON "listing_images"."listing_id" = "listings"."id" WHERE "listings"."listing_type" = 'request' AND (open = '1' AND (valid_until IS NULL OR valid_until > '2013-02-13 07:18:51')) AND (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')
 )
  [1m[36mSQL (3.0ms)[0m  [1mSELECT COUNT(DISTINCT "listings"."id") FROM "listings" LEFT OUTER JOIN "listing_images" ON "listing_images"."listing_id" = "listings"."id" WHERE "listings"."listing_type" = 'offer' AND (open = '1' AND (valid_until IS NULL OR valid_until > '2013-02-13 07:18:51')) AND (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')
 )[0m
~~~~~~~~~~~~~~~not request.xhr~~~~~~~~~
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"news_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.3ms)[0m  [1mSELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 1)[0m
  [1m[35mCommunity Load (1.6ms)[0m  SELECT "communities".* FROM "communities"
  [1m[36mSQL (1.0ms)[0m  [1mSELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 1) LIMIT 2[0m
  [1m[35mSQL (37.8ms)[0m  SELECT COUNT(*) FROM "listings" WHERE "listings"."listing_type" = 'offer' AND (listings.visibility = 'everybody' AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')) AND (open = '1' AND (valid_until IS NULL OR valid_until > '2013-02-13 07:18:51'))
  [1m[36mListing Load (2.0ms)[0m  [1mSELECT "listings".* FROM "listings" WHERE "listings"."listing_type" = 'offer' AND (listings.visibility = 'everybody' AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')) AND (open = '1' AND (valid_until IS NULL OR valid_until > '2013-02-13 07:18:51')) ORDER BY listings.created_at DESC LIMIT 3 OFFSET 0[0m
  [1m[35mListingImage Load (1.1ms)[0m  SELECT "listing_images".* FROM "listing_images" WHERE ("listing_images".listing_id IN (4,3,1))
  [1m[36mSQL (2.6ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (19.5ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (1.6ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"diet_listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.2ms)[0m  [1mSELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 4)[0m
  [1m[35mPerson Load (2.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bmEhbODeyr4Oap3a6HdQnY' LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mSELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 3)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mSELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 1)[0m
Rendered homepage/_recent_listing.haml (129.8ms)
  [1m[35mSQL (1.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"event_feed_events"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.3ms)[0m  [1mSELECT COUNT(*) FROM "event_feed_events" WHERE ("event_feed_events".community_id = 1)[0m
Rendered common/_staples.haml (6.1ms)
  [1m[35mEventFeedEvent Load (1.4ms)[0m  SELECT "event_feed_events".* FROM "event_feed_events" WHERE "event_feed_events"."members_only" = 'f' AND ("event_feed_events".community_id = 1) ORDER BY id DESC LIMIT 5
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bmEhbODeyr4Oap3a6HdQnY' LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
Rendered event_feed_events/_join.haml (6.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1[0m
Rendered event_feed_events/_login.haml (4.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bmEhbODeyr4Oap3a6HdQnY' LIMIT 1
Rendered event_feed_events/_login.haml (4.3ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bmEhbODeyr4Oap3a6HdQnY' LIMIT 1[0m
Rendered event_feed_events/_login.haml (4.3ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1
Rendered event_feed_events/_login.haml (5.1ms)
Rendered homepage/_event_feed_event.haml (108.3ms)
Rendered homepage/_event_feed.haml (119.2ms)
Rendered common/_staples.haml (2.3ms)
Rendered common/_staples.haml (2.4ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 1) LIMIT 2[0m
Rendered homepage/_news_items.haml (5.3ms)
Rendered common/_staples.haml (2.1ms)
Rendered layouts/_kissmetrics.haml (3.0ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (2.7ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (5.7ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (160.6ms)
Rendered communities/default/logo/logo.haml (2.3ms)
Rendered layouts/_no_javascript.haml (44.2ms)
Rendered layouts/_facebook_sdk.haml (58.9ms)
Rendered layouts/_logged_in.haml (15.4ms)
Rendered layouts/_notifications.haml (10.4ms)
Rendered layouts/_display_popup.haml (6.1ms)
Rendered homepage/index.haml within layouts/application (918.8ms)
Completed 200 OK in 2531ms (Views: 870.8ms | ActiveRecord: 238.3ms | Sphinx: 0.0ms)


Started GET "/en/login" for 127.0.0.1 at 2013-02-13 12:48:57 +0530
  Processing by SessionsController#new as HTML
  Parameters: {"locale"=>"en"}
  [1m[35mPK and serial sequence (6.1ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (2.0ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (2.5ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (1.7ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (2.0ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mLocation Load (1.1ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
Rendered sessions/_password_forgotten.haml (5.5ms)
Rendered sessions/_new.haml (21.2ms)
Rendered layouts/_kissmetrics.haml (3.3ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.7ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.3ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (12.6ms)
Rendered communities/default/logo/logo.haml (2.2ms)
Rendered layouts/_no_javascript.haml (16.5ms)
Rendered layouts/_facebook_sdk.haml (2.7ms)
Rendered layouts/_logged_in.haml (6.4ms)
Rendered layouts/_notifications.haml (5.1ms)
Rendered layouts/_display_popup.haml (6.0ms)
Rendered sessions/new.haml within layouts/application (133.1ms)
Completed 200 OK in 660ms (Views: 187.0ms | ActiveRecord: 20.4ms | Sphinx: 0.0ms)


Started POST "/en/sessions" for 127.0.0.1 at 2013-02-13 12:49:07 +0530
  Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"NkZ6IWGiOoJ8LNPCOR7+plEluO7i/JaZDiNM2t7u7ng=", "person"=>{"login"=>"chs", "password"=>"[FILTERED]"}, "community"=>"pune", "commit"=>"Log in", "locale"=>"en"}
  [1m[35mPK and serial sequence (5.8ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (1.4ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (6.3ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (3.7ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.2ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mLocation Load (1.0ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mCommunity Load (1.2ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'pune' LIMIT 1
  [1m[36mPerson Load (18.1ms)[0m  [1mSELECT "people".* FROM "people" WHERE (lower(username) = 'chs' OR lower(email) = 'chs') LIMIT 1[0m
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mAREL (0.8ms)[0m  [1mUPDATE "people" SET "last_sign_in_at" = '2013-02-12 07:50:09.802647', "current_sign_in_at" = '2013-02-13 07:19:08.259005', "sign_in_count" = 5, "updated_at" = '2013-02-13 07:19:08.260712', "preferences" = '---
email_about_new_messages: true
email_about_new_comments_to_own_listing: true
email_when_conversation_accepted: true
email_when_conversation_rejected: true
email_about_new_badges: true
email_about_new_received_testimonials: true
email_about_accept_reminders: true
email_about_testimonial_reminders: true
email_about_weekly_events: true
' WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY'[0m
[paperclip] Saving attachments.
  [1m[35mSQL (37.0ms)[0m  COMMIT
  [1m[36mSQL (16.8ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (1.3ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."community_id" = 1 AND ("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY') LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (1.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"event_feed_events"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.5ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"event_feed_events"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (5.8ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"event_feed_events"'::regclass
[0m
  [1m[35mSQL (72.8ms)[0m  INSERT INTO "event_feed_events" ("person1_id", "person2_id", "community_id", "eventable_id", "eventable_type", "category", "members_only", "created_at", "updated_at") VALUES ('bTFw-gDdur4Oaa3a6HdQnY', NULL, 1, NULL, NULL, 'login', 'f', '2013-02-13 07:19:26.649441', '2013-02-13 07:19:26.649441') RETURNING "id"
  [1m[36mSQL (24.2ms)[0m  [1mCOMMIT[0m
Redirected to http://lvh.me:3000/en/homepage
Completed 302 Found in 19168ms


Started GET "/en/homepage" for 127.0.0.1 at 2013-02-13 12:49:26 +0530
  Processing by HomepageController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[35mPK and serial sequence (3.5ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (3.5ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.4ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (3.4ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.3ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.4ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (0.9ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'bTFw-gDdur4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"delayed_jobs"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.5ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"delayed_jobs"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (2.7ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"delayed_jobs"'::regclass
[0m
  [1m[35mSQL (52.9ms)[0m  INSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bHZoLm1l
', NULL, '2013-02-13 07:19:27.517393', NULL, NULL, NULL, '2013-02-13 07:19:27.517742', '2013-02-13 07:19:27.517742', NULL) RETURNING "id"
  [1m[36mSQL (19.3ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (0.7ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (1.0ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mSQL (1.5ms)[0m  SELECT 1 FROM "people" INNER JOIN "community_memberships" ON "people".id = "community_memberships".person_id WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' AND (("community_memberships".community_id = 1)) LIMIT 1
  [1m[36mSQL (2.1ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.4ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (3.6ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (9.6ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (3.8ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.2ms)[0m  [1mSELECT "communities".* FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY'))[0m
~~~~~~~~~~~~~~~not request.xhr~~~~~~~~~
  [1m[35mSQL (0.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"news_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.4ms)[0m  [1mSELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 1)[0m
  [1m[35mCommunity Load (0.4ms)[0m  SELECT "communities".* FROM "communities"
  [1m[36mSQL (0.5ms)[0m  [1mSELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 1) LIMIT 2[0m
  [1m[35mSQL (1.1ms)[0m  SELECT COUNT(*) FROM "listings" WHERE "listings"."listing_type" = 'offer' AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')
 ) AND (open = '1' AND (valid_until IS NULL OR valid_until > '2013-02-13 07:19:27'))
  [1m[36mListing Load (3.4ms)[0m  [1mSELECT "listings".* FROM "listings" WHERE "listings"."listing_type" = 'offer' AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')
 ) AND (open = '1' AND (valid_until IS NULL OR valid_until > '2013-02-13 07:19:27')) ORDER BY listings.created_at DESC LIMIT 3 OFFSET 0[0m
  [1m[35mListingImage Load (1.1ms)[0m  SELECT "listing_images".* FROM "listing_images" WHERE ("listing_images".listing_id IN (4,3,1))
  [1m[36mPerson Load (1.4ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"diet_listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.8ms)[0m  [1mSELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 4)[0m
  [1m[35mSQL (53.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"comments"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (13.2ms)[0m  [1mSELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 4)[0m
  [1m[35mPerson Load (1.6ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bmEhbODeyr4Oap3a6HdQnY' LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 3)[0m
  [1m[35mSQL (1.5ms)[0m  SELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 3)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (1.0ms)[0m  SELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 1)
  [1m[36mSQL (0.8ms)[0m  [1mSELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 1)[0m
Rendered homepage/_recent_listing.haml (184.9ms)
Rendered common/_staples.haml (2.2ms)
  [1m[35mCommunityMembership Load (0.6ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'bTFw-gDdur4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
Rendered homepage/_user_communities.haml (10.5ms)
Rendered common/_staples.haml (2.6ms)
  [1m[36mLocation Load (1.0ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'bTFw-gDdur4Oaa3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
Rendered common/_staples.haml (2.6ms)
Rendered homepage/_profile_info_empty_notification.haml (3.7ms)
Rendered common/_staples.haml (2.2ms)
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"event_feed_events"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.8ms)[0m  [1mSELECT COUNT(*) FROM "event_feed_events" WHERE ("event_feed_events".community_id = 1)[0m
Rendered common/_staples.haml (2.2ms)
  [1m[35mEventFeedEvent Load (1.5ms)[0m  SELECT "event_feed_events".* FROM "event_feed_events" WHERE ("event_feed_events".community_id = 1) ORDER BY id DESC LIMIT 5
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1[0m
Rendered event_feed_events/_login.haml (4.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bmEhbODeyr4Oap3a6HdQnY' LIMIT 1
  [1m[36mCommunity Load (1.4ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
Rendered event_feed_events/_join.haml (10.4ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1
Rendered event_feed_events/_login.haml (10.5ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bmEhbODeyr4Oap3a6HdQnY' LIMIT 1[0m
Rendered event_feed_events/_login.haml (4.1ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bmEhbODeyr4Oap3a6HdQnY' LIMIT 1
Rendered event_feed_events/_login.haml (3.9ms)
Rendered homepage/_event_feed_event.haml (56.1ms)
Rendered homepage/_event_feed.haml (62.3ms)
Rendered common/_staples.haml (2.2ms)
Rendered common/_staples.haml (6.6ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 1) LIMIT 2[0m
Rendered homepage/_news_items.haml (9.9ms)
Rendered common/_staples.haml (2.4ms)
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"polls"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPoll Load (1.5ms)[0m  [1mSELECT "polls".* FROM "polls" WHERE "polls"."active" = 't' AND ("polls".community_id = 1) LIMIT 1[0m
Rendered layouts/_kissmetrics.haml (3.3ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.8ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.4ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (11.1ms)
Rendered communities/default/logo/logo.haml (2.2ms)
Rendered layouts/_no_javascript.haml (16.9ms)
Rendered layouts/_facebook_sdk.haml (2.3ms)
  [1m[35mSQL (2.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.7ms)[0m  SELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'bTFw-gDdur4Oaa3a6HdQnY')) AND participations.person_id = 'bTFw-gDdur4Oaa3a6HdQnY')
Rendered layouts/_logged_in_messages_icon.haml (17.7ms)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.5ms)[0m  SELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'bTFw-gDdur4Oaa3a6HdQnY')
Rendered layouts/_logged_in_notifications_icon.haml (13.7ms)
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (21.5ms)[0m  SELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'bTFw-gDdur4Oaa3a6HdQnY') AND (acceptance is null)
Rendered layouts/_logged_in_swap_offers_icon.haml (36.3ms)
  [1m[36mCommunityMembership Load (1.1ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."community_id" = 1 AND ("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY') LIMIT 1[0m
Rendered layouts/_logged_in.haml (104.0ms)
Rendered layouts/_notifications.haml (5.1ms)
Rendered layouts/_display_popup.haml (7.2ms)
Rendered homepage/index.haml within layouts/application (660.8ms)
Completed 200 OK in 1931ms (Views: 534.3ms | ActiveRecord: 496.6ms | Sphinx: 0.0ms)


Started GET "/en/people/bTFw-gDdur4Oaa3a6HdQnY/invitations/new?complement=true" for 127.0.0.1 at 2013-02-13 12:49:35 +0530
  Processing by InvitationsController#new as HTML
  Parameters: {"complement"=>"true", "locale"=>"en", "person_id"=>"bTFw-gDdur4Oaa3a6HdQnY"}
  [1m[35mPK and serial sequence (2.5ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.1ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (3.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (0.7ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (1.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (2.9ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (3.3ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (3.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.0ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (0.5ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'bTFw-gDdur4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bHZoLm1l
', NULL, '2013-02-13 07:19:36.140045', NULL, NULL, NULL, '2013-02-13 07:19:36.140258', '2013-02-13 07:19:36.140258', NULL) RETURNING "id"[0m
  [1m[35mSQL (26.4ms)[0m  COMMIT
  [1m[36mSQL (1.3ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.3ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mSQL (1.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"invitations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
Rendered layouts/_kissmetrics.haml (3.1ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.5ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.0ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (10.2ms)
Rendered communities/default/logo/logo.haml (2.4ms)
Rendered layouts/_no_javascript.haml (84.2ms)
Rendered layouts/_facebook_sdk.haml (2.7ms)
  [1m[35mSQL (2.5ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.1ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (3.4ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (6.5ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (3.8ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (1.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.8ms)[0m  [1mSELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'bTFw-gDdur4Oaa3a6HdQnY')) AND participations.person_id = 'bTFw-gDdur4Oaa3a6HdQnY')[0m
Rendered layouts/_logged_in_messages_icon.haml (749.5ms)
  [1m[35mSQL (1.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'bTFw-gDdur4Oaa3a6HdQnY')[0m
Rendered layouts/_logged_in_notifications_icon.haml (11.3ms)
  [1m[35mSQL (1.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.5ms)[0m  [1mSELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'bTFw-gDdur4Oaa3a6HdQnY') AND (acceptance is null)[0m
Rendered layouts/_logged_in_swap_offers_icon.haml (11.3ms)
  [1m[35mCommunityMembership Load (0.6ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."community_id" = 1 AND ("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY') LIMIT 1
Rendered layouts/_logged_in.haml (788.0ms)
Rendered layouts/_notifications.haml (5.1ms)
  [1m[36mLocation Load (1.0ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'bTFw-gDdur4Oaa3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
Rendered layouts/_display_popup.haml (10.4ms)
Rendered invitations/new.html.haml within layouts/application (993.0ms)
Completed 200 OK in 1672ms (Views: 1023.0ms | ActiveRecord: 94.8ms | Sphinx: 0.0ms)


Started POST "/en/people/bTFw-gDdur4Oaa3a6HdQnY/invitations" for 127.0.0.1 at 2013-02-13 12:49:52 +0530
  Processing by InvitationsController#create as JS
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"NkZ6IWGiOoJ8LNPCOR7+plEluO7i/JaZDiNM2t7u7ng=", "invitation"=>{"email"=>"saraf.chaitanya@gmail.com", "name"=>"chaitanya", "community_id"=>"1", "inviter_id"=>"bTFw-gDdur4Oaa3a6HdQnY", "complement"=>"true"}, "commit"=>"Send Invitation", "locale"=>"en", "person_id"=>"bTFw-gDdur4Oaa3a6HdQnY"}
  [1m[35mPK and serial sequence (4.0ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (2.1ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.4ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.3ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (3.7ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (3.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.9ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (0.5ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'bTFw-gDdur4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bHZoLm1l
', NULL, '2013-02-13 07:19:53.072782', NULL, NULL, NULL, '2013-02-13 07:19:53.072918', '2013-02-13 07:19:53.072918', NULL) RETURNING "id"[0m
  [1m[35mSQL (26.3ms)[0m  COMMIT
  [1m[36mSQL (0.6ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.0ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"invitations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
WARNING: Can't mass-assign protected attributes: complement
  [1m[35mSQL (0.5ms)[0m  BEGIN
  [1m[36mSQL (1.7ms)[0m  [1mSELECT 1 FROM "invitations" WHERE ("invitations"."code" = 'SB7AUS') LIMIT 1[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"invitations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.9ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"invitations"'::regclass
[0m
  [1m[35mSQL (22.0ms)[0m  INSERT INTO "invitations" ("code", "community_id", "usages_left", "valid_until", "information", "created_at", "updated_at", "inviter_id", "message", "email", "name") VALUES ('SB7AUS', 1, 1, NULL, NULL, '2013-02-13 07:19:53.236164', '2013-02-13 07:19:53.236164', 'bTFw-gDdur4Oaa3a6HdQnY', NULL, 'saraf.chaitanya@gmail.com', 'chaitanya') RETURNING "id"
  [1m[36mSQL (10.2ms)[0m  [1mCOMMIT[0m
Completed 500 Internal Server Error in 737ms

SyntaxError (/home/chaitanya/workArea/ST-to-RGF/app/mailers/person_mailer.rb:223: syntax error, unexpected tASSOC, expecting keyword_end
...tastic with food.", :inviter => @invitation.inviter.name, :c...
...                               ^
/home/chaitanya/workArea/ST-to-RGF/app/mailers/person_mailer.rb:223: syntax error, unexpected tASSOC, expecting tCOLON2 or '[' or '.'
...ion.inviter.name, :community => @invitation.community.name)
...                               ^
/home/chaitanya/workArea/ST-to-RGF/app/mailers/person_mailer.rb:223: syntax error, unexpected ')', expecting keyword_end):
  app/controllers/invitations_controller.rb:23:in `create'

Rendered /home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/actionpack-3.0.17/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.7ms)
Rendered /home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/actionpack-3.0.17/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (968.1ms)
Rendered /home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/actionpack-3.0.17/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (977.2ms)


Started GET "/en/people/bTFw-gDdur4Oaa3a6HdQnY/invitations/new?complement=true" for 127.0.0.1 at 2013-02-13 12:51:19 +0530
  Processing by InvitationsController#new as HTML
  Parameters: {"complement"=>"true", "locale"=>"en", "person_id"=>"bTFw-gDdur4Oaa3a6HdQnY"}
  [1m[35mPK and serial sequence (6.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (1.5ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (1.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (0.8ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (1.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (2.8ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (2.7ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.3ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.4ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (0.9ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'bTFw-gDdur4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bHZoLm1l
', NULL, '2013-02-13 07:21:20.246477', NULL, NULL, NULL, '2013-02-13 07:21:20.246594', '2013-02-13 07:21:20.246594', NULL) RETURNING "id"[0m
  [1m[35mSQL (27.6ms)[0m  COMMIT
  [1m[36mSQL (1.4ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.0ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"invitations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
Rendered layouts/_kissmetrics.haml (3.4ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (2.4ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.3ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (11.1ms)
Rendered communities/default/logo/logo.haml (2.6ms)
Rendered layouts/_no_javascript.haml (16.9ms)
Rendered layouts/_facebook_sdk.haml (2.4ms)
  [1m[35mSQL (2.0ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (2.4ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (1.3ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (5.9ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (1.3ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.7ms)[0m  [1mSELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'bTFw-gDdur4Oaa3a6HdQnY')) AND participations.person_id = 'bTFw-gDdur4Oaa3a6HdQnY')[0m
Rendered layouts/_logged_in_messages_icon.haml (746.1ms)
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.8ms)[0m  [1mSELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'bTFw-gDdur4Oaa3a6HdQnY')[0m
Rendered layouts/_logged_in_notifications_icon.haml (13.3ms)
  [1m[35mSQL (1.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'bTFw-gDdur4Oaa3a6HdQnY') AND (acceptance is null)[0m
Rendered layouts/_logged_in_swap_offers_icon.haml (13.1ms)
  [1m[35mCommunityMembership Load (0.6ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."community_id" = 1 AND ("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY') LIMIT 1
Rendered layouts/_logged_in.haml (789.8ms)
Rendered layouts/_notifications.haml (71.2ms)
  [1m[36mLocation Load (1.3ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'bTFw-gDdur4Oaa3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
Rendered layouts/_display_popup.haml (11.0ms)
Rendered invitations/new.html.haml within layouts/application (1053.0ms)
Completed 200 OK in 1667ms (Views: 1029.1ms | ActiveRecord: 91.6ms | Sphinx: 0.0ms)


Started GET "/en/people/bTFw-gDdur4Oaa3a6HdQnY/invitations/new?complement=true" for 127.0.0.1 at 2013-02-13 12:54:43 +0530
  Processing by InvitationsController#new as HTML
  Parameters: {"complement"=>"true", "locale"=>"en", "person_id"=>"bTFw-gDdur4Oaa3a6HdQnY"}
  [1m[35mPK and serial sequence (7.3ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (3.5ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.3ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (1.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.6ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (3.7ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.5ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.0ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (0.5ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'bTFw-gDdur4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  BEGIN
  [1m[36mSQL (1.2ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bHZoLm1l
', NULL, '2013-02-13 07:24:44.591580', NULL, NULL, NULL, '2013-02-13 07:24:44.591732', '2013-02-13 07:24:44.591732', NULL) RETURNING "id"[0m
  [1m[35mSQL (27.3ms)[0m  COMMIT
  [1m[36mSQL (0.7ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (0.5ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"invitations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
Rendered layouts/_kissmetrics.haml (3.2ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (2.6ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.9ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (11.6ms)
Rendered communities/default/logo/logo.haml (3.2ms)
Rendered layouts/_no_javascript.haml (19.4ms)
Rendered layouts/_facebook_sdk.haml (2.7ms)
  [1m[35mSQL (0.9ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (1.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (1.9ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (6.4ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (1.3ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (1.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.9ms)[0m  [1mSELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'bTFw-gDdur4Oaa3a6HdQnY')) AND participations.person_id = 'bTFw-gDdur4Oaa3a6HdQnY')[0m
Rendered layouts/_logged_in_messages_icon.haml (760.8ms)
  [1m[35mSQL (1.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.6ms)[0m  [1mSELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'bTFw-gDdur4Oaa3a6HdQnY')[0m
Rendered layouts/_logged_in_notifications_icon.haml (17.1ms)
  [1m[35mSQL (1.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.5ms)[0m  [1mSELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'bTFw-gDdur4Oaa3a6HdQnY') AND (acceptance is null)[0m
Rendered layouts/_logged_in_swap_offers_icon.haml (10.0ms)
  [1m[35mCommunityMembership Load (1.1ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."community_id" = 1 AND ("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY') LIMIT 1
Rendered layouts/_logged_in.haml (807.2ms)
Rendered layouts/_notifications.haml (4.9ms)
  [1m[36mLocation Load (1.1ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'bTFw-gDdur4Oaa3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
Rendered layouts/_display_popup.haml (10.4ms)
Rendered invitations/new.html.haml within layouts/application (1034.3ms)
Completed 200 OK in 1713ms (Views: 1014.2ms | ActiveRecord: 100.4ms | Sphinx: 0.0ms)


Started POST "/en/people/bTFw-gDdur4Oaa3a6HdQnY/invitations" for 127.0.0.1 at 2013-02-13 12:54:56 +0530
  Processing by InvitationsController#create as JS
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"NkZ6IWGiOoJ8LNPCOR7+plEluO7i/JaZDiNM2t7u7ng=", "invitation"=>{"email"=>"saraf.chaitanya@gmail.com", "name"=>"chaitanya", "community_id"=>"1", "inviter_id"=>"bTFw-gDdur4Oaa3a6HdQnY", "complement"=>"true"}, "commit"=>"Send Invitation", "locale"=>"en", "person_id"=>"bTFw-gDdur4Oaa3a6HdQnY"}
  [1m[35mPK and serial sequence (6.9ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.2ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.4ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.5ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (1.4ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (1.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.4ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.6ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (1.0ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'bTFw-gDdur4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bHZoLm1l
', NULL, '2013-02-13 07:24:56.609330', NULL, NULL, NULL, '2013-02-13 07:24:56.609483', '2013-02-13 07:24:56.609483', NULL) RETURNING "id"[0m
  [1m[35mSQL (32.5ms)[0m  COMMIT
  [1m[36mSQL (1.6ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.0ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"invitations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
WARNING: Can't mass-assign protected attributes: complement
  [1m[35mSQL (0.5ms)[0m  BEGIN
  [1m[36mSQL (0.9ms)[0m  [1mSELECT 1 FROM "invitations" WHERE ("invitations"."code" = 'WDYDX3') LIMIT 1[0m
  [1m[35mSQL (1.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"invitations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (5.0ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"invitations"'::regclass
[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "invitations" ("code", "community_id", "usages_left", "valid_until", "information", "created_at", "updated_at", "inviter_id", "message", "email", "name") VALUES ('WDYDX3', 1, 1, NULL, NULL, '2013-02-13 07:24:56.772661', '2013-02-13 07:24:56.772661', 'bTFw-gDdur4Oaa3a6HdQnY', NULL, 'saraf.chaitanya@gmail.com', 'chaitanya') RETURNING "id"
  [1m[36mSQL (6.4ms)[0m  [1mCOMMIT[0m
Completed 500 Internal Server Error in 650ms

SyntaxError (/home/chaitanya/workArea/ST-to-RGF/app/mailers/person_mailer.rb:223: syntax error, unexpected tASSOC, expecting keyword_end
...tastic with food.", :inviter => @invitation.inviter.name, :c...
...                               ^
/home/chaitanya/workArea/ST-to-RGF/app/mailers/person_mailer.rb:223: syntax error, unexpected tASSOC, expecting tCOLON2 or '[' or '.'
...ion.inviter.name, :community => @invitation.community.name)
...                               ^
/home/chaitanya/workArea/ST-to-RGF/app/mailers/person_mailer.rb:223: syntax error, unexpected ')', expecting keyword_end):
  app/controllers/invitations_controller.rb:23:in `create'

Rendered /home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/actionpack-3.0.17/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.6ms)
Rendered /home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/actionpack-3.0.17/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (983.8ms)
Rendered /home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/actionpack-3.0.17/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (1078.5ms)


Started GET "/en/people/bTFw-gDdur4Oaa3a6HdQnY/invitations/new?complement=true" for 127.0.0.1 at 2013-02-13 12:55:55 +0530
  Processing by InvitationsController#new as HTML
  Parameters: {"complement"=>"true", "locale"=>"en", "person_id"=>"bTFw-gDdur4Oaa3a6HdQnY"}
  [1m[35mPK and serial sequence (6.0ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (2.0ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (3.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.3ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (5.7ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (2.0ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.6ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.4ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (0.9ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'bTFw-gDdur4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  BEGIN
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bHZoLm1l
', NULL, '2013-02-13 07:25:56.652498', NULL, NULL, NULL, '2013-02-13 07:25:56.652618', '2013-02-13 07:25:56.652618', NULL) RETURNING "id"[0m
  [1m[35mSQL (33.1ms)[0m  COMMIT
  [1m[36mSQL (1.9ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.0ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"invitations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
Rendered layouts/_kissmetrics.haml (3.0ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.5ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (1.9ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (9.9ms)
Rendered communities/default/logo/logo.haml (2.4ms)
Rendered layouts/_no_javascript.haml (15.8ms)
Rendered layouts/_facebook_sdk.haml (2.3ms)
  [1m[35mSQL (0.9ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (2.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (7.0ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (3.4ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (7.8ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (5.6ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.6ms)[0m  [1mSELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'bTFw-gDdur4Oaa3a6HdQnY')) AND participations.person_id = 'bTFw-gDdur4Oaa3a6HdQnY')[0m
Rendered layouts/_logged_in_messages_icon.haml (807.0ms)
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.5ms)[0m  [1mSELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'bTFw-gDdur4Oaa3a6HdQnY')[0m
Rendered layouts/_logged_in_notifications_icon.haml (16.8ms)
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.8ms)[0m  [1mSELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'bTFw-gDdur4Oaa3a6HdQnY') AND (acceptance is null)[0m
Rendered layouts/_logged_in_swap_offers_icon.haml (20.7ms)
  [1m[35mCommunityMembership Load (1.1ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."community_id" = 1 AND ("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY') LIMIT 1
Rendered layouts/_logged_in.haml (862.0ms)
Rendered layouts/_notifications.haml (8.8ms)
  [1m[36mLocation Load (0.5ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'bTFw-gDdur4Oaa3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
Rendered layouts/_display_popup.haml (10.7ms)
Rendered invitations/new.html.haml within layouts/application (990.4ms)
Completed 200 OK in 1662ms (Views: 952.6ms | ActiveRecord: 118.6ms | Sphinx: 0.0ms)


Started POST "/en/people/bTFw-gDdur4Oaa3a6HdQnY/invitations" for 127.0.0.1 at 2013-02-13 12:56:12 +0530
  Processing by InvitationsController#create as JS
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"NkZ6IWGiOoJ8LNPCOR7+plEluO7i/JaZDiNM2t7u7ng=", "invitation"=>{"email"=>"saraf.chaitanya@gmail.com", "name"=>"chaitanya", "community_id"=>"1", "inviter_id"=>"bTFw-gDdur4Oaa3a6HdQnY", "complement"=>"true"}, "commit"=>"Send Invitation", "locale"=>"en", "person_id"=>"bTFw-gDdur4Oaa3a6HdQnY"}
  [1m[35mPK and serial sequence (6.8ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (3.9ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.4ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (7.1ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (3.7ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (3.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.7ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.5ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (1.0ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'bTFw-gDdur4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  BEGIN
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bHZoLm1l
', NULL, '2013-02-13 07:26:13.011591', NULL, NULL, NULL, '2013-02-13 07:26:13.011705', '2013-02-13 07:26:13.011705', NULL) RETURNING "id"[0m
  [1m[35mSQL (39.7ms)[0m  COMMIT
  [1m[36mSQL (1.6ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (0.9ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"invitations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
WARNING: Can't mass-assign protected attributes: complement
  [1m[35mSQL (0.6ms)[0m  BEGIN
  [1m[36mSQL (1.0ms)[0m  [1mSELECT 1 FROM "invitations" WHERE ("invitations"."code" = '7K75KB') LIMIT 1[0m
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"invitations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.3ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"invitations"'::regclass
[0m
  [1m[35mSQL (1.2ms)[0m  INSERT INTO "invitations" ("code", "community_id", "usages_left", "valid_until", "information", "created_at", "updated_at", "inviter_id", "message", "email", "name") VALUES ('7K75KB', 1, 1, NULL, NULL, '2013-02-13 07:26:13.111042', '2013-02-13 07:26:13.111042', 'bTFw-gDdur4Oaa3a6HdQnY', NULL, 'saraf.chaitanya@gmail.com', 'chaitanya') RETURNING "id"
  [1m[36mSQL (28.3ms)[0m  [1mCOMMIT[0m
Completed 500 Internal Server Error in 640ms

SyntaxError (/home/chaitanya/workArea/ST-to-RGF/app/mailers/person_mailer.rb:223: syntax error, unexpected ',', expecting ')'
...s you're fantastic with food.", :inviter => @invitation.invi...
...                               ^
/home/chaitanya/workArea/ST-to-RGF/app/mailers/person_mailer.rb:223: syntax error, unexpected tASSOC, expecting tCOLON2 or '[' or '.'
...ion.inviter.name, :community => @invitation.community.name)
...                               ^):
  app/controllers/invitations_controller.rb:23:in `create'

Rendered /home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/actionpack-3.0.17/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.6ms)
Rendered /home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/actionpack-3.0.17/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1006.5ms)
Rendered /home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/actionpack-3.0.17/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (1015.7ms)


Started GET "/en/people/bTFw-gDdur4Oaa3a6HdQnY/invitations/new?complement=true" for 127.0.0.1 at 2013-02-13 13:00:07 +0530
  Processing by InvitationsController#new as HTML
  Parameters: {"complement"=>"true", "locale"=>"en", "person_id"=>"bTFw-gDdur4Oaa3a6HdQnY"}
  [1m[35mPK and serial sequence (2.6ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (1.5ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (0.7ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (1.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (2.8ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (1.6ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (1.6ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (0.7ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (0.5ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'bTFw-gDdur4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bHZoLm1l
', NULL, '2013-02-13 07:30:08.603423', NULL, NULL, NULL, '2013-02-13 07:30:08.603552', '2013-02-13 07:30:08.603552', NULL) RETURNING "id"[0m
  [1m[35mSQL (27.9ms)[0m  COMMIT
  [1m[36mSQL (0.7ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.0ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mSQL (1.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"invitations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
Rendered layouts/_kissmetrics.haml (3.4ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.9ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (82.8ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (91.0ms)
Rendered communities/default/logo/logo.haml (4.2ms)
Rendered layouts/_no_javascript.haml (21.4ms)
Rendered layouts/_facebook_sdk.haml (2.7ms)
  [1m[35mSQL (0.9ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (1.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (2.9ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (1.5ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (2.5ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (2.5ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (1.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (3.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.6ms)[0m  [1mSELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'bTFw-gDdur4Oaa3a6HdQnY')) AND participations.person_id = 'bTFw-gDdur4Oaa3a6HdQnY')[0m
Rendered layouts/_logged_in_messages_icon.haml (934.9ms)
  [1m[35mSQL (1.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.7ms)[0m  [1mSELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'bTFw-gDdur4Oaa3a6HdQnY')[0m
Rendered layouts/_logged_in_notifications_icon.haml (10.4ms)
  [1m[35mSQL (1.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.5ms)[0m  [1mSELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'bTFw-gDdur4Oaa3a6HdQnY') AND (acceptance is null)[0m
Rendered layouts/_logged_in_swap_offers_icon.haml (11.4ms)
  [1m[35mCommunityMembership Load (0.6ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."community_id" = 1 AND ("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY') LIMIT 1
Rendered layouts/_logged_in.haml (971.5ms)
Rendered layouts/_notifications.haml (5.6ms)
  [1m[36mLocation Load (1.1ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'bTFw-gDdur4Oaa3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
Rendered layouts/_display_popup.haml (11.5ms)
Rendered invitations/new.html.haml within layouts/application (1186.1ms)
Completed 200 OK in 1889ms (Views: 1168.5ms | ActiveRecord: 76.6ms | Sphinx: 0.0ms)


Started POST "/en/people/bTFw-gDdur4Oaa3a6HdQnY/invitations" for 127.0.0.1 at 2013-02-13 13:00:24 +0530
  Processing by InvitationsController#create as JS
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"NkZ6IWGiOoJ8LNPCOR7+plEluO7i/JaZDiNM2t7u7ng=", "invitation"=>{"email"=>"saraf.chaitanya@gmail.com", "name"=>"chaitanya", "community_id"=>"1", "inviter_id"=>"bTFw-gDdur4Oaa3a6HdQnY", "complement"=>"true"}, "commit"=>"Send Invitation", "locale"=>"en", "person_id"=>"bTFw-gDdur4Oaa3a6HdQnY"}
  [1m[35mPK and serial sequence (4.3ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (2.1ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (1.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (0.9ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.4ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (3.4ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.2ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.4ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (0.7ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'bTFw-gDdur4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  BEGIN
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bHZoLm1l
', NULL, '2013-02-13 07:30:24.779613', NULL, NULL, NULL, '2013-02-13 07:30:24.779729', '2013-02-13 07:30:24.779729', NULL) RETURNING "id"[0m
  [1m[35mSQL (29.1ms)[0m  COMMIT
  [1m[36mSQL (1.8ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (0.9ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"invitations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
WARNING: Can't mass-assign protected attributes: complement
  [1m[35mSQL (0.5ms)[0m  BEGIN
  [1m[36mSQL (0.9ms)[0m  [1mSELECT 1 FROM "invitations" WHERE ("invitations"."code" = 'E3ZHD3') LIMIT 1[0m
  [1m[35mSQL (1.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"invitations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (5.1ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"invitations"'::regclass
[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "invitations" ("code", "community_id", "usages_left", "valid_until", "information", "created_at", "updated_at", "inviter_id", "message", "email", "name") VALUES ('E3ZHD3', 1, 1, NULL, NULL, '2013-02-13 07:30:24.932965', '2013-02-13 07:30:24.932965', 'bTFw-gDdur4Oaa3a6HdQnY', NULL, 'saraf.chaitanya@gmail.com', 'chaitanya') RETURNING "id"
  [1m[36mSQL (10.9ms)[0m  [1mCOMMIT[0m
Completed 500 Internal Server Error in 719ms

SyntaxError (/home/chaitanya/workArea/ST-to-RGF/app/mailers/person_mailer.rb:223: syntax error, unexpected tASSOC, expecting keyword_end
...tastic with food.", :inviter => @invitation.inviter.name, :c...
...                               ^
/home/chaitanya/workArea/ST-to-RGF/app/mailers/person_mailer.rb:223: syntax error, unexpected tASSOC, expecting tCOLON2 or '[' or '.'
...ion.inviter.name, :community => @invitation.community.name
...                               ^):
  app/controllers/invitations_controller.rb:23:in `create'

Rendered /home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/actionpack-3.0.17/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.6ms)
Rendered /home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/actionpack-3.0.17/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (968.2ms)
Rendered /home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/actionpack-3.0.17/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (976.6ms)


Started GET "/en/people/bTFw-gDdur4Oaa3a6HdQnY/invitations/new?complement=true" for 127.0.0.1 at 2013-02-13 13:02:12 +0530
  Processing by InvitationsController#new as HTML
  Parameters: {"complement"=>"true", "locale"=>"en", "person_id"=>"bTFw-gDdur4Oaa3a6HdQnY"}
  [1m[35mPK and serial sequence (7.0ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (3.5ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.4ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (1.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.4ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (3.6ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (3.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.3ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.5ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (0.9ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'bTFw-gDdur4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  BEGIN
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bHZoLm1l
', NULL, '2013-02-13 07:32:13.171628', NULL, NULL, NULL, '2013-02-13 07:32:13.171798', '2013-02-13 07:32:13.171798', NULL) RETURNING "id"[0m
  [1m[35mSQL (32.6ms)[0m  COMMIT
  [1m[36mSQL (0.8ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (0.7ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"invitations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
Rendered layouts/_kissmetrics.haml (3.1ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (2.1ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.0ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (10.0ms)
Rendered communities/default/logo/logo.haml (2.3ms)
Rendered layouts/_no_javascript.haml (16.1ms)
Rendered layouts/_facebook_sdk.haml (2.4ms)
  [1m[35mSQL (1.7ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (1.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.6ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (3.5ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (6.3ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.4ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.8ms)[0m  [1mSELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'bTFw-gDdur4Oaa3a6HdQnY')) AND participations.person_id = 'bTFw-gDdur4Oaa3a6HdQnY')[0m
Rendered layouts/_logged_in_messages_icon.haml (860.4ms)
  [1m[35mSQL (0.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.7ms)[0m  [1mSELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'bTFw-gDdur4Oaa3a6HdQnY')[0m
Rendered layouts/_logged_in_notifications_icon.haml (10.9ms)
  [1m[35mSQL (1.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.8ms)[0m  [1mSELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'bTFw-gDdur4Oaa3a6HdQnY') AND (acceptance is null)[0m
Rendered layouts/_logged_in_swap_offers_icon.haml (14.2ms)
  [1m[35mCommunityMembership Load (1.0ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."community_id" = 1 AND ("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY') LIMIT 1
Rendered layouts/_logged_in.haml (903.3ms)
Rendered layouts/_notifications.haml (7.7ms)
  [1m[36mLocation Load (0.6ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'bTFw-gDdur4Oaa3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
Rendered layouts/_display_popup.haml (10.1ms)
Rendered invitations/new.html.haml within layouts/application (1028.3ms)
Completed 200 OK in 1712ms (Views: 1001.5ms | ActiveRecord: 111.6ms | Sphinx: 0.0ms)


Started POST "/en/people/bTFw-gDdur4Oaa3a6HdQnY/invitations" for 127.0.0.1 at 2013-02-13 13:02:39 +0530
  Processing by InvitationsController#create as JS
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"NkZ6IWGiOoJ8LNPCOR7+plEluO7i/JaZDiNM2t7u7ng=", "invitation"=>{"email"=>"saraf.chaitanya@gmail.com", "name"=>"chaitanya", "community_id"=>"1", "inviter_id"=>"bTFw-gDdur4Oaa3a6HdQnY", "complement"=>"true"}, "commit"=>"Send Invitation", "locale"=>"en", "person_id"=>"bTFw-gDdur4Oaa3a6HdQnY"}
  [1m[35mPK and serial sequence (2.5ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (1.3ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.3ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.6ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (3.4ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.9ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.4ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (1.0ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'bTFw-gDdur4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  BEGIN
  [1m[36mSQL (1.4ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bHZoLm1l
', NULL, '2013-02-13 07:32:40.054484', NULL, NULL, NULL, '2013-02-13 07:32:40.054604', '2013-02-13 07:32:40.054604', NULL) RETURNING "id"[0m
  [1m[35mSQL (26.5ms)[0m  COMMIT
  [1m[36mSQL (1.5ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (0.9ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"invitations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
WARNING: Can't mass-assign protected attributes: complement
  [1m[35mSQL (0.5ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mSELECT 1 FROM "invitations" WHERE ("invitations"."code" = 'FS7A0R') LIMIT 1[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"invitations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"invitations"'::regclass
[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "invitations" ("code", "community_id", "usages_left", "valid_until", "information", "created_at", "updated_at", "inviter_id", "message", "email", "name") VALUES ('FS7A0R', 1, 1, NULL, NULL, '2013-02-13 07:32:40.145834', '2013-02-13 07:32:40.145834', 'bTFw-gDdur4Oaa3a6HdQnY', NULL, 'saraf.chaitanya@gmail.com', 'chaitanya') RETURNING "id"
  [1m[36mSQL (3.2ms)[0m  [1mCOMMIT[0m
Completed 500 Internal Server Error in 794ms

NameError (undefined local variable or method `host' for #<InvitationsController:0xd9565ac>):
  app/controllers/invitations_controller.rb:23:in `create'

Rendered /home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/actionpack-3.0.17/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.7ms)
Rendered /home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/actionpack-3.0.17/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (960.7ms)
Rendered /home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/actionpack-3.0.17/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (967.6ms)


Started GET "/en/people/bTFw-gDdur4Oaa3a6HdQnY/invitations/new?complement=true" for 127.0.0.1 at 2013-02-13 13:03:13 +0530
  Processing by InvitationsController#new as HTML
  Parameters: {"complement"=>"true", "locale"=>"en", "person_id"=>"bTFw-gDdur4Oaa3a6HdQnY"}
  [1m[35mPK and serial sequence (6.4ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (3.4ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.3ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (1.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (2.3ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (1.3ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (1.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (0.6ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (0.6ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'bTFw-gDdur4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  BEGIN
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bHZoLm1l
', NULL, '2013-02-13 07:33:14.049655', NULL, NULL, NULL, '2013-02-13 07:33:14.049778', '2013-02-13 07:33:14.049778', NULL) RETURNING "id"[0m
  [1m[35mSQL (19.4ms)[0m  COMMIT
  [1m[36mSQL (1.4ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (0.9ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"invitations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
Rendered layouts/_kissmetrics.haml (3.8ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (2.0ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.3ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (11.7ms)
Rendered communities/default/logo/logo.haml (2.3ms)
Rendered layouts/_no_javascript.haml (16.6ms)
Rendered layouts/_facebook_sdk.haml (2.4ms)
  [1m[35mSQL (2.0ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (2.6ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.4ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (1.5ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (2.5ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (1.4ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (1.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.7ms)[0m  [1mSELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'bTFw-gDdur4Oaa3a6HdQnY')) AND participations.person_id = 'bTFw-gDdur4Oaa3a6HdQnY')[0m
Rendered layouts/_logged_in_messages_icon.haml (770.4ms)
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'bTFw-gDdur4Oaa3a6HdQnY')[0m
Rendered layouts/_logged_in_notifications_icon.haml (11.8ms)
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.7ms)[0m  [1mSELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'bTFw-gDdur4Oaa3a6HdQnY') AND (acceptance is null)[0m
Rendered layouts/_logged_in_swap_offers_icon.haml (13.0ms)
  [1m[35mCommunityMembership Load (0.5ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."community_id" = 1 AND ("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY') LIMIT 1
Rendered layouts/_logged_in.haml (811.6ms)
Rendered layouts/_notifications.haml (5.0ms)
  [1m[36mLocation Load (1.1ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'bTFw-gDdur4Oaa3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
Rendered layouts/_display_popup.haml (11.4ms)
Rendered invitations/new.html.haml within layouts/application (1087.1ms)
Completed 200 OK in 1718ms (Views: 1065.1ms | ActiveRecord: 79.9ms | Sphinx: 0.0ms)


Started GET "/en/people/bTFw-gDdur4Oaa3a6HdQnY/invitations/new?complement=true" for 127.0.0.1 at 2013-02-13 13:03:45 +0530
  Processing by InvitationsController#new as HTML
  Parameters: {"complement"=>"true", "locale"=>"en", "person_id"=>"bTFw-gDdur4Oaa3a6HdQnY"}
  [1m[35mPK and serial sequence (8.7ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (3.6ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.3ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (2.9ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.2ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.4ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (0.9ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'bTFw-gDdur4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  BEGIN
  [1m[36mSQL (2.4ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bHZoLm1l
', NULL, '2013-02-13 07:33:46.079089', NULL, NULL, NULL, '2013-02-13 07:33:46.079214', '2013-02-13 07:33:46.079214', NULL) RETURNING "id"[0m
  [1m[35mSQL (35.7ms)[0m  COMMIT
  [1m[36mSQL (1.3ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (0.6ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"invitations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
Rendered layouts/_kissmetrics.haml (3.1ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.6ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.0ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (10.4ms)
Rendered communities/default/logo/logo.haml (2.3ms)
Rendered layouts/_no_javascript.haml (16.5ms)
Rendered layouts/_facebook_sdk.haml (2.5ms)
  [1m[35mSQL (2.0ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (3.9ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (6.8ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (3.2ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.8ms)[0m  [1mSELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'bTFw-gDdur4Oaa3a6HdQnY')) AND participations.person_id = 'bTFw-gDdur4Oaa3a6HdQnY')[0m
Rendered layouts/_logged_in_messages_icon.haml (757.1ms)
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.2ms)[0m  [1mSELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'bTFw-gDdur4Oaa3a6HdQnY')[0m
Rendered layouts/_logged_in_notifications_icon.haml (12.1ms)
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.3ms)[0m  [1mSELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'bTFw-gDdur4Oaa3a6HdQnY') AND (acceptance is null)[0m
Rendered layouts/_logged_in_swap_offers_icon.haml (14.9ms)
  [1m[35mCommunityMembership Load (1.1ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."community_id" = 1 AND ("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY') LIMIT 1
Rendered layouts/_logged_in.haml (801.2ms)
Rendered layouts/_notifications.haml (7.2ms)
  [1m[36mLocation Load (1.2ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'bTFw-gDdur4Oaa3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
Rendered layouts/_display_popup.haml (11.0ms)
Rendered invitations/new.html.haml within layouts/application (996.6ms)
Completed 200 OK in 1656ms (Views: 961.4ms | ActiveRecord: 123.9ms | Sphinx: 0.0ms)


Started POST "/en/people/bTFw-gDdur4Oaa3a6HdQnY/invitations" for 127.0.0.1 at 2013-02-13 13:03:58 +0530
  Processing by InvitationsController#create as JS
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"NkZ6IWGiOoJ8LNPCOR7+plEluO7i/JaZDiNM2t7u7ng=", "invitation"=>{"email"=>"saraf.chaitanya@gmail.com", "name"=>"chaitanya", "community_id"=>"1", "inviter_id"=>"bTFw-gDdur4Oaa3a6HdQnY", "complement"=>"true"}, "commit"=>"Send Invitation", "locale"=>"en", "person_id"=>"bTFw-gDdur4Oaa3a6HdQnY"}
  [1m[35mPK and serial sequence (6.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (3.4ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.3ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (2.9ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (1.6ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.2ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.4ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (0.9ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'bTFw-gDdur4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  BEGIN
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bHZoLm1l
', NULL, '2013-02-13 07:33:58.968203', NULL, NULL, NULL, '2013-02-13 07:33:58.968322', '2013-02-13 07:33:58.968322', NULL) RETURNING "id"[0m
  [1m[35mSQL (32.4ms)[0m  COMMIT
  [1m[36mSQL (1.3ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.0ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"invitations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
WARNING: Can't mass-assign protected attributes: complement
  [1m[35mSQL (0.5ms)[0m  BEGIN
  [1m[36mSQL (0.9ms)[0m  [1mSELECT 1 FROM "invitations" WHERE ("invitations"."code" = 'JPJQ8X') LIMIT 1[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"invitations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.3ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"invitations"'::regclass
[0m
  [1m[35mSQL (1.8ms)[0m  INSERT INTO "invitations" ("code", "community_id", "usages_left", "valid_until", "information", "created_at", "updated_at", "inviter_id", "message", "email", "name") VALUES ('JPJQ8X', 1, 1, NULL, NULL, '2013-02-13 07:33:59.122673', '2013-02-13 07:33:59.122673', 'bTFw-gDdur4Oaa3a6HdQnY', NULL, 'saraf.chaitanya@gmail.com', 'chaitanya') RETURNING "id"
  [1m[36mSQL (9.7ms)[0m  [1mCOMMIT[0m
  [1m[35mPerson Load (1.5ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1
  [1m[36mCommunity Load (1.3ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
Rendered person_mailer/complement_to_cook.html.haml within layouts/email (12.5ms)

Sent mail to saraf.chaitanya@gmail.com (6264ms)
Date: Wed, 13 Feb 2013 13:03:59 +0530
From: no-reply@realgoodfood.org
Reply-To: chaitanya.saraf1985@gmail.com
To: saraf.chaitanya@gmail.com
Message-ID: <511b41e7a0b13_13dc6ff1d1e426d1@chaitanya-laptop.mail>
Subject: chs thinks you're fantastic with food.
Mime-Version: 1.0
Content-Type: text/html;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

<!DOCTYPE html>
<html lang='en-US' xml:lang='en-US' xmlns='http://www.w3.org/1999/xhtml'>
  <head></head>
  <body>
    <table border='0' cellpadding='0' cellspacing='0' style='width:550px; border-top:4px solid #223f05; font: 12px arial, sans-serif; margin: 0 auto;'>
      <tr>
        <td>
          <h1 style='font-size: 22px; margin:7px 0 12px 0; padding:0;'>
            RealGoodFood
          </h1>
          Hi
          chaitanya
          ,
          <br>
          <br>
          I know you're a great cook who loves real good food. I thought you might like the chance to share some of your delicious food with members of your community... like me! Of course you'll also get to discover and enjoy the best and most authentic food around while connecting with great folks.
          <br>
          <br>
          You can join RealGoodFood at
          <a href="test_url">test_url</a>
          <br>
          <br>
          Thanks,
          <br>
          The RealGoodFood Team
          <br>
          <br>
        </td>
      </tr>
    </table>
  </body>
</html>
Rendered layouts/_notifications.haml (5.3ms)
Rendered invitations/create.js.erb (8.6ms)
Completed 200 OK in 7424ms (Views: 38.6ms | ActiveRecord: 94.1ms | Sphinx: 0.0ms)


Started POST "/en/people/bTFw-gDdur4Oaa3a6HdQnY/invitations" for 127.0.0.1 at 2013-02-13 13:08:10 +0530
  Processing by InvitationsController#create as JS
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"NkZ6IWGiOoJ8LNPCOR7+plEluO7i/JaZDiNM2t7u7ng=", "invitation"=>{"email"=>"saraf.chaitanya@gmail.com", "name"=>"", "community_id"=>"1", "inviter_id"=>"bTFw-gDdur4Oaa3a6HdQnY", "complement"=>"true"}, "commit"=>"Send invitation", "locale"=>"en", "person_id"=>"bTFw-gDdur4Oaa3a6HdQnY"}
  [1m[35mPK and serial sequence (7.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (3.7ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.6ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.4ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.1ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.4ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.6ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (1.2ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'bTFw-gDdur4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  BEGIN
  [1m[36mSQL (1.2ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bHZoLm1l
', NULL, '2013-02-13 07:38:11.038199', NULL, NULL, NULL, '2013-02-13 07:38:11.038322', '2013-02-13 07:38:11.038322', NULL) RETURNING "id"[0m
  [1m[35mSQL (30.7ms)[0m  COMMIT
  [1m[36mSQL (1.5ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (0.6ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mSQL (0.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"invitations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
WARNING: Can't mass-assign protected attributes: complement
  [1m[35mSQL (0.5ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mSELECT 1 FROM "invitations" WHERE ("invitations"."code" = 'RSXVGG') LIMIT 1[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"invitations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (2.5ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"invitations"'::regclass
[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "invitations" ("code", "community_id", "usages_left", "valid_until", "information", "created_at", "updated_at", "inviter_id", "message", "email", "name") VALUES ('RSXVGG', 1, 1, NULL, NULL, '2013-02-13 07:38:11.133294', '2013-02-13 07:38:11.133294', 'bTFw-gDdur4Oaa3a6HdQnY', NULL, 'saraf.chaitanya@gmail.com', '') RETURNING "id"
  [1m[36mSQL (27.1ms)[0m  [1mCOMMIT[0m
  [1m[35mPerson Load (2.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1
  [1m[36mCommunity Load (1.3ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
Rendered person_mailer/complement_to_cook.html.haml within layouts/email (8.2ms)

Sent mail to saraf.chaitanya@gmail.com (5120ms)
Date: Wed, 13 Feb 2013 13:08:11 +0530
From: no-reply@realgoodfood.org
Reply-To: chaitanya.saraf1985@gmail.com
To: saraf.chaitanya@gmail.com
Message-ID: <511b42e3481bf_13dc628f50e42769@chaitanya-laptop.mail>
Subject: chs thinks you're fantastic with food.
Mime-Version: 1.0
Content-Type: text/html;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

<!DOCTYPE html>
<html lang='en-US' xml:lang='en-US' xmlns='http://www.w3.org/1999/xhtml'>
  <head></head>
  <body>
    <table border='0' cellpadding='0' cellspacing='0' style='width:550px; border-top:4px solid #223f05; font: 12px arial, sans-serif; margin: 0 auto;'>
      <tr>
        <td>
          <h1 style='font-size: 22px; margin:7px 0 12px 0; padding:0;'>
            RealGoodFood
          </h1>
          Hi
          
          ,
          <br>
          <br>
          I know you're a great cook who loves real good food. I thought you might like the chance to share some of your delicious food with members of your community... like me! Of course you'll also get to discover and enjoy the best and most authentic food around while connecting with great folks.
          <br>
          <br>
          You can join RealGoodFood at
          <a href="test_url">test_url</a>
          <br>
          <br>
          Thanks,
          <br>
          The RealGoodFood Team
          <br>
          <br>
        </td>
      </tr>
    </table>
  </body>
</html>
Rendered layouts/_notifications.haml (7.6ms)
Rendered invitations/create.js.erb (10.5ms)
Completed 200 OK in 5952ms (Views: 13.7ms | ActiveRecord: 113.4ms | Sphinx: 0.0ms)
DEPRECATION WARNING: config.action_view.debug_rjs will be removed in 3.1, from 3.1 onwards you will need to install prototype-rails to continue to use RJS templates . (called from <top (required)> at /home/chaitanya/workArea/ST-to-RGF/config/environment.rb:10)
New Relic Agent not running.
  [1m[36mSQL (1.1ms)[0m  [1mSHOW client_min_messages[0m
  [1m[35mSQL (0.4ms)[0m  SET client_min_messages TO 'panic'
  [1m[36mSQL (0.4ms)[0m  [1mSET standard_conforming_strings = on[0m
  [1m[35mSQL (0.4ms)[0m  SET client_min_messages TO 'notice'
  [1m[36mSQL (0.6ms)[0m  [1mSET time zone 'UTC'[0m
  [1m[35mSQL (0.4ms)[0m  SHOW TIME ZONE
  [1m[36mPK and serial sequence (4.7ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (2.7ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
DEPRECATION WARNING: RAILS_ROOT is deprecated. Please use ::Rails.root.to_s. (called from <class:Person> at /home/chaitanya/workArea/ST-to-RGF/app/models/person.rb:134)
Starting the New Relic Agent.
NewRelic Agent Developer Mode enabled.
To view performance information, go to http://localhost:port/newrelic
Installed New Relic Browser Monitoring middleware
  [1m[36mSQL (3.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"delayed_jobs"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mAREL (18.5ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-02-13 07:39:14.764989', locked_by = 'host:chaitanya-laptop pid:5829' WHERE (id = 5 and (locked_at is null or locked_at < '2013-02-13 03:39:14.764989') and (run_at <= '2013-02-13 07:39:14.764989'))
  [1m[36mPK and serial sequence (6.4ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (3.5ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (3.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (5.3ms)[0m   SELECT tablename
 FROM pg_tables
 WHERE schemaname = ANY (current_schemas(false))
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (2.4ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSwapItem Load (26.3ms)[0m  SELECT "swap_items".* FROM "swap_items" WHERE "swap_items"."id" = 2 LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"delayed_jobs"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mAREL (1.3ms)[0m  [1mUPDATE "delayed_jobs" SET "locked_at" = NULL, "locked_by" = NULL, "attempts" = 8, "run_at" = '2013-02-13 08:47:35.982145', "updated_at" = '2013-02-13 07:39:14.985305' WHERE "delayed_jobs"."id" = 5[0m
  [1m[35mSQL (8.4ms)[0m  COMMIT
  [1m[36mAREL (14.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-02-13 07:39:15.009656', locked_by = 'host:chaitanya-laptop pid:5829' WHERE (id = 6 and (locked_at is null or locked_at < '2013-02-13 03:39:15.009656') and (run_at <= '2013-02-13 07:39:15.009656'))[0m
  [1m[35mCommunity Load (1.7ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1
  [1m[36mSwapItem Load (0.9ms)[0m  [1mSELECT "swap_items".* FROM "swap_items" WHERE "swap_items"."id" = 3 LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  BEGIN
  [1m[36mAREL (1.0ms)[0m  [1mUPDATE "delayed_jobs" SET "locked_at" = NULL, "locked_by" = NULL, "attempts" = 8, "run_at" = '2013-02-13 08:47:36.085100', "updated_at" = '2013-02-13 07:39:15.086314' WHERE "delayed_jobs"."id" = 6[0m
  [1m[35mSQL (3.2ms)[0m  COMMIT
  [1m[36mAREL (5.6ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-02-13 07:39:15.096458', locked_by = 'host:chaitanya-laptop pid:5829' WHERE (id = 7 and (locked_at is null or locked_at < '2013-02-13 03:39:15.096458') and (run_at <= '2013-02-13 07:39:15.096458'))[0m
  [1m[35mCommunity Load (1.2ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1
  [1m[36mSwapItem Load (0.8ms)[0m  [1mSELECT "swap_items".* FROM "swap_items" WHERE "swap_items"."id" = 4 LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  BEGIN
  [1m[36mAREL (22.1ms)[0m  [1mUPDATE "delayed_jobs" SET "locked_at" = NULL, "locked_by" = NULL, "attempts" = 8, "run_at" = '2013-02-13 08:47:36.121837', "updated_at" = '2013-02-13 07:39:15.122988' WHERE "delayed_jobs"."id" = 7[0m
  [1m[35mSQL (23.1ms)[0m  COMMIT
  [1m[36mAREL (4.7ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-02-13 07:39:15.174785', locked_by = 'host:chaitanya-laptop pid:5829' WHERE (id = 81 and (locked_at is null or locked_at < '2013-02-13 03:39:15.174785') and (run_at <= '2013-02-13 07:39:15.174785'))[0m
  [1m[35mCommunity Load (1.2ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1
  [1m[36mSQL (2.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (21.0ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."id" = 1 LIMIT 1
  [1m[36mSQL (1.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.3ms)[0m  BEGIN
  [1m[36mAREL (0.8ms)[0m  [1mUPDATE "community_memberships" SET "last_page_load_date" = '2013-02-13 07:39:15.000000', "updated_at" = '2013-02-13 07:39:15.249005' WHERE "community_memberships"."id" = 1[0m
  [1m[35mSQL (26.1ms)[0m  COMMIT
  [1m[36mSQL (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (0.8ms)[0m  DELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 81
  [1m[36mSQL (8.4ms)[0m  [1mCOMMIT[0m
  [1m[35mAREL (5.0ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-02-13 07:39:15.341154', locked_by = 'host:chaitanya-laptop pid:5829' WHERE (id = 82 and (locked_at is null or locked_at < '2013-02-13 03:39:15.341154') and (run_at <= '2013-02-13 07:39:15.341154'))
  [1m[36mCommunity Load (1.2ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1[0m
  [1m[35mCommunityMembership Load (0.8ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."id" = 1 LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (0.8ms)[0m  DELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 82
  [1m[36mSQL (5.0ms)[0m  [1mCOMMIT[0m
  [1m[35mAREL (5.5ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-02-13 07:39:15.374101', locked_by = 'host:chaitanya-laptop pid:5829' WHERE (id = 83 and (locked_at is null or locked_at < '2013-02-13 03:39:15.374101') and (run_at <= '2013-02-13 07:39:15.374101'))
  [1m[36mCommunity Load (1.3ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1[0m
  [1m[35mCommunityMembership Load (0.9ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."id" = 1 LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (0.7ms)[0m  DELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 83
  [1m[36mSQL (6.7ms)[0m  [1mCOMMIT[0m
  [1m[35mAREL (7.7ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-02-13 07:39:15.461592', locked_by = 'host:chaitanya-laptop pid:5829' WHERE (id = 84 and (locked_at is null or locked_at < '2013-02-13 03:39:15.461592') and (run_at <= '2013-02-13 07:39:15.461592'))
  [1m[36mCommunity Load (1.3ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1[0m
  [1m[35mCommunityMembership Load (0.9ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."id" = 1 LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (0.3ms)[0m  DELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 84
  [1m[36mSQL (10.3ms)[0m  [1mCOMMIT[0m
  [1m[35mAREL (4.4ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-02-13 07:39:15.508507', locked_by = 'host:chaitanya-laptop pid:5829' WHERE (id = 85 and (locked_at is null or locked_at < '2013-02-13 03:39:15.508507') and (run_at <= '2013-02-13 07:39:15.508507'))
  [1m[36mCommunity Load (1.4ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1[0m
  [1m[35mCommunityMembership Load (1.2ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."id" = 1 LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (0.8ms)[0m  DELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 85
  [1m[36mSQL (5.4ms)[0m  [1mCOMMIT[0m
  [1m[35mAREL (5.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-02-13 07:39:15.552462', locked_by = 'host:chaitanya-laptop pid:5829' WHERE (id = 86 and (locked_at is null or locked_at < '2013-02-13 03:39:15.552462') and (run_at <= '2013-02-13 07:39:15.552462'))
  [1m[36mCommunity Load (0.8ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1[0m
  [1m[35mCommunityMembership Load (0.7ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."id" = 1 LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (0.5ms)[0m  DELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 86
  [1m[36mSQL (8.2ms)[0m  [1mCOMMIT[0m
  [1m[35mAREL (7.8ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-02-13 07:39:15.594833', locked_by = 'host:chaitanya-laptop pid:5829' WHERE (id = 87 and (locked_at is null or locked_at < '2013-02-13 03:39:15.594833') and (run_at <= '2013-02-13 07:39:15.594833'))
  [1m[36mCommunity Load (1.2ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1[0m
  [1m[35mCommunityMembership Load (1.3ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."id" = 1 LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (0.7ms)[0m  DELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 87
  [1m[36mSQL (11.7ms)[0m  [1mCOMMIT[0m
  [1m[35mAREL (6.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-02-13 07:39:15.684441', locked_by = 'host:chaitanya-laptop pid:5829' WHERE (id = 88 and (locked_at is null or locked_at < '2013-02-13 03:39:15.684441') and (run_at <= '2013-02-13 07:39:15.684441'))
  [1m[36mCommunity Load (1.2ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1[0m
  [1m[35mCommunityMembership Load (0.7ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."id" = 1 LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (0.5ms)[0m  DELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 88
  [1m[36mSQL (10.8ms)[0m  [1mCOMMIT[0m
  [1m[35mAREL (7.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-02-13 07:39:15.728632', locked_by = 'host:chaitanya-laptop pid:5829' WHERE (id = 89 and (locked_at is null or locked_at < '2013-02-13 03:39:15.728632') and (run_at <= '2013-02-13 07:39:15.728632'))
  [1m[36mCommunity Load (1.4ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1[0m
  [1m[35mCommunityMembership Load (1.0ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."id" = 1 LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (0.8ms)[0m  DELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 89
  [1m[36mSQL (10.6ms)[0m  [1mCOMMIT[0m
  [1m[35mAREL (4.8ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-02-13 07:39:15.774786', locked_by = 'host:chaitanya-laptop pid:5829' WHERE (id = 90 and (locked_at is null or locked_at < '2013-02-13 03:39:15.774786') and (run_at <= '2013-02-13 07:39:15.774786'))
  [1m[36mCommunity Load (1.8ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1[0m
  [1m[35mCommunityMembership Load (0.9ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."id" = 1 LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (0.7ms)[0m  DELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 90
  [1m[36mSQL (9.4ms)[0m  [1mCOMMIT[0m
  [1m[35mAREL (4.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-02-13 07:39:15.819398', locked_by = 'host:chaitanya-laptop pid:5829' WHERE (id = 91 and (locked_at is null or locked_at < '2013-02-13 03:39:15.819398') and (run_at <= '2013-02-13 07:39:15.819398'))
  [1m[36mCommunity Load (1.3ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1[0m
  [1m[35mCommunityMembership Load (1.1ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."id" = 1 LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (0.8ms)[0m  DELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 91
  [1m[36mSQL (5.5ms)[0m  [1mCOMMIT[0m
  [1m[35mAREL (4.5ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-02-13 07:39:15.864003', locked_by = 'host:chaitanya-laptop pid:5829' WHERE (id = 92 and (locked_at is null or locked_at < '2013-02-13 03:39:15.864003') and (run_at <= '2013-02-13 07:39:15.864003'))
  [1m[36mCommunity Load (1.3ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1[0m
  [1m[35mCommunityMembership Load (0.9ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."id" = 1 LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (0.7ms)[0m  DELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 92
  [1m[36mSQL (12.2ms)[0m  [1mCOMMIT[0m
  [1m[35mAREL (4.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-02-13 07:39:15.952863', locked_by = 'host:chaitanya-laptop pid:5829' WHERE (id = 93 and (locked_at is null or locked_at < '2013-02-13 03:39:15.952863') and (run_at <= '2013-02-13 07:39:15.952863'))
  [1m[36mCommunity Load (1.7ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1[0m
  [1m[35mCommunityMembership Load (1.0ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."id" = 1 LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (1.0ms)[0m  DELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 93
  [1m[36mSQL (7.7ms)[0m  [1mCOMMIT[0m
  [1m[35mAREL (5.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-02-13 07:39:15.996864', locked_by = 'host:chaitanya-laptop pid:5829' WHERE (id = 94 and (locked_at is null or locked_at < '2013-02-13 03:39:15.996864') and (run_at <= '2013-02-13 07:39:15.996864'))
  [1m[36mCommunity Load (1.2ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1[0m
  [1m[35mCommunityMembership Load (0.5ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."id" = 1 LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (0.7ms)[0m  DELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 94
  [1m[36mSQL (13.7ms)[0m  [1mCOMMIT[0m
  [1m[35mAREL (5.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-02-13 07:39:16.041225', locked_by = 'host:chaitanya-laptop pid:5829' WHERE (id = 95 and (locked_at is null or locked_at < '2013-02-13 03:39:16.041225') and (run_at <= '2013-02-13 07:39:16.041225'))
  [1m[36mCommunity Load (1.2ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1[0m
  [1m[35mCommunityMembership Load (0.8ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."id" = 1 LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (0.7ms)[0m  DELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 95
  [1m[36mSQL (11.2ms)[0m  [1mCOMMIT[0m
  [1m[35mAREL (5.1ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-02-13 07:39:16.085836', locked_by = 'host:chaitanya-laptop pid:5829' WHERE (id = 96 and (locked_at is null or locked_at < '2013-02-13 03:39:16.085836') and (run_at <= '2013-02-13 07:39:16.085836'))
  [1m[36mCommunity Load (1.4ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1[0m
  [1m[35mCommunityMembership Load (1.2ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."id" = 1 LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (0.7ms)[0m  DELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 96
  [1m[36mSQL (8.1ms)[0m  [1mCOMMIT[0m
  [1m[35mAREL (5.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-02-13 07:39:16.130044', locked_by = 'host:chaitanya-laptop pid:5829' WHERE (id = 97 and (locked_at is null or locked_at < '2013-02-13 03:39:16.130044') and (run_at <= '2013-02-13 07:39:16.130044'))
  [1m[36mCommunity Load (1.2ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1[0m
  [1m[35mCommunityMembership Load (0.9ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."id" = 1 LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (0.7ms)[0m  DELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 97
  [1m[36mSQL (8.1ms)[0m  [1mCOMMIT[0m
  [1m[35mAREL (7.7ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-02-13 07:39:16.217292', locked_by = 'host:chaitanya-laptop pid:5829' WHERE (id = 98 and (locked_at is null or locked_at < '2013-02-13 03:39:16.217292') and (run_at <= '2013-02-13 07:39:16.217292'))
  [1m[36mCommunity Load (1.5ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1[0m
  [1m[35mCommunityMembership Load (0.8ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."id" = 1 LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (0.5ms)[0m  DELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 98
  [1m[36mSQL (20.5ms)[0m  [1mCOMMIT[0m


Started GET "/en/people/bTFw-gDdur4Oaa3a6HdQnY/invitations/new?complement=true" for 127.0.0.1 at 2013-02-13 13:09:56 +0530
  Processing by InvitationsController#new as HTML
  Parameters: {"complement"=>"true", "locale"=>"en", "person_id"=>"bTFw-gDdur4Oaa3a6HdQnY"}
  [1m[35mPK and serial sequence (6.3ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (2.9ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.3ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (5.9ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (3.5ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.3ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.4ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (0.9ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'bTFw-gDdur4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (1.0ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"invitations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
Rendered layouts/_kissmetrics.haml (3.1ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.6ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.1ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (10.3ms)
Rendered communities/default/logo/logo.haml (74.8ms)
Rendered layouts/_no_javascript.haml (89.7ms)
Rendered layouts/_facebook_sdk.haml (2.7ms)
  [1m[36mSQL (0.9ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (1.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (4.8ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (2.0ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (2.4ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (1.4ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.7ms)[0m  SELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'bTFw-gDdur4Oaa3a6HdQnY')) AND participations.person_id = 'bTFw-gDdur4Oaa3a6HdQnY')
Rendered layouts/_logged_in_messages_icon.haml (762.4ms)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'bTFw-gDdur4Oaa3a6HdQnY')
Rendered layouts/_logged_in_notifications_icon.haml (12.8ms)
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'bTFw-gDdur4Oaa3a6HdQnY') AND (acceptance is null)
Rendered layouts/_logged_in_swap_offers_icon.haml (13.9ms)
  [1m[36mCommunityMembership Load (1.1ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."community_id" = 1 AND ("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY') LIMIT 1[0m
Rendered layouts/_logged_in.haml (806.9ms)
Rendered layouts/_notifications.haml (6.1ms)
  [1m[35mLocation Load (0.6ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'bTFw-gDdur4Oaa3a6HdQnY' AND (location_type = 'person')) LIMIT 1
Rendered layouts/_display_popup.haml (11.5ms)
Rendered invitations/new.html.haml within layouts/application (1003.5ms)
Completed 200 OK in 1616ms (Views: 982.1ms | ActiveRecord: 66.5ms | Sphinx: 0.0ms)


Started POST "/en/people/bTFw-gDdur4Oaa3a6HdQnY/invitations" for 127.0.0.1 at 2013-02-13 13:11:58 +0530
  Processing by InvitationsController#create as JS
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"NkZ6IWGiOoJ8LNPCOR7+plEluO7i/JaZDiNM2t7u7ng=", "invitation"=>{"email"=>"saraf.chaitanya@gmail.com", "name"=>"chaitanya", "community_id"=>"1", "inviter_id"=>"bTFw-gDdur4Oaa3a6HdQnY", "complement"=>"true"}, "commit"=>"Send Invitation", "locale"=>"en", "person_id"=>"bTFw-gDdur4Oaa3a6HdQnY"}
  [1m[36mPK and serial sequence (4.7ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (1.7ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (1.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (0.8ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (1.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.0ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (1.4ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (1.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (2.2ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (1.4ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (0.4ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'bTFw-gDdur4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (0.5ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"invitations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
WARNING: Can't mass-assign protected attributes: complement
  [1m[35mSQL (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.5ms)[0m  [1mSELECT 1 FROM "invitations" WHERE ("invitations"."code" = 'DAMVHQ') LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"invitations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (3.0ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"invitations"'::regclass
[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "invitations" ("code", "community_id", "usages_left", "valid_until", "information", "created_at", "updated_at", "inviter_id", "message", "email", "name") VALUES ('DAMVHQ', 1, 1, NULL, NULL, '2013-02-13 07:41:58.768470', '2013-02-13 07:41:58.768470', 'bTFw-gDdur4Oaa3a6HdQnY', NULL, 'saraf.chaitanya@gmail.com', 'chaitanya') RETURNING "id"
  [1m[36mSQL (20.0ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:ComplementToCookJob
invitation_id: 17
host: !binary |-
 bHZoLm1l
', NULL, '2013-02-13 07:41:58.802579', NULL, NULL, NULL, '2013-02-13 07:41:58.802704', '2013-02-13 07:41:58.802704', NULL) RETURNING "id"[0m
  [1m[35mSQL (3.0ms)[0m  COMMIT
Rendered layouts/_notifications.haml (5.2ms)
Rendered invitations/create.js.erb (7.4ms)
Completed 200 OK in 674ms (Views: 9.2ms | ActiveRecord: 58.4ms | Sphinx: 0.0ms)
  [1m[35mAREL (28.9ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-02-13 07:42:01.411193', locked_by = 'host:chaitanya-laptop pid:5829' WHERE (id = 99 and (locked_at is null or locked_at < '2013-02-13 03:42:01.411193') and (run_at <= '2013-02-13 07:42:01.411193'))
  [1m[36mCommunity Load (0.6ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1[0m
  [1m[35mSQL (1.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"invitations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mInvitation Load (0.9ms)[0m  [1mSELECT "invitations".* FROM "invitations" WHERE "invitations"."id" = 17 LIMIT 1[0m
  [1m[35mSQL (1.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"invitations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (2.9ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.7ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
Rendered person_mailer/complement_to_cook.html.haml within layouts/email (17000.1ms)

Sent mail to saraf.chaitanya@gmail.com (5996ms)
Date: Wed, 13 Feb 2013 13:12:19 +0530
From: no-reply@realgoodfood.org
Reply-To: chaitanya.saraf1985@gmail.com
To: saraf.chaitanya@gmail.com
Message-ID: <511b43db467f_16c54fa281037061@chaitanya-laptop.mail>
Subject: chs thinks you're fantastic with food.
Mime-Version: 1.0
Content-Type: text/html;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

<!DOCTYPE html>
<html lang='en-US' xml:lang='en-US' xmlns='http://www.w3.org/1999/xhtml'>
  <head></head>
  <body>
    <table border='0' cellpadding='0' cellspacing='0' style='width:550px; border-top:4px solid #223f05; font: 12px arial, sans-serif; margin: 0 auto;'>
      <tr>
        <td>
          <h1 style='font-size: 22px; margin:7px 0 12px 0; padding:0;'>
            RealGoodFood
          </h1>
          Hi
          chaitanya
          ,
          <br>
          <br>
          I know you're a great cook who loves real good food. I thought you might like the chance to share some of your delicious food with members of your community... like me! Of course you'll also get to discover and enjoy the best and most authentic food around while connecting with great folks.
          <br>
          <br>
          You can join RealGoodFood at
          <a href="http://lvh.me/en?cid=1">http://lvh.me/en?cid=1</a>
          <br>
          <br>
          Thanks,
          <br>
          The RealGoodFood Team
          <br>
          <br>
        </td>
      </tr>
    </table>
  </body>
</html>
  [1m[36mSQL (0.7ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (1.0ms)[0m  DELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 99
  [1m[36mSQL (246.3ms)[0m  [1mCOMMIT[0m


Started POST "/en/people/bTFw-gDdur4Oaa3a6HdQnY/invitations" for 127.0.0.1 at 2013-02-13 13:16:22 +0530
  Processing by InvitationsController#create as JS
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"NkZ6IWGiOoJ8LNPCOR7+plEluO7i/JaZDiNM2t7u7ng=", "invitation"=>{"email"=>"saraf.chaitanya@gmail.com", "name"=>"", "community_id"=>"1", "inviter_id"=>"bTFw-gDdur4Oaa3a6HdQnY", "complement"=>"true"}, "commit"=>"Send invitation", "locale"=>"en", "person_id"=>"bTFw-gDdur4Oaa3a6HdQnY"}
  [1m[36mPK and serial sequence (7.1ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.1ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (1.3ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (3.4ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.2ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (1.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (0.5ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'bTFw-gDdur4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'bTFw-gDdur4Oaa3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (0.6ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mSQL (1.6ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"invitations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
WARNING: Can't mass-assign protected attributes: complement
  [1m[35mSQL (0.4ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mSELECT 1 FROM "invitations" WHERE ("invitations"."code" = 'SOSV7I') LIMIT 1[0m
  [1m[35mSQL (1.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"invitations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (2.3ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"invitations"'::regclass
[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "invitations" ("code", "community_id", "usages_left", "valid_until", "information", "created_at", "updated_at", "inviter_id", "message", "email", "name") VALUES ('SOSV7I', 1, 1, NULL, NULL, '2013-02-13 07:46:23.502144', '2013-02-13 07:46:23.502144', 'bTFw-gDdur4Oaa3a6HdQnY', NULL, 'saraf.chaitanya@gmail.com', '') RETURNING "id"
  [1m[36mSQL (67.0ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (0.5ms)[0m  BEGIN
  [1m[36mSQL (1.5ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:ComplementToCookJob
invitation_id: 18
host: !binary |-
 bHZoLm1l
', NULL, '2013-02-13 07:46:23.585344', NULL, NULL, NULL, '2013-02-13 07:46:23.585658', '2013-02-13 07:46:23.585658', NULL) RETURNING "id"[0m
  [1m[35mSQL (6.0ms)[0m  COMMIT
Rendered layouts/_notifications.haml (7.2ms)
Rendered invitations/create.js.erb (12.7ms)
Completed 200 OK in 731ms (Views: 17.2ms | ActiveRecord: 118.4ms | Sphinx: 0.0ms)
  [1m[35mAREL (34.6ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-02-13 07:46:25.384074', locked_by = 'host:chaitanya-laptop pid:5829' WHERE (id = 100 and (locked_at is null or locked_at < '2013-02-13 03:46:25.384074') and (run_at <= '2013-02-13 07:46:25.384074'))
  [1m[36mCommunity Load (1.3ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'lvh' LIMIT 1[0m
  [1m[35mInvitation Load (0.7ms)[0m  SELECT "invitations".* FROM "invitations" WHERE "invitations"."id" = 18 LIMIT 1
  [1m[36mPerson Load (1.3ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bTFw-gDdur4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mCommunity Load (0.9ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
Rendered person_mailer/complement_to_cook.html.haml within layouts/email (8.1ms)

Sent mail to saraf.chaitanya@gmail.com (6007ms)
Date: Wed, 13 Feb 2013 13:16:25 +0530
From: no-reply@realgoodfood.org
Reply-To: chaitanya.saraf1985@gmail.com
To: saraf.chaitanya@gmail.com
Message-ID: <511b44d17ef9c_16c54fa281037133@chaitanya-laptop.mail>
Subject: chs thinks you're fantastic with food.
Mime-Version: 1.0
Content-Type: text/html;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

<!DOCTYPE html>
<html lang='en-US' xml:lang='en-US' xmlns='http://www.w3.org/1999/xhtml'>
  <head></head>
  <body>
    <table border='0' cellpadding='0' cellspacing='0' style='width:550px; border-top:4px solid #223f05; font: 12px arial, sans-serif; margin: 0 auto;'>
      <tr>
        <td>
          <h1 style='font-size: 22px; margin:7px 0 12px 0; padding:0;'>
            RealGoodFood
          </h1>
          Hi
          
          ,
          <br>
          <br>
          I know you're a great cook who loves real good food. I thought you might like the chance to share some of your delicious food with members of your community... like me! Of course you'll also get to discover and enjoy the best and most authentic food around while connecting with great folks.
          <br>
          <br>
          You can join RealGoodFood at
          <a href="http://lvh.me/en?cid=1">http://lvh.me/en?cid=1</a>
          <br>
          <br>
          Thanks,
          <br>
          The RealGoodFood Team
          <br>
          <br>
        </td>
      </tr>
    </table>
  </body>
</html>
  [1m[36mSQL (0.7ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (0.9ms)[0m  DELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 100
  [1m[36mSQL (22.2ms)[0m  [1mCOMMIT[0m
