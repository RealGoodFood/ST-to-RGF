  [1m[36mDelayed::Backend::ActiveRecord::Job Load (1.0ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:38:43.190677', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:38:43.190063' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:38:43.190102') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (1.0ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:38:48.193135', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:38:48.192546' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:38:48.192579') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
DEPRECATION WARNING: config.action_view.debug_rjs will be removed in 3.1, from 3.1 onwards you will need to install prototype-rails to continue to use RJS templates . (called from <top (required)> at /home/chaitanya/workArea/ST-to-RGF/config/environment.rb:10)
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (1.0ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:38:53.195840', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:38:53.195068' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:38:53.195158') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[36mSQL (0.4ms)[0m  [1mSHOW client_min_messages[0m
  [1m[35mSQL (0.5ms)[0m  SET client_min_messages TO 'panic'
  [1m[36mSQL (0.5ms)[0m  [1mSET standard_conforming_strings = on[0m
  [1m[35mSQL (0.4ms)[0m  SET client_min_messages TO 'notice'
  [1m[36mSQL (0.7ms)[0m  [1mSET time zone 'UTC'[0m
  [1m[35mSQL (0.5ms)[0m  SHOW TIME ZONE
  [1m[36mPK and serial sequence (4.9ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.1ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
DEPRECATION WARNING: RAILS_ROOT is deprecated. Please use ::Rails.root.to_s. (called from <class:Person> at /home/chaitanya/workArea/ST-to-RGF/app/models/person.rb:134)
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:38:58.199232', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:38:58.197755' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:38:58.197828') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *


Started POST "/en/admin/profiles/cu9aFOKwSr4Oaa3a6HdQnY" for 127.0.0.1 at 2013-03-20 20:09:02 +0530
  [1m[36mSQL (0.4ms)[0m  [1mSHOW client_min_messages[0m
  [1m[35mSQL (0.2ms)[0m  SET client_min_messages TO 'panic'
  [1m[36mSQL (0.3ms)[0m  [1mSET standard_conforming_strings = on[0m
  [1m[35mSQL (0.3ms)[0m  SET client_min_messages TO 'notice'
  [1m[36mSQL (0.5ms)[0m  [1mSET time zone 'UTC'[0m
  [1m[35mSQL (0.3ms)[0m  SHOW TIME ZONE
  Processing by Admin::ProfilesController#destroy as HTML
  Parameters: {"authenticity_token"=>"WJyxSApP1ZoDya7qcieJqUg5S0Zc4q5IQ7Pj2USt5FE=", "locale"=>"en", "id"=>"cu9aFOKwSr4Oaa3a6HdQnY"}
  [1m[36mSQL (7.7ms)[0m  [1m SELECT tablename
 FROM pg_tables
 WHERE schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (5.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (3.6ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (7.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (1.8ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (1.0ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:39:03.203984', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:39:03.203124' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:39:03.203159') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[36mSQL (2.3ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.1ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (5.7ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (1.6ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (1.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (3.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (2.8ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (2.2ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (1.2ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.8ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mPerson Load (1.6ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cu9aFOKwSr4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  BEGIN
  [1m[36mAuthentication Load (1.5ms)[0m  [1mSELECT "authentications".* FROM "authentications" WHERE ("authentications".user_id = 'cu9aFOKwSr4Oaa3a6HdQnY')[0m
  [1m[35mListing Load (2.6ms)[0m  SELECT "listings".* FROM "listings" WHERE ("listings".author_id = 'cu9aFOKwSr4Oaa3a6HdQnY')
  [1m[36mEmail Load (1.5ms)[0m  [1mSELECT "emails".* FROM "emails" WHERE ("emails".person_id = 'cu9aFOKwSr4Oaa3a6HdQnY')[0m
  [1m[35mLocation Load (1.1ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'cu9aFOKwSr4Oaa3a6HdQnY' AND (location_type = 'person')) LIMIT 1
  [1m[36mParticipation Load (1.5ms)[0m  [1mSELECT "participations".* FROM "participations" WHERE ("participations".person_id = 'cu9aFOKwSr4Oaa3a6HdQnY')[0m
  [1m[35mConversation Load (1.8ms)[0m  SELECT "conversations".* FROM "conversations" INNER JOIN "participations" ON "conversations".id = "participations".conversation_id WHERE (("participations".person_id = 'cu9aFOKwSr4Oaa3a6HdQnY'))
  [1m[36mTestimonial Load (1.6ms)[0m  [1mSELECT "testimonials".* FROM "testimonials" WHERE ("testimonials".author_id = 'cu9aFOKwSr4Oaa3a6HdQnY')[0m
  [1m[35mTestimonial Load (1.5ms)[0m  SELECT "testimonials".* FROM "testimonials" WHERE ("testimonials".receiver_id = 'cu9aFOKwSr4Oaa3a6HdQnY') ORDER BY id DESC
  [1m[36mBadge Load (1.4ms)[0m  [1mSELECT "badges".* FROM "badges" WHERE ("badges".person_id = 'cu9aFOKwSr4Oaa3a6HdQnY')[0m
  [1m[35mNotification Load (1.6ms)[0m  SELECT "notifications".* FROM "notifications" WHERE ("notifications".receiver_id = 'cu9aFOKwSr4Oaa3a6HdQnY') ORDER BY id DESC
  [1m[36mComment Load (1.6ms)[0m  [1mSELECT "comments".* FROM "comments" WHERE ("comments".author_id = 'cu9aFOKwSr4Oaa3a6HdQnY')[0m
  [1m[35mCommunityMembership Load (1.0ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE ("community_memberships".person_id = 'cu9aFOKwSr4Oaa3a6HdQnY')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mAREL (1.6ms)[0m  UPDATE "communities" SET "members_count" = COALESCE("members_count", 0) - 1 WHERE "communities"."id" = 1
  [1m[36mAREL (1.0ms)[0m  [1mDELETE FROM "community_memberships" WHERE "community_memberships"."id" = 9[0m
  [1m[35mInvitation Load (1.8ms)[0m  SELECT "invitations".* FROM "invitations" WHERE ("invitations".inviter_id = 'cu9aFOKwSr4Oaa3a6HdQnY')
  [1m[36mPollAnswer Load (1.5ms)[0m  [1mSELECT "poll_answers".* FROM "poll_answers" WHERE ("poll_answers".answerer_id = 'cu9aFOKwSr4Oaa3a6HdQnY')[0m
  [1m[35mDevice Load (1.5ms)[0m  SELECT "devices".* FROM "devices" WHERE ("devices".person_id = 'cu9aFOKwSr4Oaa3a6HdQnY')
  [1m[36mEventFeedEvent Load (1.7ms)[0m  [1mSELECT "event_feed_events".* FROM "event_feed_events" WHERE ("event_feed_events".person1_id = 'cu9aFOKwSr4Oaa3a6HdQnY')[0m
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"event_feed_events"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"event_feed_events"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mAREL (0.9ms)[0m  DELETE FROM "event_feed_events" WHERE "event_feed_events"."id" = 14
  [1m[36mEventFeedEvent Load (0.9ms)[0m  [1mSELECT "event_feed_events".* FROM "event_feed_events" WHERE ("event_feed_events".person2_id = 'cu9aFOKwSr4Oaa3a6HdQnY')[0m
[paperclip] Deleting attachments.
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:39:08.207599', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:39:08.206093' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:39:08.206166') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:39:13.213273', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:39:13.211764' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:39:13.211839') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listing_followers"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mListing Load (2.1ms)[0m  [1mSELECT * FROM "listings" INNER JOIN "listing_followers" ON "listings".id = "listing_followers".listing_id WHERE ("listing_followers".person_id = 'cu9aFOKwSr4Oaa3a6HdQnY' )[0m
  [1m[35mAREL (1.3ms)[0m  DELETE FROM "people" WHERE "people"."id" = 'cu9aFOKwSr4Oaa3a6HdQnY'
  [1m[36mSQL (30.9ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:3000/en/admin/profiles?type=profiles
Completed 302 Found in 14048ms


Started GET "/en/admin/profiles?type=profiles" for 127.0.0.1 at 2013-03-20 20:09:17 +0530
  Processing by Admin::ProfilesController#index as HTML
  Parameters: {"type"=>"profiles", "locale"=>"en"}
  [1m[35mPK and serial sequence (6.4ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.2ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (4.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (4.1ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.4ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.2ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (4.2ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.9ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.9ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (7.0ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.6ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (1.4ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:39:18.218194', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:39:18.217356' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:39:18.217397') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[35mSQL (3.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (2.7ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (2.4ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (1.4ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.9ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mPerson Load (2.0ms)[0m  [1mSELECT "people".* FROM "people"[0m
Rendered admin/profiles/_profiles.html.haml (93.6ms)
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (1.0ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:39:23.221838', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:39:23.220952' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:39:23.220993') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (1.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:39:28.224654', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:39:28.223842' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:39:28.223883') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (1.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:39:33.227726', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:39:33.226860' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:39:33.226900') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (1.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:39:38.231709', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:39:38.230125' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:39:38.230236') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (1.0ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:39:43.235076', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:39:43.234228' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:39:43.234264') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
Rendered layouts/_kissmetrics.haml (3.1ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.7ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.7ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (84.9ms)
Rendered communities/default/logo/logo.haml (2.8ms)
Rendered layouts/_no_javascript.haml (71.6ms)
Rendered layouts/_facebook_sdk.haml (2.6ms)
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (4.3ms)[0m  SELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) AND participations.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_messages_icon.haml (19.4ms)
  [1m[36mSQL (3.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.0ms)[0m  SELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_notifications_icon.haml (28.5ms)
  [1m[36mSQL (2.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.5ms)[0m  SELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY') AND (acceptance is null)
Rendered layouts/_logged_in_swap_offers_icon.haml (11.7ms)
  [1m[36mSQL (2.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"authentications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mAuthentication Load (1.5ms)[0m  SELECT "authentications".* FROM "authentications" WHERE "authentications"."user_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
Rendered layouts/_logged_in.haml (138.0ms)
Rendered layouts/_notifications.haml (5.3ms)
  [1m[36mLocation Load (1.3ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
Rendered layouts/_display_popup.haml (11.6ms)
Rendered layouts/application.haml (371.0ms)
Rendered admin/profiles/index.html.haml within layouts/admin (27236.1ms)
Completed 200 OK in 28368ms (Views: 27216.4ms | ActiveRecord: 250.6ms | Sphinx: 0.0ms)
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:39:48.238707', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:39:48.237128' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:39:48.237202') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:39:53.244395', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:39:53.242851' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:39:53.242923') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:39:58.250252', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:39:58.248675' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:39:58.248745') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:40:03.255903', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:40:03.254356' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:40:03.254428') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:40:08.261405', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:40:08.259897' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:40:08.259967') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (1.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:40:13.267121', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:40:13.265589' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:40:13.265683') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:40:18.271664', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:40:18.270172' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:40:18.270242') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:40:23.277280', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:40:23.275758' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:40:23.275829') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:40:28.282911', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:40:28.281384' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:40:28.281456') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:40:33.289083', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:40:33.287016' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:40:33.287088') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:40:38.294736', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:40:38.293215' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:40:38.293283') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:40:43.300334', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:40:43.298872' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:40:43.298940') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:40:48.305963', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:40:48.304405' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:40:48.304477') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:40:53.311534', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:40:53.310036' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:40:53.310104') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:40:58.317239', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:40:58.315681' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:40:58.315757') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:41:03.322933', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:41:03.321360' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:41:03.321452') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m


Started POST "/en/admin/profiles/bLLrP-KuWr4Oae3a6HdQnY" for 127.0.0.1 at 2013-03-20 20:11:03 +0530
  Processing by Admin::ProfilesController#destroy as HTML
  Parameters: {"authenticity_token"=>"WJyxSApP1ZoDya7qcieJqUg5S0Zc4q5IQ7Pj2USt5FE=", "locale"=>"en", "id"=>"bLLrP-KuWr4Oae3a6HdQnY"}
  [1m[35mPK and serial sequence (7.1ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (5.1ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.4ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (9.0ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (2.3ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.0ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.0ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.3ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (6.0ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.0ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (0.5ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (0.4ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.4ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mPerson Load (1.4ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bLLrP-KuWr4Oae3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  BEGIN
  [1m[36mAuthentication Load (0.9ms)[0m  [1mSELECT "authentications".* FROM "authentications" WHERE ("authentications".user_id = 'bLLrP-KuWr4Oae3a6HdQnY')[0m
  [1m[35mListing Load (1.3ms)[0m  SELECT "listings".* FROM "listings" WHERE ("listings".author_id = 'bLLrP-KuWr4Oae3a6HdQnY')
  [1m[36mEmail Load (1.6ms)[0m  [1mSELECT "emails".* FROM "emails" WHERE ("emails".person_id = 'bLLrP-KuWr4Oae3a6HdQnY')[0m
  [1m[35mLocation Load (1.0ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'bLLrP-KuWr4Oae3a6HdQnY' AND (location_type = 'person')) LIMIT 1
  [1m[36mParticipation Load (1.0ms)[0m  [1mSELECT "participations".* FROM "participations" WHERE ("participations".person_id = 'bLLrP-KuWr4Oae3a6HdQnY')[0m
  [1m[35mConversation Load (1.4ms)[0m  SELECT "conversations".* FROM "conversations" INNER JOIN "participations" ON "conversations".id = "participations".conversation_id WHERE (("participations".person_id = 'bLLrP-KuWr4Oae3a6HdQnY'))
  [1m[36mTestimonial Load (1.4ms)[0m  [1mSELECT "testimonials".* FROM "testimonials" WHERE ("testimonials".author_id = 'bLLrP-KuWr4Oae3a6HdQnY')[0m
  [1m[35mTestimonial Load (1.8ms)[0m  SELECT "testimonials".* FROM "testimonials" WHERE ("testimonials".receiver_id = 'bLLrP-KuWr4Oae3a6HdQnY') ORDER BY id DESC
  [1m[36mBadge Load (1.4ms)[0m  [1mSELECT "badges".* FROM "badges" WHERE ("badges".person_id = 'bLLrP-KuWr4Oae3a6HdQnY')[0m
  [1m[35mNotification Load (1.3ms)[0m  SELECT "notifications".* FROM "notifications" WHERE ("notifications".receiver_id = 'bLLrP-KuWr4Oae3a6HdQnY') ORDER BY id DESC
  [1m[36mComment Load (1.4ms)[0m  [1mSELECT "comments".* FROM "comments" WHERE ("comments".author_id = 'bLLrP-KuWr4Oae3a6HdQnY')[0m
  [1m[35mCommunityMembership Load (0.6ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE ("community_memberships".person_id = 'bLLrP-KuWr4Oae3a6HdQnY')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mAREL (1.0ms)[0m  UPDATE "communities" SET "members_count" = COALESCE("members_count", 0) - 1 WHERE "communities"."id" = 1
  [1m[36mAREL (0.4ms)[0m  [1mDELETE FROM "community_memberships" WHERE "community_memberships"."id" = 7[0m
  [1m[35mInvitation Load (0.7ms)[0m  SELECT "invitations".* FROM "invitations" WHERE ("invitations".inviter_id = 'bLLrP-KuWr4Oae3a6HdQnY')
  [1m[36mPollAnswer Load (0.9ms)[0m  [1mSELECT "poll_answers".* FROM "poll_answers" WHERE ("poll_answers".answerer_id = 'bLLrP-KuWr4Oae3a6HdQnY')[0m
  [1m[35mDevice Load (1.1ms)[0m  SELECT "devices".* FROM "devices" WHERE ("devices".person_id = 'bLLrP-KuWr4Oae3a6HdQnY')
  [1m[36mEventFeedEvent Load (1.0ms)[0m  [1mSELECT "event_feed_events".* FROM "event_feed_events" WHERE ("event_feed_events".person1_id = 'bLLrP-KuWr4Oae3a6HdQnY')[0m
  [1m[35mSQL (1.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"event_feed_events"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"event_feed_events"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mAREL (0.4ms)[0m  DELETE FROM "event_feed_events" WHERE "event_feed_events"."id" = 12
  [1m[36mEventFeedEvent Load (0.6ms)[0m  [1mSELECT "event_feed_events".* FROM "event_feed_events" WHERE ("event_feed_events".person2_id = 'bLLrP-KuWr4Oae3a6HdQnY')[0m
[paperclip] Deleting attachments.
  [1m[35mSQL (1.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listing_followers"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mListing Load (0.9ms)[0m  [1mSELECT * FROM "listings" INNER JOIN "listing_followers" ON "listings".id = "listing_followers".listing_id WHERE ("listing_followers".person_id = 'bLLrP-KuWr4Oae3a6HdQnY' )[0m
  [1m[35mAREL (0.8ms)[0m  DELETE FROM "people" WHERE "people"."id" = 'bLLrP-KuWr4Oae3a6HdQnY'
  [1m[36mSQL (34.9ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:3000/en/admin/profiles?type=profiles
Completed 302 Found in 1310ms


Started GET "/en/admin/profiles?type=profiles" for 127.0.0.1 at 2013-03-20 20:11:05 +0530
  Processing by Admin::ProfilesController#index as HTML
  Parameters: {"type"=>"profiles", "locale"=>"en"}
  [1m[35mPK and serial sequence (6.3ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.2ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.3ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (1.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.1ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.2ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (1.9ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (5.6ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (2.1ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (2.3ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (1.6ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.3ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (1.6ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (0.9ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.0ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mPerson Load (1.8ms)[0m  [1mSELECT "people".* FROM "people"[0m
Rendered admin/profiles/_profiles.html.haml (98.1ms)
Rendered layouts/_kissmetrics.haml (3.2ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.9ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.3ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (11.9ms)
Rendered communities/default/logo/logo.haml (3.1ms)
Rendered layouts/_no_javascript.haml (20.2ms)
Rendered layouts/_facebook_sdk.haml (2.7ms)
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.0ms)[0m  SELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) AND participations.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_messages_icon.haml (17.8ms)
  [1m[36mSQL (2.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.0ms)[0m  SELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_notifications_icon.haml (13.6ms)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.7ms)[0m  SELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY') AND (acceptance is null)
Rendered layouts/_logged_in_swap_offers_icon.haml (14.1ms)
  [1m[36mSQL (1.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"authentications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mAuthentication Load (0.7ms)[0m  SELECT "authentications".* FROM "authentications" WHERE "authentications"."user_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
Rendered layouts/_logged_in.haml (63.5ms)
Rendered layouts/_notifications.haml (5.0ms)
  [1m[36mLocation Load (1.1ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
Rendered layouts/_display_popup.haml (12.2ms)
Rendered layouts/application.haml (252.4ms)
Rendered admin/profiles/index.html.haml within layouts/admin (364.9ms)
Completed 200 OK in 1510ms (Views: 352.7ms | ActiveRecord: 200.0ms | Sphinx: 0.0ms)
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:41:08.328677', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:41:08.327144' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:41:08.327212') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *


Started GET "/en/admin/profiles/new?type=profiles" for 127.0.0.1 at 2013-03-20 20:11:10 +0530
  Processing by Admin::ProfilesController#new as HTML
  Parameters: {"type"=>"profiles", "locale"=>"en"}
  [1m[35mPK and serial sequence (6.5ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.5ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.5ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.4ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (5.6ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.4ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (3.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.4ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.3ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (6.4ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.3ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.3ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (1.4ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (1.0ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.0ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mCommunity Load (1.4ms)[0m  [1mSELECT "communities".* FROM "communities"[0m
Rendered layouts/_kissmetrics.haml (3.1ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.8ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.5ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (11.0ms)
Rendered communities/default/logo/logo.haml (2.4ms)
Rendered layouts/_no_javascript.haml (15.6ms)
Rendered layouts/_facebook_sdk.haml (2.4ms)
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.8ms)[0m  SELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) AND participations.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_messages_icon.haml (16.4ms)
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_notifications_icon.haml (10.8ms)
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY') AND (acceptance is null)
Rendered layouts/_logged_in_swap_offers_icon.haml (11.0ms)
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"authentications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mAuthentication Load (1.0ms)[0m  SELECT "authentications".* FROM "authentications" WHERE "authentications"."user_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
Rendered layouts/_logged_in.haml (122.6ms)
Rendered layouts/_notifications.haml (6.4ms)
  [1m[36mLocation Load (0.5ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
Rendered layouts/_display_popup.haml (10.0ms)
Rendered layouts/application.haml (225.7ms)
Rendered admin/profiles/new.html.haml within layouts/admin (248.0ms)
Completed 200 OK in 1467ms (Views: 235.4ms | ActiveRecord: 88.8ms | Sphinx: 0.0ms)
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:41:13.334412', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:41:13.332825' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:41:13.332893') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:41:18.340023', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:41:18.338526' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:41:18.338598') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.5ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:41:23.345588', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:41:23.344106' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:41:23.344174') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:41:28.351612', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:41:28.350111' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:41:28.350188') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:41:33.357218', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:41:33.355717' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:41:33.355787') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.6ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:41:38.362812', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:41:38.361281' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:41:38.361355') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *


Started GET "/people/check_username_availability?person%5Busername%5D=saraf" for 127.0.0.1 at 2013-03-20 20:11:42 +0530
  Processing by PeopleController#check_username_availability as JSON
  Parameters: {"person"=>{"username"=>"saraf"}, "id"=>"check_username_availability"}
  [1m[35mPK and serial sequence (6.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.6ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (1.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:41:43.368033', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:41:43.367168' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:41:43.367208') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mSQL (1.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (0.6ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.0ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (1.9ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.1ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.0ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (6.1ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.1ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.3ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (1.5ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (1.0ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.0ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mPerson Load (1.5ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."username" = 'saraf' LIMIT 1[0m
Completed 200 OK in 1182ms (Views: 0.2ms | ActiveRecord: 64.9ms | Sphinx: 0.0ms)
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:41:48.371936', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:41:48.370468' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:41:48.370539') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *


Started GET "/people/check_username_availability?person%5Busername%5D=chai" for 127.0.0.1 at 2013-03-20 20:11:48 +0530
  Processing by PeopleController#check_username_availability as JSON
  Parameters: {"person"=>{"username"=>"chai"}, "id"=>"check_username_availability"}
  [1m[35mPK and serial sequence (6.1ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.0ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.3ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.1ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.0ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (1.9ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (5.6ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (1.5ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (2.3ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (1.7ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (1.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.2ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (1.4ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (1.0ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.0ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mPerson Load (1.2ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."username" = 'chai' LIMIT 1[0m
Completed 200 OK in 1181ms (Views: 0.2ms | ActiveRecord: 55.8ms | Sphinx: 0.0ms)
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:41:53.377566', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:41:53.375970' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:41:53.376042') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m


Started GET "/people/check_email_availability_and_validity?person%5Bemail%5D=chaitanya.saraf1985%40gmail.com" for 127.0.0.1 at 2013-03-20 20:11:57 +0530
  Processing by PeopleController#check_email_availability_and_validity as JSON
  Parameters: {"person"=>{"email"=>"chaitanya.saraf1985@gmail.com"}, "id"=>"check_email_availability_and_validity"}
  [1m[35mPK and serial sequence (6.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.0ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.3ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (0.9ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:41:58.382453', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:41:58.381652' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:41:58.381693') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mPK and serial sequence (6.1ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.0ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.0ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.1ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.5ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (6.0ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.0ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (1.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.3ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (1.7ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (1.1ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.3ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"emails"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"emails"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mEmail Load (1.3ms)[0m  [1mSELECT "emails".* FROM "emails" WHERE "emails"."address" = 'chaitanya.saraf1985@gmail.com' AND "emails"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mPerson Load (1.3ms)[0m  SELECT "people".* FROM "people" WHERE "people"."email" = 'chaitanya.saraf1985@gmail.com' LIMIT 1
  [1m[36mEmail Load (0.9ms)[0m  [1mSELECT "emails".* FROM "emails" WHERE "emails"."address" = 'chaitanya.saraf1985@gmail.com' LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "emails".* FROM "emails" WHERE "emails"."address" = 'chaitanya.saraf1985@gmail.com' LIMIT 1
Completed 200 OK in 1211ms (Views: 0.2ms | ActiveRecord: 74.2ms | Sphinx: 0.0ms)
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:42:03.386012', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:42:03.384464' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:42:03.384539') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.6ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:42:08.391522', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:42:08.390059' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:42:08.390130') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:42:13.397504', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:42:13.396001' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:42:13.396074') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m


Started POST "/en/admin/profiles" for 127.0.0.1 at 2013-03-20 20:12:15 +0530
  Processing by Admin::ProfilesController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"WJyxSApP1ZoDya7qcieJqUg5S0Zc4q5IQ7Pj2USt5FE=", "person"=>{"username"=>"chai", "email"=>"chaitanya.saraf1985@gmail.com", "password"=>"[FILTERED]", "password2"=>"[FILTERED]", "is_admin"=>"0"}, "community"=>"1", "commit"=>"Add user", "locale"=>"en"}
  [1m[36mPK and serial sequence (6.8ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.2ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (1.8ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (7.7ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.0ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (1.9ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.7ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (1.6ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (2.4ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (3.6ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (1.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (3.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.3ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.7ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (1.1ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (1.0ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mCommunity Load (1.0ms)[0m  SELECT "communities".* FROM "communities"
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  BEGIN
  [1m[36mSQL (1.7ms)[0m  [1mSELECT 1 FROM "people" WHERE ("people"."email" = 'chaitanya.saraf1985@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  SELECT 1 FROM "people" WHERE ("people"."username" = 'chai') LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT 1 FROM "people" WHERE ("people"."email" = 'chaitanya.saraf1985@gmail.com') LIMIT 1[0m
  [1m[35mPerson Load (1.4ms)[0m  SELECT "people".* FROM "people" WHERE "people"."confirmation_token" = 'YKoLDu6c4Rt9xpudjcdU' LIMIT 1
  [1m[36mPK and serial sequence (3.8ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"people"'::regclass
[0m
  [1m[35mPK and custom sequence (3.6ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"people"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (3.1ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"people"'::regclass
[0m
  [1m[35mPK and custom sequence (3.5ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"people"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mAREL (1.7ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at", "is_admin", "locale", "preferences", "active_days_count", "last_page_load_date", "test_group_number", "active", "show_real_name_to_other_users", "given_name", "family_name", "phone_number", "description", "image_file_name", "image_content_type", "image_file_size", "image_updated_at", "username", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "sign_in_count", "current_sign_in_at", "last_sign_in_at", "current_sign_in_ip", "last_sign_in_ip", "password_salt", "confirmation_token", "confirmed_at", "confirmation_sent_at", "facebook_id", "authentication_token", "hobby_status", "id") VALUES ('2013-03-20 14:42:17.226800', '2013-03-20 14:42:17.226800', 'f', 'en', '---
email_about_new_messages: true
email_about_new_comments_to_own_listing: true
email_when_conversation_accepted: true
email_when_conversation_rejected: true
email_about_new_badges: true
email_about_new_received_testimonials: true
email_about_accept_reminders: true
email_about_testimonial_reminders: true
email_about_weekly_events: true
', 0, NULL, 1, 't', 't', NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 'chai', 'chaitanya.saraf1985@gmail.com', '$2a$10$BtzPgDqzII2oQM1p4ylkSOzDzUZkHKMQJj/3itvLbMhY.ki4iXIna', NULL, NULL, NULL, 0, NULL, NULL, NULL, NULL, NULL, 'YKoLDu6c4Rt9xpudjcdU', NULL, '2013-03-20 14:42:17.226664', NULL, NULL, 'Existing', 'bCQWZCKwWr4Oaf3a6HdQnY')[0m
  [1m[35mPK and serial sequence (3.1ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"people"'::regclass
  [1m[36mPK and custom sequence (3.6ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"people"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Rendered devise/mailer/confirmation_instructions.haml (5.3ms)
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:42:18.403150', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:42:18.401616' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:42:18.401712') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:42:23.408828', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:42:23.407301' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:42:23.407371') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m

Sent mail to chaitanya.saraf1985@gmail.com (6938ms)
Date: Wed, 20 Mar 2013 20:12:17 +0530
From: no-reply@realgoodfood.org
Reply-To: no-reply@realgoodfood.org
To: chaitanya.saraf1985@gmail.com
Message-ID: <5149cac9b908e_53a3496da94404c8@chaitanya-laptop.mail>
Subject: Confirmation instructions
Mime-Version: 1.0
Content-Type: text/html;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

<!-- /bHjC6UljSr4Oaa3a6HdQnY/people/confirmation?confirmation_token=rG1svxqCsB1wiJy5XQCC -->
<!-- /-if @confirmation_token -->
<!-- /  yes confirmation token -->
<!-- /  //- link = confirmation_url(:confirmation_token => @confirmation_token, :host => @host) -->
<!-- /- else -->
<!-- /  - if $host -->
<!-- /    have $host -->
<!-- /    //- link = confirmation_url(@resource, :confirmation_token => @resource.confirmation_token, :host => $host) -->
<!-- /  - else -->
<!-- /- link = confirmation_url(@resource, :confirmation_token => @resource.confirmation_token) -->
<p>
  Hi chai,
</p>
<p>
  You need to confirm your email address by clicking the following link:
  <a href="http://foodswap.herokuapp.com/bCQWZCKwWr4Oaf3a6HdQnY/people/confirmation?confirmation_token=YKoLDu6c4Rt9xpudjcdU">Confirm my account</a>
</p>
<p>
  Thanks,
  <br>
  The RealGoodFood Team
</p>
[paperclip] Saving attachments.
  [1m[35mSQL (28.3ms)[0m  COMMIT
  [1m[36mSQL (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.6ms)[0m  SELECT 1 FROM "people" WHERE ("people"."username" = 'chai') AND ("people".id <> 'bCQWZCKwWr4Oaf3a6HdQnY') LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mSELECT 1 FROM "people" WHERE ("people"."email" = 'chaitanya.saraf1985@gmail.com') AND ("people".id <> 'bCQWZCKwWr4Oaf3a6HdQnY') LIMIT 1[0m
  [1m[35mAREL (0.9ms)[0m  UPDATE "people" SET "preferences" = '---
email_about_new_messages: true
email_about_new_comments_to_own_listing: true
email_when_conversation_accepted: true
email_when_conversation_rejected: true
email_about_new_badges: true
email_about_new_received_testimonials: true
email_about_accept_reminders: true
email_about_testimonial_reminders: true
email_about_weekly_events: true
' WHERE "people"."id" = 'bCQWZCKwWr4Oaf3a6HdQnY'
[paperclip] Saving attachments.
  [1m[36mSQL (42.2ms)[0m  [1mCOMMIT[0m
WARNING: Can't mass-assign protected attributes: admin
  [1m[35mSQL (0.3ms)[0m  BEGIN
  [1m[36mCommunityMembership Load (0.9ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'bCQWZCKwWr4Oaf3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mPK and serial sequence (2.4ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"community_memberships"'::regclass
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "community_memberships" ("person_id", "community_id", "admin", "created_at", "updated_at", "consent", "invitation_id", "last_page_load_date") VALUES ('bCQWZCKwWr4Oaf3a6HdQnY', 1, 'f', '2013-03-20 14:42:24.722002', '2013-03-20 14:42:24.722002', 'RGF1.0', NULL, '2013-03-20 14:42:24.000000') RETURNING "id"[0m
  [1m[35mCommunity Load (1.1ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mAREL (0.7ms)[0m  [1mUPDATE "communities" SET "members_count" = COALESCE("members_count", 0) + 1 WHERE "communities"."id" = 1[0m
  [1m[35mSQL (13.9ms)[0m  COMMIT
  [1m[36mSQL (2.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"delayed_jobs"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.6ms)[0m  BEGIN
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"delayed_jobs"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (2.6ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"delayed_jobs"'::regclass
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:CommunityJoinedJob
person_id: bCQWZCKwWr4Oaf3a6HdQnY
community_id: 1
host: !binary |-
 bG9jYWxob3N0
', NULL, '2013-03-20 14:42:24.780951', NULL, NULL, NULL, '2013-03-20 14:42:24.781074', '2013-03-20 14:42:24.781074', NULL) RETURNING "id"[0m
  [1m[35mSQL (10.0ms)[0m  COMMIT
Redirected to http://localhost:3000/en/admin/profiles?type=profiles
Completed 302 Found in 8987ms


Started GET "/en/admin/profiles?type=profiles" for 127.0.0.1 at 2013-03-20 20:12:24 +0530
  Processing by Admin::ProfilesController#index as HTML
  Parameters: {"type"=>"profiles", "locale"=>"en"}
  [1m[36mPK and serial sequence (2.5ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (1.8ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (1.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (0.6ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mSQL (1.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.1ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.1ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (1.9ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.1ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (6.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.5ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.3ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.5ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (0.4ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (1.6ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mPerson Load (2.0ms)[0m  SELECT "people".* FROM "people"
Rendered admin/profiles/_profiles.html.haml (40.9ms)
Rendered layouts/_kissmetrics.haml (3.3ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (2.0ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (3.4ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (12.1ms)
Rendered communities/default/logo/logo.haml (2.5ms)
Rendered layouts/_no_javascript.haml (17.6ms)
Rendered layouts/_facebook_sdk.haml (2.5ms)
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.8ms)[0m  [1mSELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) AND participations.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')[0m
Rendered layouts/_logged_in_messages_icon.haml (17.0ms)
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.0ms)[0m  [1mSELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')[0m
Rendered layouts/_logged_in_notifications_icon.haml (13.7ms)
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY') AND (acceptance is null)[0m
Rendered layouts/_logged_in_swap_offers_icon.haml (13.6ms)
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"authentications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mAuthentication Load (1.1ms)[0m  [1mSELECT "authentications".* FROM "authentications" WHERE "authentications"."user_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
Rendered layouts/_logged_in.haml (67.8ms)
Rendered layouts/_notifications.haml (79.7ms)
  [1m[35mLocation Load (1.2ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1
Rendered layouts/_display_popup.haml (13.9ms)
Rendered layouts/application.haml (256.2ms)
Rendered admin/profiles/index.html.haml within layouts/admin (385.6ms)
Completed 200 OK in 1674ms (Views: 372.4ms | ActiveRecord: 282.1ms | Sphinx: 0.0ms)
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (32.1ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:42:28.414474', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:42:28.412934' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:42:28.413008') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mCommunity Load (1.7ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'localhost' LIMIT 1[0m
  [1m[35mPerson Load (1.6ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bCQWZCKwWr4Oaf3a6HdQnY' LIMIT 1
  [1m[36mCommunity Load (1.2ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  BEGIN
  [1m[36mSQL (1.4ms)[0m  [1mINSERT INTO "event_feed_events" ("person1_id", "person2_id", "community_id", "eventable_id", "eventable_type", "category", "members_only", "created_at", "updated_at") VALUES ('bCQWZCKwWr4Oaf3a6HdQnY', NULL, 1, NULL, NULL, 'join', 'f', '2013-03-20 14:42:28.527009', '2013-03-20 14:42:28.527009') RETURNING "id"[0m
  [1m[35mSQL (5.7ms)[0m  COMMIT
  [1m[36mListing Load (1.3ms)[0m  [1mSELECT "listings".* FROM "listings" WHERE ("listings".author_id = 'bCQWZCKwWr4Oaf3a6HdQnY')[0m
  [1m[35mSQL (0.8ms)[0m  BEGIN
  [1m[36mAREL (1.6ms)[0m  [1mDELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 237[0m
  [1m[35mSQL (11.7ms)[0m  COMMIT
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.9ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:42:28.561471', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:42:28.559596' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:42:28.559681') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.7ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:42:28.569022', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:42:28.566773' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:42:28.566848') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:42:33.575789', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:42:33.574249' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:42:33.574321') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (0.9ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:42:38.581119', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:42:38.580086' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:42:38.580130') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:42:43.584831', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:42:43.583285' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:42:43.583358') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (3.1ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:42:48.589942', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:42:48.589086' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:42:48.589126') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:42:53.595956', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:42:53.594431' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:42:53.594501') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:42:58.601598', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:42:58.600070' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:42:58.600142') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:43:03.606927', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:43:03.605784' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:43:03.605858') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:43:08.612796', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:43:08.611254' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:43:08.611328') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:43:13.618604', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:43:13.617026' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:43:13.617105') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:43:18.624268', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:43:18.622726' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:43:18.622801') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:43:23.629966', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:43:23.628392' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:43:23.628468') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:43:28.635692', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:43:28.634076' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:43:28.634151') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:43:33.640605', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:43:33.639771' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:43:33.639805') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:43:38.645830', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:43:38.644275' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:43:38.644342') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:43:43.651445', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:43:43.649920' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:43:43.649992') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:43:48.657133', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:43:48.655602' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:43:48.655674') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:43:53.662817', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:43:53.661277' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:43:53.661348') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:43:58.668376', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:43:58.666839' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:43:58.666914') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (0.9ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:44:03.673937', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:44:03.672572' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:44:03.672649') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:44:08.677294', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:44:08.675799' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:44:08.675869') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:44:13.683127', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:44:13.681456' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:44:13.681531') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (0.9ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:44:18.687829', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:44:18.687217' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:44:18.687254') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:44:23.691236', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:44:23.689718' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:44:23.689794') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:44:28.696984', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:44:28.695440' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:44:28.695516') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:44:33.702827', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:44:33.701134' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:44:33.701207') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:44:38.708465', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:44:38.706942' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:44:38.707017') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (1.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:44:43.713512', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:44:43.712536' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:44:43.712592') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (1.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:44:48.717738', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:44:48.716063' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:44:48.716137') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:44:53.722358', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:44:53.720761' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:44:53.720837') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:44:58.727832', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:44:58.726211' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:44:58.726282') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (1.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:45:03.733420', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:45:03.731941' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:45:03.732014') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:45:08.738111', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:45:08.736555' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:45:08.736625') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.1ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:45:13.742881', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:45:13.742285' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:45:13.742318') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:45:18.747387', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:45:18.745807' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:45:18.745881') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:45:23.753018', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:45:23.751478' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:45:23.751552') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (0.9ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:45:28.757612', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:45:28.757012' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:45:28.757046') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:45:33.760993', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:45:33.759427' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:45:33.759496') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:45:38.767065', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:45:38.765239' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:45:38.765335') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:45:43.772734', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:45:43.771225' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:45:43.771298') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m


Started POST "/en/admin/profiles/bwYWo6J6Cr4Oaj3a6HdQnY" for 127.0.0.1 at 2013-03-20 20:15:47 +0530
  Processing by Admin::ProfilesController#destroy as HTML
  Parameters: {"authenticity_token"=>"WJyxSApP1ZoDya7qcieJqUg5S0Zc4q5IQ7Pj2USt5FE=", "locale"=>"en", "id"=>"bwYWo6J6Cr4Oaj3a6HdQnY"}
  [1m[36mPK and serial sequence (8.0ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (1.9ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.6ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (1.4ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mSQL (3.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (2.4ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (6.1ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.0ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (7.3ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.7ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (7.0ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.5ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (1.0ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:45:48.777505', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:45:48.776869' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:45:48.776910') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.4ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.5ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (0.9ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (1.4ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mPerson Load (1.4ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bwYWo6J6Cr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mBEGIN[0m
  [1m[35mAuthentication Load (0.9ms)[0m  SELECT "authentications".* FROM "authentications" WHERE ("authentications".user_id = 'bwYWo6J6Cr4Oaj3a6HdQnY')
  [1m[36mListing Load (1.3ms)[0m  [1mSELECT "listings".* FROM "listings" WHERE ("listings".author_id = 'bwYWo6J6Cr4Oaj3a6HdQnY')[0m
  [1m[35mEmail Load (1.0ms)[0m  SELECT "emails".* FROM "emails" WHERE ("emails".person_id = 'bwYWo6J6Cr4Oaj3a6HdQnY')
  [1m[36mLocation Load (1.0ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'bwYWo6J6Cr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
  [1m[35mParticipation Load (0.9ms)[0m  SELECT "participations".* FROM "participations" WHERE ("participations".person_id = 'bwYWo6J6Cr4Oaj3a6HdQnY')
  [1m[36mConversation Load (1.4ms)[0m  [1mSELECT "conversations".* FROM "conversations" INNER JOIN "participations" ON "conversations".id = "participations".conversation_id WHERE (("participations".person_id = 'bwYWo6J6Cr4Oaj3a6HdQnY'))[0m
  [1m[35mTestimonial Load (0.9ms)[0m  SELECT "testimonials".* FROM "testimonials" WHERE ("testimonials".author_id = 'bwYWo6J6Cr4Oaj3a6HdQnY')
  [1m[36mTestimonial Load (0.8ms)[0m  [1mSELECT "testimonials".* FROM "testimonials" WHERE ("testimonials".receiver_id = 'bwYWo6J6Cr4Oaj3a6HdQnY') ORDER BY id DESC[0m
  [1m[35mBadge Load (0.9ms)[0m  SELECT "badges".* FROM "badges" WHERE ("badges".person_id = 'bwYWo6J6Cr4Oaj3a6HdQnY')
  [1m[36mNotification Load (1.0ms)[0m  [1mSELECT "notifications".* FROM "notifications" WHERE ("notifications".receiver_id = 'bwYWo6J6Cr4Oaj3a6HdQnY') ORDER BY id DESC[0m
  [1m[35mComment Load (1.0ms)[0m  SELECT "comments".* FROM "comments" WHERE ("comments".author_id = 'bwYWo6J6Cr4Oaj3a6HdQnY')
  [1m[36mCommunityMembership Load (1.0ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE ("community_memberships".person_id = 'bwYWo6J6Cr4Oaj3a6HdQnY')[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mAREL (0.9ms)[0m  [1mUPDATE "communities" SET "members_count" = COALESCE("members_count", 0) - 1 WHERE "communities"."id" = 1[0m
  [1m[35mAREL (0.7ms)[0m  DELETE FROM "community_memberships" WHERE "community_memberships"."id" = 3
  [1m[36mInvitation Load (1.5ms)[0m  [1mSELECT "invitations".* FROM "invitations" WHERE ("invitations".inviter_id = 'bwYWo6J6Cr4Oaj3a6HdQnY')[0m
  [1m[35mPollAnswer Load (1.5ms)[0m  SELECT "poll_answers".* FROM "poll_answers" WHERE ("poll_answers".answerer_id = 'bwYWo6J6Cr4Oaj3a6HdQnY')
  [1m[36mDevice Load (1.0ms)[0m  [1mSELECT "devices".* FROM "devices" WHERE ("devices".person_id = 'bwYWo6J6Cr4Oaj3a6HdQnY')[0m
  [1m[35mEventFeedEvent Load (1.1ms)[0m  SELECT "event_feed_events".* FROM "event_feed_events" WHERE ("event_feed_events".person1_id = 'bwYWo6J6Cr4Oaj3a6HdQnY')
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"event_feed_events"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"event_feed_events"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mAREL (0.8ms)[0m  [1mDELETE FROM "event_feed_events" WHERE "event_feed_events"."id" = 2[0m
  [1m[35mEventFeedEvent Load (0.7ms)[0m  SELECT "event_feed_events".* FROM "event_feed_events" WHERE ("event_feed_events".person2_id = 'bwYWo6J6Cr4Oaj3a6HdQnY')
[paperclip] Deleting attachments.
  [1m[36mSQL (1.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listing_followers"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mListing Load (0.7ms)[0m  SELECT * FROM "listings" INNER JOIN "listing_followers" ON "listings".id = "listing_followers".listing_id WHERE ("listing_followers".person_id = 'bwYWo6J6Cr4Oaj3a6HdQnY' )
  [1m[36mAREL (0.9ms)[0m  [1mDELETE FROM "people" WHERE "people"."id" = 'bwYWo6J6Cr4Oaj3a6HdQnY'[0m
  [1m[35mSQL (20.1ms)[0m  COMMIT
Redirected to http://localhost:3000/en/admin/profiles?type=profiles
Completed 302 Found in 1453ms


Started GET "/en/admin/profiles?type=profiles" for 127.0.0.1 at 2013-03-20 20:15:49 +0530
  Processing by Admin::ProfilesController#index as HTML
  Parameters: {"type"=>"profiles", "locale"=>"en"}
  [1m[36mPK and serial sequence (7.0ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.2ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.6ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (1.4ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mSQL (2.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (2.4ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (3.7ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.7ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (2.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (2.5ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (3.2ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (4.3ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (3.2ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.5ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.5ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (0.9ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (0.6ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mPerson Load (1.7ms)[0m  SELECT "people".* FROM "people"
Rendered admin/profiles/_profiles.html.haml (106.8ms)
Rendered layouts/_kissmetrics.haml (3.3ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.9ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.3ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (12.7ms)
Rendered communities/default/logo/logo.haml (2.5ms)
Rendered layouts/_no_javascript.haml (18.3ms)
Rendered layouts/_facebook_sdk.haml (2.5ms)
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.8ms)[0m  [1mSELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) AND participations.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')[0m
Rendered layouts/_logged_in_messages_icon.haml (85.6ms)
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.0ms)[0m  [1mSELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')[0m
Rendered layouts/_logged_in_notifications_icon.haml (11.0ms)
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY') AND (acceptance is null)[0m
Rendered layouts/_logged_in_swap_offers_icon.haml (11.2ms)
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"authentications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mAuthentication Load (1.0ms)[0m  [1mSELECT "authentications".* FROM "authentications" WHERE "authentications"."user_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
Rendered layouts/_logged_in.haml (128.6ms)
Rendered layouts/_notifications.haml (7.2ms)
  [1m[35mLocation Load (1.2ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1
Rendered layouts/_display_popup.haml (11.8ms)
Rendered layouts/application.haml (245.5ms)
Rendered admin/profiles/index.html.haml within layouts/admin (367.7ms)
Completed 200 OK in 1626ms (Views: 356.5ms | ActiveRecord: 192.2ms | Sphinx: 0.0ms)
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:45:53.781003', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:45:53.779489' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:45:53.779563') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m


Started POST "/en/admin/profiles/bCQWZCKwWr4Oaf3a6HdQnY" for 127.0.0.1 at 2013-03-20 20:15:55 +0530
  Processing by Admin::ProfilesController#destroy as HTML
  Parameters: {"authenticity_token"=>"WJyxSApP1ZoDya7qcieJqUg5S0Zc4q5IQ7Pj2USt5FE=", "locale"=>"en", "id"=>"bCQWZCKwWr4Oaf3a6HdQnY"}
  [1m[36mPK and serial sequence (8.4ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (1.8ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (1.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (0.6ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mSQL (1.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.1ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (1.9ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.1ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.0ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (6.1ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.3ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.5ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.5ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (1.0ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (0.5ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mPerson Load (1.4ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bCQWZCKwWr4Oaf3a6HdQnY' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mBEGIN[0m
  [1m[35mAuthentication Load (0.8ms)[0m  SELECT "authentications".* FROM "authentications" WHERE ("authentications".user_id = 'bCQWZCKwWr4Oaf3a6HdQnY')
  [1m[36mListing Load (1.2ms)[0m  [1mSELECT "listings".* FROM "listings" WHERE ("listings".author_id = 'bCQWZCKwWr4Oaf3a6HdQnY')[0m
  [1m[35mEmail Load (0.8ms)[0m  SELECT "emails".* FROM "emails" WHERE ("emails".person_id = 'bCQWZCKwWr4Oaf3a6HdQnY')
  [1m[36mLocation Load (1.0ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'bCQWZCKwWr4Oaf3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
  [1m[35mParticipation Load (1.0ms)[0m  SELECT "participations".* FROM "participations" WHERE ("participations".person_id = 'bCQWZCKwWr4Oaf3a6HdQnY')
  [1m[36mConversation Load (1.6ms)[0m  [1mSELECT "conversations".* FROM "conversations" INNER JOIN "participations" ON "conversations".id = "participations".conversation_id WHERE (("participations".person_id = 'bCQWZCKwWr4Oaf3a6HdQnY'))[0m
  [1m[35mTestimonial Load (1.1ms)[0m  SELECT "testimonials".* FROM "testimonials" WHERE ("testimonials".author_id = 'bCQWZCKwWr4Oaf3a6HdQnY')
  [1m[36mTestimonial Load (0.9ms)[0m  [1mSELECT "testimonials".* FROM "testimonials" WHERE ("testimonials".receiver_id = 'bCQWZCKwWr4Oaf3a6HdQnY') ORDER BY id DESC[0m
  [1m[35mBadge Load (0.9ms)[0m  SELECT "badges".* FROM "badges" WHERE ("badges".person_id = 'bCQWZCKwWr4Oaf3a6HdQnY')
  [1m[36mNotification Load (1.0ms)[0m  [1mSELECT "notifications".* FROM "notifications" WHERE ("notifications".receiver_id = 'bCQWZCKwWr4Oaf3a6HdQnY') ORDER BY id DESC[0m
  [1m[35mComment Load (0.9ms)[0m  SELECT "comments".* FROM "comments" WHERE ("comments".author_id = 'bCQWZCKwWr4Oaf3a6HdQnY')
  [1m[36mCommunityMembership Load (1.1ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE ("community_memberships".person_id = 'bCQWZCKwWr4Oaf3a6HdQnY')[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mAREL (1.2ms)[0m  [1mUPDATE "communities" SET "members_count" = COALESCE("members_count", 0) - 1 WHERE "communities"."id" = 1[0m
  [1m[35mAREL (0.8ms)[0m  DELETE FROM "community_memberships" WHERE "community_memberships"."id" = 10
  [1m[36mInvitation Load (1.1ms)[0m  [1mSELECT "invitations".* FROM "invitations" WHERE ("invitations".inviter_id = 'bCQWZCKwWr4Oaf3a6HdQnY')[0m
  [1m[35mPollAnswer Load (0.7ms)[0m  SELECT "poll_answers".* FROM "poll_answers" WHERE ("poll_answers".answerer_id = 'bCQWZCKwWr4Oaf3a6HdQnY')
  [1m[36mDevice Load (0.9ms)[0m  [1mSELECT "devices".* FROM "devices" WHERE ("devices".person_id = 'bCQWZCKwWr4Oaf3a6HdQnY')[0m
  [1m[35mEventFeedEvent Load (1.1ms)[0m  SELECT "event_feed_events".* FROM "event_feed_events" WHERE ("event_feed_events".person1_id = 'bCQWZCKwWr4Oaf3a6HdQnY')
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"event_feed_events"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"event_feed_events"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mAREL (0.8ms)[0m  [1mDELETE FROM "event_feed_events" WHERE "event_feed_events"."id" = 15[0m
  [1m[35mEventFeedEvent Load (0.9ms)[0m  SELECT "event_feed_events".* FROM "event_feed_events" WHERE ("event_feed_events".person2_id = 'bCQWZCKwWr4Oaf3a6HdQnY')
[paperclip] Deleting attachments.
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listing_followers"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mListing Load (1.4ms)[0m  SELECT * FROM "listings" INNER JOIN "listing_followers" ON "listings".id = "listing_followers".listing_id WHERE ("listing_followers".person_id = 'bCQWZCKwWr4Oaf3a6HdQnY' )
  [1m[36mAREL (0.8ms)[0m  [1mDELETE FROM "people" WHERE "people"."id" = 'bCQWZCKwWr4Oaf3a6HdQnY'[0m
  [1m[35mSQL (27.8ms)[0m  COMMIT
Redirected to http://localhost:3000/en/admin/profiles?type=profiles
Completed 302 Found in 1390ms


Started GET "/en/admin/profiles?type=profiles" for 127.0.0.1 at 2013-03-20 20:15:57 +0530
  Processing by Admin::ProfilesController#index as HTML
  Parameters: {"type"=>"profiles", "locale"=>"en"}
  [1m[36mPK and serial sequence (6.4ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.7ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.6ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (1.7ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.9ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.1ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (2.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (3.0ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (3.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (2.7ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.4ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.6ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (0.4ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (0.8ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mPerson Load (1.3ms)[0m  SELECT "people".* FROM "people"
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (1.0ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:45:58.785757', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:45:58.785159' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:45:58.785191') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
Rendered admin/profiles/_profiles.html.haml (104.0ms)
Rendered layouts/_kissmetrics.haml (3.3ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.9ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.3ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (10.8ms)
Rendered communities/default/logo/logo.haml (2.4ms)
Rendered layouts/_no_javascript.haml (18.2ms)
Rendered layouts/_facebook_sdk.haml (2.5ms)
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.1ms)[0m  [1mSELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) AND participations.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')[0m
Rendered layouts/_logged_in_messages_icon.haml (22.1ms)
  [1m[35mSQL (1.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.5ms)[0m  [1mSELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')[0m
Rendered layouts/_logged_in_notifications_icon.haml (9.7ms)
  [1m[35mSQL (1.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY') AND (acceptance is null)[0m
Rendered layouts/_logged_in_swap_offers_icon.haml (9.7ms)
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"authentications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mAuthentication Load (0.9ms)[0m  [1mSELECT "authentications".* FROM "authentications" WHERE "authentications"."user_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
Rendered layouts/_logged_in.haml (131.2ms)
Rendered layouts/_notifications.haml (5.7ms)
  [1m[35mLocation Load (1.4ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1
Rendered layouts/_display_popup.haml (12.5ms)
Rendered layouts/application.haml (240.8ms)
Rendered admin/profiles/index.html.haml within layouts/admin (359.2ms)
Completed 200 OK in 1610ms (Views: 348.7ms | ActiveRecord: 195.2ms | Sphinx: 0.0ms)


Started GET "/en/admin/profiles/new?type=profiles" for 127.0.0.1 at 2013-03-20 20:16:01 +0530
  Processing by Admin::ProfilesController#new as HTML
  Parameters: {"type"=>"profiles", "locale"=>"en"}
  [1m[36mPK and serial sequence (6.3ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.3ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (1.3ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.0ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (2.8ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.6ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.9ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.6ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (8.0ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.3ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (3.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.6ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.5ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (0.5ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (1.0ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mCommunity Load (1.0ms)[0m  SELECT "communities".* FROM "communities"
Rendered layouts/_kissmetrics.haml (3.4ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.8ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.3ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (11.0ms)
Rendered communities/default/logo/logo.haml (2.4ms)
Rendered layouts/_no_javascript.haml (22.6ms)
Rendered layouts/_facebook_sdk.haml (2.5ms)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.2ms)[0m  [1mSELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) AND participations.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')[0m
Rendered layouts/_logged_in_messages_icon.haml (17.0ms)
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.7ms)[0m  [1mSELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')[0m
Rendered layouts/_logged_in_notifications_icon.haml (14.4ms)
  [1m[35mSQL (0.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.8ms)[0m  [1mSELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY') AND (acceptance is null)[0m
Rendered layouts/_logged_in_swap_offers_icon.haml (12.8ms)
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"authentications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mAuthentication Load (0.8ms)[0m  [1mSELECT "authentications".* FROM "authentications" WHERE "authentications"."user_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
Rendered layouts/_logged_in.haml (69.5ms)
Rendered layouts/_notifications.haml (78.7ms)
  [1m[35mLocation Load (1.1ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1
Rendered layouts/_display_popup.haml (10.9ms)
Rendered layouts/application.haml (254.6ms)
Rendered admin/profiles/new.html.haml within layouts/admin (344.0ms)
Completed 200 OK in 1544ms (Views: 333.1ms | ActiveRecord: 84.5ms | Sphinx: 0.0ms)
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (1.8ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:46:03.788100', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:46:03.787496' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:46:03.787530') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:46:08.792378', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:46:08.790835' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:46:08.790910') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *


Started GET "/people/check_username_availability?person%5Busername%5D=chaitanya" for 127.0.0.1 at 2013-03-20 20:16:10 +0530
  Processing by PeopleController#check_username_availability as JSON
  Parameters: {"person"=>{"username"=>"chaitanya"}, "id"=>"check_username_availability"}
  [1m[36mPK and serial sequence (6.4ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.4ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (1.9ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mSQL (3.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (7.1ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.2ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (0.9ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.1ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (3.9ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (4.7ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (1.6ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.4ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.4ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (1.1ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (1.0ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mPerson Load (1.3ms)[0m  SELECT "people".* FROM "people" WHERE "people"."username" = 'chaitanya' LIMIT 1
Completed 200 OK in 1175ms (Views: 0.2ms | ActiveRecord: 66.7ms | Sphinx: 0.0ms)
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (1.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:46:13.797979', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:46:13.796476' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:46:13.796546') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:46:18.802651', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:46:18.801097' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:46:18.801173') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *


Started GET "/people/check_email_availability_and_validity?person%5Bemail%5D=chaitanya.saraf1985%40gmail.com" for 127.0.0.1 at 2013-03-20 20:16:21 +0530
  Processing by PeopleController#check_email_availability_and_validity as JSON
  Parameters: {"person"=>{"email"=>"chaitanya.saraf1985@gmail.com"}, "id"=>"check_email_availability_and_validity"}
  [1m[36mPK and serial sequence (6.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.0ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (0.9ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mSQL (2.6ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (2.4ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.0ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (1.9ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.1ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.0ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (6.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.0ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.6ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.3ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.4ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (0.7ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (0.5ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mSQL (0.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"emails"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"emails"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mEmail Load (0.5ms)[0m  SELECT "emails".* FROM "emails" WHERE "emails"."address" = 'chaitanya.saraf1985@gmail.com' AND "emails"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mPerson Load (0.5ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."email" = 'chaitanya.saraf1985@gmail.com' LIMIT 1[0m
  [1m[35mEmail Load (0.3ms)[0m  SELECT "emails".* FROM "emails" WHERE "emails"."address" = 'chaitanya.saraf1985@gmail.com' LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "emails".* FROM "emails" WHERE "emails"."address" = 'chaitanya.saraf1985@gmail.com' LIMIT 1[0m
Completed 200 OK in 1234ms (Views: 0.2ms | ActiveRecord: 63.1ms | Sphinx: 0.0ms)
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:46:23.808238', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:46:23.806761' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:46:23.806833') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:46:28.814019', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:46:28.812466' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:46:28.812542') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:46:33.819610', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:46:33.818099' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:46:33.818173') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:46:38.825015', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:46:38.823440' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:46:38.823513') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:46:43.830811', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:46:43.829152' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:46:43.829229') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:46:48.837116', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:46:48.834982' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:46:48.835057') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:46:53.842896', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:46:53.841564' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:46:53.841598') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:46:58.848176', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:46:58.846679' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:46:58.846754') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:47:03.853821', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:47:03.852269' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:47:03.852343') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:47:08.859505', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:47:08.857994' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:47:08.858068') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (0.9ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:47:13.864165', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:47:13.863559' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:47:13.863594') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:47:18.867474', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:47:18.865961' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:47:18.866036') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:47:23.873550', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:47:23.872044' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:47:23.872117') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:47:28.879226', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:47:28.877718' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:47:28.877786') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *


Started POST "/en/admin/profiles" for 127.0.0.1 at 2013-03-20 20:17:28 +0530
  Processing by Admin::ProfilesController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"WJyxSApP1ZoDya7qcieJqUg5S0Zc4q5IQ7Pj2USt5FE=", "person"=>{"username"=>"chaitanya", "email"=>"chaitanya.saraf1985@gmail.com", "password"=>"[FILTERED]", "password2"=>"[FILTERED]", "is_admin"=>"0"}, "community"=>"1", "commit"=>"Add user", "locale"=>"en"}
  [1m[35mPK and serial sequence (6.3ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.4ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.5ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.1ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.0ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.4ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.4ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (2.3ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (4.1ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (2.3ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.6ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (1.5ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (1.0ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.0ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>{"utf8"=>"✓", "authenticity_token"=>"WJyxSApP1ZoDya7qcieJqUg5S0Zc4q5IQ7Pj2USt5FE=", "person"=>{"username"=>"chaitanya", "email"=>"chaitanya.saraf1985@gmail.com", "password"=>"chaitanya", "password2"=>"chaitanya", "is_admin"=>"0"}, "community"=>"1", "commit"=>"Add user", "action"=>"create", "controller"=>"admin/profiles", "locale"=>"en"}
  [1m[36mCommunity Load (0.5ms)[0m  [1mSELECT "communities".* FROM "communities"[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  SELECT 1 FROM "people" WHERE ("people"."email" = 'chaitanya.saraf1985@gmail.com') LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mSELECT 1 FROM "people" WHERE ("people"."username" = 'chaitanya') LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT 1 FROM "people" WHERE ("people"."email" = 'chaitanya.saraf1985@gmail.com') LIMIT 1
  [1m[36mPerson Load (0.6ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."confirmation_token" = 'CVVvjbySsyRjpCx5Jxfd' LIMIT 1[0m
  [1m[35mPK and serial sequence (1.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"people"'::regclass
  [1m[36mPK and custom sequence (1.3ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"people"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (1.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"people"'::regclass
  [1m[36mPK and custom sequence (1.3ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"people"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mAREL (3.0ms)[0m  INSERT INTO "people" ("created_at", "updated_at", "is_admin", "locale", "preferences", "active_days_count", "last_page_load_date", "test_group_number", "active", "show_real_name_to_other_users", "given_name", "family_name", "phone_number", "description", "image_file_name", "image_content_type", "image_file_size", "image_updated_at", "username", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "sign_in_count", "current_sign_in_at", "last_sign_in_at", "current_sign_in_ip", "last_sign_in_ip", "password_salt", "confirmation_token", "confirmed_at", "confirmation_sent_at", "facebook_id", "authentication_token", "hobby_status", "id") VALUES ('2013-03-20 14:47:30.576088', '2013-03-20 14:47:30.576088', 'f', 'en', '---
email_about_new_messages: true
email_about_new_comments_to_own_listing: true
email_when_conversation_accepted: true
email_when_conversation_rejected: true
email_about_new_badges: true
email_about_new_received_testimonials: true
email_about_accept_reminders: true
email_about_testimonial_reminders: true
email_about_weekly_events: true
', 0, NULL, 1, 't', 't', NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 'chaitanya', 'chaitanya.saraf1985@gmail.com', '$2a$10$1aODyRWQbFAtK.adaooR7epGBYBJEcQBdibDATutcMj9/BEVoYP12', NULL, NULL, NULL, 0, NULL, NULL, NULL, NULL, NULL, 'CVVvjbySsyRjpCx5Jxfd', NULL, '2013-03-20 14:47:30.575978', NULL, NULL, 'Existing', 'axDuDeKw0r4Oaf3a6HdQnY')
  [1m[36mPK and serial sequence (3.3ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"people"'::regclass
[0m
  [1m[35mPK and custom sequence (1.8ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"people"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Rendered devise/mailer/confirmation_instructions.haml (4.7ms)
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:47:33.884846', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:47:33.883346' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:47:33.883422') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m

Sent mail to chaitanya.saraf1985@gmail.com (6433ms)
Date: Wed, 20 Mar 2013 20:17:30 +0530
From: no-reply@realgoodfood.org
Reply-To: no-reply@realgoodfood.org
To: chaitanya.saraf1985@gmail.com
Message-ID: <5149cc02ada1f_53a36a05202405fd@chaitanya-laptop.mail>
Subject: Confirmation instructions
Mime-Version: 1.0
Content-Type: text/html;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

<!-- /bHjC6UljSr4Oaa3a6HdQnY/people/confirmation?confirmation_token=rG1svxqCsB1wiJy5XQCC -->
<!-- /-if @confirmation_token -->
<!-- /  yes confirmation token -->
<!-- /  //- link = confirmation_url(:confirmation_token => @confirmation_token, :host => @host) -->
<!-- /- else -->
<!-- /  - if $host -->
<!-- /    have $host -->
<!-- /    //- link = confirmation_url(@resource, :confirmation_token => @resource.confirmation_token, :host => $host) -->
<!-- /  - else -->
<!-- /- link = confirmation_url(@resource, :confirmation_token => @resource.confirmation_token) -->
<p>
  Hi chaitanya,
</p>
<p>
  You need to confirm your email address by clicking the following link:
  <a href="http://foodswap.herokuapp.com/axDuDeKw0r4Oaf3a6HdQnY/people/confirmation?confirmation_token=CVVvjbySsyRjpCx5Jxfd">Confirm my account</a>
</p>
<p>
  Thanks,
  <br>
  The RealGoodFood Team
</p>
[paperclip] Saving attachments.
  [1m[36mSQL (33.2ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (0.8ms)[0m  BEGIN
  [1m[36mSQL (1.1ms)[0m  [1mSELECT 1 FROM "people" WHERE ("people"."username" = 'chaitanya') AND ("people".id <> 'axDuDeKw0r4Oaf3a6HdQnY') LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  SELECT 1 FROM "people" WHERE ("people"."email" = 'chaitanya.saraf1985@gmail.com') AND ("people".id <> 'axDuDeKw0r4Oaf3a6HdQnY') LIMIT 1
  [1m[36mAREL (1.6ms)[0m  [1mUPDATE "people" SET "preferences" = '---
email_about_new_messages: true
email_about_new_comments_to_own_listing: true
email_when_conversation_accepted: true
email_when_conversation_rejected: true
email_about_new_badges: true
email_about_new_received_testimonials: true
email_about_accept_reminders: true
email_about_testimonial_reminders: true
email_about_weekly_events: true
' WHERE "people"."id" = 'axDuDeKw0r4Oaf3a6HdQnY'[0m
[paperclip] Saving attachments.
  [1m[35mSQL (11.5ms)[0m  COMMIT
WARNING: Can't mass-assign protected attributes: admin
  [1m[36mSQL (0.6ms)[0m  [1mBEGIN[0m
  [1m[35mCommunityMembership Load (1.1ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'axDuDeKw0r4Oaf3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mPK and serial sequence (6.8ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"community_memberships"'::regclass
[0m
  [1m[35mSQL (1.3ms)[0m  INSERT INTO "community_memberships" ("person_id", "community_id", "admin", "created_at", "updated_at", "consent", "invitation_id", "last_page_load_date") VALUES ('axDuDeKw0r4Oaf3a6HdQnY', 1, 'f', '2013-03-20 14:47:37.224166', '2013-03-20 14:47:37.224166', 'RGF1.0', NULL, '2013-03-20 14:47:37.000000') RETURNING "id"
  [1m[36mCommunity Load (1.6ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mAREL (1.9ms)[0m  UPDATE "communities" SET "members_count" = COALESCE("members_count", 0) + 1 WHERE "communities"."id" = 1
  [1m[36mSQL (4.3ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (0.7ms)[0m  BEGIN
  [1m[36mSQL (1.2ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:CommunityJoinedJob
person_id: axDuDeKw0r4Oaf3a6HdQnY
community_id: 1
host: !binary |-
 bG9jYWxob3N0
', NULL, '2013-03-20 14:47:37.273343', NULL, NULL, NULL, '2013-03-20 14:47:37.273627', '2013-03-20 14:47:37.273627', NULL) RETURNING "id"[0m
  [1m[35mSQL (3.6ms)[0m  COMMIT
Redirected to http://localhost:3000/en/admin/profiles?type=profiles
Completed 302 Found in 8043ms


Started GET "/en/admin/profiles?type=profiles" for 127.0.0.1 at 2013-03-20 20:17:37 +0530
  Processing by Admin::ProfilesController#index as HTML
  Parameters: {"type"=>"profiles", "locale"=>"en"}
  [1m[36mPK and serial sequence (6.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.0ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (29.9ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mSQL (2.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.1ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (1.9ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.4ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.0ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (3.6ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (2.4ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (3.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (0.6ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (34.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:47:38.889777', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:47:38.888880' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:47:38.888943') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[35mSQL (1.5ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[36mCommunity Load (0.7ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'localhost' LIMIT 1[0m
  [1m[35mSQL (1.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[35mPerson Load (0.8ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'axDuDeKw0r4Oaf3a6HdQnY' LIMIT 1
  [1m[36mCommunity Load (0.7ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[36mCommunityMembership Load (0.5ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "event_feed_events" ("person1_id", "person2_id", "community_id", "eventable_id", "eventable_type", "category", "members_only", "created_at", "updated_at") VALUES ('axDuDeKw0r4Oaf3a6HdQnY', NULL, 1, NULL, NULL, 'join', 'f', '2013-03-20 14:47:38.939007', '2013-03-20 14:47:38.939007') RETURNING "id"[0m
  [1m[35mSQL (5.8ms)[0m  COMMIT
  [1m[35mCACHE (0.0ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mListing Load (0.8ms)[0m  [1mSELECT "listings".* FROM "listings" WHERE ("listings".author_id = 'axDuDeKw0r4Oaf3a6HdQnY')[0m
  [1m[35mSQL (0.3ms)[0m  BEGIN
  [1m[36mAREL (0.5ms)[0m  [1mDELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 238[0m
  [1m[36mLocation Load (0.9ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mSQL (6.7ms)[0m  COMMIT
  [1m[35mPerson Load (1.8ms)[0m  SELECT "people".* FROM "people"
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (1.6ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:47:38.960080', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:47:38.958167' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:47:38.958195') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (0.8ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:47:38.963433', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:47:38.962910' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:47:38.962939') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
Rendered admin/profiles/_profiles.html.haml (110.0ms)
Rendered layouts/_kissmetrics.haml (3.3ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.9ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.2ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (10.7ms)
Rendered communities/default/logo/logo.haml (75.9ms)
Rendered layouts/_no_javascript.haml (92.4ms)
Rendered layouts/_facebook_sdk.haml (2.6ms)
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.2ms)[0m  [1mSELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) AND participations.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')[0m
Rendered layouts/_logged_in_messages_icon.haml (22.9ms)
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.0ms)[0m  [1mSELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')[0m
Rendered layouts/_logged_in_notifications_icon.haml (20.5ms)
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY') AND (acceptance is null)[0m
Rendered layouts/_logged_in_swap_offers_icon.haml (11.5ms)
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"authentications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mAuthentication Load (1.1ms)[0m  [1mSELECT "authentications".* FROM "authentications" WHERE "authentications"."user_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
Rendered layouts/_logged_in.haml (78.2ms)
Rendered layouts/_notifications.haml (7.4ms)
  [1m[35mLocation Load (1.1ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1
Rendered layouts/_display_popup.haml (12.9ms)
Rendered layouts/application.haml (264.4ms)
Rendered admin/profiles/index.html.haml within layouts/admin (391.7ms)
Completed 200 OK in 1849ms (Views: 378.4ms | ActiveRecord: 258.9ms | Sphinx: 0.0ms)
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:47:43.966616', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:47:43.965068' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:47:43.965143') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:47:48.972257', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:47:48.970760' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:47:48.970831') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:47:53.977946', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:47:53.976392' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:47:53.976466') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:47:58.984049', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:47:58.982176' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:47:58.982265') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.6ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:48:03.989856', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:48:03.988210' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:48:03.988284') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:48:08.996400', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:48:08.994336' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:48:08.994409') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:48:14.002148', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:48:14.000605' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:48:14.000677') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:48:19.007860', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:48:19.006350' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:48:19.006426') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:48:24.013600', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:48:24.012096' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:48:24.012172') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:48:29.019275', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:48:29.017809' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:48:29.017880') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (0.9ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:48:34.024241', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:48:34.023399' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:48:34.023480') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (1.0ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:48:39.026597', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:48:39.025975' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:48:39.026013') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:48:44.030444', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:48:44.028649' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:48:44.028762') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:48:49.036054', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:48:49.034546' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:48:49.034620') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:48:54.041843', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:48:54.040294' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:48:54.040370') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:48:59.047649', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:48:59.045971' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:48:59.046050') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:49:04.053631', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:49:04.052125' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:49:04.052199') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:49:09.059424', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:49:09.057966' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:49:09.058035') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:49:14.064950', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:49:14.063468' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:49:14.063541') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:49:19.070551', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:49:19.069021' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:49:19.069096') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:49:24.076269', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:49:24.074732' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:49:24.074807') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:49:29.081940', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:49:29.080377' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:49:29.080451') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:49:34.087635', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:49:34.086157' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:49:34.086231') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (1.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:49:39.092460', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:49:39.091630' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:49:39.091670') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (1.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:49:44.095584', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:49:44.094768' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:49:44.094809') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
DEPRECATION WARNING: config.action_view.debug_rjs will be removed in 3.1, from 3.1 onwards you will need to install prototype-rails to continue to use RJS templates . (called from <top (required)> at /home/chaitanya/workArea/ST-to-RGF/config/environment.rb:10)
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (1.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:49:49.098672', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:49:49.097871' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:49:49.097908') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mSQL (0.8ms)[0m  [1mSHOW client_min_messages[0m
  [1m[35mSQL (0.6ms)[0m  SET client_min_messages TO 'panic'
  [1m[36mSQL (0.7ms)[0m  [1mSET standard_conforming_strings = on[0m
  [1m[35mSQL (0.5ms)[0m  SET client_min_messages TO 'notice'
  [1m[36mSQL (0.9ms)[0m  [1mSET time zone 'UTC'[0m
  [1m[35mSQL (0.6ms)[0m  SHOW TIME ZONE
  [1m[36mPK and serial sequence (6.5ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.0ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
DEPRECATION WARNING: RAILS_ROOT is deprecated. Please use ::Rails.root.to_s. (called from <class:Person> at /home/chaitanya/workArea/ST-to-RGF/app/models/person.rb:134)
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.6ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:49:54.102486', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:49:54.100974' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:49:54.101044') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:49:59.108395', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:49:59.106894' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:49:59.106967') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:50:04.114051', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:50:04.112512' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:50:04.112584') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:50:09.119724', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:50:09.118224' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:50:09.118295') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:50:14.125371', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:50:14.123904' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:50:14.123975') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:50:19.130981', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:50:19.129428' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:50:19.129499') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:50:24.136620', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:50:24.135118' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:50:24.135192') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:50:29.142328', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:50:29.140800' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:50:29.140868') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:50:34.147948', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:50:34.146443' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:50:34.146515') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:50:39.153590', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:50:39.152090' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:50:39.152160') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:50:44.159274', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:50:44.157766' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:50:44.157838') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:50:49.164962', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:50:49.163459' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:50:49.163529') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:50:54.170679', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:50:54.169151' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:50:54.169224') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (1.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:50:59.176294', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:50:59.174799' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:50:59.174873') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *


Started POST "/en/admin/profiles/axDuDeKw0r4Oaf3a6HdQnY" for 127.0.0.1 at 2013-03-20 20:21:02 +0530
  [1m[36mSQL (1.2ms)[0m  [1mSHOW client_min_messages[0m
  [1m[35mSQL (0.8ms)[0m  SET client_min_messages TO 'panic'
  [1m[36mSQL (0.6ms)[0m  [1mSET standard_conforming_strings = on[0m
  [1m[35mSQL (0.6ms)[0m  SET client_min_messages TO 'notice'
  [1m[36mSQL (1.2ms)[0m  [1mSET time zone 'UTC'[0m
  [1m[35mSQL (0.6ms)[0m  SHOW TIME ZONE
  Processing by Admin::ProfilesController#destroy as HTML
  Parameters: {"authenticity_token"=>"WJyxSApP1ZoDya7qcieJqUg5S0Zc4q5IQ7Pj2USt5FE=", "locale"=>"en", "id"=>"axDuDeKw0r4Oaf3a6HdQnY"}
  [1m[36mSQL (5.6ms)[0m  [1m SELECT tablename
 FROM pg_tables
 WHERE schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (6.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (4.2ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (7.6ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (2.0ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.3ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.1ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (4.1ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (5.0ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (1.0ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:51:04.179818', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:51:04.179224' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:51:04.179259') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mSQL (3.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (2.1ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (2.3ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (1.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (1.4ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (2.0ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mPerson Load (1.5ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'axDuDeKw0r4Oaf3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  BEGIN
  [1m[36mAuthentication Load (1.4ms)[0m  [1mSELECT "authentications".* FROM "authentications" WHERE ("authentications".user_id = 'axDuDeKw0r4Oaf3a6HdQnY')[0m
  [1m[35mListing Load (0.9ms)[0m  SELECT "listings".* FROM "listings" WHERE ("listings".author_id = 'axDuDeKw0r4Oaf3a6HdQnY')
  [1m[36mEmail Load (1.5ms)[0m  [1mSELECT "emails".* FROM "emails" WHERE ("emails".person_id = 'axDuDeKw0r4Oaf3a6HdQnY')[0m
  [1m[35mLocation Load (1.0ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'axDuDeKw0r4Oaf3a6HdQnY' AND (location_type = 'person')) LIMIT 1
  [1m[36mParticipation Load (1.4ms)[0m  [1mSELECT "participations".* FROM "participations" WHERE ("participations".person_id = 'axDuDeKw0r4Oaf3a6HdQnY')[0m
  [1m[35mConversation Load (1.7ms)[0m  SELECT "conversations".* FROM "conversations" INNER JOIN "participations" ON "conversations".id = "participations".conversation_id WHERE (("participations".person_id = 'axDuDeKw0r4Oaf3a6HdQnY'))
  [1m[36mTestimonial Load (1.4ms)[0m  [1mSELECT "testimonials".* FROM "testimonials" WHERE ("testimonials".author_id = 'axDuDeKw0r4Oaf3a6HdQnY')[0m
  [1m[35mTestimonial Load (1.5ms)[0m  SELECT "testimonials".* FROM "testimonials" WHERE ("testimonials".receiver_id = 'axDuDeKw0r4Oaf3a6HdQnY') ORDER BY id DESC
  [1m[36mBadge Load (1.3ms)[0m  [1mSELECT "badges".* FROM "badges" WHERE ("badges".person_id = 'axDuDeKw0r4Oaf3a6HdQnY')[0m
  [1m[35mNotification Load (1.4ms)[0m  SELECT "notifications".* FROM "notifications" WHERE ("notifications".receiver_id = 'axDuDeKw0r4Oaf3a6HdQnY') ORDER BY id DESC
  [1m[36mComment Load (1.4ms)[0m  [1mSELECT "comments".* FROM "comments" WHERE ("comments".author_id = 'axDuDeKw0r4Oaf3a6HdQnY')[0m
  [1m[35mCommunityMembership Load (1.0ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE ("community_memberships".person_id = 'axDuDeKw0r4Oaf3a6HdQnY')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mAREL (1.6ms)[0m  UPDATE "communities" SET "members_count" = COALESCE("members_count", 0) - 1 WHERE "communities"."id" = 1
  [1m[36mAREL (0.9ms)[0m  [1mDELETE FROM "community_memberships" WHERE "community_memberships"."id" = 11[0m
  [1m[35mInvitation Load (2.1ms)[0m  SELECT "invitations".* FROM "invitations" WHERE ("invitations".inviter_id = 'axDuDeKw0r4Oaf3a6HdQnY')
  [1m[36mPollAnswer Load (1.4ms)[0m  [1mSELECT "poll_answers".* FROM "poll_answers" WHERE ("poll_answers".answerer_id = 'axDuDeKw0r4Oaf3a6HdQnY')[0m
  [1m[35mDevice Load (1.5ms)[0m  SELECT "devices".* FROM "devices" WHERE ("devices".person_id = 'axDuDeKw0r4Oaf3a6HdQnY')
  [1m[36mEventFeedEvent Load (1.6ms)[0m  [1mSELECT "event_feed_events".* FROM "event_feed_events" WHERE ("event_feed_events".person1_id = 'axDuDeKw0r4Oaf3a6HdQnY')[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"event_feed_events"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"event_feed_events"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mAREL (1.0ms)[0m  DELETE FROM "event_feed_events" WHERE "event_feed_events"."id" = 16
  [1m[36mEventFeedEvent Load (1.0ms)[0m  [1mSELECT "event_feed_events".* FROM "event_feed_events" WHERE ("event_feed_events".person2_id = 'axDuDeKw0r4Oaf3a6HdQnY')[0m
[paperclip] Deleting attachments.
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:51:09.183296', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:51:09.181789' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:51:09.181863') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:51:14.188923', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:51:14.187444' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:51:14.187515') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listing_followers"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mListing Load (2.0ms)[0m  [1mSELECT * FROM "listings" INNER JOIN "listing_followers" ON "listings".id = "listing_followers".listing_id WHERE ("listing_followers".person_id = 'axDuDeKw0r4Oaf3a6HdQnY' )[0m
  [1m[35mAREL (1.1ms)[0m  DELETE FROM "people" WHERE "people"."id" = 'axDuDeKw0r4Oaf3a6HdQnY'
  [1m[36mSQL (34.2ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:3000/en/admin/profiles?type=profiles
Completed 302 Found in 15182ms


Started GET "/en/admin/profiles?type=profiles" for 127.0.0.1 at 2013-03-20 20:21:18 +0530
  Processing by Admin::ProfilesController#index as HTML
  Parameters: {"type"=>"profiles", "locale"=>"en"}
  [1m[35mPK and serial sequence (6.0ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.7ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (5.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (4.1ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (1.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:51:19.193821', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:51:19.192940' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:51:19.192968') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mPK and serial sequence (7.9ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.3ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (5.0ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (3.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.3ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.1ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (6.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.5ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (3.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (2.7ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (2.1ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (1.2ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.7ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mPerson Load (1.6ms)[0m  [1mSELECT "people".* FROM "people"[0m
Rendered admin/profiles/_profiles.html.haml (83.6ms)
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (1.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:51:24.196985', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:51:24.196123' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:51:24.196165') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (1.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:51:29.200125', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:51:29.199314' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:51:29.199355') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (0.9ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:51:34.203194', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:51:34.202339' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:51:34.202375') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (1.0ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:51:39.205988', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:51:39.205165' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:51:39.205206') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (1.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:51:44.208774', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:51:44.207941' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:51:44.207982') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
Rendered layouts/_kissmetrics.haml (3.0ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.8ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.1ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (80.3ms)
Rendered communities/default/logo/logo.haml (56.5ms)
Rendered layouts/_no_javascript.haml (71.0ms)
Rendered layouts/_facebook_sdk.haml (2.6ms)
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (3.7ms)[0m  SELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) AND participations.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_messages_icon.haml (19.3ms)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.6ms)[0m  SELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_notifications_icon.haml (20.9ms)
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.4ms)[0m  SELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY') AND (acceptance is null)
Rendered layouts/_logged_in_swap_offers_icon.haml (13.2ms)
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"authentications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mAuthentication Load (1.5ms)[0m  SELECT "authentications".* FROM "authentications" WHERE "authentications"."user_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
Rendered layouts/_logged_in.haml (74.6ms)
Rendered layouts/_notifications.haml (66.9ms)
  [1m[36mLocation Load (1.2ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
Rendered layouts/_display_popup.haml (10.7ms)
Rendered layouts/application.haml (364.6ms)
Rendered admin/profiles/index.html.haml within layouts/admin (27081.5ms)
Completed 200 OK in 28227ms (Views: 27063.8ms | ActiveRecord: 254.6ms | Sphinx: 0.0ms)
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:51:49.212706', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:51:49.211104' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:51:49.211191') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:51:54.218325', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:51:54.216778' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:51:54.216848') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:51:59.224071', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:51:59.222402' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:51:59.222476') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *


Started GET "/en/admin/profiles/new?type=profiles" for 127.0.0.1 at 2013-03-20 20:21:59 +0530
  Processing by Admin::ProfilesController#new as HTML
  Parameters: {"type"=>"profiles", "locale"=>"en"}
  [1m[35mPK and serial sequence (6.4ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.4ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.3ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.1ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.0ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (0.8ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (0.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (2.3ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (1.9ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (3.7ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (1.6ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (1.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.2ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (1.4ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (1.0ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (0.7ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mCommunity Load (1.1ms)[0m  [1mSELECT "communities".* FROM "communities"[0m
Rendered layouts/_kissmetrics.haml (3.1ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.9ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (3.6ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (13.4ms)
Rendered communities/default/logo/logo.haml (2.4ms)
Rendered layouts/_no_javascript.haml (15.6ms)
Rendered layouts/_facebook_sdk.haml (2.5ms)
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.8ms)[0m  SELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) AND participations.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_messages_icon.haml (17.6ms)
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.0ms)[0m  SELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_notifications_icon.haml (15.4ms)
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.6ms)[0m  SELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY') AND (acceptance is null)
Rendered layouts/_logged_in_swap_offers_icon.haml (82.9ms)
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"authentications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mAuthentication Load (1.1ms)[0m  SELECT "authentications".* FROM "authentications" WHERE "authentications"."user_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
Rendered layouts/_logged_in.haml (143.9ms)
Rendered layouts/_notifications.haml (8.8ms)
  [1m[36mLocation Load (1.0ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
Rendered layouts/_display_popup.haml (11.8ms)
Rendered layouts/application.haml (257.4ms)
Rendered admin/profiles/new.html.haml within layouts/admin (279.2ms)
Completed 200 OK in 1418ms (Views: 266.9ms | ActiveRecord: 71.0ms | Sphinx: 0.0ms)
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:52:04.229803', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:52:04.228198' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:52:04.228272') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m


Started GET "/people/check_username_availability?person%5Busername%5D=yaml" for 127.0.0.1 at 2013-03-20 20:22:09 +0530
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (0.9ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:52:09.234389', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:52:09.233806' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:52:09.233837') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  Processing by PeopleController#check_username_availability as JSON
  Parameters: {"person"=>{"username"=>"yaml"}, "id"=>"check_username_availability"}
  [1m[35mPK and serial sequence (6.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.2ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (1.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (0.6ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (3.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (2.2ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (1.9ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (1.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (2.5ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.0ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (6.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (3.9ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.5ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (0.6ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (0.5ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mPerson Load (0.6ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."username" = 'yaml' LIMIT 1[0m
Completed 200 OK in 1151ms (Views: 0.2ms | ActiveRecord: 50.8ms | Sphinx: 0.0ms)
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:52:14.237712', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:52:14.236176' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:52:14.236245') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m


Started GET "/people/check_email_availability_and_validity?person%5Bemail%5D=chaitanya.saraf1985%40gmail.com" for 127.0.0.1 at 2013-03-20 20:22:19 +0530
  Processing by PeopleController#check_email_availability_and_validity as JSON
  Parameters: {"person"=>{"email"=>"chaitanya.saraf1985@gmail.com"}, "id"=>"check_email_availability_and_validity"}
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (0.9ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:52:19.242378', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:52:19.241764' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:52:19.241796') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[35mPK and serial sequence (6.8ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.2ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.3ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (2.3ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (1.5ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.0ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.3ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.0ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (6.4ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.2ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.3ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (1.5ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (0.9ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.0ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"emails"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"emails"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mEmail Load (1.6ms)[0m  [1mSELECT "emails".* FROM "emails" WHERE "emails"."address" = 'chaitanya.saraf1985@gmail.com' AND "emails"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mPerson Load (1.2ms)[0m  SELECT "people".* FROM "people" WHERE "people"."email" = 'chaitanya.saraf1985@gmail.com' LIMIT 1
  [1m[36mEmail Load (0.9ms)[0m  [1mSELECT "emails".* FROM "emails" WHERE "emails"."address" = 'chaitanya.saraf1985@gmail.com' LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "emails".* FROM "emails" WHERE "emails"."address" = 'chaitanya.saraf1985@gmail.com' LIMIT 1
Completed 200 OK in 1187ms (Views: 0.2ms | ActiveRecord: 68.7ms | Sphinx: 0.0ms)
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:52:24.245674', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:52:24.244129' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:52:24.244203') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.7ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:52:29.251346', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:52:29.249850' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:52:29.249923') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:52:34.257466', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:52:34.255956' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:52:34.256030') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m


Started POST "/en/admin/profiles" for 127.0.0.1 at 2013-03-20 20:22:37 +0530
  Processing by Admin::ProfilesController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"WJyxSApP1ZoDya7qcieJqUg5S0Zc4q5IQ7Pj2USt5FE=", "person"=>{"username"=>"yaml", "email"=>"chaitanya.saraf1985@gmail.com", "password"=>"[FILTERED]", "password2"=>"[FILTERED]", "is_admin"=>"0"}, "community"=>"1", "commit"=>"Add user", "locale"=>"en"}
  [1m[36mPK and serial sequence (6.6ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.3ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.6ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (1.8ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mSQL (2.6ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.4ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.2ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.2ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.8ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.4ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (6.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.2ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (3.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.4ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (1.0ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:52:39.262308', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:52:39.261618' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:52:39.261675') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mSQL (1.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (0.5ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (0.5ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>{"utf8"=>"✓", "authenticity_token"=>"WJyxSApP1ZoDya7qcieJqUg5S0Zc4q5IQ7Pj2USt5FE=", "person"=>{"username"=>"yaml", "email"=>"chaitanya.saraf1985@gmail.com", "password"=>"chaitanya", "password2"=>"chaitanya", "is_admin"=>"0"}, "community"=>"1", "commit"=>"Add user", "action"=>"create", "controller"=>"admin/profiles", "locale"=>"en"}
  [1m[35mCommunity Load (0.5ms)[0m  SELECT "communities".* FROM "communities"
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  BEGIN
  [1m[36mSQL (1.9ms)[0m  [1mSELECT 1 FROM "people" WHERE ("people"."email" = 'chaitanya.saraf1985@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  SELECT 1 FROM "people" WHERE ("people"."username" = 'yaml') LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT 1 FROM "people" WHERE ("people"."email" = 'chaitanya.saraf1985@gmail.com') LIMIT 1[0m
  [1m[35mPerson Load (1.5ms)[0m  SELECT "people".* FROM "people" WHERE "people"."confirmation_token" = 'ZzMaM224UwQs8vyp3dMP' LIMIT 1
  [1m[36mPK and serial sequence (3.4ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"people"'::regclass
[0m
  [1m[35mPK and custom sequence (3.8ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"people"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (3.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"people"'::regclass
[0m
  [1m[35mPK and custom sequence (4.2ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"people"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mAREL (2.5ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at", "is_admin", "locale", "preferences", "active_days_count", "last_page_load_date", "test_group_number", "active", "show_real_name_to_other_users", "given_name", "family_name", "phone_number", "description", "image_file_name", "image_content_type", "image_file_size", "image_updated_at", "username", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "sign_in_count", "current_sign_in_at", "last_sign_in_at", "current_sign_in_ip", "last_sign_in_ip", "password_salt", "confirmation_token", "confirmed_at", "confirmation_sent_at", "facebook_id", "authentication_token", "hobby_status", "id") VALUES ('2013-03-20 14:52:39.529345', '2013-03-20 14:52:39.529345', 'f', 'en', '---
email_about_new_messages: true
email_about_new_comments_to_own_listing: true
email_when_conversation_accepted: true
email_when_conversation_rejected: true
email_about_new_badges: true
email_about_new_received_testimonials: true
email_about_accept_reminders: true
email_about_testimonial_reminders: true
email_about_weekly_events: true
', 0, NULL, 1, 't', 't', NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 'yaml', 'chaitanya.saraf1985@gmail.com', '$2a$10$DsyxrpEY0YQde9k1TZlqZePfCntJ/7FlsnRxH4Vpc2HouYB8INzPi', NULL, NULL, NULL, 0, NULL, NULL, NULL, NULL, NULL, 'ZzMaM224UwQs8vyp3dMP', NULL, '2013-03-20 14:52:39.529224', NULL, NULL, 'Existing', 'dpI2ygKw0r4Oag3a6HdQnY')[0m
  [1m[35mPK and serial sequence (4.4ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"people"'::regclass
  [1m[36mPK and custom sequence (5.3ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"people"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Rendered devise/mailer/confirmation_instructions.haml (4.3ms)
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:52:44.265886', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:52:44.264321' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:52:44.264396') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m

Sent mail to chaitanya.saraf1985@gmail.com (5772ms)
Date: Wed, 20 Mar 2013 20:22:40 +0530
From: no-reply@realgoodfood.org
Reply-To: no-reply@realgoodfood.org
To: chaitanya.saraf1985@gmail.com
Message-ID: <5149cd387de5_54406939788290ca@chaitanya-laptop.mail>
Subject: Confirmation instructions
Mime-Version: 1.0
Content-Type: text/html;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

<!-- /bHjC6UljSr4Oaa3a6HdQnY/people/confirmation?confirmation_token=rG1svxqCsB1wiJy5XQCC -->
<!-- /-if @confirmation_token -->
<!-- /  yes confirmation token -->
<!-- /  //- link = confirmation_url(:confirmation_token => @confirmation_token, :host => @host) -->
<!-- /- else -->
<!-- /  - if $host -->
<!-- /    have $host -->
<!-- /    //- link = confirmation_url(@resource, :confirmation_token => @resource.confirmation_token, :host => $host) -->
<!-- /  - else -->
<!-- /- link = confirmation_url(@resource, :confirmation_token => @resource.confirmation_token) -->
<p>
  Hi yaml,
</p>
<p>
  You need to confirm your email address by clicking the following link:
  <a href="http://foodswap.herokuapp.com/dpI2ygKw0r4Oag3a6HdQnY/people/confirmation?confirmation_token=ZzMaM224UwQs8vyp3dMP">Confirm my account</a>
</p>
<p>
  Thanks,
  <br>
  The RealGoodFood Team
</p>
[paperclip] Saving attachments.
  [1m[35mSQL (31.3ms)[0m  COMMIT
  [1m[36mSQL (0.9ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.5ms)[0m  SELECT 1 FROM "people" WHERE ("people"."username" = 'yaml') AND ("people".id <> 'dpI2ygKw0r4Oag3a6HdQnY') LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mSELECT 1 FROM "people" WHERE ("people"."email" = 'chaitanya.saraf1985@gmail.com') AND ("people".id <> 'dpI2ygKw0r4Oag3a6HdQnY') LIMIT 1[0m
  [1m[35mAREL (1.1ms)[0m  UPDATE "people" SET "preferences" = '---
email_about_new_messages: true
email_about_new_comments_to_own_listing: true
email_when_conversation_accepted: true
email_when_conversation_rejected: true
email_about_new_badges: true
email_about_new_received_testimonials: true
email_about_accept_reminders: true
email_about_testimonial_reminders: true
email_about_weekly_events: true
' WHERE "people"."id" = 'dpI2ygKw0r4Oag3a6HdQnY'
[paperclip] Saving attachments.
  [1m[36mSQL (12.7ms)[0m  [1mCOMMIT[0m
WARNING: Can't mass-assign protected attributes: admin
  [1m[35mSQL (0.5ms)[0m  BEGIN
  [1m[36mCommunityMembership Load (1.1ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dpI2ygKw0r4Oag3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mPK and serial sequence (6.3ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"community_memberships"'::regclass
  [1m[36mSQL (1.5ms)[0m  [1mINSERT INTO "community_memberships" ("person_id", "community_id", "admin", "created_at", "updated_at", "consent", "invitation_id", "last_page_load_date") VALUES ('dpI2ygKw0r4Oag3a6HdQnY', 1, 'f', '2013-03-20 14:52:45.753318', '2013-03-20 14:52:45.753318', 'RGF1.0', NULL, '2013-03-20 14:52:45.000000') RETURNING "id"[0m
  [1m[35mCommunity Load (2.1ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mAREL (1.3ms)[0m  [1mUPDATE "communities" SET "members_count" = COALESCE("members_count", 0) + 1 WHERE "communities"."id" = 1[0m
  [1m[35mSQL (10.6ms)[0m  COMMIT
  [1m[36mSQL (2.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"delayed_jobs"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.6ms)[0m  BEGIN
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"delayed_jobs"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"delayed_jobs"'::regclass
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:CommunityJoinedJob
person_id: dpI2ygKw0r4Oag3a6HdQnY
community_id: 1
host: !binary |-
 bG9jYWxob3N0
', NULL, '2013-03-20 14:52:45.825743', NULL, NULL, NULL, '2013-03-20 14:52:45.825865', '2013-03-20 14:52:45.825865', NULL) RETURNING "id"[0m
  [1m[35mSQL (7.6ms)[0m  COMMIT
Redirected to http://localhost:3000/en/admin/profiles?type=profiles
Completed 302 Found in 7749ms


Started GET "/en/admin/profiles?type=profiles" for 127.0.0.1 at 2013-03-20 20:22:45 +0530
  Processing by Admin::ProfilesController#index as HTML
  Parameters: {"type"=>"profiles", "locale"=>"en"}
  [1m[36mPK and serial sequence (6.5ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.2ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (1.4ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mSQL (2.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.1ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (1.9ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (1.9ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.4ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.1ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (6.6ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.1ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (3.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (0.6ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.5ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (1.2ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (1.0ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mPerson Load (3.1ms)[0m  SELECT "people".* FROM "people"
Rendered admin/profiles/_profiles.html.haml (100.2ms)
Rendered layouts/_kissmetrics.haml (3.6ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.8ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.1ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (10.3ms)
Rendered communities/default/logo/logo.haml (2.4ms)
Rendered layouts/_no_javascript.haml (16.3ms)
Rendered layouts/_facebook_sdk.haml (2.5ms)
  [1m[36mSQL (2.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.0ms)[0m  [1mSELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) AND participations.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')[0m
Rendered layouts/_logged_in_messages_icon.haml (82.4ms)
  [1m[35mSQL (2.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.3ms)[0m  [1mSELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')[0m
Rendered layouts/_logged_in_notifications_icon.haml (13.4ms)
  [1m[35mSQL (2.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.2ms)[0m  [1mSELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY') AND (acceptance is null)[0m
Rendered layouts/_logged_in_swap_offers_icon.haml (20.1ms)
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"authentications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mAuthentication Load (1.5ms)[0m  [1mSELECT "authentications".* FROM "authentications" WHERE "authentications"."user_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
Rendered layouts/_logged_in.haml (143.2ms)
Rendered layouts/_notifications.haml (11.7ms)
  [1m[35mLocation Load (1.3ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1
Rendered layouts/_display_popup.haml (10.9ms)
Rendered layouts/application.haml (257.6ms)
Rendered admin/profiles/index.html.haml within layouts/admin (372.9ms)
Completed 200 OK in 1584ms (Views: 355.1ms | ActiveRecord: 280.8ms | Sphinx: 0.0ms)
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (29.9ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:52:49.271446', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:52:49.269976' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:52:49.270046') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mCommunity Load (1.3ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'localhost' LIMIT 1[0m
  [1m[35mPerson Load (1.5ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dpI2ygKw0r4Oag3a6HdQnY' LIMIT 1
  [1m[36mCommunity Load (1.4ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  BEGIN
  [1m[36mSQL (1.2ms)[0m  [1mINSERT INTO "event_feed_events" ("person1_id", "person2_id", "community_id", "eventable_id", "eventable_type", "category", "members_only", "created_at", "updated_at") VALUES ('dpI2ygKw0r4Oag3a6HdQnY', NULL, 1, NULL, NULL, 'join', 'f', '2013-03-20 14:52:49.327177', '2013-03-20 14:52:49.327177') RETURNING "id"[0m
  [1m[35mSQL (3.4ms)[0m  COMMIT
  [1m[36mListing Load (1.2ms)[0m  [1mSELECT "listings".* FROM "listings" WHERE ("listings".author_id = 'dpI2ygKw0r4Oag3a6HdQnY')[0m
  [1m[35mSQL (0.5ms)[0m  BEGIN
  [1m[36mAREL (1.1ms)[0m  [1mDELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 239[0m
  [1m[35mSQL (13.8ms)[0m  COMMIT
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.5ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:52:49.359997', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:52:49.358527' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:52:49.358612') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.6ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:52:49.367188', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:52:49.365556' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:52:49.365631') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (1.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:52:54.373424', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:52:54.371920' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:52:54.371993') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:52:59.378481', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:52:59.376515' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:52:59.376588') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:53:04.384306', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:53:04.382784' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:53:04.382857') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:53:09.390058', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:53:09.388514' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:53:09.388586') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:53:14.395789', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:53:14.394282' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:53:14.394354') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:53:19.401368', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:53:19.399860' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:53:19.399932') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:53:24.407215', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:53:24.405673' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:53:24.405745') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.5ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:53:29.413836', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:53:29.411323' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:53:29.411421') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *


Started POST "/en/admin/profiles/dpI2ygKw0r4Oag3a6HdQnY" for 127.0.0.1 at 2013-03-20 20:23:32 +0530
  Processing by Admin::ProfilesController#destroy as HTML
  Parameters: {"authenticity_token"=>"WJyxSApP1ZoDya7qcieJqUg5S0Zc4q5IQ7Pj2USt5FE=", "locale"=>"en", "id"=>"dpI2ygKw0r4Oag3a6HdQnY"}
  [1m[36mPK and serial sequence (6.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.1ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (1.3ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.0ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (1.9ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.1ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.0ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (6.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.2ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.6ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.2ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.4ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (1.0ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (1.0ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mPerson Load (1.4ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dpI2ygKw0r4Oag3a6HdQnY' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mBEGIN[0m
  [1m[35mAuthentication Load (0.9ms)[0m  SELECT "authentications".* FROM "authentications" WHERE ("authentications".user_id = 'dpI2ygKw0r4Oag3a6HdQnY')
  [1m[36mListing Load (1.1ms)[0m  [1mSELECT "listings".* FROM "listings" WHERE ("listings".author_id = 'dpI2ygKw0r4Oag3a6HdQnY')[0m
  [1m[35mEmail Load (1.2ms)[0m  SELECT "emails".* FROM "emails" WHERE ("emails".person_id = 'dpI2ygKw0r4Oag3a6HdQnY')
  [1m[36mLocation Load (1.0ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dpI2ygKw0r4Oag3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
  [1m[35mParticipation Load (1.0ms)[0m  SELECT "participations".* FROM "participations" WHERE ("participations".person_id = 'dpI2ygKw0r4Oag3a6HdQnY')
  [1m[36mConversation Load (1.3ms)[0m  [1mSELECT "conversations".* FROM "conversations" INNER JOIN "participations" ON "conversations".id = "participations".conversation_id WHERE (("participations".person_id = 'dpI2ygKw0r4Oag3a6HdQnY'))[0m
  [1m[35mTestimonial Load (1.5ms)[0m  SELECT "testimonials".* FROM "testimonials" WHERE ("testimonials".author_id = 'dpI2ygKw0r4Oag3a6HdQnY')
  [1m[36mTestimonial Load (1.4ms)[0m  [1mSELECT "testimonials".* FROM "testimonials" WHERE ("testimonials".receiver_id = 'dpI2ygKw0r4Oag3a6HdQnY') ORDER BY id DESC[0m
  [1m[35mBadge Load (1.3ms)[0m  SELECT "badges".* FROM "badges" WHERE ("badges".person_id = 'dpI2ygKw0r4Oag3a6HdQnY')
  [1m[36mNotification Load (1.0ms)[0m  [1mSELECT "notifications".* FROM "notifications" WHERE ("notifications".receiver_id = 'dpI2ygKw0r4Oag3a6HdQnY') ORDER BY id DESC[0m
  [1m[35mComment Load (1.4ms)[0m  SELECT "comments".* FROM "comments" WHERE ("comments".author_id = 'dpI2ygKw0r4Oag3a6HdQnY')
  [1m[36mCommunityMembership Load (1.0ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE ("community_memberships".person_id = 'dpI2ygKw0r4Oag3a6HdQnY')[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mAREL (0.8ms)[0m  [1mUPDATE "communities" SET "members_count" = COALESCE("members_count", 0) - 1 WHERE "communities"."id" = 1[0m
  [1m[35mAREL (0.5ms)[0m  DELETE FROM "community_memberships" WHERE "community_memberships"."id" = 12
  [1m[36mInvitation Load (0.9ms)[0m  [1mSELECT "invitations".* FROM "invitations" WHERE ("invitations".inviter_id = 'dpI2ygKw0r4Oag3a6HdQnY')[0m
  [1m[35mPollAnswer Load (0.9ms)[0m  SELECT "poll_answers".* FROM "poll_answers" WHERE ("poll_answers".answerer_id = 'dpI2ygKw0r4Oag3a6HdQnY')
  [1m[36mDevice Load (1.5ms)[0m  [1mSELECT "devices".* FROM "devices" WHERE ("devices".person_id = 'dpI2ygKw0r4Oag3a6HdQnY')[0m
  [1m[35mEventFeedEvent Load (1.6ms)[0m  SELECT "event_feed_events".* FROM "event_feed_events" WHERE ("event_feed_events".person1_id = 'dpI2ygKw0r4Oag3a6HdQnY')
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"event_feed_events"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"event_feed_events"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mAREL (1.0ms)[0m  [1mDELETE FROM "event_feed_events" WHERE "event_feed_events"."id" = 17[0m
  [1m[35mEventFeedEvent Load (1.0ms)[0m  SELECT "event_feed_events".* FROM "event_feed_events" WHERE ("event_feed_events".person2_id = 'dpI2ygKw0r4Oag3a6HdQnY')
[paperclip] Deleting attachments.
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listing_followers"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mListing Load (1.8ms)[0m  SELECT * FROM "listings" INNER JOIN "listing_followers" ON "listings".id = "listing_followers".listing_id WHERE ("listing_followers".person_id = 'dpI2ygKw0r4Oag3a6HdQnY' )
  [1m[36mAREL (0.8ms)[0m  [1mDELETE FROM "people" WHERE "people"."id" = 'dpI2ygKw0r4Oag3a6HdQnY'[0m
  [1m[35mSQL (27.3ms)[0m  COMMIT
Redirected to http://localhost:3000/en/admin/profiles?type=profiles
Completed 302 Found in 1352ms


Started GET "/en/admin/profiles?type=profiles" for 127.0.0.1 at 2013-03-20 20:23:34 +0530
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (1.0ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:53:34.419387', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:53:34.418753' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:53:34.418791') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  Processing by Admin::ProfilesController#index as HTML
  Parameters: {"type"=>"profiles", "locale"=>"en"}
  [1m[36mPK and serial sequence (6.4ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (5.1ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.6ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (2.1ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mSQL (2.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.3ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.6ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.3ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (7.3ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.2ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (6.3ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.0ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.4ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.8ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (1.1ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (1.0ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mPerson Load (2.0ms)[0m  SELECT "people".* FROM "people"
Rendered admin/profiles/_profiles.html.haml (100.7ms)
Rendered layouts/_kissmetrics.haml (3.2ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.9ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.3ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (11.7ms)
Rendered communities/default/logo/logo.haml (2.4ms)
Rendered layouts/_no_javascript.haml (16.9ms)
Rendered layouts/_facebook_sdk.haml (2.6ms)
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.7ms)[0m  [1mSELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) AND participations.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')[0m
Rendered layouts/_logged_in_messages_icon.haml (23.4ms)
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')[0m
Rendered layouts/_logged_in_notifications_icon.haml (10.9ms)
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY') AND (acceptance is null)[0m
Rendered layouts/_logged_in_swap_offers_icon.haml (12.0ms)
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"authentications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mAuthentication Load (1.3ms)[0m  [1mSELECT "authentications".* FROM "authentications" WHERE "authentications"."user_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
Rendered layouts/_logged_in.haml (67.0ms)
Rendered layouts/_notifications.haml (7.2ms)
  [1m[35mLocation Load (0.9ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1
Rendered layouts/_display_popup.haml (12.9ms)
Rendered layouts/application.haml (246.5ms)
Rendered admin/profiles/index.html.haml within layouts/admin (374.1ms)
Completed 200 OK in 1594ms (Views: 366.2ms | ActiveRecord: 217.4ms | Sphinx: 0.0ms)
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (1.1ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:53:39.422829', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:53:39.421278' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:53:39.421347') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:53:44.427350', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:53:44.425829' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:53:44.425904') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (1.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:53:49.432963', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:53:49.431455' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:53:49.431527') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *


Started GET "/en/admin/profiles/new?type=profiles" for 127.0.0.1 at 2013-03-20 20:23:52 +0530
  Processing by Admin::ProfilesController#new as HTML
  Parameters: {"type"=>"profiles", "locale"=>"en"}
  [1m[36mPK and serial sequence (6.3ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (6.0ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (3.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (1.6ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mSQL (3.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (5.3ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (3.9ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (1.6ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (5.0ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.0ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (6.1ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (3.8ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (0.8ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.4ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (1.0ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (1.0ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mCommunity Load (1.0ms)[0m  SELECT "communities".* FROM "communities"
Rendered layouts/_kissmetrics.haml (3.2ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.8ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (3.2ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (12.4ms)
Rendered communities/default/logo/logo.haml (2.3ms)
Rendered layouts/_no_javascript.haml (15.5ms)
Rendered layouts/_facebook_sdk.haml (2.5ms)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.7ms)[0m  [1mSELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) AND participations.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')[0m
Rendered layouts/_logged_in_messages_icon.haml (14.4ms)
  [1m[35mSQL (1.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.7ms)[0m  [1mSELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')[0m
Rendered layouts/_logged_in_notifications_icon.haml (11.6ms)
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.6ms)[0m  [1mSELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY') AND (acceptance is null)[0m
Rendered layouts/_logged_in_swap_offers_icon.haml (79.7ms)
  [1m[35mSQL (1.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"authentications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mAuthentication Load (0.4ms)[0m  [1mSELECT "authentications".* FROM "authentications" WHERE "authentications"."user_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
Rendered layouts/_logged_in.haml (126.7ms)
Rendered layouts/_notifications.haml (5.7ms)
  [1m[35mLocation Load (0.8ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1
Rendered layouts/_display_popup.haml (10.7ms)
Rendered layouts/application.haml (232.1ms)
Rendered admin/profiles/new.html.haml within layouts/admin (254.6ms)
Completed 200 OK in 1512ms (Views: 247.3ms | ActiveRecord: 76.2ms | Sphinx: 0.0ms)
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (1.0ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:53:54.436894', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:53:54.435904' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:53:54.435949') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:53:59.441080', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:53:59.439073' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:53:59.439140') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *


Started GET "/people/check_username_availability?person%5Busername%5D=chai" for 127.0.0.1 at 2013-03-20 20:24:00 +0530
  Processing by PeopleController#check_username_availability as JSON
  Parameters: {"person"=>{"username"=>"chai"}, "id"=>"check_username_availability"}
  [1m[36mPK and serial sequence (5.9ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (1.6ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (1.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (0.7ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mSQL (1.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.3ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.0ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (0.9ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (0.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.4ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (3.9ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (3.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.0ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (1.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.3ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.4ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (1.2ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (1.0ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mPerson Load (1.3ms)[0m  SELECT "people".* FROM "people" WHERE "people"."username" = 'chai' LIMIT 1
Completed 200 OK in 1216ms (Views: 0.2ms | ActiveRecord: 57.1ms | Sphinx: 0.0ms)
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:54:04.447250', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:54:04.445175' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:54:04.445250') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:54:09.453394', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:54:09.451438' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:54:09.451511') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *


Started GET "/people/check_email_availability_and_validity?person%5Bemail%5D=chaitanya.saraf1985%40gmail.com" for 127.0.0.1 at 2013-03-20 20:24:11 +0530
  Processing by PeopleController#check_email_availability_and_validity as JSON
  Parameters: {"person"=>{"email"=>"chaitanya.saraf1985@gmail.com"}, "id"=>"check_email_availability_and_validity"}
  [1m[36mPK and serial sequence (6.3ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.0ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (1.4ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.1ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.0ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (0.9ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (0.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.0ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (6.4ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.3ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.6ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.5ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (0.9ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (1.0ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"emails"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"emails"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mEmail Load (1.0ms)[0m  SELECT "emails".* FROM "emails" WHERE "emails"."address" = 'chaitanya.saraf1985@gmail.com' AND "emails"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mPerson Load (1.2ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."email" = 'chaitanya.saraf1985@gmail.com' LIMIT 1[0m
  [1m[35mEmail Load (0.8ms)[0m  SELECT "emails".* FROM "emails" WHERE "emails"."address" = 'chaitanya.saraf1985@gmail.com' LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "emails".* FROM "emails" WHERE "emails"."address" = 'chaitanya.saraf1985@gmail.com' LIMIT 1[0m
Completed 200 OK in 1232ms (Views: 0.5ms | ActiveRecord: 71.6ms | Sphinx: 0.0ms)
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (3.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:54:14.459519', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:54:14.457927' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:54:14.458000') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:54:19.466229', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:54:19.464637' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:54:19.464706') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *


Started POST "/en/admin/profiles" for 127.0.0.1 at 2013-03-20 20:24:22 +0530
  Processing by Admin::ProfilesController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"WJyxSApP1ZoDya7qcieJqUg5S0Zc4q5IQ7Pj2USt5FE=", "person"=>{"username"=>"chai", "email"=>"chaitanya.saraf1985@gmail.com", "password"=>"[FILTERED]", "password2"=>"[FILTERED]", "is_admin"=>"0"}, "community_admin"=>"1", "community"=>"1", "commit"=>"Add user", "locale"=>"en"}
  [1m[35mPK and serial sequence (6.5ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.9ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (3.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.7ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.5ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.1ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (1.9ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (0.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (3.3ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (1.5ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (2.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (1.7ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (1.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.6ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.4ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (1.0ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (1.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (0.9ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.0ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>{"utf8"=>"✓", "authenticity_token"=>"WJyxSApP1ZoDya7qcieJqUg5S0Zc4q5IQ7Pj2USt5FE=", "person"=>{"username"=>"chai", "email"=>"chaitanya.saraf1985@gmail.com", "password"=>"chaitanya", "password2"=>"chaitanya", "is_admin"=>"0"}, "community_admin"=>"1", "community"=>"1", "commit"=>"Add user", "action"=>"create", "controller"=>"admin/profiles", "locale"=>"en"}
  [1m[36mCommunity Load (1.1ms)[0m  [1mSELECT "communities".* FROM "communities"[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.3ms)[0m  SELECT 1 FROM "people" WHERE ("people"."email" = 'chaitanya.saraf1985@gmail.com') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mSELECT 1 FROM "people" WHERE ("people"."username" = 'chai') LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT 1 FROM "people" WHERE ("people"."email" = 'chaitanya.saraf1985@gmail.com') LIMIT 1
  [1m[36mPerson Load (1.4ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."confirmation_token" = 'VVuoUsTnRrPZQ1nCzfRj' LIMIT 1[0m
  [1m[35mPK and serial sequence (3.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"people"'::regclass
  [1m[36mPK and custom sequence (3.5ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"people"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (3.1ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"people"'::regclass
  [1m[36mPK and custom sequence (3.9ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"people"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mAREL (2.6ms)[0m  INSERT INTO "people" ("created_at", "updated_at", "is_admin", "locale", "preferences", "active_days_count", "last_page_load_date", "test_group_number", "active", "show_real_name_to_other_users", "given_name", "family_name", "phone_number", "description", "image_file_name", "image_content_type", "image_file_size", "image_updated_at", "username", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "sign_in_count", "current_sign_in_at", "last_sign_in_at", "current_sign_in_ip", "last_sign_in_ip", "password_salt", "confirmation_token", "confirmed_at", "confirmation_sent_at", "facebook_id", "authentication_token", "hobby_status", "id") VALUES ('2013-03-20 14:54:24.143396', '2013-03-20 14:54:24.143396', 'f', 'en', '---
email_about_new_messages: true
email_about_new_comments_to_own_listing: true
email_when_conversation_accepted: true
email_when_conversation_rejected: true
email_about_new_badges: true
email_about_new_received_testimonials: true
email_about_accept_reminders: true
email_about_testimonial_reminders: true
email_about_weekly_events: true
', 0, NULL, 1, 't', 't', NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 'chai', 'chaitanya.saraf1985@gmail.com', '$2a$10$6jRy8ZuPnf59tKvOoAbew.2VCTGng9E69F5y3P/Vyxk4/w32kSxQm', NULL, NULL, NULL, 0, NULL, NULL, NULL, NULL, NULL, 'VVuoUsTnRrPZQ1nCzfRj', NULL, '2013-03-20 14:54:24.143267', NULL, NULL, 'Existing', 'an6RVGKw4r4Oag3a6HdQnY')
  [1m[36mPK and serial sequence (3.5ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"people"'::regclass
[0m
  [1m[35mPK and custom sequence (3.6ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"people"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Rendered devise/mailer/confirmation_instructions.haml (4.0ms)
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:54:24.471880', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:54:24.470291' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:54:24.470366') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:54:29.477552', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:54:29.476039' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:54:29.476115') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *

Sent mail to chaitanya.saraf1985@gmail.com (5606ms)
Date: Wed, 20 Mar 2013 20:24:24 +0530
From: no-reply@realgoodfood.org
Reply-To: no-reply@realgoodfood.org
To: chaitanya.saraf1985@gmail.com
Message-ID: <5149cda034c8c_54406caed5a29122@chaitanya-laptop.mail>
Subject: Confirmation instructions
Mime-Version: 1.0
Content-Type: text/html;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

<!-- /bHjC6UljSr4Oaa3a6HdQnY/people/confirmation?confirmation_token=rG1svxqCsB1wiJy5XQCC -->
<!-- /-if @confirmation_token -->
<!-- /  yes confirmation token -->
<!-- /  //- link = confirmation_url(:confirmation_token => @confirmation_token, :host => @host) -->
<!-- /- else -->
<!-- /  - if $host -->
<!-- /    have $host -->
<!-- /    //- link = confirmation_url(@resource, :confirmation_token => @resource.confirmation_token, :host => $host) -->
<!-- /  - else -->
<!-- /- link = confirmation_url(@resource, :confirmation_token => @resource.confirmation_token) -->
<p>
  Hi chai,
</p>
<p>
  You need to confirm your email address by clicking the following link:
  <a href="http://foodswap.herokuapp.com/an6RVGKw4r4Oag3a6HdQnY/people/confirmation?confirmation_token=VVuoUsTnRrPZQ1nCzfRj">Confirm my account</a>
</p>
<p>
  Thanks,
  <br>
  The RealGoodFood Team
</p>
[paperclip] Saving attachments.
  [1m[36mSQL (18.6ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (0.6ms)[0m  BEGIN
  [1m[36mSQL (1.3ms)[0m  [1mSELECT 1 FROM "people" WHERE ("people"."username" = 'chai') AND ("people".id <> 'an6RVGKw4r4Oag3a6HdQnY') LIMIT 1[0m
  [1m[35mSQL (1.2ms)[0m  SELECT 1 FROM "people" WHERE ("people"."email" = 'chaitanya.saraf1985@gmail.com') AND ("people".id <> 'an6RVGKw4r4Oag3a6HdQnY') LIMIT 1
  [1m[36mAREL (1.4ms)[0m  [1mUPDATE "people" SET "preferences" = '---
email_about_new_messages: true
email_about_new_comments_to_own_listing: true
email_when_conversation_accepted: true
email_when_conversation_rejected: true
email_about_new_badges: true
email_about_new_received_testimonials: true
email_about_accept_reminders: true
email_about_testimonial_reminders: true
email_about_weekly_events: true
' WHERE "people"."id" = 'an6RVGKw4r4Oag3a6HdQnY'[0m
[paperclip] Saving attachments.
  [1m[35mSQL (8.5ms)[0m  COMMIT
WARNING: Can't mass-assign protected attributes: admin
  [1m[36mSQL (0.6ms)[0m  [1mBEGIN[0m
  [1m[35mCommunityMembership Load (1.1ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'an6RVGKw4r4Oag3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mPK and serial sequence (6.6ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"community_memberships"'::regclass
[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "community_memberships" ("person_id", "community_id", "admin", "created_at", "updated_at", "consent", "invitation_id", "last_page_load_date") VALUES ('an6RVGKw4r4Oag3a6HdQnY', 1, 'f', '2013-03-20 14:54:29.898068', '2013-03-20 14:54:29.898068', 'RGF1.0', NULL, '2013-03-20 14:54:29.000000') RETURNING "id"
  [1m[36mCommunity Load (0.9ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mAREL (1.3ms)[0m  UPDATE "communities" SET "members_count" = COALESCE("members_count", 0) + 1 WHERE "communities"."id" = 1
  [1m[36mSQL (10.8ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (0.6ms)[0m  BEGIN
  [1m[36mSQL (1.2ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:CommunityJoinedJob
person_id: an6RVGKw4r4Oag3a6HdQnY
community_id: 1
host: !binary |-
 bG9jYWxob3N0
', NULL, '2013-03-20 14:54:29.944064', NULL, NULL, NULL, '2013-03-20 14:54:29.944174', '2013-03-20 14:54:29.944174', NULL) RETURNING "id"[0m
  [1m[35mSQL (6.9ms)[0m  COMMIT
Redirected to http://localhost:3000/en/admin/profiles?type=profiles
Completed 302 Found in 7239ms


Started GET "/en/admin/profiles?type=profiles" for 127.0.0.1 at 2013-03-20 20:24:30 +0530
  Processing by Admin::ProfilesController#index as HTML
  Parameters: {"type"=>"profiles", "locale"=>"en"}
  [1m[36mPK and serial sequence (6.3ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.2ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (1.4ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mSQL (1.6ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.3ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.1ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.0ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.0ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (3.7ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (2.8ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.6ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.3ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.4ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (1.0ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (1.0ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mPerson Load (2.1ms)[0m  SELECT "people".* FROM "people"
Rendered admin/profiles/_profiles.html.haml (101.3ms)
Rendered layouts/_kissmetrics.haml (3.1ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.7ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.2ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (10.8ms)
Rendered communities/default/logo/logo.haml (2.7ms)
Rendered layouts/_no_javascript.haml (18.1ms)
Rendered layouts/_facebook_sdk.haml (2.9ms)
  [1m[36mSQL (1.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.8ms)[0m  [1mSELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) AND participations.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')[0m
Rendered layouts/_logged_in_messages_icon.haml (20.0ms)
  [1m[35mSQL (0.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.5ms)[0m  [1mSELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')[0m
Rendered layouts/_logged_in_notifications_icon.haml (9.0ms)
  [1m[35mSQL (1.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.5ms)[0m  [1mSELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY') AND (acceptance is null)[0m
Rendered layouts/_logged_in_swap_offers_icon.haml (10.5ms)
  [1m[35mSQL (0.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"authentications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mAuthentication Load (0.5ms)[0m  [1mSELECT "authentications".* FROM "authentications" WHERE "authentications"."user_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
Rendered layouts/_logged_in.haml (56.3ms)
Rendered layouts/_notifications.haml (5.0ms)
  [1m[35mLocation Load (1.1ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1
Rendered layouts/_display_popup.haml (10.3ms)
Rendered layouts/application.haml (234.4ms)
Rendered admin/profiles/index.html.haml within layouts/admin (350.6ms)
Completed 200 OK in 1538ms (Views: 343.3ms | ActiveRecord: 219.4ms | Sphinx: 0.0ms)
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (37.1ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:54:34.483212', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:54:34.481706' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:54:34.481775') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mCommunity Load (1.1ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'localhost' LIMIT 1
  [1m[36mPerson Load (0.7ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'an6RVGKw4r4Oag3a6HdQnY' LIMIT 1[0m
  [1m[35mCommunity Load (0.9ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "event_feed_events" ("person1_id", "person2_id", "community_id", "eventable_id", "eventable_type", "category", "members_only", "created_at", "updated_at") VALUES ('an6RVGKw4r4Oag3a6HdQnY', NULL, 1, NULL, NULL, 'join', 'f', '2013-03-20 14:54:34.654937', '2013-03-20 14:54:34.654937') RETURNING "id"
  [1m[36mSQL (5.8ms)[0m  [1mCOMMIT[0m
  [1m[35mListing Load (0.8ms)[0m  SELECT "listings".* FROM "listings" WHERE ("listings".author_id = 'an6RVGKw4r4Oag3a6HdQnY')
  [1m[36mSQL (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (0.7ms)[0m  DELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 240
  [1m[36mSQL (4.3ms)[0m  [1mCOMMIT[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (1.9ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:54:34.679167', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:54:34.677533' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:54:34.677620') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (1.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:54:34.683845', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:54:34.682983' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:54:34.683013') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.0ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:54:39.686785', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:54:39.686170' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:54:39.686204') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.5ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:54:44.692460', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:54:44.689897' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:54:44.690043') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:54:49.699358', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:54:49.697716' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:54:49.697797') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (1.9ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:54:54.705241', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:54:54.703643' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:54:54.703719') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.7ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:54:59.710708', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:54:59.709153' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:54:59.709227') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (0.9ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:55:04.716729', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:55:04.715238' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:55:04.715310') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (1.7ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:55:09.720672', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:55:09.719367' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:55:09.719439') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:55:14.725038', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:55:14.723504' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:55:14.723580') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (3.1ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:55:19.730722', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:55:19.729194' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:55:19.729264') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:55:24.737361', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:55:24.735822' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:55:24.735897') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:55:29.743225', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:55:29.741630' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:55:29.741723') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.0ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:55:34.748870', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:55:34.747319' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:55:34.747395') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:55:39.754797', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:55:39.752775' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:55:39.752850') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:55:44.761152', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:55:44.759259' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:55:44.759356') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:55:49.766971', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:55:49.765360' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:55:49.765437') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (1.7ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:55:54.772733', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:55:54.771141' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:55:54.771217') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (1.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:55:59.777731', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:55:59.776345' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:55:59.776421') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:56:04.782573', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:56:04.780822' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:56:04.780898') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:56:09.788788', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:56:09.787139' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:56:09.787216') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:56:14.794625', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:56:14.793032' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:56:14.793105') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.7ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:56:19.800291', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:56:19.798753' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:56:19.798829') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:56:24.806452', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:56:24.804837' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:56:24.804913') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:56:29.812339', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:56:29.810621' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:56:29.810698') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.1ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:56:34.817428', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:56:34.816808' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:56:34.816844') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:56:39.822457', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:56:39.820815' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:56:39.820890') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:56:44.827232', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:56:44.826588' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:56:44.826621') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:56:49.832233', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:56:49.830707' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:56:49.830782') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:56:54.838916', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:56:54.836470' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:56:54.836564') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:56:59.845303', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:56:59.843832' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:56:59.843904') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *


Started GET "/en/admin/profiles/an6RVGKw4r4Oag3a6HdQnY?type=profiles" for 127.0.0.1 at 2013-03-20 20:27:01 +0530
  Processing by Admin::ProfilesController#show as HTML
  Parameters: {"type"=>"profiles", "locale"=>"en", "id"=>"an6RVGKw4r4Oag3a6HdQnY"}
  [1m[36mPK and serial sequence (5.7ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.1ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (1.4ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.1ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.4ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.1ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (2.6ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.8ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.1ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (7.0ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.2ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (3.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.4ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.6ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (1.1ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (1.1ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mPerson Load (1.4ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'an6RVGKw4r4Oag3a6HdQnY' LIMIT 1
  [1m[36mLocation Load (1.1ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'an6RVGKw4r4Oag3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
  [1m[35mCommunity Load (1.7ms)[0m  SELECT "communities".* FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE (("community_memberships".person_id = 'an6RVGKw4r4Oag3a6HdQnY'))
Rendered layouts/_kissmetrics.haml (3.2ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.9ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.1ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (10.3ms)
Rendered communities/default/logo/logo.haml (2.8ms)
Rendered layouts/_no_javascript.haml (16.5ms)
Rendered layouts/_facebook_sdk.haml (2.4ms)
  [1m[36mSQL (1.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.7ms)[0m  [1mSELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) AND participations.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')[0m
Rendered layouts/_logged_in_messages_icon.haml (82.6ms)
  [1m[35mSQL (0.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.5ms)[0m  [1mSELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')[0m
Rendered layouts/_logged_in_notifications_icon.haml (11.4ms)
  [1m[35mSQL (1.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.4ms)[0m  [1mSELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY') AND (acceptance is null)[0m
Rendered layouts/_logged_in_swap_offers_icon.haml (9.4ms)
  [1m[35mSQL (0.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"authentications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mAuthentication Load (0.4ms)[0m  [1mSELECT "authentications".* FROM "authentications" WHERE "authentications"."user_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
Rendered layouts/_logged_in.haml (119.7ms)
Rendered layouts/_notifications.haml (4.8ms)
  [1m[35mLocation Load (1.1ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1
Rendered layouts/_display_popup.haml (10.0ms)
Rendered layouts/application.haml (223.0ms)
Rendered admin/profiles/show.html.haml within layouts/admin (251.3ms)
Completed 200 OK in 1542ms (Views: 269.9ms | ActiveRecord: 82.5ms | Sphinx: 0.0ms)
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:57:04.851040', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:57:04.849489' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:57:04.849566') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.8ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:57:09.856824', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:57:09.855238' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:57:09.855312') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.6ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:57:14.863355', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:57:14.861816' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:57:14.861892') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m


Started GET "/en/admin/profiles/an6RVGKw4r4Oag3a6HdQnY/edit?type=profiles" for 127.0.0.1 at 2013-03-20 20:27:16 +0530
  Processing by Admin::ProfilesController#edit as HTML
  Parameters: {"type"=>"profiles", "locale"=>"en", "id"=>"an6RVGKw4r4Oag3a6HdQnY"}
  [1m[36mPK and serial sequence (6.4ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.1ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (0.8ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mSQL (2.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.3ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (1.9ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (1.8ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (1.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.1ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.1ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (6.1ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.3ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (0.7ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (0.4ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (0.5ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mPerson Load (0.7ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'an6RVGKw4r4Oag3a6HdQnY' LIMIT 1
  [1m[36mLocation Load (0.6ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'an6RVGKw4r4Oag3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"locations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
WARNING: Can't mass-assign protected attributes: type
  [1m[36mLocation Load (1.3ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".community_id = 1) LIMIT 1[0m
Rendered layouts/_kissmetrics.haml (3.1ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.7ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.1ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (10.3ms)
Rendered communities/default/logo/logo.haml (2.4ms)
Rendered layouts/_no_javascript.haml (15.6ms)
Rendered layouts/_facebook_sdk.haml (2.4ms)
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.1ms)[0m  SELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) AND participations.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_messages_icon.haml (86.7ms)
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.0ms)[0m  SELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_notifications_icon.haml (10.9ms)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY') AND (acceptance is null)
Rendered layouts/_logged_in_swap_offers_icon.haml (10.9ms)
  [1m[36mSQL (1.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"authentications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mAuthentication Load (0.7ms)[0m  SELECT "authentications".* FROM "authentications" WHERE "authentications"."user_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
Rendered layouts/_logged_in.haml (129.1ms)
Rendered layouts/_notifications.haml (5.3ms)
  [1m[36mLocation Load (1.1ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
Rendered layouts/_display_popup.haml (9.9ms)
Rendered layouts/application.haml (229.6ms)
Rendered admin/profiles/edit.html.haml within layouts/admin (261.7ms)
Completed 200 OK in 1540ms (Views: 315.2ms | ActiveRecord: 77.1ms | Sphinx: 0.0ms)
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (1.0ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:57:19.868778', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:57:19.867790' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:57:19.867836') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:57:24.872693', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:57:24.871194' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:57:24.871264') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:57:29.878407', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:57:29.876896' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:57:29.876969') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:57:34.883991', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:57:34.882512' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:57:34.882584') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:57:39.889822', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:57:39.888246' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:57:39.888324') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:57:44.895428', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:57:44.893906' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:57:44.893984') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.1ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:57:49.900189', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:57:49.899561' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:57:49.899597') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:57:54.904961', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:57:54.903448' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:57:54.903522') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:57:59.910600', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:57:59.909083' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:57:59.909155') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:58:04.916318', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:58:04.914705' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:58:04.914782') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m


Started GET "/en/admin/profiles?type=profiles" for 127.0.0.1 at 2013-03-20 20:28:09 +0530
  Processing by Admin::ProfilesController#index as HTML
  Parameters: {"type"=>"profiles", "locale"=>"en"}
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (1.0ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:58:09.921205', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:58:09.920326' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:58:09.920368') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[35mPK and serial sequence (6.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.2ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.4ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (5.3ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (1.6ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (1.9ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (2.5ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.0ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (6.0ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.0ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.3ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (1.5ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (1.3ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.2ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mPerson Load (1.8ms)[0m  [1mSELECT "people".* FROM "people"[0m
Rendered admin/profiles/_profiles.html.haml (103.1ms)
Rendered layouts/_kissmetrics.haml (3.0ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.6ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.6ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (11.3ms)
Rendered communities/default/logo/logo.haml (2.7ms)
Rendered layouts/_no_javascript.haml (16.7ms)
Rendered layouts/_facebook_sdk.haml (2.5ms)
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.9ms)[0m  SELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) AND participations.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_messages_icon.haml (16.8ms)
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.2ms)[0m  SELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_notifications_icon.haml (12.1ms)
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.5ms)[0m  SELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY') AND (acceptance is null)
Rendered layouts/_logged_in_swap_offers_icon.haml (16.5ms)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"authentications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mAuthentication Load (1.0ms)[0m  SELECT "authentications".* FROM "authentications" WHERE "authentications"."user_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
Rendered layouts/_logged_in.haml (71.1ms)
Rendered layouts/_notifications.haml (5.8ms)
  [1m[36mLocation Load (1.1ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
Rendered layouts/_display_popup.haml (11.4ms)
Rendered layouts/application.haml (253.0ms)
Rendered admin/profiles/index.html.haml within layouts/admin (370.7ms)
Completed 200 OK in 1579ms (Views: 355.2ms | ActiveRecord: 81.0ms | Sphinx: 0.0ms)
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:58:14.924834', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:58:14.923316' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:58:14.923391') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:58:19.931106', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:58:19.929560' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:58:19.929658') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:58:24.936803', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:58:24.935285' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:58:24.935362') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.7ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:58:29.942485', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:58:29.940976' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:58:29.941048') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:58:34.948599', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:58:34.947099' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:58:34.947172') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:58:39.954178', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:58:39.952635' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:58:39.952708') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.7ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:58:44.959744', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:58:44.958280' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:58:44.958349') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m


Started GET "/en/admin/profiles/an6RVGKw4r4Oag3a6HdQnY?type=profiles" for 127.0.0.1 at 2013-03-20 20:28:48 +0530
  Processing by Admin::ProfilesController#show as HTML
  Parameters: {"type"=>"profiles", "locale"=>"en", "id"=>"an6RVGKw4r4Oag3a6HdQnY"}
  [1m[35mPK and serial sequence (2.6ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (2.8ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.4ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (1.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.1ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.1ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (1.7ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (1.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.4ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.1ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (6.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.2ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (0.9ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:58:49.965091', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:58:49.964275' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:58:49.964318') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[35mSQL (2.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.3ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (1.4ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (1.0ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.1ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mPerson Load (1.3ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'an6RVGKw4r4Oag3a6HdQnY' LIMIT 1[0m
  [1m[35mLocation Load (0.6ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'an6RVGKw4r4Oag3a6HdQnY' AND (location_type = 'person')) LIMIT 1
  [1m[36mCommunity Load (2.1ms)[0m  [1mSELECT "communities".* FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE (("community_memberships".person_id = 'an6RVGKw4r4Oag3a6HdQnY'))[0m
Rendered layouts/_kissmetrics.haml (3.2ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.8ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.3ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (11.3ms)
Rendered communities/default/logo/logo.haml (2.4ms)
Rendered layouts/_no_javascript.haml (15.4ms)
Rendered layouts/_facebook_sdk.haml (2.3ms)
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.8ms)[0m  SELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) AND participations.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_messages_icon.haml (89.9ms)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_notifications_icon.haml (11.2ms)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY') AND (acceptance is null)
Rendered layouts/_logged_in_swap_offers_icon.haml (11.5ms)
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"authentications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mAuthentication Load (0.7ms)[0m  SELECT "authentications".* FROM "authentications" WHERE "authentications"."user_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
Rendered layouts/_logged_in.haml (135.7ms)
Rendered layouts/_notifications.haml (6.5ms)
  [1m[36mLocation Load (0.6ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
Rendered layouts/_display_popup.haml (9.2ms)
Rendered layouts/application.haml (239.4ms)
Rendered admin/profiles/show.html.haml within layouts/admin (272.0ms)
Completed 200 OK in 1553ms (Views: 256.7ms | ActiveRecord: 79.6ms | Sphinx: 0.0ms)
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:58:54.969695', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:58:54.967154' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:58:54.967244') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:58:59.975916', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:58:59.974391' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:58:59.974468') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:59:04.981674', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:59:04.980113' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:59:04.980186') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:59:09.987505', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:59:09.985971' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:59:09.986049') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:59:14.993367', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:59:14.991827' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:59:14.991906') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:59:19.999564', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:59:19.997529' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:59:19.997603') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (1.0ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:59:25.004568', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:59:25.003661' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:59:25.003702') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (3.8ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:59:30.008956', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:59:30.006660' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:59:30.006751') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.8ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:59:35.016640', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:59:35.014980' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:59:35.015055') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.5ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:59:40.022975', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:59:40.021422' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:59:40.021496') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:59:45.029233', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:59:45.027514' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:59:45.027587') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m


Started GET "/en/admin/profiles?type=profiles" for 127.0.0.1 at 2013-03-20 20:29:47 +0530
  Processing by Admin::ProfilesController#index as HTML
  Parameters: {"type"=>"profiles", "locale"=>"en"}
  [1m[35mPK and serial sequence (6.3ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.0ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (0.9ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (1.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.1ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.1ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (1.9ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.0ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (6.5ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.3ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.3ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (1.4ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (1.0ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.0ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mPerson Load (1.8ms)[0m  [1mSELECT "people".* FROM "people"[0m
Rendered admin/profiles/_profiles.html.haml (103.2ms)
Rendered layouts/_kissmetrics.haml (3.1ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (2.1ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.1ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (10.5ms)
Rendered communities/default/logo/logo.haml (2.7ms)
Rendered layouts/_no_javascript.haml (17.0ms)
Rendered layouts/_facebook_sdk.haml (2.8ms)
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.7ms)[0m  SELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) AND participations.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_messages_icon.haml (15.9ms)
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_notifications_icon.haml (13.7ms)
  [1m[36mSQL (2.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY') AND (acceptance is null)
Rendered layouts/_logged_in_swap_offers_icon.haml (14.5ms)
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"authentications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mAuthentication Load (0.9ms)[0m  SELECT "authentications".* FROM "authentications" WHERE "authentications"."user_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
Rendered layouts/_logged_in.haml (63.9ms)
Rendered layouts/_notifications.haml (7.1ms)
  [1m[36mLocation Load (1.1ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
Rendered layouts/_display_popup.haml (10.6ms)
Rendered layouts/application.haml (244.8ms)
Rendered admin/profiles/index.html.haml within layouts/admin (362.2ms)
Completed 200 OK in 1575ms (Views: 348.9ms | ActiveRecord: 83.6ms | Sphinx: 0.0ms)
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (1.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:59:50.034286', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:59:50.033285' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:59:50.033329') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 14:59:55.038351', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 14:59:55.036797' AND (locked_at IS NULL OR locked_at < '2013-03-20 10:59:55.036875') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (1.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:00:00.044361', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:00:00.042834' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:00:00.042911') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:00:05.049047', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:00:05.047517' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:00:05.047589') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:00:10.054850', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:00:10.053311' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:00:10.053386') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:00:15.060470', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:00:15.059005' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:00:15.059076') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:00:20.066456', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:00:20.064708' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:00:20.064783') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:00:25.072690', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:00:25.071153' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:00:25.071227') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.6ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:00:30.078359', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:00:30.076813' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:00:30.076888') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (5.0ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:00:35.084358', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:00:35.082843' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:00:35.082916') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:00:40.092712', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:00:40.091189' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:00:40.091265') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:00:45.098690', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:00:45.097193' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:00:45.097264') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:00:50.104454', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:00:50.102919' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:00:50.102995') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:00:55.110164', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:00:55.108605' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:00:55.108680') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:01:00.115863', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:01:00.114346' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:01:00.114422') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:01:05.121508', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:01:05.120048' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:01:05.120118') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:01:10.127071', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:01:10.125584' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:01:10.125675') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:01:15.132697', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:01:15.131174' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:01:15.131248') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:01:20.138468', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:01:20.136841' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:01:20.136916') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:01:25.144096', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:01:25.142590' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:01:25.142664') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.5ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:01:30.150635', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:01:30.148268' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:01:30.148364') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:01:35.157272', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:01:35.155758' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:01:35.155833') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:01:40.163502', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:01:40.161433' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:01:40.161504') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.7ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:01:45.169207', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:01:45.167687' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:01:45.167764') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:01:50.175309', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:01:50.173793' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:01:50.173869') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *


Started POST "/en/admin/profiles/an6RVGKw4r4Oag3a6HdQnY" for 127.0.0.1 at 2013-03-20 20:31:54 +0530
  Processing by Admin::ProfilesController#destroy as HTML
  Parameters: {"authenticity_token"=>"WJyxSApP1ZoDya7qcieJqUg5S0Zc4q5IQ7Pj2USt5FE=", "locale"=>"en", "id"=>"an6RVGKw4r4Oag3a6HdQnY"}
  [1m[35mPK and serial sequence (6.5ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.6ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.9ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (2.4ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (1.7ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (1.9ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (1.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:01:55.180154', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:01:55.179338' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:01:55.179379') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[36mPK and serial sequence (6.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.2ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (6.4ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.6ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.4ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (1.7ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (1.1ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.1ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mPerson Load (1.4ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'an6RVGKw4r4Oag3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  BEGIN
  [1m[36mAuthentication Load (0.9ms)[0m  [1mSELECT "authentications".* FROM "authentications" WHERE ("authentications".user_id = 'an6RVGKw4r4Oag3a6HdQnY')[0m
  [1m[35mListing Load (1.1ms)[0m  SELECT "listings".* FROM "listings" WHERE ("listings".author_id = 'an6RVGKw4r4Oag3a6HdQnY')
  [1m[36mEmail Load (1.2ms)[0m  [1mSELECT "emails".* FROM "emails" WHERE ("emails".person_id = 'an6RVGKw4r4Oag3a6HdQnY')[0m
  [1m[35mLocation Load (1.1ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'an6RVGKw4r4Oag3a6HdQnY' AND (location_type = 'person')) LIMIT 1
  [1m[36mParticipation Load (1.1ms)[0m  [1mSELECT "participations".* FROM "participations" WHERE ("participations".person_id = 'an6RVGKw4r4Oag3a6HdQnY')[0m
  [1m[35mConversation Load (1.5ms)[0m  SELECT "conversations".* FROM "conversations" INNER JOIN "participations" ON "conversations".id = "participations".conversation_id WHERE (("participations".person_id = 'an6RVGKw4r4Oag3a6HdQnY'))
  [1m[36mTestimonial Load (1.1ms)[0m  [1mSELECT "testimonials".* FROM "testimonials" WHERE ("testimonials".author_id = 'an6RVGKw4r4Oag3a6HdQnY')[0m
  [1m[35mTestimonial Load (1.1ms)[0m  SELECT "testimonials".* FROM "testimonials" WHERE ("testimonials".receiver_id = 'an6RVGKw4r4Oag3a6HdQnY') ORDER BY id DESC
  [1m[36mBadge Load (1.1ms)[0m  [1mSELECT "badges".* FROM "badges" WHERE ("badges".person_id = 'an6RVGKw4r4Oag3a6HdQnY')[0m
  [1m[35mNotification Load (1.7ms)[0m  SELECT "notifications".* FROM "notifications" WHERE ("notifications".receiver_id = 'an6RVGKw4r4Oag3a6HdQnY') ORDER BY id DESC
  [1m[36mComment Load (1.1ms)[0m  [1mSELECT "comments".* FROM "comments" WHERE ("comments".author_id = 'an6RVGKw4r4Oag3a6HdQnY')[0m
  [1m[35mCommunityMembership Load (1.1ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE ("community_memberships".person_id = 'an6RVGKw4r4Oag3a6HdQnY')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mAREL (1.4ms)[0m  UPDATE "communities" SET "members_count" = COALESCE("members_count", 0) - 1 WHERE "communities"."id" = 1
  [1m[36mAREL (1.0ms)[0m  [1mDELETE FROM "community_memberships" WHERE "community_memberships"."id" = 13[0m
  [1m[35mInvitation Load (1.4ms)[0m  SELECT "invitations".* FROM "invitations" WHERE ("invitations".inviter_id = 'an6RVGKw4r4Oag3a6HdQnY')
  [1m[36mPollAnswer Load (1.2ms)[0m  [1mSELECT "poll_answers".* FROM "poll_answers" WHERE ("poll_answers".answerer_id = 'an6RVGKw4r4Oag3a6HdQnY')[0m
  [1m[35mDevice Load (1.2ms)[0m  SELECT "devices".* FROM "devices" WHERE ("devices".person_id = 'an6RVGKw4r4Oag3a6HdQnY')
  [1m[36mEventFeedEvent Load (1.8ms)[0m  [1mSELECT "event_feed_events".* FROM "event_feed_events" WHERE ("event_feed_events".person1_id = 'an6RVGKw4r4Oag3a6HdQnY')[0m
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"event_feed_events"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"event_feed_events"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mAREL (0.8ms)[0m  DELETE FROM "event_feed_events" WHERE "event_feed_events"."id" = 18
  [1m[36mEventFeedEvent Load (0.8ms)[0m  [1mSELECT "event_feed_events".* FROM "event_feed_events" WHERE ("event_feed_events".person2_id = 'an6RVGKw4r4Oag3a6HdQnY')[0m
[paperclip] Deleting attachments.
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listing_followers"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mListing Load (1.4ms)[0m  [1mSELECT * FROM "listings" INNER JOIN "listing_followers" ON "listings".id = "listing_followers".listing_id WHERE ("listing_followers".person_id = 'an6RVGKw4r4Oag3a6HdQnY' )[0m
  [1m[35mAREL (0.8ms)[0m  DELETE FROM "people" WHERE "people"."id" = 'an6RVGKw4r4Oag3a6HdQnY'
  [1m[36mSQL (29.1ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:3000/en/admin/profiles?type=profiles
Completed 302 Found in 1465ms


Started GET "/en/admin/profiles?type=profiles" for 127.0.0.1 at 2013-03-20 20:31:56 +0530
  Processing by Admin::ProfilesController#index as HTML
  Parameters: {"type"=>"profiles", "locale"=>"en"}
  [1m[35mPK and serial sequence (8.4ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (5.0ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.9ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (7.4ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (5.4ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.2ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.8ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (2.9ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (5.9ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (1.5ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (3.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (3.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (32.5ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (1.6ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (1.1ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.0ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mPerson Load (1.6ms)[0m  [1mSELECT "people".* FROM "people"[0m
Rendered admin/profiles/_profiles.html.haml (29.1ms)
Rendered layouts/_kissmetrics.haml (3.0ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.7ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.1ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (10.6ms)
Rendered communities/default/logo/logo.haml (2.8ms)
Rendered layouts/_no_javascript.haml (17.3ms)
Rendered layouts/_facebook_sdk.haml (2.5ms)
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.8ms)[0m  SELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) AND participations.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_messages_icon.haml (18.0ms)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.0ms)[0m  SELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_notifications_icon.haml (12.9ms)
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.8ms)[0m  SELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY') AND (acceptance is null)
Rendered layouts/_logged_in_swap_offers_icon.haml (13.7ms)
  [1m[36mSQL (1.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"authentications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mAuthentication Load (0.7ms)[0m  SELECT "authentications".* FROM "authentications" WHERE "authentications"."user_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
Rendered layouts/_logged_in.haml (70.6ms)
Rendered layouts/_notifications.haml (5.3ms)
  [1m[36mLocation Load (1.2ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
Rendered layouts/_display_popup.haml (10.6ms)
Rendered layouts/application.haml (258.1ms)
Rendered admin/profiles/index.html.haml within layouts/admin (302.9ms)
Completed 200 OK in 1618ms (Views: 364.1ms | ActiveRecord: 248.5ms | Sphinx: 0.0ms)
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:02:00.185731', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:02:00.184183' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:02:00.184257') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:02:05.191530', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:02:05.190019' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:02:05.190091') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:02:10.197176', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:02:10.195672' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:02:10.195745') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (1.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:02:15.202947', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:02:15.201386' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:02:15.201455') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:02:20.207643', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:02:20.206137' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:02:20.206224') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:02:25.213335', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:02:25.211828' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:02:25.211898') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:02:30.219061', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:02:30.217507' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:02:30.217582') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:02:35.224765', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:02:35.223264' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:02:35.223337') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:02:40.230506', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:02:40.228964' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:02:40.229037') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:02:45.236110', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:02:45.234605' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:02:45.234677') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m


Started GET "/en/admin/profiles/new?type=profiles" for 127.0.0.1 at 2013-03-20 20:32:46 +0530
  Processing by Admin::ProfilesController#new as HTML
  Parameters: {"type"=>"profiles", "locale"=>"en"}
  [1m[35mPK and serial sequence (6.3ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.1ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.4ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.1ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.0ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (5.8ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (3.2ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (2.6ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (1.9ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (0.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.4ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (1.4ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (1.0ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.0ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mCommunity Load (1.1ms)[0m  [1mSELECT "communities".* FROM "communities"[0m
Rendered layouts/_kissmetrics.haml (3.1ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.8ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.8ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (11.1ms)
Rendered communities/default/logo/logo.haml (2.5ms)
Rendered layouts/_no_javascript.haml (15.6ms)
Rendered layouts/_facebook_sdk.haml (2.4ms)
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.8ms)[0m  SELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) AND participations.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_messages_icon.haml (91.0ms)
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.0ms)[0m  SELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_notifications_icon.haml (13.1ms)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.0ms)[0m  SELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY') AND (acceptance is null)
Rendered layouts/_logged_in_swap_offers_icon.haml (13.9ms)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"authentications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mAuthentication Load (1.1ms)[0m  SELECT "authentications".* FROM "authentications" WHERE "authentications"."user_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
Rendered layouts/_logged_in.haml (139.6ms)
Rendered layouts/_notifications.haml (5.4ms)
  [1m[36mLocation Load (1.1ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
Rendered layouts/_display_popup.haml (10.5ms)
Rendered layouts/application.haml (242.3ms)
Rendered admin/profiles/new.html.haml within layouts/admin (264.0ms)
Completed 200 OK in 1529ms (Views: 250.1ms | ActiveRecord: 74.5ms | Sphinx: 0.0ms)
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (1.8ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:02:50.241753', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:02:50.240208' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:02:50.240282') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (1.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:02:55.246045', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:02:55.245162' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:02:55.245202') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (1.0ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:03:00.248941', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:03:00.248332' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:03:00.248369') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:03:05.252429', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:03:05.250826' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:03:05.250900') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:03:10.258199', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:03:10.256589' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:03:10.256664') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:03:15.263849', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:03:15.262341' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:03:15.262414') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:03:20.269565', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:03:20.268069' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:03:20.268144') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *


Started GET "/people/check_username_availability?person%5Busername%5D=chaitanya" for 127.0.0.1 at 2013-03-20 20:33:21 +0530
  Processing by PeopleController#check_username_availability as JSON
  Parameters: {"person"=>{"username"=>"chaitanya"}, "id"=>"check_username_availability"}
  [1m[35mPK and serial sequence (6.1ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.1ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.3ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (3.3ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.1ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (4.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (3.6ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (5.1ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.0ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.3ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (0.7ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.0ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mPerson Load (1.2ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."username" = 'chaitanya' LIMIT 1[0m
Completed 200 OK in 1249ms (Views: 0.2ms | ActiveRecord: 60.5ms | Sphinx: 0.0ms)
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:03:25.275446', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:03:25.273820' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:03:25.273893') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:03:30.281284', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:03:30.279773' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:03:30.279847') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *


Started GET "/people/check_email_availability_and_validity?person%5Bemail%5D=chaitanya.saraf1985%40gmail.com" for 127.0.0.1 at 2013-03-20 20:33:30 +0530
  Processing by PeopleController#check_email_availability_and_validity as JSON
  Parameters: {"person"=>{"email"=>"chaitanya.saraf1985@gmail.com"}, "id"=>"check_email_availability_and_validity"}
  [1m[35mPK and serial sequence (6.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.1ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.6ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.0ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (1.9ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.1ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (6.1ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.1ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.2ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (1.4ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (0.9ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.0ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"emails"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"emails"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mEmail Load (1.0ms)[0m  [1mSELECT "emails".* FROM "emails" WHERE "emails"."address" = 'chaitanya.saraf1985@gmail.com' AND "emails"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mPerson Load (1.2ms)[0m  SELECT "people".* FROM "people" WHERE "people"."email" = 'chaitanya.saraf1985@gmail.com' LIMIT 1
  [1m[36mEmail Load (0.9ms)[0m  [1mSELECT "emails".* FROM "emails" WHERE "emails"."address" = 'chaitanya.saraf1985@gmail.com' LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "emails".* FROM "emails" WHERE "emails"."address" = 'chaitanya.saraf1985@gmail.com' LIMIT 1
Completed 200 OK in 1199ms (Views: 0.3ms | ActiveRecord: 73.4ms | Sphinx: 0.0ms)
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:03:35.287372', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:03:35.285434' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:03:35.285508') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m


Started POST "/en/admin/profiles" for 127.0.0.1 at 2013-03-20 20:33:39 +0530
  Processing by Admin::ProfilesController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"WJyxSApP1ZoDya7qcieJqUg5S0Zc4q5IQ7Pj2USt5FE=", "person"=>{"username"=>"chaitanya", "email"=>"chaitanya.saraf1985@gmail.com", "password"=>"[FILTERED]", "password2"=>"[FILTERED]", "is_admin"=>"0"}, "community_admin"=>"1", "community"=>"1", "commit"=>"Add user", "locale"=>"en"}
  [1m[36mPK and serial sequence (6.7ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.2ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (1.3ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.3ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (1.9ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.1ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.0ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (6.5ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.2ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (1.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:03:40.292420', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:03:40.291546' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:03:40.291584') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mSQL (1.6ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (0.8ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.5ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (1.0ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (1.2ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>{"utf8"=>"✓", "authenticity_token"=>"WJyxSApP1ZoDya7qcieJqUg5S0Zc4q5IQ7Pj2USt5FE=", "person"=>{"username"=>"chaitanya", "email"=>"chaitanya.saraf1985@gmail.com", "password"=>"chaitanya", "password2"=>"chaitanya", "is_admin"=>"0"}, "community_admin"=>"1", "community"=>"1", "commit"=>"Add user", "action"=>"create", "controller"=>"admin/profiles", "locale"=>"en"}
  [1m[35mCommunity Load (1.0ms)[0m  SELECT "communities".* FROM "communities"
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  BEGIN
  [1m[36mSQL (1.0ms)[0m  [1mSELECT 1 FROM "people" WHERE ("people"."email" = 'chaitanya.saraf1985@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  SELECT 1 FROM "people" WHERE ("people"."username" = 'chaitanya') LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT 1 FROM "people" WHERE ("people"."email" = 'chaitanya.saraf1985@gmail.com') LIMIT 1[0m
  [1m[35mPerson Load (1.4ms)[0m  SELECT "people".* FROM "people" WHERE "people"."confirmation_token" = 'zFyKrYQd1xjodt99otVU' LIMIT 1
  [1m[36mPK and serial sequence (3.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"people"'::regclass
[0m
  [1m[35mPK and custom sequence (3.5ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"people"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (3.5ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"people"'::regclass
[0m
  [1m[35mPK and custom sequence (3.5ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"people"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mAREL (2.2ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at", "is_admin", "locale", "preferences", "active_days_count", "last_page_load_date", "test_group_number", "active", "show_real_name_to_other_users", "given_name", "family_name", "phone_number", "description", "image_file_name", "image_content_type", "image_file_size", "image_updated_at", "username", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "sign_in_count", "current_sign_in_at", "last_sign_in_at", "current_sign_in_ip", "last_sign_in_ip", "password_salt", "confirmation_token", "confirmed_at", "confirmation_sent_at", "facebook_id", "authentication_token", "hobby_status", "id") VALUES ('2013-03-20 15:03:40.950754', '2013-03-20 15:03:40.950754', 'f', 'en', '---
email_about_new_messages: true
email_about_new_comments_to_own_listing: true
email_when_conversation_accepted: true
email_when_conversation_rejected: true
email_about_new_badges: true
email_about_new_received_testimonials: true
email_about_accept_reminders: true
email_about_testimonial_reminders: true
email_about_weekly_events: true
', 0, NULL, 1, 't', 't', NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 'chaitanya', 'chaitanya.saraf1985@gmail.com', '$2a$10$W/itfeJZUJ6lMHvHpSEOCuUFIujSc5Y10J/cd2GD0gBO2EuLMFL9S', NULL, NULL, NULL, 0, NULL, NULL, NULL, NULL, NULL, 'zFyKrYQd1xjodt99otVU', NULL, '2013-03-20 15:03:40.950638', NULL, NULL, 'Existing', 'bz2tjmKw8r4Oag3a6HdQnY')[0m
  [1m[35mPK and serial sequence (3.1ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"people"'::regclass
  [1m[36mPK and custom sequence (3.6ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"people"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Rendered devise/mailer/confirmation_instructions.haml (4.0ms)
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:03:45.296379', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:03:45.294847' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:03:45.294920') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m

Sent mail to chaitanya.saraf1985@gmail.com (6268ms)
Date: Wed, 20 Mar 2013 20:33:41 +0530
From: no-reply@realgoodfood.org
Reply-To: no-reply@realgoodfood.org
To: chaitanya.saraf1985@gmail.com
Message-ID: <5149cfcd66da_5440817d006292c1@chaitanya-laptop.mail>
Subject: Confirmation instructions
Mime-Version: 1.0
Content-Type: text/html;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

<!-- /bHjC6UljSr4Oaa3a6HdQnY/people/confirmation?confirmation_token=rG1svxqCsB1wiJy5XQCC -->
<!-- /-if @confirmation_token -->
<!-- /  yes confirmation token -->
<!-- /  //- link = confirmation_url(:confirmation_token => @confirmation_token, :host => @host) -->
<!-- /- else -->
<!-- /  - if $host -->
<!-- /    have $host -->
<!-- /    //- link = confirmation_url(@resource, :confirmation_token => @resource.confirmation_token, :host => $host) -->
<!-- /  - else -->
<!-- /- link = confirmation_url(@resource, :confirmation_token => @resource.confirmation_token) -->
<p>
  Hi chaitanya,
</p>
<p>
  You need to confirm your email address by clicking the following link:
  <a href="http://foodswap.herokuapp.com/bz2tjmKw8r4Oag3a6HdQnY/people/confirmation?confirmation_token=zFyKrYQd1xjodt99otVU">Confirm my account</a>
</p>
<p>
  Thanks,
  <br>
  The RealGoodFood Team
</p>
[paperclip] Saving attachments.
  [1m[35mSQL (36.3ms)[0m  COMMIT
  [1m[36mSQL (0.7ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.5ms)[0m  SELECT 1 FROM "people" WHERE ("people"."username" = 'chaitanya') AND ("people".id <> 'bz2tjmKw8r4Oag3a6HdQnY') LIMIT 1
  [1m[36mSQL (1.5ms)[0m  [1mSELECT 1 FROM "people" WHERE ("people"."email" = 'chaitanya.saraf1985@gmail.com') AND ("people".id <> 'bz2tjmKw8r4Oag3a6HdQnY') LIMIT 1[0m
  [1m[35mAREL (1.2ms)[0m  UPDATE "people" SET "preferences" = '---
email_about_new_messages: true
email_about_new_comments_to_own_listing: true
email_when_conversation_accepted: true
email_when_conversation_rejected: true
email_about_new_badges: true
email_about_new_received_testimonials: true
email_about_accept_reminders: true
email_about_testimonial_reminders: true
email_about_weekly_events: true
' WHERE "people"."id" = 'bz2tjmKw8r4Oag3a6HdQnY'
[paperclip] Saving attachments.
  [1m[36mSQL (9.8ms)[0m  [1mCOMMIT[0m
WARNING: Can't mass-assign protected attributes: admin
  [1m[35mSQL (0.5ms)[0m  BEGIN
  [1m[36mCommunityMembership Load (1.1ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'bz2tjmKw8r4Oag3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mPK and serial sequence (8.1ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"community_memberships"'::regclass
  [1m[36mSQL (1.3ms)[0m  [1mINSERT INTO "community_memberships" ("person_id", "community_id", "admin", "created_at", "updated_at", "consent", "invitation_id", "last_page_load_date") VALUES ('bz2tjmKw8r4Oag3a6HdQnY', 1, 'f', '2013-03-20 15:03:47.387986', '2013-03-20 15:03:47.387986', 'RGF1.0', NULL, '2013-03-20 15:03:47.000000') RETURNING "id"[0m
  [1m[35mCommunity Load (1.5ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mAREL (1.4ms)[0m  [1mUPDATE "communities" SET "members_count" = COALESCE("members_count", 0) + 1 WHERE "communities"."id" = 1[0m
  [1m[35mSQL (4.7ms)[0m  COMMIT
  [1m[36mSQL (0.7ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.2ms)[0m  INSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:CommunityJoinedJob
person_id: bz2tjmKw8r4Oag3a6HdQnY
community_id: 1
host: !binary |-
 bG9jYWxob3N0
', NULL, '2013-03-20 15:03:47.436711', NULL, NULL, NULL, '2013-03-20 15:03:47.436997', '2013-03-20 15:03:47.436997', NULL) RETURNING "id"
  [1m[36mSQL (3.7ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:3000/en/admin/profiles?type=profiles
Completed 302 Found in 7914ms


Started GET "/en/admin/profiles?type=profiles" for 127.0.0.1 at 2013-03-20 20:33:47 +0530
  Processing by Admin::ProfilesController#index as HTML
  Parameters: {"type"=>"profiles", "locale"=>"en"}
  [1m[35mPK and serial sequence (4.7ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (2.5ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.4ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.3ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.1ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (1.7ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (5.9ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (3.3ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (2.7ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.4ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.4ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (0.5ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (0.5ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mPerson Load (0.7ms)[0m  [1mSELECT "people".* FROM "people"[0m
Rendered admin/profiles/_profiles.html.haml (115.4ms)
Rendered layouts/_kissmetrics.haml (3.0ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.9ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (87.2ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (95.9ms)
Rendered communities/default/logo/logo.haml (2.7ms)
Rendered layouts/_no_javascript.haml (17.5ms)
Rendered layouts/_facebook_sdk.haml (2.7ms)
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.0ms)[0m  SELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) AND participations.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_messages_icon.haml (17.2ms)
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.0ms)[0m  SELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_notifications_icon.haml (12.8ms)
  [1m[36mSQL (2.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.7ms)[0m  SELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY') AND (acceptance is null)
Rendered layouts/_logged_in_swap_offers_icon.haml (13.8ms)
  [1m[36mSQL (1.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"authentications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mAuthentication Load (1.5ms)[0m  SELECT "authentications".* FROM "authentications" WHERE "authentications"."user_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
Rendered layouts/_logged_in.haml (69.5ms)
Rendered layouts/_notifications.haml (5.3ms)
  [1m[36mLocation Load (1.2ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
Rendered layouts/_display_popup.haml (11.3ms)
Rendered layouts/application.haml (260.9ms)
Rendered admin/profiles/index.html.haml within layouts/admin (391.5ms)
Completed 200 OK in 1657ms (Views: 377.8ms | ActiveRecord: 241.0ms | Sphinx: 0.0ms)
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (31.5ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:03:50.301274', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:03:50.300668' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:03:50.300704') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mCommunity Load (0.9ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'localhost' LIMIT 1[0m
  [1m[35mPerson Load (0.9ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bz2tjmKw8r4Oag3a6HdQnY' LIMIT 1
  [1m[36mCommunity Load (0.8ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "event_feed_events" ("person1_id", "person2_id", "community_id", "eventable_id", "eventable_type", "category", "members_only", "created_at", "updated_at") VALUES ('bz2tjmKw8r4Oag3a6HdQnY', NULL, 1, NULL, NULL, 'join', 'f', '2013-03-20 15:03:50.345866', '2013-03-20 15:03:50.345866') RETURNING "id"[0m
  [1m[35mSQL (7.4ms)[0m  COMMIT
  [1m[36mListing Load (0.7ms)[0m  [1mSELECT "listings".* FROM "listings" WHERE ("listings".author_id = 'bz2tjmKw8r4Oag3a6HdQnY')[0m
  [1m[35mSQL (0.2ms)[0m  BEGIN
  [1m[36mAREL (0.4ms)[0m  [1mDELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 241[0m
  [1m[35mSQL (7.7ms)[0m  COMMIT
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (0.9ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:03:50.367298', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:03:50.366729' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:03:50.366762') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (0.7ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:03:50.369323', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:03:50.368826' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:03:50.368848') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:03:55.372471', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:03:55.370891' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:03:55.370965') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:04:00.378327', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:04:00.376727' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:04:00.376801') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:04:05.384074', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:04:05.382519' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:04:05.382593') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:04:10.389819', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:04:10.388240' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:04:10.388313') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:04:15.395694', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:04:15.394056' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:04:15.394128') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:04:20.401464', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:04:20.399871' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:04:20.399946') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:04:25.407183', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:04:25.405673' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:04:25.405747') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:04:30.412973', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:04:30.411352' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:04:30.411428') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:04:35.418767', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:04:35.417237' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:04:35.417313') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:04:40.424221', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:04:40.423061' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:04:40.423135') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (1.1ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:04:45.429846', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:04:45.428314' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:04:45.428377') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:04:50.434035', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:04:50.432491' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:04:50.432566') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:04:55.439638', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:04:55.438131' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:04:55.438202') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:05:00.445316', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:05:00.443807' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:05:00.443878') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:05:05.450990', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:05:05.449471' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:05:05.449542') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:05:10.456721', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:05:10.455126' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:05:10.455197') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:05:15.462484', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:05:15.460931' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:05:15.461003') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:05:20.468097', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:05:20.466603' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:05:20.466672') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:05:25.473718', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:05:25.472165' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:05:25.472240') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:05:30.479366', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:05:30.477861' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:05:30.477933') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:05:35.485038', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:05:35.483476' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:05:35.483558') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (0.9ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:05:40.489602', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:05:40.489001' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:05:40.489036') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:05:45.492921', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:05:45.491418' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:05:45.491489') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (0.9ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:05:50.497603', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:05:50.497006' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:05:50.497041') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:05:55.500894', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:05:55.499379' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:05:55.499453') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m


Started POST "/en/admin/profiles/bz2tjmKw8r4Oag3a6HdQnY" for 127.0.0.1 at 2013-03-20 20:35:59 +0530
  Processing by Admin::ProfilesController#destroy as HTML
  Parameters: {"authenticity_token"=>"WJyxSApP1ZoDya7qcieJqUg5S0Zc4q5IQ7Pj2USt5FE=", "locale"=>"en", "id"=>"bz2tjmKw8r4Oag3a6HdQnY"}
  [1m[35mPK and serial sequence (6.8ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.0ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.3ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.4ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.2ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (1.9ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (1.0ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:06:00.505810', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:06:00.504946' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:06:00.504990') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mPK and serial sequence (6.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.3ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (6.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.5ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.3ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (1.4ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (1.2ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (0.5ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mPerson Load (0.6ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bz2tjmKw8r4Oag3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  BEGIN
  [1m[36mAuthentication Load (0.4ms)[0m  [1mSELECT "authentications".* FROM "authentications" WHERE ("authentications".user_id = 'bz2tjmKw8r4Oag3a6HdQnY')[0m
  [1m[35mListing Load (0.5ms)[0m  SELECT "listings".* FROM "listings" WHERE ("listings".author_id = 'bz2tjmKw8r4Oag3a6HdQnY')
  [1m[36mEmail Load (0.4ms)[0m  [1mSELECT "emails".* FROM "emails" WHERE ("emails".person_id = 'bz2tjmKw8r4Oag3a6HdQnY')[0m
  [1m[35mLocation Load (0.4ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'bz2tjmKw8r4Oag3a6HdQnY' AND (location_type = 'person')) LIMIT 1
  [1m[36mParticipation Load (0.5ms)[0m  [1mSELECT "participations".* FROM "participations" WHERE ("participations".person_id = 'bz2tjmKw8r4Oag3a6HdQnY')[0m
  [1m[35mConversation Load (0.7ms)[0m  SELECT "conversations".* FROM "conversations" INNER JOIN "participations" ON "conversations".id = "participations".conversation_id WHERE (("participations".person_id = 'bz2tjmKw8r4Oag3a6HdQnY'))
  [1m[36mTestimonial Load (0.5ms)[0m  [1mSELECT "testimonials".* FROM "testimonials" WHERE ("testimonials".author_id = 'bz2tjmKw8r4Oag3a6HdQnY')[0m
  [1m[35mTestimonial Load (0.4ms)[0m  SELECT "testimonials".* FROM "testimonials" WHERE ("testimonials".receiver_id = 'bz2tjmKw8r4Oag3a6HdQnY') ORDER BY id DESC
  [1m[36mBadge Load (0.5ms)[0m  [1mSELECT "badges".* FROM "badges" WHERE ("badges".person_id = 'bz2tjmKw8r4Oag3a6HdQnY')[0m
  [1m[35mNotification Load (0.6ms)[0m  SELECT "notifications".* FROM "notifications" WHERE ("notifications".receiver_id = 'bz2tjmKw8r4Oag3a6HdQnY') ORDER BY id DESC
  [1m[36mComment Load (0.9ms)[0m  [1mSELECT "comments".* FROM "comments" WHERE ("comments".author_id = 'bz2tjmKw8r4Oag3a6HdQnY')[0m
  [1m[35mCommunityMembership Load (0.9ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE ("community_memberships".person_id = 'bz2tjmKw8r4Oag3a6HdQnY')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mAREL (1.1ms)[0m  UPDATE "communities" SET "members_count" = COALESCE("members_count", 0) - 1 WHERE "communities"."id" = 1
  [1m[36mAREL (0.8ms)[0m  [1mDELETE FROM "community_memberships" WHERE "community_memberships"."id" = 14[0m
  [1m[35mInvitation Load (1.1ms)[0m  SELECT "invitations".* FROM "invitations" WHERE ("invitations".inviter_id = 'bz2tjmKw8r4Oag3a6HdQnY')
  [1m[36mPollAnswer Load (0.9ms)[0m  [1mSELECT "poll_answers".* FROM "poll_answers" WHERE ("poll_answers".answerer_id = 'bz2tjmKw8r4Oag3a6HdQnY')[0m
  [1m[35mDevice Load (1.0ms)[0m  SELECT "devices".* FROM "devices" WHERE ("devices".person_id = 'bz2tjmKw8r4Oag3a6HdQnY')
  [1m[36mEventFeedEvent Load (0.8ms)[0m  [1mSELECT "event_feed_events".* FROM "event_feed_events" WHERE ("event_feed_events".person1_id = 'bz2tjmKw8r4Oag3a6HdQnY')[0m
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"event_feed_events"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"event_feed_events"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mAREL (0.8ms)[0m  DELETE FROM "event_feed_events" WHERE "event_feed_events"."id" = 19
  [1m[36mEventFeedEvent Load (0.9ms)[0m  [1mSELECT "event_feed_events".* FROM "event_feed_events" WHERE ("event_feed_events".person2_id = 'bz2tjmKw8r4Oag3a6HdQnY')[0m
[paperclip] Deleting attachments.
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listing_followers"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mListing Load (1.4ms)[0m  [1mSELECT * FROM "listings" INNER JOIN "listing_followers" ON "listings".id = "listing_followers".listing_id WHERE ("listing_followers".person_id = 'bz2tjmKw8r4Oag3a6HdQnY' )[0m
  [1m[35mAREL (0.7ms)[0m  DELETE FROM "people" WHERE "people"."id" = 'bz2tjmKw8r4Oag3a6HdQnY'
  [1m[36mSQL (31.0ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:3000/en/admin/profiles?type=profiles
Completed 302 Found in 1544ms


Started GET "/en/admin/profiles?type=profiles" for 127.0.0.1 at 2013-03-20 20:36:01 +0530
  Processing by Admin::ProfilesController#index as HTML
  Parameters: {"type"=>"profiles", "locale"=>"en"}
  [1m[35mPK and serial sequence (5.4ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (1.6ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (1.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (0.7ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (1.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (7.4ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.2ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.1ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.6ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.9ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (6.3ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.7ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (3.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (0.6ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (0.6ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (0.5ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mPerson Load (0.7ms)[0m  [1mSELECT "people".* FROM "people"[0m
Rendered admin/profiles/_profiles.html.haml (28.4ms)
Rendered layouts/_kissmetrics.haml (3.1ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.8ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.5ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (93.0ms)
Rendered communities/default/logo/logo.haml (2.6ms)
Rendered layouts/_no_javascript.haml (17.1ms)
Rendered layouts/_facebook_sdk.haml (2.6ms)
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.7ms)[0m  SELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) AND participations.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_messages_icon.haml (18.2ms)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_notifications_icon.haml (13.1ms)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (3.2ms)[0m  SELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY') AND (acceptance is null)
Rendered layouts/_logged_in_swap_offers_icon.haml (13.4ms)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"authentications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mAuthentication Load (0.8ms)[0m  SELECT "authentications".* FROM "authentications" WHERE "authentications"."user_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
Rendered layouts/_logged_in.haml (69.0ms)
Rendered layouts/_notifications.haml (5.0ms)
  [1m[36mLocation Load (0.6ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
Rendered layouts/_display_popup.haml (9.8ms)
Rendered layouts/application.haml (255.7ms)
Rendered admin/profiles/index.html.haml within layouts/admin (299.1ms)
Completed 200 OK in 1605ms (Views: 284.3ms | ActiveRecord: 200.9ms | Sphinx: 0.0ms)
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:06:05.509405', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:06:05.507936' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:06:05.507988') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m


Started GET "/en/admin/profiles/new?type=profiles" for 127.0.0.1 at 2013-03-20 20:36:10 +0530
  Processing by Admin::ProfilesController#new as HTML
  Parameters: {"type"=>"profiles", "locale"=>"en"}
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (0.9ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:06:10.514019', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:06:10.513411' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:06:10.513446') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[35mPK and serial sequence (5.9ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.0ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (0.6ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (1.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.1ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.0ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (5.7ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (1.5ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (2.4ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (2.6ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (1.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.4ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (1.5ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (1.0ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.0ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mCommunity Load (1.7ms)[0m  [1mSELECT "communities".* FROM "communities"[0m
Rendered layouts/_kissmetrics.haml (3.1ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.9ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.2ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (11.0ms)
Rendered communities/default/logo/logo.haml (2.3ms)
Rendered layouts/_no_javascript.haml (15.3ms)
Rendered layouts/_facebook_sdk.haml (84.5ms)
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.9ms)[0m  SELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) AND participations.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_messages_icon.haml (16.5ms)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_notifications_icon.haml (14.4ms)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY') AND (acceptance is null)
Rendered layouts/_logged_in_swap_offers_icon.haml (14.7ms)
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"authentications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mAuthentication Load (1.0ms)[0m  SELECT "authentications".* FROM "authentications" WHERE "authentications"."user_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
Rendered layouts/_logged_in.haml (67.3ms)
Rendered layouts/_notifications.haml (7.6ms)
  [1m[36mLocation Load (0.6ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
Rendered layouts/_display_popup.haml (13.4ms)
Rendered layouts/application.haml (266.9ms)
Rendered admin/profiles/new.html.haml within layouts/admin (289.2ms)
Completed 200 OK in 1603ms (Views: 276.7ms | ActiveRecord: 72.7ms | Sphinx: 0.0ms)
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:06:15.517363', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:06:15.515833' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:06:15.515906') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m


Started GET "/people/check_username_availability?person%5Busername%5D=chaitanya" for 127.0.0.1 at 2013-03-20 20:36:17 +0530
  Processing by PeopleController#check_username_availability as JSON
  Parameters: {"person"=>{"username"=>"chaitanya"}, "id"=>"check_username_availability"}
  [1m[35mPK and serial sequence (6.6ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.6ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.5ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.5ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (1.6ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.0ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (2.4ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (1.6ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (3.1ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (2.9ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (2.1ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (1.5ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (1.0ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (0.5ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mPerson Load (0.7ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."username" = 'chaitanya' LIMIT 1[0m
Completed 200 OK in 1288ms (Views: 0.2ms | ActiveRecord: 55.8ms | Sphinx: 0.0ms)
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:06:20.523084', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:06:20.521544' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:06:20.521616') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:06:25.528850', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:06:25.527346' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:06:25.527419') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m


Started GET "/people/check_email_availability_and_validity?person%5Bemail%5D=chaitanya.saraf1985%40gmail.com" for 127.0.0.1 at 2013-03-20 20:36:25 +0530
  Processing by PeopleController#check_email_availability_and_validity as JSON
  Parameters: {"person"=>{"email"=>"chaitanya.saraf1985@gmail.com"}, "id"=>"check_email_availability_and_validity"}
  [1m[35mPK and serial sequence (6.3ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.3ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.5ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (3.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.7ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (1.9ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (2.6ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.0ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (2.5ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (1.5ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.2ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (1.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (0.5ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (0.5ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mSQL (0.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"emails"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"emails"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mEmail Load (0.5ms)[0m  [1mSELECT "emails".* FROM "emails" WHERE "emails"."address" = 'chaitanya.saraf1985@gmail.com' AND "emails"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mPerson Load (0.5ms)[0m  SELECT "people".* FROM "people" WHERE "people"."email" = 'chaitanya.saraf1985@gmail.com' LIMIT 1
  [1m[36mEmail Load (0.4ms)[0m  [1mSELECT "emails".* FROM "emails" WHERE "emails"."address" = 'chaitanya.saraf1985@gmail.com' LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "emails".* FROM "emails" WHERE "emails"."address" = 'chaitanya.saraf1985@gmail.com' LIMIT 1
Completed 200 OK in 1256ms (Views: 0.2ms | ActiveRecord: 58.3ms | Sphinx: 0.0ms)
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:06:30.534607', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:06:30.533034' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:06:30.533106') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *


Started POST "/en/admin/profiles" for 127.0.0.1 at 2013-03-20 20:36:33 +0530
  Processing by Admin::ProfilesController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"WJyxSApP1ZoDya7qcieJqUg5S0Zc4q5IQ7Pj2USt5FE=", "person"=>{"username"=>"chaitanya", "email"=>"chaitanya.saraf1985@gmail.com", "password"=>"[FILTERED]", "password2"=>"[FILTERED]", "is_admin"=>"0"}, "community_admin"=>"1", "community"=>"1", "commit"=>"Add user", "locale"=>"en"}
  [1m[36mPK and serial sequence (6.1ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (1.5ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (1.1ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.3ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (2.2ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (0.9ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (1.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (4.3ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (3.7ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (5.6ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.1ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (0.5ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.4ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (0.9ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (1.7ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>{"utf8"=>"✓", "authenticity_token"=>"WJyxSApP1ZoDya7qcieJqUg5S0Zc4q5IQ7Pj2USt5FE=", "person"=>{"username"=>"chaitanya", "email"=>"chaitanya.saraf1985@gmail.com", "password"=>"chaitanya", "password2"=>"chaitanya", "is_admin"=>"0"}, "community_admin"=>"1", "community"=>"1", "commit"=>"Add user", "action"=>"create", "controller"=>"admin/profiles", "locale"=>"en"}
  [1m[35mCommunity Load (1.1ms)[0m  SELECT "communities".* FROM "communities"
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>TRUE
  [1m[35mSQL (0.6ms)[0m  BEGIN
  [1m[36mSQL (1.0ms)[0m  [1mSELECT 1 FROM "people" WHERE ("people"."email" = 'chaitanya.saraf1985@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  SELECT 1 FROM "people" WHERE ("people"."username" = 'chaitanya') LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT 1 FROM "people" WHERE ("people"."email" = 'chaitanya.saraf1985@gmail.com') LIMIT 1[0m
  [1m[35mPerson Load (0.6ms)[0m  SELECT "people".* FROM "people" WHERE "people"."confirmation_token" = 'nEXz1GpM7N6CWKM9EEw9' LIMIT 1
  [1m[36mPK and serial sequence (1.3ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"people"'::regclass
[0m
  [1m[35mPK and custom sequence (1.3ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"people"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (2.7ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"people"'::regclass
[0m
  [1m[35mPK and custom sequence (3.5ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"people"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mAREL (1.7ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at", "is_admin", "locale", "preferences", "active_days_count", "last_page_load_date", "test_group_number", "active", "show_real_name_to_other_users", "given_name", "family_name", "phone_number", "description", "image_file_name", "image_content_type", "image_file_size", "image_updated_at", "username", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "sign_in_count", "current_sign_in_at", "last_sign_in_at", "current_sign_in_ip", "last_sign_in_ip", "password_salt", "confirmation_token", "confirmed_at", "confirmation_sent_at", "facebook_id", "authentication_token", "hobby_status", "id") VALUES ('2013-03-20 15:06:35.021370', '2013-03-20 15:06:35.021370', 'f', 'en', '---
email_about_new_messages: true
email_about_new_comments_to_own_listing: true
email_when_conversation_accepted: true
email_when_conversation_rejected: true
email_about_new_badges: true
email_about_new_received_testimonials: true
email_about_accept_reminders: true
email_about_testimonial_reminders: true
email_about_weekly_events: true
', 0, NULL, 1, 't', 't', NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 'chaitanya', 'chaitanya.saraf1985@gmail.com', '$2a$10$SgNuUFUe6dMHPcH0IbZIHeXkjlW9OtB22TouaBgyv6PdKMFEeHhT.', NULL, NULL, NULL, 0, NULL, NULL, NULL, NULL, NULL, 'nEXz1GpM7N6CWKM9EEw9', NULL, '2013-03-20 15:06:35.021254', NULL, NULL, 'Existing', 'dbMoSQKw8r4Oag3a6HdQnY')[0m
  [1m[35mPK and serial sequence (3.1ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"people"'::regclass
  [1m[36mPK and custom sequence (4.2ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"people"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Rendered devise/mailer/confirmation_instructions.haml (4.1ms)
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:06:35.540637', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:06:35.538836' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:06:35.538946') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m

Sent mail to chaitanya.saraf1985@gmail.com (5367ms)
Date: Wed, 20 Mar 2013 20:36:35 +0530
From: no-reply@realgoodfood.org
Reply-To: no-reply@realgoodfood.org
To: chaitanya.saraf1985@gmail.com
Message-ID: <5149d07b1595c_544082707ba29381@chaitanya-laptop.mail>
Subject: Confirmation instructions
Mime-Version: 1.0
Content-Type: text/html;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

<!-- /bHjC6UljSr4Oaa3a6HdQnY/people/confirmation?confirmation_token=rG1svxqCsB1wiJy5XQCC -->
<!-- /-if @confirmation_token -->
<!-- /  yes confirmation token -->
<!-- /  //- link = confirmation_url(:confirmation_token => @confirmation_token, :host => @host) -->
<!-- /- else -->
<!-- /  - if $host -->
<!-- /    have $host -->
<!-- /    //- link = confirmation_url(@resource, :confirmation_token => @resource.confirmation_token, :host => $host) -->
<!-- /  - else -->
<!-- /- link = confirmation_url(@resource, :confirmation_token => @resource.confirmation_token) -->
<p>
  Hi chaitanya,
</p>
<p>
  You need to confirm your email address by clicking the following link:
  <a href="http://foodswap.herokuapp.com/dbMoSQKw8r4Oag3a6HdQnY/people/confirmation?confirmation_token=nEXz1GpM7N6CWKM9EEw9">Confirm my account</a>
</p>
<p>
  Thanks,
  <br>
  The RealGoodFood Team
</p>
[paperclip] Saving attachments.
  [1m[35mSQL (36.1ms)[0m  COMMIT
  [1m[36mSQL (0.8ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.4ms)[0m  SELECT 1 FROM "people" WHERE ("people"."username" = 'chaitanya') AND ("people".id <> 'dbMoSQKw8r4Oag3a6HdQnY') LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mSELECT 1 FROM "people" WHERE ("people"."email" = 'chaitanya.saraf1985@gmail.com') AND ("people".id <> 'dbMoSQKw8r4Oag3a6HdQnY') LIMIT 1[0m
  [1m[35mAREL (0.5ms)[0m  UPDATE "people" SET "preferences" = '---
email_about_new_messages: true
email_about_new_comments_to_own_listing: true
email_when_conversation_accepted: true
email_when_conversation_rejected: true
email_about_new_badges: true
email_about_new_received_testimonials: true
email_about_accept_reminders: true
email_about_testimonial_reminders: true
email_about_weekly_events: true
' WHERE "people"."id" = 'dbMoSQKw8r4Oag3a6HdQnY'
[paperclip] Saving attachments.
  [1m[36mSQL (10.5ms)[0m  [1mCOMMIT[0m
WARNING: Can't mass-assign protected attributes: admin
  [1m[35mSQL (0.3ms)[0m  BEGIN
  [1m[36mCommunityMembership Load (0.9ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dbMoSQKw8r4Oag3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mPK and serial sequence (5.5ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"community_memberships"'::regclass
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "community_memberships" ("person_id", "community_id", "admin", "created_at", "updated_at", "consent", "invitation_id", "last_page_load_date") VALUES ('dbMoSQKw8r4Oag3a6HdQnY', 1, 'f', '2013-03-20 15:06:40.532092', '2013-03-20 15:06:40.532092', 'RGF1.0', NULL, '2013-03-20 15:06:40.000000') RETURNING "id"[0m
  [1m[35mCommunity Load (0.8ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (1.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:06:40.545938', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:06:40.544714' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:06:40.544768') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mAREL (1.2ms)[0m  [1mUPDATE "communities" SET "members_count" = COALESCE("members_count", 0) + 1 WHERE "communities"."id" = 1[0m
  [1m[35mSQL (8.0ms)[0m  COMMIT
  [1m[36mSQL (0.7ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.6ms)[0m  INSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:CommunityJoinedJob
person_id: dbMoSQKw8r4Oag3a6HdQnY
community_id: 1
host: !binary |-
 bG9jYWxob3N0
', NULL, '2013-03-20 15:06:40.574304', NULL, NULL, NULL, '2013-03-20 15:06:40.574428', '2013-03-20 15:06:40.574428', NULL) RETURNING "id"
  [1m[36mSQL (4.0ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:3000/en/admin/profiles?type=profiles
Completed 302 Found in 7063ms


Started GET "/en/admin/profiles?type=profiles" for 127.0.0.1 at 2013-03-20 20:36:40 +0530
  Processing by Admin::ProfilesController#index as HTML
  Parameters: {"type"=>"profiles", "locale"=>"en"}
  [1m[35mPK and serial sequence (6.3ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.2ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.4ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.1ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.2ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (1.9ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.0ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (6.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (1.8ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (0.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.3ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (1.4ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (0.9ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.0ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mPerson Load (1.9ms)[0m  [1mSELECT "people".* FROM "people"[0m
Rendered admin/profiles/_profiles.html.haml (32.6ms)
Rendered layouts/_kissmetrics.haml (3.0ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.8ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.4ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (94.3ms)
Rendered communities/default/logo/logo.haml (2.7ms)
Rendered layouts/_no_javascript.haml (18.2ms)
Rendered layouts/_facebook_sdk.haml (2.6ms)
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.9ms)[0m  SELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) AND participations.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_messages_icon.haml (16.9ms)
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.0ms)[0m  SELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_notifications_icon.haml (12.6ms)
  [1m[36mSQL (2.6ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.0ms)[0m  SELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY') AND (acceptance is null)
Rendered layouts/_logged_in_swap_offers_icon.haml (14.2ms)
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"authentications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mAuthentication Load (1.2ms)[0m  SELECT "authentications".* FROM "authentications" WHERE "authentications"."user_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
Rendered layouts/_logged_in.haml (67.6ms)
Rendered layouts/_notifications.haml (5.7ms)
  [1m[36mLocation Load (1.5ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
Rendered layouts/_display_popup.haml (11.7ms)
Rendered layouts/application.haml (257.4ms)
Rendered admin/profiles/index.html.haml within layouts/admin (305.0ms)
Completed 200 OK in 1691ms (Views: 370.9ms | ActiveRecord: 232.1ms | Sphinx: 0.0ms)
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (31.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:06:45.550067', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:06:45.548529' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:06:45.548594') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mCommunity Load (3.3ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'localhost' LIMIT 1
  [1m[36mPerson Load (1.6ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dbMoSQKw8r4Oag3a6HdQnY' LIMIT 1[0m
  [1m[35mCommunity Load (1.3ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.2ms)[0m  INSERT INTO "event_feed_events" ("person1_id", "person2_id", "community_id", "eventable_id", "eventable_type", "category", "members_only", "created_at", "updated_at") VALUES ('dbMoSQKw8r4Oag3a6HdQnY', NULL, 1, NULL, NULL, 'join', 'f', '2013-03-20 15:06:45.657762', '2013-03-20 15:06:45.657762') RETURNING "id"
  [1m[36mSQL (10.6ms)[0m  [1mCOMMIT[0m
  [1m[35mListing Load (1.3ms)[0m  SELECT "listings".* FROM "listings" WHERE ("listings".author_id = 'dbMoSQKw8r4Oag3a6HdQnY')
  [1m[36mSQL (0.7ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (1.0ms)[0m  DELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 242
  [1m[36mSQL (13.5ms)[0m  [1mCOMMIT[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:06:45.695862', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:06:45.694274' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:06:45.694344') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.0ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:06:45.701211', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:06:45.699863' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:06:45.699921') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.0ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:06:50.706653', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:06:50.705051' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:06:50.705126') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:06:55.712006', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:06:55.710467' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:06:55.710538') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:07:00.717796', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:07:00.716205' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:07:00.716280') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:07:05.723603', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:07:05.722060' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:07:05.722137') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:07:10.729406', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:07:10.727860' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:07:10.727932') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.8ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:07:15.735187', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:07:15.733584' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:07:15.733678') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (1.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:07:20.740464', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:07:20.739838' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:07:20.739875') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (1.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:07:25.744172', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:07:25.742643' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:07:25.742718') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:07:30.748558', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:07:30.747032' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:07:30.747106') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:07:35.754311', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:07:35.752774' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:07:35.752844') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.5ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:07:40.759712', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:07:40.758493' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:07:40.758554') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (1.5ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:07:45.765621', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:07:45.764094' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:07:45.764170') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (1.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:07:50.770380', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:07:50.769137' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:07:50.769198') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:07:55.775146', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:07:55.773286' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:07:55.773361') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:08:00.781456', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:08:00.779819' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:08:00.779894') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:08:05.787426', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:08:05.785869' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:08:05.785942') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:08:10.793212', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:08:10.791711' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:08:10.791782') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.1ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:08:15.799106', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:08:15.797470' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:08:15.797541') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:08:20.804530', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:08:20.803004' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:08:20.803079') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.6ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:08:25.810369', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:08:25.808793' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:08:25.808866') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:08:30.816365', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:08:30.814853' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:08:30.814927') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:08:35.822131', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:08:35.820572' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:08:35.820646') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:08:40.827942', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:08:40.826400' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:08:40.826472') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:08:45.833711', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:08:45.832151' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:08:45.832223') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:08:50.839372', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:08:50.837880' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:08:50.837951') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.8ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:08:55.845134', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:08:55.843618' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:08:55.843692') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (1.0ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:09:00.850699', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:09:00.849772' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:09:00.849815') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:09:05.854405', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:09:05.852839' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:09:05.852914') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:09:10.860276', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:09:10.858672' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:09:10.858748') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.6ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:09:15.865981', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:09:15.864421' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:09:15.864497') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:09:20.872075', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:09:20.870550' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:09:20.870625') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (1.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:09:25.877451', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:09:25.876336' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:09:25.876448') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:09:30.881026', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:09:30.879519' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:09:30.879592') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.6ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:09:35.886750', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:09:35.885194' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:09:35.885269') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (1.0ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:09:40.892186', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:09:40.891255' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:09:40.891295') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.8ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:09:45.895872', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:09:45.894362' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:09:45.894438') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m


Started POST "/en/admin/profiles/dbMoSQKw8r4Oag3a6HdQnY" for 127.0.0.1 at 2013-03-20 20:39:49 +0530
  Processing by Admin::ProfilesController#destroy as HTML
  Parameters: {"authenticity_token"=>"WJyxSApP1ZoDya7qcieJqUg5S0Zc4q5IQ7Pj2USt5FE=", "locale"=>"en", "id"=>"dbMoSQKw8r4Oag3a6HdQnY"}
  [1m[35mPK and serial sequence (6.6ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.3ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.3ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (5.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (1.6ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (1.9ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.1ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.2ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (6.1ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.0ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.2ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (1.5ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (1.0ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.0ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mPerson Load (1.3ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dbMoSQKw8r4Oag3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  BEGIN
  [1m[36mAuthentication Load (0.9ms)[0m  [1mSELECT "authentications".* FROM "authentications" WHERE ("authentications".user_id = 'dbMoSQKw8r4Oag3a6HdQnY')[0m
  [1m[35mListing Load (1.2ms)[0m  SELECT "listings".* FROM "listings" WHERE ("listings".author_id = 'dbMoSQKw8r4Oag3a6HdQnY')
  [1m[36mEmail Load (0.9ms)[0m  [1mSELECT "emails".* FROM "emails" WHERE ("emails".person_id = 'dbMoSQKw8r4Oag3a6HdQnY')[0m
  [1m[35mLocation Load (1.0ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dbMoSQKw8r4Oag3a6HdQnY' AND (location_type = 'person')) LIMIT 1
  [1m[36mParticipation Load (1.0ms)[0m  [1mSELECT "participations".* FROM "participations" WHERE ("participations".person_id = 'dbMoSQKw8r4Oag3a6HdQnY')[0m
  [1m[35mConversation Load (1.3ms)[0m  SELECT "conversations".* FROM "conversations" INNER JOIN "participations" ON "conversations".id = "participations".conversation_id WHERE (("participations".person_id = 'dbMoSQKw8r4Oag3a6HdQnY'))
  [1m[36mTestimonial Load (0.9ms)[0m  [1mSELECT "testimonials".* FROM "testimonials" WHERE ("testimonials".author_id = 'dbMoSQKw8r4Oag3a6HdQnY')[0m
  [1m[35mTestimonial Load (0.9ms)[0m  SELECT "testimonials".* FROM "testimonials" WHERE ("testimonials".receiver_id = 'dbMoSQKw8r4Oag3a6HdQnY') ORDER BY id DESC
  [1m[36mBadge Load (0.9ms)[0m  [1mSELECT "badges".* FROM "badges" WHERE ("badges".person_id = 'dbMoSQKw8r4Oag3a6HdQnY')[0m
  [1m[35mNotification Load (1.1ms)[0m  SELECT "notifications".* FROM "notifications" WHERE ("notifications".receiver_id = 'dbMoSQKw8r4Oag3a6HdQnY') ORDER BY id DESC
  [1m[36mComment Load (0.9ms)[0m  [1mSELECT "comments".* FROM "comments" WHERE ("comments".author_id = 'dbMoSQKw8r4Oag3a6HdQnY')[0m
  [1m[35mCommunityMembership Load (1.1ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE ("community_memberships".person_id = 'dbMoSQKw8r4Oag3a6HdQnY')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mAREL (1.2ms)[0m  UPDATE "communities" SET "members_count" = COALESCE("members_count", 0) - 1 WHERE "communities"."id" = 1
  [1m[36mAREL (0.9ms)[0m  [1mDELETE FROM "community_memberships" WHERE "community_memberships"."id" = 15[0m
  [1m[35mInvitation Load (1.1ms)[0m  SELECT "invitations".* FROM "invitations" WHERE ("invitations".inviter_id = 'dbMoSQKw8r4Oag3a6HdQnY')
  [1m[36mPollAnswer Load (1.0ms)[0m  [1mSELECT "poll_answers".* FROM "poll_answers" WHERE ("poll_answers".answerer_id = 'dbMoSQKw8r4Oag3a6HdQnY')[0m
  [1m[35mDevice Load (0.9ms)[0m  SELECT "devices".* FROM "devices" WHERE ("devices".person_id = 'dbMoSQKw8r4Oag3a6HdQnY')
  [1m[36mEventFeedEvent Load (1.1ms)[0m  [1mSELECT "event_feed_events".* FROM "event_feed_events" WHERE ("event_feed_events".person1_id = 'dbMoSQKw8r4Oag3a6HdQnY')[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"event_feed_events"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"event_feed_events"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mAREL (0.9ms)[0m  DELETE FROM "event_feed_events" WHERE "event_feed_events"."id" = 20
  [1m[36mEventFeedEvent Load (0.9ms)[0m  [1mSELECT "event_feed_events".* FROM "event_feed_events" WHERE ("event_feed_events".person2_id = 'dbMoSQKw8r4Oag3a6HdQnY')[0m
[paperclip] Deleting attachments.
  [1m[35mSQL (1.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listing_followers"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mListing Load (1.2ms)[0m  [1mSELECT * FROM "listings" INNER JOIN "listing_followers" ON "listings".id = "listing_followers".listing_id WHERE ("listing_followers".person_id = 'dbMoSQKw8r4Oag3a6HdQnY' )[0m
  [1m[35mAREL (0.8ms)[0m  DELETE FROM "people" WHERE "people"."id" = 'dbMoSQKw8r4Oag3a6HdQnY'
  [1m[36mSQL (33.0ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:3000/en/admin/profiles?type=profiles
Completed 302 Found in 1449ms


Started GET "/en/admin/profiles?type=profiles" for 127.0.0.1 at 2013-03-20 20:39:50 +0530
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (1.0ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:09:50.901265', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:09:50.900404' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:09:50.900440') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  Processing by Admin::ProfilesController#index as HTML
  Parameters: {"type"=>"profiles", "locale"=>"en"}
  [1m[35mPK and serial sequence (9.3ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.5ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.5ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (3.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.3ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.0ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.2ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (8.7ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.2ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.5ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (1.4ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (1.0ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.1ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mPerson Load (1.1ms)[0m  [1mSELECT "people".* FROM "people"[0m
Rendered admin/profiles/_profiles.html.haml (28.4ms)
Rendered layouts/_kissmetrics.haml (3.1ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (86.7ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.6ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (11.3ms)
Rendered communities/default/logo/logo.haml (2.6ms)
Rendered layouts/_no_javascript.haml (17.2ms)
Rendered layouts/_facebook_sdk.haml (2.6ms)
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.8ms)[0m  SELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) AND participations.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_messages_icon.haml (17.4ms)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_notifications_icon.haml (12.3ms)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.0ms)[0m  SELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY') AND (acceptance is null)
Rendered layouts/_logged_in_swap_offers_icon.haml (14.3ms)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"authentications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mAuthentication Load (1.0ms)[0m  SELECT "authentications".* FROM "authentications" WHERE "authentications"."user_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
Rendered layouts/_logged_in.haml (66.1ms)
Rendered layouts/_notifications.haml (7.4ms)
  [1m[36mLocation Load (1.1ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
Rendered layouts/_display_popup.haml (10.2ms)
Rendered layouts/application.haml (260.5ms)
Rendered admin/profiles/index.html.haml within layouts/admin (308.0ms)
Completed 200 OK in 1692ms (Views: 298.8ms | ActiveRecord: 217.4ms | Sphinx: 0.0ms)
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:09:55.904882', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:09:55.903373' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:09:55.903449') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (1.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:10:00.909617', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:10:00.909017' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:10:00.909052') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:10:05.913290', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:10:05.911768' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:10:05.911845') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m


Started GET "/en/admin/profiles/new?type=profiles" for 127.0.0.1 at 2013-03-20 20:40:05 +0530
  Processing by Admin::ProfilesController#new as HTML
  Parameters: {"type"=>"profiles", "locale"=>"en"}
  [1m[35mPK and serial sequence (6.6ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.2ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.3ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.1ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (1.9ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (5.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (1.5ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (2.3ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (1.8ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (1.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (3.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.9ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (1.6ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (4.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (1.3ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.1ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mCommunity Load (0.9ms)[0m  [1mSELECT "communities".* FROM "communities"[0m
Rendered layouts/_kissmetrics.haml (3.1ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (2.6ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.3ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (11.2ms)
Rendered communities/default/logo/logo.haml (2.4ms)
Rendered layouts/_no_javascript.haml (15.7ms)
Rendered layouts/_facebook_sdk.haml (84.1ms)
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.8ms)[0m  SELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) AND participations.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_messages_icon.haml (17.1ms)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.6ms)[0m  SELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_notifications_icon.haml (11.4ms)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY') AND (acceptance is null)
Rendered layouts/_logged_in_swap_offers_icon.haml (10.9ms)
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"authentications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mAuthentication Load (0.9ms)[0m  SELECT "authentications".* FROM "authentications" WHERE "authentications"."user_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
Rendered layouts/_logged_in.haml (58.5ms)
Rendered layouts/_notifications.haml (4.8ms)
  [1m[36mLocation Load (1.2ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
Rendered layouts/_display_popup.haml (13.2ms)
Rendered layouts/application.haml (247.8ms)
Rendered admin/profiles/new.html.haml within layouts/admin (270.3ms)
Completed 200 OK in 1616ms (Views: 257.7ms | ActiveRecord: 77.4ms | Sphinx: 0.0ms)
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:10:10.919099', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:10:10.917558' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:10:10.917631') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *


Started GET "/people/check_username_availability?person%5Busername%5D=chaitanya" for 127.0.0.1 at 2013-03-20 20:40:13 +0530
  Processing by PeopleController#check_username_availability as JSON
  Parameters: {"person"=>{"username"=>"chaitanya"}, "id"=>"check_username_availability"}
  [1m[35mPK and serial sequence (6.5ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (1.9ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (1.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.3ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (1.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.0ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (1.7ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.0ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (5.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (1.5ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (2.4ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (1.9ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (1.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.4ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (0.4ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (0.5ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mPerson Load (0.6ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."username" = 'chaitanya' LIMIT 1[0m
Completed 200 OK in 1321ms (Views: 0.2ms | ActiveRecord: 46.6ms | Sphinx: 0.0ms)
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (1.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:10:15.924852', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:10:15.923348' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:10:15.923423') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.1ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:10:20.928202', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:10:20.927590' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:10:20.927625') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *


Started GET "/people/check_email_availability_and_validity?person%5Bemail%5D=chaitanya.saraf1985%40gmail.com" for 127.0.0.1 at 2013-03-20 20:40:24 +0530
  Processing by PeopleController#check_email_availability_and_validity as JSON
  Parameters: {"person"=>{"email"=>"chaitanya.saraf1985@gmail.com"}, "id"=>"check_email_availability_and_validity"}
  [1m[35mPK and serial sequence (6.3ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.9ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (3.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.5ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (3.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.0ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (1.9ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (4.8ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.1ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (5.0ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (2.7ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (1.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:10:25.931857', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:10:25.931133' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:10:25.931174') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.0ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (1.4ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (1.0ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.0ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"emails"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"emails"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mEmail Load (1.1ms)[0m  [1mSELECT "emails".* FROM "emails" WHERE "emails"."address" = 'chaitanya.saraf1985@gmail.com' AND "emails"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mPerson Load (1.2ms)[0m  SELECT "people".* FROM "people" WHERE "people"."email" = 'chaitanya.saraf1985@gmail.com' LIMIT 1
  [1m[36mEmail Load (0.8ms)[0m  [1mSELECT "emails".* FROM "emails" WHERE "emails"."address" = 'chaitanya.saraf1985@gmail.com' LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "emails".* FROM "emails" WHERE "emails"."address" = 'chaitanya.saraf1985@gmail.com' LIMIT 1
Completed 200 OK in 1290ms (Views: 0.3ms | ActiveRecord: 71.0ms | Sphinx: 0.0ms)
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.8ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:10:30.935870', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:10:30.934360' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:10:30.934436') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *


Started POST "/en/admin/profiles" for 127.0.0.1 at 2013-03-20 20:40:31 +0530
  Processing by Admin::ProfilesController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"WJyxSApP1ZoDya7qcieJqUg5S0Zc4q5IQ7Pj2USt5FE=", "person"=>{"username"=>"chaitanya", "email"=>"chaitanya.saraf1985@gmail.com", "password"=>"[FILTERED]", "password2"=>"[FILTERED]", "is_admin"=>"0"}, "community_admin"=>"1", "community"=>"1", "commit"=>"Add user", "locale"=>"en"}
  [1m[36mPK and serial sequence (2.4ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (1.5ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (1.3ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.1ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (1.6ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.0ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (2.4ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (2.4ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (2.0ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.6ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.2ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.5ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (1.0ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (1.3ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>{"utf8"=>"✓", "authenticity_token"=>"WJyxSApP1ZoDya7qcieJqUg5S0Zc4q5IQ7Pj2USt5FE=", "person"=>{"username"=>"chaitanya", "email"=>"chaitanya.saraf1985@gmail.com", "password"=>"chaitanya", "password2"=>"chaitanya", "is_admin"=>"0"}, "community_admin"=>"1", "community"=>"1", "commit"=>"Add user", "action"=>"create", "controller"=>"admin/profiles", "locale"=>"en"}
  [1m[35mCommunity Load (1.4ms)[0m  SELECT "communities".* FROM "communities"
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  BEGIN
  [1m[36mSQL (1.0ms)[0m  [1mSELECT 1 FROM "people" WHERE ("people"."email" = 'chaitanya.saraf1985@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  SELECT 1 FROM "people" WHERE ("people"."username" = 'chaitanya') LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT 1 FROM "people" WHERE ("people"."email" = 'chaitanya.saraf1985@gmail.com') LIMIT 1[0m
  [1m[35mPerson Load (1.4ms)[0m  SELECT "people".* FROM "people" WHERE "people"."confirmation_token" = 'FLMwo8ojqyEvTgkKooLp' LIMIT 1
  [1m[36mPK and serial sequence (3.1ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"people"'::regclass
[0m
  [1m[35mPK and custom sequence (3.5ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"people"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (3.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"people"'::regclass
[0m
  [1m[35mPK and custom sequence (3.4ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"people"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mAREL (1.8ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at", "is_admin", "locale", "preferences", "active_days_count", "last_page_load_date", "test_group_number", "active", "show_real_name_to_other_users", "given_name", "family_name", "phone_number", "description", "image_file_name", "image_content_type", "image_file_size", "image_updated_at", "username", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "sign_in_count", "current_sign_in_at", "last_sign_in_at", "current_sign_in_ip", "last_sign_in_ip", "password_salt", "confirmation_token", "confirmed_at", "confirmation_sent_at", "facebook_id", "authentication_token", "hobby_status", "id") VALUES ('2013-03-20 15:10:33.422426', '2013-03-20 15:10:33.422426', 'f', 'en', '---
email_about_new_messages: true
email_about_new_comments_to_own_listing: true
email_when_conversation_accepted: true
email_when_conversation_rejected: true
email_about_new_badges: true
email_about_new_received_testimonials: true
email_about_accept_reminders: true
email_about_testimonial_reminders: true
email_about_weekly_events: true
', 0, NULL, 1, 't', 't', NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 'chaitanya', 'chaitanya.saraf1985@gmail.com', '$2a$10$vUaaI2rjjqCjxDW0pvZKR.R8oBXSI9BcPNv7I1QrJ1AywsnEOYRIO', NULL, NULL, NULL, 0, NULL, NULL, NULL, NULL, NULL, 'FLMwo8ojqyEvTgkKooLp', NULL, '2013-03-20 15:10:33.422306', NULL, NULL, 'Existing', 'bpSZp8Kxar4Oag3a6HdQnY')[0m
  [1m[35mPK and serial sequence (3.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"people"'::regclass
  [1m[36mPK and custom sequence (4.4ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"people"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Rendered devise/mailer/confirmation_instructions.haml (4.0ms)
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:10:35.942324', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:10:35.940672' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:10:35.940782') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m

Sent mail to chaitanya.saraf1985@gmail.com (5250ms)
Date: Wed, 20 Mar 2013 20:40:33 +0530
From: no-reply@realgoodfood.org
Reply-To: no-reply@realgoodfood.org
To: chaitanya.saraf1985@gmail.com
Message-ID: <5149d169782d9_5440870d5ca2941b@chaitanya-laptop.mail>
Subject: Confirmation instructions
Mime-Version: 1.0
Content-Type: text/html;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

<!-- /bHjC6UljSr4Oaa3a6HdQnY/people/confirmation?confirmation_token=rG1svxqCsB1wiJy5XQCC -->
<!-- /-if @confirmation_token -->
<!-- /  yes confirmation token -->
<!-- /  //- link = confirmation_url(:confirmation_token => @confirmation_token, :host => @host) -->
<!-- /- else -->
<!-- /  - if $host -->
<!-- /    have $host -->
<!-- /    //- link = confirmation_url(@resource, :confirmation_token => @resource.confirmation_token, :host => $host) -->
<!-- /  - else -->
<!-- /- link = confirmation_url(@resource, :confirmation_token => @resource.confirmation_token) -->
<p>
  Hi chaitanya,
</p>
<p>
  You need to confirm your email address by clicking the following link:
  <a href="http://foodswap.herokuapp.com/bpSZp8Kxar4Oag3a6HdQnY/people/confirmation?confirmation_token=FLMwo8ojqyEvTgkKooLp">Confirm my account</a>
</p>
<p>
  Thanks,
  <br>
  The RealGoodFood Team
</p>
[paperclip] Saving attachments.
  [1m[35mSQL (29.7ms)[0m  COMMIT
  [1m[36mSQL (0.7ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.1ms)[0m  SELECT 1 FROM "people" WHERE ("people"."username" = 'chaitanya') AND ("people".id <> 'bpSZp8Kxar4Oag3a6HdQnY') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mSELECT 1 FROM "people" WHERE ("people"."email" = 'chaitanya.saraf1985@gmail.com') AND ("people".id <> 'bpSZp8Kxar4Oag3a6HdQnY') LIMIT 1[0m
  [1m[35mAREL (1.2ms)[0m  UPDATE "people" SET "preferences" = '---
email_about_new_messages: true
email_about_new_comments_to_own_listing: true
email_when_conversation_accepted: true
email_when_conversation_rejected: true
email_about_new_badges: true
email_about_new_received_testimonials: true
email_about_accept_reminders: true
email_about_testimonial_reminders: true
email_about_weekly_events: true
' WHERE "people"."id" = 'bpSZp8Kxar4Oag3a6HdQnY'
[paperclip] Saving attachments.
  [1m[36mSQL (10.9ms)[0m  [1mCOMMIT[0m
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>TRUE
WARNING: Can't mass-assign protected attributes: admin
  [1m[35mSQL (0.6ms)[0m  BEGIN
  [1m[36mCommunityMembership Load (1.1ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'bpSZp8Kxar4Oag3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mPK and serial sequence (4.9ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"community_memberships"'::regclass
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "community_memberships" ("person_id", "community_id", "admin", "created_at", "updated_at", "consent", "invitation_id", "last_page_load_date") VALUES ('bpSZp8Kxar4Oag3a6HdQnY', 1, 'f', '2013-03-20 15:10:38.817249', '2013-03-20 15:10:38.817249', 'RGF1.0', NULL, '2013-03-20 15:10:38.000000') RETURNING "id"[0m
  [1m[35mCommunity Load (0.6ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mAREL (0.5ms)[0m  [1mUPDATE "communities" SET "members_count" = COALESCE("members_count", 0) + 1 WHERE "communities"."id" = 1[0m
  [1m[35mSQL (9.1ms)[0m  COMMIT
  [1m[36mSQL (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:CommunityJoinedJob
person_id: bpSZp8Kxar4Oag3a6HdQnY
community_id: 1
host: !binary |-
 bG9jYWxob3N0
', NULL, '2013-03-20 15:10:38.847360', NULL, NULL, NULL, '2013-03-20 15:10:38.847469', '2013-03-20 15:10:38.847469', NULL) RETURNING "id"
  [1m[36mSQL (13.4ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:3000/en/admin/profiles?type=profiles
Completed 302 Found in 6959ms


Started GET "/en/admin/profiles?type=profiles" for 127.0.0.1 at 2013-03-20 20:40:38 +0530
  Processing by Admin::ProfilesController#index as HTML
  Parameters: {"type"=>"profiles", "locale"=>"en"}
  [1m[35mPK and serial sequence (3.3ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (1.9ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (1.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (0.9ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (1.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (2.4ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (1.5ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (0.9ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (1.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (2.4ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (1.6ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (3.1ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (1.7ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.3ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (1.4ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (1.0ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.0ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mPerson Load (1.8ms)[0m  [1mSELECT "people".* FROM "people"[0m
Rendered admin/profiles/_profiles.html.haml (111.9ms)
Rendered layouts/_kissmetrics.haml (3.2ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (2.0ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (86.6ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (95.1ms)
Rendered communities/default/logo/logo.haml (2.5ms)
Rendered layouts/_no_javascript.haml (17.3ms)
Rendered layouts/_facebook_sdk.haml (2.7ms)
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.4ms)[0m  SELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) AND participations.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_messages_icon.haml (17.3ms)
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_notifications_icon.haml (17.6ms)
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY') AND (acceptance is null)
Rendered layouts/_logged_in_swap_offers_icon.haml (10.9ms)
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"authentications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mAuthentication Load (1.1ms)[0m  SELECT "authentications".* FROM "authentications" WHERE "authentications"."user_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
Rendered layouts/_logged_in.haml (67.9ms)
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (35.9ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:10:40.947788', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:10:40.946420' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:10:40.946475') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
Rendered layouts/_notifications.haml (5.1ms)
  [1m[36mCommunity Load (0.7ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'localhost' LIMIT 1[0m
  [1m[35mPerson Load (0.7ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bpSZp8Kxar4Oag3a6HdQnY' LIMIT 1
  [1m[36mLocation Load (0.5ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
  [1m[36mCommunity Load (0.7ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
Rendered layouts/_display_popup.haml (14.5ms)
Rendered layouts/application.haml (261.8ms)
  [1m[35mSQL (0.3ms)[0m  BEGIN
Rendered admin/profiles/index.html.haml within layouts/admin (388.2ms)
Completed 200 OK in 1726ms (Views: 374.9ms | ActiveRecord: 211.9ms | Sphinx: 0.0ms)
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "event_feed_events" ("person1_id", "person2_id", "community_id", "eventable_id", "eventable_type", "category", "members_only", "created_at", "updated_at") VALUES ('bpSZp8Kxar4Oag3a6HdQnY', NULL, 1, NULL, NULL, 'join', 'f', '2013-03-20 15:10:41.003146', '2013-03-20 15:10:41.003146') RETURNING "id"[0m
  [1m[35mSQL (12.2ms)[0m  COMMIT
  [1m[36mListing Load (1.1ms)[0m  [1mSELECT "listings".* FROM "listings" WHERE ("listings".author_id = 'bpSZp8Kxar4Oag3a6HdQnY')[0m
  [1m[35mSQL (0.5ms)[0m  BEGIN
  [1m[36mAREL (0.8ms)[0m  [1mDELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 243[0m
  [1m[35mSQL (3.5ms)[0m  COMMIT
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (1.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:10:41.030326', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:10:41.029589' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:10:41.029631') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (1.1ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:10:41.032724', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:10:41.032198' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:10:41.032228') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (1.6ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:10:46.036486', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:10:46.034796' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:10:46.034917') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:10:51.040942', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:10:51.039436' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:10:51.039510') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:10:56.046796', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:10:56.045161' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:10:56.045236') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.1ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:11:01.051649', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:11:01.051051' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:11:01.051085') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:11:06.056166', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:11:06.054664' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:11:06.054735') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:11:11.061919', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:11:11.060368' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:11:11.060441') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (0.9ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:11:16.066727', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:11:16.066059' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:11:16.066095') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.5ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:11:21.070132', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:11:21.068585' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:11:21.068656') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:11:26.075961', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:11:26.074434' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:11:26.074501') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:11:31.081746', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:11:31.080118' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:11:31.080193') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:11:36.087505', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:11:36.085905' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:11:36.085977') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:11:41.093345', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:11:41.091856' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:11:41.091927') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:11:46.098977', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:11:46.097435' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:11:46.097509') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:11:51.104634', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:11:51.103125' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:11:51.103199') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:11:56.110208', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:11:56.108730' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:11:56.108800') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:12:01.115789', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:12:01.114276' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:12:01.114349') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:12:06.121330', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:12:06.119822' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:12:06.119894') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:12:11.126995', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:12:11.125451' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:12:11.125525') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.5ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:12:16.132027', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:12:16.131075' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:12:16.131134') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:12:21.137499', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:12:21.135992' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:12:21.136066') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:12:26.143072', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:12:26.141539' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:12:26.141613') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:12:31.148706', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:12:31.147140' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:12:31.147212') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.7ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:12:36.154485', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:12:36.152936' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:12:36.153010') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m


Started GET "/en/admin/profiles?type=profiles" for 127.0.0.1 at 2013-03-20 20:42:37 +0530
  Processing by Admin::ProfilesController#index as HTML
  Parameters: {"type"=>"profiles", "locale"=>"en"}
  [1m[35mPK and serial sequence (6.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.1ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.4ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.6ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.0ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (1.9ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.1ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.0ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (6.1ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.2ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.3ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (1.5ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (1.0ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.1ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mPerson Load (1.4ms)[0m  [1mSELECT "people".* FROM "people"[0m
Rendered admin/profiles/_profiles.html.haml (110.5ms)
Rendered layouts/_kissmetrics.haml (3.2ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.9ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.3ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (10.7ms)
Rendered communities/default/logo/logo.haml (2.4ms)
Rendered layouts/_no_javascript.haml (15.8ms)
Rendered layouts/_facebook_sdk.haml (2.4ms)
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.9ms)[0m  SELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) AND participations.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_messages_icon.haml (16.0ms)
  [1m[36mSQL (2.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_notifications_icon.haml (11.0ms)
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY') AND (acceptance is null)
Rendered layouts/_logged_in_swap_offers_icon.haml (10.4ms)
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"authentications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mAuthentication Load (0.8ms)[0m  SELECT "authentications".* FROM "authentications" WHERE "authentications"."user_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
Rendered layouts/_logged_in.haml (55.1ms)
Rendered layouts/_notifications.haml (89.9ms)
  [1m[36mLocation Load (1.2ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
Rendered layouts/_display_popup.haml (13.7ms)
Rendered layouts/application.haml (247.4ms)
Rendered admin/profiles/index.html.haml within layouts/admin (373.5ms)
Completed 200 OK in 1719ms (Views: 360.4ms | ActiveRecord: 84.4ms | Sphinx: 0.0ms)
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:12:41.160603', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:12:41.159101' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:12:41.159174') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:12:46.166293', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:12:46.164750' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:12:46.164822') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:12:51.171912', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:12:51.170407' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:12:51.170478') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:12:56.178065', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:12:56.176048' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:12:56.176127') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:13:01.183765', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:13:01.182282' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:13:01.182349') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:13:06.189357', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:13:06.187860' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:13:06.187932') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:13:11.194956', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:13:11.193432' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:13:11.193501') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:13:16.200539', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:13:16.199036' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:13:16.199110') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:13:21.206187', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:13:21.204642' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:13:21.204713') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:13:26.211914', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:13:26.210406' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:13:26.210478') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:13:31.217565', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:13:31.216061' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:13:31.216134') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:13:36.223165', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:13:36.221618' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:13:36.221721') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:13:41.228702', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:13:41.227199' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:13:41.227270') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:13:46.234326', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:13:46.232817' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:13:46.232889') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:13:51.239936', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:13:51.238436' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:13:51.238508') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:13:56.245567', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:13:56.244068' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:13:56.244140') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:14:01.251219', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:14:01.249703' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:14:01.249782') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:14:06.256771', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:14:06.255311' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:14:06.255380') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:14:11.262437', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:14:11.260828' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:14:11.260897') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:14:16.268061', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:14:16.266555' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:14:16.266627') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.6ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:14:21.273685', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:14:21.272159' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:14:21.272235') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *


Started GET "/en/admin/profiles/new?type=profiles" for 127.0.0.1 at 2013-03-20 20:44:26 +0530
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (0.9ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:14:26.278621', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:14:26.278046' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:14:26.278077') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  Processing by Admin::ProfilesController#new as HTML
  Parameters: {"type"=>"profiles", "locale"=>"en"}
  [1m[35mPK and serial sequence (6.3ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (3.6ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.5ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (1.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.3ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (1.7ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.5ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.2ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (3.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (1.6ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.6ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.3ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (1.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (0.6ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (0.7ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mCommunity Load (0.7ms)[0m  [1mSELECT "communities".* FROM "communities"[0m
Rendered layouts/_kissmetrics.haml (3.0ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (2.3ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.2ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (10.3ms)
Rendered communities/default/logo/logo.haml (2.6ms)
Rendered layouts/_no_javascript.haml (16.7ms)
Rendered layouts/_facebook_sdk.haml (2.5ms)
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.8ms)[0m  SELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) AND participations.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_messages_icon.haml (15.2ms)
  [1m[36mSQL (1.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_notifications_icon.haml (12.5ms)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY') AND (acceptance is null)
Rendered layouts/_logged_in_swap_offers_icon.haml (12.6ms)
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"authentications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mAuthentication Load (0.9ms)[0m  SELECT "authentications".* FROM "authentications" WHERE "authentications"."user_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
Rendered layouts/_logged_in.haml (59.6ms)
Rendered layouts/_notifications.haml (6.5ms)
  [1m[36mLocation Load (0.8ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
Rendered layouts/_display_popup.haml (11.9ms)
Rendered layouts/application.haml (249.5ms)
Rendered admin/profiles/new.html.haml within layouts/admin (270.7ms)
Completed 200 OK in 1631ms (Views: 259.5ms | ActiveRecord: 72.0ms | Sphinx: 0.0ms)
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:14:31.281983', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:14:31.280422' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:14:31.280494') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (0.9ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:14:36.286669', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:14:36.286048' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:14:36.286086') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:14:41.290072', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:14:41.288524' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:14:41.288595') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (1.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:14:46.295065', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:14:46.294114' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:14:46.294157') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:14:51.299050', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:14:51.297510' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:14:51.297582') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:14:56.304768', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:14:56.303268' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:14:56.303340') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:15:01.310576', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:15:01.309041' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:15:01.309111') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:15:06.316415', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:15:06.314782' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:15:06.314855') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:15:11.322179', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:15:11.320642' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:15:11.320713') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:15:16.327844', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:15:16.326343' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:15:16.326415') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:15:21.333574', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:15:21.332069' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:15:21.332140') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:15:26.339289', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:15:26.337787' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:15:26.337859') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:15:31.345006', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:15:31.343502' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:15:31.343573') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:15:36.350790', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:15:36.349263' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:15:36.349334') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:15:41.356561', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:15:41.355012' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:15:41.355081') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:15:46.362293', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:15:46.360667' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:15:46.360738') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:15:51.367986', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:15:51.366415' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:15:51.366488') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:15:56.373782', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:15:56.372213' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:15:56.372305') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.6ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:16:01.379477', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:16:01.377972' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:16:01.378044') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:16:06.385496', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:16:06.383986' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:16:06.384062') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:16:11.391239', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:16:11.389712' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:16:11.389796') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:16:16.396941', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:16:16.395336' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:16:16.395410') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:16:21.402644', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:16:21.401099' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:16:21.401171') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:16:26.408269', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:16:26.406759' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:16:26.406830') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:16:31.413946', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:16:31.412402' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:16:31.412473') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:16:36.419636', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:16:36.418125' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:16:36.418199') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:16:41.425239', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:16:41.423734' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:16:41.423806') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:16:46.430958', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:16:46.429424' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:16:46.429496') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:16:51.436692', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:16:51.435186' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:16:51.435260') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:16:56.442332', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:16:56.440792' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:16:56.440864') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:17:01.447976', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:17:01.446475' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:17:01.446545') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:17:06.453595', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:17:06.452133' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:17:06.452203') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:17:11.459232', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:17:11.457721' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:17:11.457794') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:17:16.464896', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:17:16.463393' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:17:16.463466') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:17:21.470583', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:17:21.469039' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:17:21.469110') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:17:26.476267', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:17:26.474767' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:17:26.474839') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:17:31.481943', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:17:31.480403' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:17:31.480476') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:17:36.487534', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:17:36.486071' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:17:36.486139') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:17:41.493169', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:17:41.491665' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:17:41.491735') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:17:46.498868', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:17:46.497322' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:17:46.497395') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:17:51.504593', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:17:51.503091' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:17:51.503161') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:17:56.510246', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:17:56.508711' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:17:56.508784') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:18:01.515963', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:18:01.514457' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:18:01.514528') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:18:06.521597', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:18:06.520095' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:18:06.520165') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:18:11.527281', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:18:11.525780' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:18:11.525852') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:18:16.532939', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:18:16.531431' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:18:16.531504') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:18:21.538688', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:18:21.537088' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:18:21.537157') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:18:26.544303', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:18:26.542837' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:18:26.542904') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:18:31.549982', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:18:31.548319' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:18:31.548389') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:18:36.555572', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:18:36.554104' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:18:36.554172') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:18:41.561180', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:18:41.559640' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:18:41.559708') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:18:46.566886', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:18:46.565353' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:18:46.565423') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:18:51.572518', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:18:51.571026' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:18:51.571097') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:18:56.578182', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:18:56.576638' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:18:56.576708') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:19:01.583790', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:19:01.582288' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:19:01.582358') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:19:06.589418', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:19:06.587889' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:19:06.587960') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.5ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:19:11.595062', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:19:11.593578' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:19:11.593669') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:19:16.600972', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:19:16.599485' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:19:16.599551') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:19:21.606648', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:19:21.605103' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:19:21.605172') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:19:26.612298', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:19:26.610775' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:19:26.610845') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:19:31.617953', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:19:31.616404' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:19:31.616475') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:19:36.623653', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:19:36.622155' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:19:36.622227') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:19:41.629249', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:19:41.627752' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:19:41.627823') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:19:46.634836', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:19:46.633301' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:19:46.633371') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:19:51.640512', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:19:51.639020' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:19:51.639089') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:19:56.646146', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:19:56.644626' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:19:56.644695') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:20:01.652026', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:20:01.650533' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:20:01.650601') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:20:06.657531', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:20:06.656084' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:20:06.656149') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:20:11.663196', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:20:11.661708' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:20:11.661777') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:20:16.668789', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:20:16.667302' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:20:16.667370') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:20:21.674380', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:20:21.672846' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:20:21.672915') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:20:26.679913', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:20:26.678404' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:20:26.678473') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:20:31.685449', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:20:31.683969' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:20:31.684039') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:20:36.691009', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:20:36.689489' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:20:36.689561') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:20:41.696545', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:20:41.695084' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:20:41.695153') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:20:46.702042', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:20:46.700519' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:20:46.700586') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:20:51.707746', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:20:51.706284' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:20:51.706353') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:20:56.713401', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:20:56.711905' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:20:56.711976') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:21:01.719251', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:21:01.717622' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:21:01.717725') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:21:06.724925', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:21:06.723356' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:21:06.723429') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:21:11.730819', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:21:11.729157' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:21:11.729230') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:21:16.736521', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:21:16.734997' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:21:16.735069') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:21:21.742183', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:21:21.740644' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:21:21.740714') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:21:26.747850', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:21:26.746293' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:21:26.746360') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:21:31.753472', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:21:31.751967' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:21:31.752038') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:21:36.759135', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:21:36.757603' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:21:36.757703') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:21:41.764738', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:21:41.763224' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:21:41.763297') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *


Started GET "/en/admin/communities" for 127.0.0.1 at 2013-03-20 20:51:45 +0530
  Processing by Admin::CommunitiesController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[35mPK and serial sequence (7.0ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.1ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (3.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.6ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (8.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.1ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.0ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (1.0ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:21:46.769562', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:21:46.768688' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:21:46.768735') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[36mPK and serial sequence (2.5ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (5.1ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (6.5ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (5.8ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.3ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (1.3ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (1.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (0.7ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.0ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mCommunity Load (1.0ms)[0m  [1mSELECT "communities".* FROM "communities"[0m
  [1m[35mSQL (1.1ms)[0m  SELECT COUNT(*) FROM "community_memberships" WHERE ("community_memberships".community_id = 1)
  [1m[36mLocation Load (0.9ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".community_id = 1) LIMIT 1[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"locations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
Rendered admin/communities/_communities.html.haml (29.1ms)
Rendered layouts/_kissmetrics.haml (3.1ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.9ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.3ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (11.1ms)
Rendered communities/default/logo/logo.haml (87.7ms)
Rendered layouts/_no_javascript.haml (101.7ms)
Rendered layouts/_facebook_sdk.haml (2.7ms)
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.8ms)[0m  [1mSELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) AND participations.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')[0m
Rendered layouts/_logged_in_messages_icon.haml (16.4ms)
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')[0m
Rendered layouts/_logged_in_notifications_icon.haml (11.9ms)
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY') AND (acceptance is null)[0m
Rendered layouts/_logged_in_swap_offers_icon.haml (11.1ms)
  [1m[35mSQL (0.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"authentications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mAuthentication Load (0.9ms)[0m  [1mSELECT "authentications".* FROM "authentications" WHERE "authentications"."user_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
Rendered layouts/_logged_in.haml (56.6ms)
Rendered layouts/_notifications.haml (4.7ms)
  [1m[35mLocation Load (1.4ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1
Rendered layouts/_display_popup.haml (12.5ms)
Rendered layouts/application.haml (248.2ms)
Rendered admin/communities/index.html.haml within layouts/admin (293.4ms)
Completed 200 OK in 1700ms (Views: 277.8ms | ActiveRecord: 88.2ms | Sphinx: 0.0ms)
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:21:51.773248', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:21:51.771719' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:21:51.771791') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:21:56.778944', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:21:56.777401' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:21:56.777475') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:22:01.784669', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:22:01.783061' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:22:01.783152') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:22:06.790292', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:22:06.788744' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:22:06.788820') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:22:11.795769', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:22:11.794266' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:22:11.794338') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:22:16.801365', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:22:16.799867' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:22:16.799937') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:22:21.807011', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:22:21.805462' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:22:21.805532') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:22:26.812546', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:22:26.811045' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:22:26.811115') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:22:31.818299', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:22:31.816759' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:22:31.816831') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:22:36.823886', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:22:36.822370' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:22:36.822441') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:22:41.829586', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:22:41.828030' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:22:41.828101') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:22:46.835377', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:22:46.833874' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:22:46.833944') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:22:51.841114', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:22:51.839608' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:22:51.839678') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:22:56.846811', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:22:56.845275' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:22:56.845345') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:23:01.852509', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:23:01.851008' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:23:01.851078') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:23:06.858207', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:23:06.856671' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:23:06.856743') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:23:11.863833', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:23:11.862327' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:23:11.862398') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (1.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:23:16.869484', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:23:16.867980' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:23:16.868055') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:23:21.874079', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:23:21.872532' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:23:21.872604') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:23:26.879773', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:23:26.878265' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:23:26.878339') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:23:31.885629', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:23:31.884019' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:23:31.884091') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:23:36.891723', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:23:36.889746' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:23:36.889834') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.6ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:23:41.897365', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:23:41.895854' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:23:41.895929') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:23:46.903304', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:23:46.901806' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:23:46.901878') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.6ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:23:51.908890', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:23:51.907383' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:23:51.907456') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (0.9ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:23:56.913919', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:23:56.913315' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:23:56.913350') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.6ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:24:01.917184', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:24:01.915675' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:24:01.915749') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *


Started GET "/en/admin/communities" for 127.0.0.1 at 2013-03-20 20:54:03 +0530
  Processing by Admin::CommunitiesController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mPK and serial sequence (6.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.0ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (0.7ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mSQL (1.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (5.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (3.6ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (1.9ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.1ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.1ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (6.5ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.1ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.3ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.5ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (1.0ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (1.2ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mCommunity Load (1.0ms)[0m  SELECT "communities".* FROM "communities"
  [1m[36mSQL (1.0ms)[0m  [1mSELECT COUNT(*) FROM "community_memberships" WHERE ("community_memberships".community_id = 1)[0m
  [1m[35mLocation Load (1.0ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".community_id = 1) LIMIT 1
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"locations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
Rendered admin/communities/_communities.html.haml (26.2ms)
Rendered layouts/_kissmetrics.haml (3.2ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.8ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.1ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (10.3ms)
Rendered communities/default/logo/logo.haml (2.3ms)
Rendered layouts/_no_javascript.haml (15.2ms)
Rendered layouts/_facebook_sdk.haml (2.4ms)
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.9ms)[0m  SELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) AND participations.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_messages_icon.haml (101.9ms)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.1ms)[0m  SELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_notifications_icon.haml (13.0ms)
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY') AND (acceptance is null)
Rendered layouts/_logged_in_swap_offers_icon.haml (14.2ms)
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"authentications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mAuthentication Load (0.9ms)[0m  SELECT "authentications".* FROM "authentications" WHERE "authentications"."user_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
Rendered layouts/_logged_in.haml (149.8ms)
Rendered layouts/_notifications.haml (7.8ms)
  [1m[36mLocation Load (1.1ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
Rendered layouts/_display_popup.haml (11.8ms)
Rendered layouts/application.haml (254.7ms)
Rendered admin/communities/index.html.haml within layouts/admin (295.8ms)
Completed 200 OK in 1663ms (Views: 278.2ms | ActiveRecord: 84.1ms | Sphinx: 0.0ms)
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:24:06.923193', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:24:06.921689' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:24:06.921763') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:24:11.928816', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:24:11.927317' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:24:11.927387') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:24:16.934520', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:24:16.932933' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:24:16.933005') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m


Started GET "/en/homepage" for 127.0.0.1 at 2013-03-20 20:54:18 +0530
  Processing by HomepageController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[35mPK and serial sequence (6.5ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.1ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.7ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.1ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.0ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.0ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (6.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.1ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.3ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (1.3ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (1.0ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.1ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mSQL (1.6ms)[0m  [1mSELECT 1 FROM "people" INNER JOIN "community_memberships" ON "people".id = "community_memberships".person_id WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (("community_memberships".community_id = 1)) LIMIT 1[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.6ms)[0m  [1mSELECT "communities".* FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY'))[0m
~~~~~~~~~~~~~~~not request.xhr~~~~~~~~~
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"news_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.3ms)[0m  [1mSELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 1)[0m
  [1m[35mCommunity Load (1.0ms)[0m  SELECT "communities".* FROM "communities"
  [1m[36mSQL (1.0ms)[0m  [1mSELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 1) LIMIT 2[0m
  [1m[35mSQL (3.1ms)[0m  SELECT COUNT(*) FROM "listings" WHERE "listings"."listing_type" = 'offer' AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')
 ) AND (open = '1' AND (valid_until IS NULL OR valid_until > '2013-03-20 15:24:19'))
  [1m[36mListing Load (4.0ms)[0m  [1mSELECT "listings".* FROM "listings" WHERE "listings"."listing_type" = 'offer' AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')
 ) AND (open = '1' AND (valid_until IS NULL OR valid_until > '2013-03-20 15:24:19')) ORDER BY listings.created_at DESC LIMIT 3 OFFSET 0[0m
  [1m[35mListingImage Load (1.7ms)[0m  SELECT "listing_images".* FROM "listing_images" WHERE ("listing_images".listing_id IN (5,4,3))
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (1.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"diet_listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.8ms)[0m  [1mSELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 5)[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"comments"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.0ms)[0m  [1mSELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 5)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mSELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 4)[0m
  [1m[35mSQL (0.5ms)[0m  SELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 4)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  SELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 3)
  [1m[36mSQL (0.8ms)[0m  [1mSELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 3)[0m
Rendered homepage/_recent_listing.haml (62.4ms)
Rendered common/_staples.haml (2.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
Rendered homepage/_user_communities.haml (5.2ms)
Rendered common/_staples.haml (2.3ms)
  [1m[36mLocation Load (0.9ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
Rendered common/_staples.haml (2.3ms)
Rendered homepage/_profile_info_empty_notification.haml (3.5ms)
Rendered common/_staples.haml (2.3ms)
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"event_feed_events"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "event_feed_events" WHERE ("event_feed_events".community_id = 1)[0m
Rendered common/_staples.haml (2.2ms)
  [1m[35mEventFeedEvent Load (1.5ms)[0m  SELECT "event_feed_events".* FROM "event_feed_events" WHERE ("event_feed_events".community_id = 1) ORDER BY id DESC LIMIT 5
  [1m[36mPerson Load (1.7ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bpSZp8Kxar4Oag3a6HdQnY' LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
Rendered event_feed_events/_join.haml (9.3ms)
  [1m[36mPerson Load (1.6ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'c7iNZKKvar4Oae3a6HdQnY' LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
Rendered event_feed_events/_join.haml (7.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
Rendered event_feed_events/_login.haml (4.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
Rendered event_feed_events/_login.haml (4.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
Rendered event_feed_events/_login.haml (4.5ms)
Rendered homepage/_event_feed_event.haml (134.8ms)
Rendered homepage/_event_feed.haml (141.3ms)
Rendered common/_staples.haml (2.5ms)
Rendered common/_staples.haml (2.5ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 1) LIMIT 2
Rendered homepage/_news_items.haml (5.7ms)
Rendered common/_staples.haml (2.3ms)
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"polls"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPoll Load (1.0ms)[0m  SELECT "polls".* FROM "polls" WHERE "polls"."active" = 't' AND ("polls".community_id = 1) LIMIT 1
Rendered layouts/_kissmetrics.haml (3.3ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (2.0ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.2ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (10.7ms)
Rendered communities/default/logo/logo.haml (2.3ms)
Rendered layouts/_no_javascript.haml (102.8ms)
Rendered layouts/_facebook_sdk.haml (2.6ms)
  [1m[36mSQL (2.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.9ms)[0m  [1mSELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) AND participations.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')[0m
Rendered layouts/_logged_in_messages_icon.haml (16.7ms)
  [1m[35mSQL (1.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.5ms)[0m  [1mSELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')[0m
Rendered layouts/_logged_in_notifications_icon.haml (12.3ms)
  [1m[35mSQL (1.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.5ms)[0m  [1mSELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY') AND (acceptance is null)[0m
Rendered layouts/_logged_in_swap_offers_icon.haml (9.9ms)
  [1m[35mSQL (1.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"authentications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mAuthentication Load (0.6ms)[0m  [1mSELECT "authentications".* FROM "authentications" WHERE "authentications"."user_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
Rendered layouts/_logged_in.haml (56.6ms)
Rendered layouts/_notifications.haml (5.0ms)
Rendered layouts/_display_popup.haml (7.7ms)
Rendered homepage/index.haml within layouts/application (654.1ms)
Completed 200 OK in 1974ms (Views: 617.9ms | ActiveRecord: 115.8ms | Sphinx: 0.0ms)
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:24:21.940355', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:24:21.938769' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:24:21.938844') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *


Started GET "/en/listings/new/offer" for 127.0.0.1 at 2013-03-20 20:54:23 +0530
  Processing by ListingsController#new as HTML
  Parameters: {"locale"=>"en", "type"=>"offer"}
  [1m[35mPK and serial sequence (6.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.0ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.5ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.3ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.0ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (1.9ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (1.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.1ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (5.2ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (6.1ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (3.7ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.5ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (1.5ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (1.2ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (0.6ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>NEW >>>>>>>>>>>>>>>>>>>>>>>{"controller"=>"listings", "action"=>"new", "locale"=>"en", "type"=>"offer"}>>>>>>>>>>>>>>>
  [1m[36mFormDetail Load (1.7ms)[0m  [1mSELECT "form_details".* FROM "form_details" LIMIT 1[0m
  [1m[35mLocation Load (1.1ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"locations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listing_images"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
Rendered listings/form/_javascripts.haml (3.9ms)
Rendered listings/form/_title_step.haml (4.5ms)
Rendered listings/help_texts/_help_share_type.en.haml (2.3ms)
Rendered listings/help_texts/_help_tags.en.haml (2.3ms)
Rendered listings/help_texts/_help_valid_until.en.haml (2.5ms)
Rendered listings/_help_texts.haml (18.8ms)
Rendered listings/form/_form_content.haml (62.2ms)
Rendered layouts/_kissmetrics.haml (3.0ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (2.2ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (90.7ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (99.8ms)
Rendered communities/default/logo/logo.haml (2.8ms)
Rendered layouts/_no_javascript.haml (17.6ms)
Rendered layouts/_facebook_sdk.haml (2.5ms)
  [1m[36mSQL (2.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.8ms)[0m  [1mSELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) AND participations.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')[0m
Rendered layouts/_logged_in_messages_icon.haml (18.6ms)
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')[0m
Rendered layouts/_logged_in_notifications_icon.haml (13.5ms)
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY') AND (acceptance is null)[0m
Rendered layouts/_logged_in_swap_offers_icon.haml (14.5ms)
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"authentications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mAuthentication Load (0.9ms)[0m  [1mSELECT "authentications".* FROM "authentications" WHERE "authentications"."user_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
Rendered layouts/_logged_in.haml (69.8ms)
Rendered layouts/_notifications.haml (9.3ms)
Rendered layouts/_display_popup.haml (7.3ms)
Rendered listings/new.haml within layouts/application (345.9ms)
Completed 200 OK in 1859ms (Views: 353.3ms | ActiveRecord: 89.4ms | Sphinx: 0.0ms)
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:24:26.946059', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:24:26.944466' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:24:26.944541') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:24:31.951647', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:24:31.950104' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:24:31.950178') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.7ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:24:36.957394', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:24:36.955761' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:24:36.955833') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.1ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:24:41.962857', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:24:41.962249' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:24:41.962285') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:24:46.967279', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:24:46.965790' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:24:46.965864') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:24:51.972883', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:24:51.971389' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:24:51.971462') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:24:56.978561', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:24:56.977020' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:24:56.977090') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (1.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:25:01.984147', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:25:01.982653' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:25:01.982716') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:25:06.988646', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:25:06.987115' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:25:06.987187') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:25:11.994293', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:25:11.992751' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:25:11.992823') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:25:16.999845', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:25:16.998347' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:25:16.998418') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:25:22.005470', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:25:22.003970' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:25:22.004040') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:25:27.011207', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:25:27.009676' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:25:27.009741') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:25:32.016738', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:25:32.015273' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:25:32.015345') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:25:37.022263', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:25:37.020736' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:25:37.020804') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:25:42.027893', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:25:42.026391' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:25:42.026466') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.5ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:25:47.033477', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:25:47.031975' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:25:47.032043') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (1.9ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:25:52.038438', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:25:52.037838' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:25:52.037870') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:25:57.042679', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:25:57.041187' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:25:57.041253') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.6ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:26:02.048240', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:26:02.046768' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:26:02.046836') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:26:07.055137', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:26:07.053080' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:26:07.053148') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:26:12.060709', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:26:12.059207' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:26:12.059280') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:26:17.066382', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:26:17.064834' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:26:17.064906') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:26:22.071896', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:26:22.070412' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:26:22.070482') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:26:27.077519', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:26:27.076018' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:26:27.076085') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:26:32.083204', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:26:32.081666' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:26:32.081742') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *


Started GET "/en/homepage" for 127.0.0.1 at 2013-03-20 20:56:33 +0530
  Processing by HomepageController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[35mPK and serial sequence (3.4ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (5.9ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (1.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.6ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (3.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.0ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (1.9ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (2.4ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (1.5ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (2.3ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (1.5ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.4ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (1.5ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (1.0ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.0ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mSQL (1.4ms)[0m  [1mSELECT 1 FROM "people" INNER JOIN "community_memberships" ON "people".id = "community_memberships".person_id WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (("community_memberships".community_id = 1)) LIMIT 1[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.7ms)[0m  [1mSELECT "communities".* FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY'))[0m
~~~~~~~~~~~~~~~not request.xhr~~~~~~~~~
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"news_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.8ms)[0m  [1mSELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 1)[0m
  [1m[35mCommunity Load (1.0ms)[0m  SELECT "communities".* FROM "communities"
  [1m[36mSQL (1.0ms)[0m  [1mSELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 1) LIMIT 2[0m
  [1m[35mSQL (2.2ms)[0m  SELECT COUNT(*) FROM "listings" WHERE "listings"."listing_type" = 'offer' AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')
 ) AND (open = '1' AND (valid_until IS NULL OR valid_until > '2013-03-20 15:26:34'))
  [1m[36mListing Load (3.2ms)[0m  [1mSELECT "listings".* FROM "listings" WHERE "listings"."listing_type" = 'offer' AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')
 ) AND (open = '1' AND (valid_until IS NULL OR valid_until > '2013-03-20 15:26:34')) ORDER BY listings.created_at DESC LIMIT 3 OFFSET 0[0m
  [1m[35mListingImage Load (1.1ms)[0m  SELECT "listing_images".* FROM "listing_images" WHERE ("listing_images".listing_id IN (5,4,3))
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"diet_listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 5)[0m
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"comments"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.8ms)[0m  [1mSELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 5)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 4)[0m
  [1m[35mSQL (0.8ms)[0m  SELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 4)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 3)
  [1m[36mSQL (0.8ms)[0m  [1mSELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 3)[0m
Rendered homepage/_recent_listing.haml (44.8ms)
Rendered common/_staples.haml (2.5ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
Rendered homepage/_user_communities.haml (4.8ms)
Rendered common/_staples.haml (88.3ms)
  [1m[36mLocation Load (1.2ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
Rendered common/_staples.haml (2.4ms)
Rendered homepage/_profile_info_empty_notification.haml (4.1ms)
Rendered common/_staples.haml (2.5ms)
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"event_feed_events"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.3ms)[0m  [1mSELECT COUNT(*) FROM "event_feed_events" WHERE ("event_feed_events".community_id = 1)[0m
Rendered common/_staples.haml (2.4ms)
  [1m[35mEventFeedEvent Load (1.6ms)[0m  SELECT "event_feed_events".* FROM "event_feed_events" WHERE ("event_feed_events".community_id = 1) ORDER BY id DESC LIMIT 5
  [1m[36mPerson Load (0.8ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bpSZp8Kxar4Oag3a6HdQnY' LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
Rendered event_feed_events/_join.haml (8.3ms)
  [1m[36mPerson Load (1.6ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'c7iNZKKvar4Oae3a6HdQnY' LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
Rendered event_feed_events/_join.haml (7.5ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
Rendered event_feed_events/_login.haml (4.3ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
Rendered event_feed_events/_login.haml (4.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
Rendered event_feed_events/_login.haml (4.3ms)
Rendered homepage/_event_feed_event.haml (48.8ms)
Rendered homepage/_event_feed.haml (55.7ms)
Rendered common/_staples.haml (2.3ms)
Rendered common/_staples.haml (2.1ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 1) LIMIT 2
Rendered homepage/_news_items.haml (5.4ms)
Rendered common/_staples.haml (2.2ms)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"polls"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPoll Load (1.0ms)[0m  SELECT "polls".* FROM "polls" WHERE "polls"."active" = 't' AND ("polls".community_id = 1) LIMIT 1
Rendered layouts/_kissmetrics.haml (3.2ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.8ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.2ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (10.9ms)
Rendered communities/default/logo/logo.haml (2.5ms)
Rendered layouts/_no_javascript.haml (16.1ms)
Rendered layouts/_facebook_sdk.haml (2.4ms)
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.1ms)[0m  [1mSELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) AND participations.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')[0m
Rendered layouts/_logged_in_messages_icon.haml (25.3ms)
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.1ms)[0m  [1mSELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')[0m
Rendered layouts/_logged_in_notifications_icon.haml (19.4ms)
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.2ms)[0m  [1mSELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY') AND (acceptance is null)[0m
Rendered layouts/_logged_in_swap_offers_icon.haml (14.4ms)
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"authentications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mAuthentication Load (1.1ms)[0m  [1mSELECT "authentications".* FROM "authentications" WHERE "authentications"."user_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
Rendered layouts/_logged_in.haml (81.3ms)
Rendered layouts/_notifications.haml (7.4ms)
Rendered layouts/_display_popup.haml (6.9ms)
Rendered homepage/index.haml within layouts/application (579.0ms)
Completed 200 OK in 2006ms (Views: 538.1ms | ActiveRecord: 107.8ms | Sphinx: 0.0ms)
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (1.7ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:26:37.088779', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:26:37.087215' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:26:37.087289') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m


Started GET "/listings/5-image-test?locale=en" for 127.0.0.1 at 2013-03-20 20:56:40 +0530
  Processing by ListingsController#show as HTML
  Parameters: {"locale"=>"en", "id"=>"5-image-test"}
  [1m[35mPK and serial sequence (6.7ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (5.1ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.6ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (3.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.0ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (2.1ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (1.9ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.4ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (3.7ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (6.1ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.6ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (0.9ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:26:42.092923', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:26:42.092339' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:26:42.092370') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[35mSQL (2.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (0.7ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (1.5ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (1.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (1.2ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.0ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mListing Load (1.2ms)[0m  SELECT "listings".* FROM "listings" WHERE "listings"."id" = 5 LIMIT 1
  [1m[36mListing Count (1.4ms)[0m  [1m
 SELECT count(*) 
 FROM community_memberships, communities_listings 
 WHERE community_memberships.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' 
 AND community_memberships.community_id = communities_listings.community_id
 AND communities_listings.listing_id = '5'
 AND communities_listings.community_id = '1'
 [0m
  [1m[35mSQL (0.5ms)[0m  BEGIN
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"taggings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.2ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags".id = "taggings".tag_id WHERE (("taggings".taggable_id = 5) AND ("taggings".taggable_type = 'Listing')) AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)
  [1m[36mAREL (1.9ms)[0m  [1mUPDATE "listings" SET "times_viewed" = 2, "updated_at" = '2013-03-20 15:26:42.457865' WHERE "listings"."id" = 5[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.2ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags".id = "taggings".tag_id WHERE (("taggings".taggable_id = 5) AND ("taggings".taggable_type = 'Listing')) AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)
  [1m[36mSQL (34.2ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listing_images"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.7ms)[0m  [1mSELECT COUNT(*) FROM "listing_images" WHERE ("listing_images".listing_id = 5)[0m
  [1m[35mPerson Load (0.6ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
Rendered listings/_edit_links.haml (3.6ms)
Rendered listings/_message_links.haml (6.5ms)
  [1m[36mSQL (0.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"diet_listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.4ms)[0m  SELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 5)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"testimonials"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.8ms)[0m  SELECT COUNT(*) FROM "testimonials" WHERE ("testimonials".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
  [1m[36mSQL (1.4ms)[0m  [1mSELECT 1 FROM "people" INNER JOIN "community_memberships" ON "people".id = "community_memberships".person_id WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (("community_memberships".community_id = 1)) LIMIT 1[0m
  [1m[35mLocation Load (1.1ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".listing_id = 5 AND (location_type = 'origin_loc')) LIMIT 1
  [1m[36mSwapItem Load (0.6ms)[0m  [1mSELECT "swap_items".* FROM "swap_items" WHERE ((receiver_listing_id = 5 or receiver_listing_id = 5) and acceptance is NULL) LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"comments"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.4ms)[0m  [1mSELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 5)[0m
  [1m[35mComment Load (0.4ms)[0m  SELECT "comments".* FROM "comments" WHERE ("comments".listing_id = 5)
Rendered listings/_comment.haml (0.0ms)
Rendered listings/_follow_checkbox.haml (3.6ms)
Rendered listings/_comment_form.haml (16.9ms)
Rendered layouts/_kissmetrics.haml (3.2ms)
Rendered communities/default/logo/logo.haml (2.5ms)
Rendered layouts/_no_javascript.haml (16.8ms)
Rendered layouts/_facebook_sdk.haml (2.4ms)
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.7ms)[0m  [1mSELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) AND participations.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')[0m
Rendered layouts/_logged_in_messages_icon.haml (16.2ms)
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.7ms)[0m  [1mSELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')[0m
Rendered layouts/_logged_in_notifications_icon.haml (13.0ms)
  [1m[35mSQL (1.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY') AND (acceptance is null)[0m
Rendered layouts/_logged_in_swap_offers_icon.haml (11.8ms)
  [1m[35mSQL (1.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"authentications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mAuthentication Load (0.4ms)[0m  [1mSELECT "authentications".* FROM "authentications" WHERE "authentications"."user_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
Rendered layouts/_logged_in.haml (60.6ms)
Rendered layouts/_notifications.haml (94.3ms)
  [1m[35mLocation Load (1.2ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1
Rendered layouts/_display_popup.haml (13.4ms)
Rendered listings/show.haml within layouts/application (472.6ms)
Completed 200 OK in 2037ms (Views: 479.0ms | ActiveRecord: 137.6ms | Sphinx: 0.0ms)


Started GET "/listings/5-image-test/edit?locale=en" for 127.0.0.1 at 2013-03-20 20:56:45 +0530
  Processing by ListingsController#edit as HTML
  Parameters: {"locale"=>"en", "id"=>"5-image-test"}
  [1m[36mPK and serial sequence (7.8ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.4ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.6ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (1.4ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mSQL (2.6ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.5ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (1.5ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.2ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (7.1ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.4ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (6.5ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.3ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (1.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:26:47.095482', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:26:47.094634' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:26:47.094678') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[36mSQL (2.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.4ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.6ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (1.3ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (1.1ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mListing Load (1.3ms)[0m  [1mSELECT "listings".* FROM "listings" WHERE "listings"."id" = 5 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mLocation Load (0.5ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".listing_id = 5 AND (location_type = 'origin_loc')) LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"locations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listing_images"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.4ms)[0m  SELECT COUNT(*) FROM "listing_images" WHERE ("listing_images".listing_id = 5)
Rendered listings/form/_javascripts.haml (3.7ms)
Rendered listings/form/_share_type.haml (8.2ms)
Rendered listings/form/_title_step.haml (5.2ms)
Rendered listings/form/_description.haml (3.1ms)
Rendered listings/form/_receipe.haml (3.3ms)
Rendered listings/form/_portions.haml (2.9ms)
  [1m[36mActsAsTaggableOn::Tag Load (1.8ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags".id = "taggings".tag_id WHERE (("taggings".taggable_id = 5) AND ("taggings".taggable_type = 'Listing')) AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
Rendered listings/form/_tag_list.haml (10.6ms)
  [1m[35mDiet Load (2.0ms)[0m  SELECT "diets".* FROM "diets" INNER JOIN "diet_listings" ON "diets".id = "diet_listings".diet_id WHERE (("diet_listings".listing_id = 5))
Rendered listings/form/_restriction_list.html.haml (11.0ms)
Rendered listings/form/_valid_until_radio_buttons.haml (7.8ms)
Rendered listings/form/_valid_until.haml (13.7ms)
Rendered listings/form/_origin.haml (5.1ms)
  [1m[36mLocation Load (1.3ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".community_id = 1) LIMIT 1[0m
Rendered listings/form/_googlemap.haml (6.7ms)
Rendered listings/form/_images.haml (4.8ms)
Rendered listings/form/_visibility.haml (4.0ms)
Rendered listings/edit.haml within layouts/application (271.6ms)
Completed 500 Internal Server Error in 1843ms

ActionView::Template::Error (Missing partial listings/form/additional_details with {:handlers=>[:erb, :rjs, :builder, :rhtml, :rxml, :haml, :rabl], :formats=>[:html], :locale=>[:en, :en]} in view paths "/home/chaitanya/workArea/ST-to-RGF/app/views", "/home/chaitanya/workArea/ST-to-RGF/vendor/plugins/np_guid/app/views", "/home/chaitanya/workArea/ST-to-RGF/vendor/plugins/i18n_action_mailer/app/views", "/home/chaitanya/workArea/ST-to-RGF/vendor/plugins/dynamic_form/app/views", "/home/chaitanya/.rvm/gems/ruby-1.9.3-p194@strgf/gems/devise-2.0.0.rc/app/views"):
    26:         = render :partial => "listings/form/googlemap", :locals => { :form => form, :rideshare => false}
    27:         = render :partial => "listings/form/images", :locals => { :form => form }
    28:         = render :partial => "listings/form/visibility", :locals => { :form => form }
    29:         = render :partial => "listings/form/additional_details", :locals => { :form => form }
    30:         = render :partial => "listings/form/send_button", :locals => { :form => form }
    31: 
    32: - ["help_share_type", "help_tags", "help_valid_until"].each do |field|
  app/views/listings/edit.haml:29:in `block in _app_views_listings_edit_haml___634751690_148640090_57296341'
  app/views/listings/edit.haml:15:in `_app_views_listings_edit_haml___634751690_148640090_57296341'

Rendered /home/chaitanya/.rvm/gems/ruby-1.9.3-p194@strgf/gems/actionpack-3.0.19/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.7ms)
Rendered /home/chaitanya/.rvm/gems/ruby-1.9.3-p194@strgf/gems/actionpack-3.0.19/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (19.0ms)
Rendered /home/chaitanya/.rvm/gems/ruby-1.9.3-p194@strgf/gems/actionpack-3.0.19/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (25.8ms)
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:26:52.099484', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:26:52.098022' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:26:52.098093') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.5ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:26:57.105110', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:26:57.103634' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:26:57.103702') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:27:02.111140', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:27:02.109538' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:27:02.109608') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *


Started GET "/listings/5-image-test/edit?locale=en" for 127.0.0.1 at 2013-03-20 20:57:03 +0530
  Processing by ListingsController#edit as HTML
  Parameters: {"locale"=>"en", "id"=>"5-image-test"}
  [1m[35mPK and serial sequence (3.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (2.1ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (1.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (0.7ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (1.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (2.9ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (1.9ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.0ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.1ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.0ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (6.0ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.1ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.3ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (1.4ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (1.0ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.0ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mListing Load (1.3ms)[0m  SELECT "listings".* FROM "listings" WHERE "listings"."id" = 5 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mLocation Load (1.2ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".listing_id = 5 AND (location_type = 'origin_loc')) LIMIT 1
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"locations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listing_images"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.8ms)[0m  [1mSELECT COUNT(*) FROM "listing_images" WHERE ("listing_images".listing_id = 5)[0m
Rendered listings/form/_javascripts.haml (3.6ms)
Rendered listings/form/_share_type.haml (2.4ms)
Rendered listings/form/_title_step.haml (3.4ms)
Rendered listings/form/_description.haml (2.8ms)
Rendered listings/form/_receipe.haml (2.9ms)
Rendered listings/form/_portions.haml (2.6ms)
  [1m[35mActsAsTaggableOn::Tag Load (1.6ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags".id = "taggings".tag_id WHERE (("taggings".taggable_id = 5) AND ("taggings".taggable_type = 'Listing')) AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)
Rendered listings/form/_tag_list.haml (10.1ms)
  [1m[36mDiet Load (1.4ms)[0m  [1mSELECT "diets".* FROM "diets" INNER JOIN "diet_listings" ON "diets".id = "diet_listings".diet_id WHERE (("diet_listings".listing_id = 5))[0m
Rendered listings/form/_restriction_list.html.haml (16.6ms)
Rendered listings/form/_valid_until_radio_buttons.haml (7.4ms)
Rendered listings/form/_valid_until.haml (12.5ms)
Rendered listings/form/_origin.haml (4.9ms)
  [1m[35mLocation Load (1.4ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".community_id = 1) LIMIT 1
Rendered listings/form/_googlemap.haml (94.8ms)
Rendered listings/form/_images.haml (5.0ms)
Rendered listings/form/_visibility.haml (4.8ms)
Rendered listings/form/_additional_details_step.html.haml (5.8ms)
Rendered listings/form/_send_button.haml (7.4ms)
Rendered listings/help_texts/_help_share_type.en.haml (2.6ms)
Rendered listings/_help_texts.haml (11.7ms)
Rendered listings/help_texts/_help_tags.en.haml (2.4ms)
Rendered listings/_help_texts.haml (7.3ms)
Rendered listings/help_texts/_help_valid_until.en.haml (2.4ms)
Rendered listings/_help_texts.haml (7.0ms)
Rendered layouts/_kissmetrics.haml (4.9ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.7ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.1ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (10.5ms)
Rendered communities/default/logo/logo.haml (2.5ms)
Rendered layouts/_no_javascript.haml (16.2ms)
Rendered layouts/_facebook_sdk.haml (2.5ms)
  [1m[36mSQL (2.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.7ms)[0m  [1mSELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) AND participations.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')[0m
Rendered layouts/_logged_in_messages_icon.haml (22.1ms)
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.0ms)[0m  [1mSELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')[0m
Rendered layouts/_logged_in_notifications_icon.haml (11.3ms)
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY') AND (acceptance is null)[0m
Rendered layouts/_logged_in_swap_offers_icon.haml (10.4ms)
  [1m[35mSQL (1.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"authentications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mAuthentication Load (1.0ms)[0m  [1mSELECT "authentications".* FROM "authentications" WHERE "authentications"."user_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
Rendered layouts/_logged_in.haml (155.3ms)
Rendered layouts/_notifications.haml (5.3ms)
  [1m[35mLocation Load (1.1ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1
Rendered layouts/_display_popup.haml (11.2ms)
Rendered listings/edit.haml within layouts/application (534.6ms)
Completed 200 OK in 2031ms (Views: 522.0ms | ActiveRecord: 86.4ms | Sphinx: 0.0ms)
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (1.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:27:07.115365', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:27:07.114760' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:27:07.114796') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:27:12.118928', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:27:12.117448' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:27:12.117509') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (1.1ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:27:17.123661', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:27:17.123058' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:27:17.123093') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (0.9ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:27:22.126335', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:27:22.125688' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:27:22.125733') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *


Started POST "/listings/5-image-test?locale=en" for 127.0.0.1 at 2013-03-20 20:57:23 +0530
  Processing by ListingsController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"WJyxSApP1ZoDya7qcieJqUg5S0Zc4q5IQ7Pj2USt5FE=", "listing"=>{"share_type"=>"trade", "listing_type"=>"offer", "category"=>"item", "title"=>"image test", "description"=>"detailed description", "link_to_information"=>"", "number_of_portions"=>"number of portions", "tag_list"=>"", "diet_tag_names"=>"", "origin"=>"", "origin_loc_attributes"=>{"address"=>"", "google_address"=>"", "latitude"=>"", "longitude"=>"", "location_type"=>"origin_loc"}, "listing_images_attributes"=>{"0"=>{"image"=>#<ActionDispatch::Http::UploadedFile:0x118a84e4 @original_filename="3938C61F-5B87-4A23-8661-6DD9B2C66501.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"listing[listing_images_attributes][0][image]\"; filename=\"3938C61F-5B87-4A23-8661-6DD9B2C66501.jpg\"\r\nContent-Type: image/jpeg\r\n", @tempfile=#<File:/tmp/RackMultipart20130320-21568-1se4i7t>>}}, "visibility"=>"everybody", "current_community_id"=>"1", "story_behind"=>"estoruy", "ingredient_list"=>"ingredient", "trade_conditions"=>"trade request"}, "valid_until_select"=>"for_now", "commit"=>"Save", "locale"=>"en", "id"=>"5-image-test"}
  [1m[36mPK and serial sequence (6.0ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.0ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (1.4ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.1ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (3.9ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (1.0ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (1.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.0ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (3.8ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (2.5ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.0ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.3ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.6ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (1.0ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (1.0ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mSQL (1.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mListing Load (0.6ms)[0m  [1mSELECT "listings".* FROM "listings" WHERE "listings"."id" = 5 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mLocation Load (0.5ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".listing_id = 5 AND (location_type = 'origin_loc')) LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  BEGIN
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags".id = "taggings".tag_id WHERE (("taggings".taggable_id = 5) AND ("taggings".taggable_type = 'Listing')) AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags".id = "taggings".tag_id WHERE (("taggings".taggable_id = 5) AND ("taggings".taggable_type = 'Listing')) AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)
  [1m[36mSQL (0.6ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (0.3ms)[0m  BEGIN
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listing_images"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
[paperclip] identify -format %wx%h '/tmp/stream20130320-21568-102yg83.jpg[0]' 2>/dev/null
[paperclip] convert '/tmp/stream20130320-21568-102yg83.jpg[0]' -resize "300x640>" '/tmp/stream20130320-21568-102yg8320130320-21568-17frrpd' 2>/dev/null
[paperclip] identify -format %wx%h '/tmp/stream20130320-21568-102yg83.jpg[0]' 2>/dev/null
[paperclip] convert '/tmp/stream20130320-21568-102yg83.jpg[0]' -resize "x85" -crop "85x85+23+0" +repage '/tmp/stream20130320-21568-102yg8320130320-21568-io4f1h' 2>/dev/null
[paperclip] identify -format %wx%h '/tmp/stream20130320-21568-102yg83.jpg[0]' 2>/dev/null
[paperclip] convert '/tmp/stream20130320-21568-102yg83.jpg[0]' -resize "300x640>" '/tmp/stream20130320-21568-102yg8320130320-21568-ldx74z' 2>/dev/null
  [1m[35mSQL (2.6ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities_listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.8ms)[0m  SELECT * FROM "communities" INNER JOIN "communities_listings" ON "communities".id = "communities_listings".community_id WHERE ("communities_listings".listing_id = 5 )
  [1m[36mSQL (1.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities_listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mAREL (0.9ms)[0m  DELETE FROM "communities_listings" WHERE "communities_listings"."listing_id" = 5 AND "communities_listings"."community_id" IN (1)
  [1m[36mCommunity Load (1.5ms)[0m  [1mSELECT "communities".* FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY'))[0m
  [1m[35mSQL (1.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities_listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.7ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (1.8ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "communities_listings" ("community_id", "listing_id") VALUES (1, 5)[0m
  [1m[35mPK and serial sequence (2.4ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (1.7ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mAREL (1.2ms)[0m  UPDATE "listings" SET "origin" = '', "delta" = 't', "updated_at" = '2013-03-20 15:27:26.259533' WHERE "listings"."id" = 5
  [1m[36mSQL (1.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listing_images"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.1ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_images"'::regclass
  [1m[36mSQL (19.5ms)[0m  [1mINSERT INTO "listing_images" ("listing_id", "created_at", "updated_at", "image_file_name", "image_content_type", "image_file_size", "image_updated_at") VALUES (5, '2013-03-20 15:27:26.266857', '2013-03-20 15:27:26.266857', '3938C61F-5B87-4A23-8661-6DD9B2C66501.jpg', 'image/jpeg', 52473, '2013-03-20 15:27:25.491073') RETURNING "id"[0m
[paperclip] Saving attachments.
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:27:27.129605', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:27:27.128095' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:27:27.128167') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:27:32.135455', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:27:32.133941' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:27:32.134017') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[35mActsAsTaggableOn::Tag Load (1.7ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags".id = "taggings".tag_id WHERE (("taggings".taggable_id = 5) AND ("taggings".taggable_type = 'Listing')) AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)
  [1m[36mDiet Load (1.2ms)[0m  [1mSELECT "diets".* FROM "diets" INNER JOIN "diet_listings" ON "diets".id = "diet_listings".diet_id WHERE (("diet_listings".listing_id = 5))[0m
  [1m[35mSQL (44.6ms)[0m  COMMIT
  [1m[36mLocation Load (1.0ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".listing_id = 5) LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  BEGIN
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:ListingUpdatedJob
listing_id: 5
host: !binary |-
 bG9jYWxob3N0
', NULL, '2013-03-20 15:27:35.671287', NULL, NULL, NULL, '2013-03-20 15:27:35.671440', '2013-03-20 15:27:35.671440', NULL) RETURNING "id"[0m
  [1m[35mSQL (27.4ms)[0m  COMMIT
Redirected to http://localhost:3000/listings/5-image-test?locale=en
Completed 302 Found in 11843ms


Started GET "/listings/5-image-test?locale=en" for 127.0.0.1 at 2013-03-20 20:57:35 +0530
  Processing by ListingsController#show as HTML
  Parameters: {"locale"=>"en", "id"=>"5-image-test"}
  [1m[36mPK and serial sequence (6.7ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (2.0ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (1.3ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (5.9ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.1ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (1.9ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.8ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.1ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (6.0ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.0ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (27.9ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:27:37.140254', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:27:37.139576' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:27:37.139615') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mCommunity Load (1.1ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'localhost' LIMIT 1
  [1m[36mListing Load (0.9ms)[0m  [1mSELECT "listings".* FROM "listings" WHERE "listings"."id" = 5 LIMIT 1[0m
  [1m[35mPerson Load (1.1ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mSQL (1.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listing_followers"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (1.3ms)[0m  SELECT * FROM "people" INNER JOIN "listing_followers" ON "people".id = "listing_followers".person_id WHERE ("listing_followers".listing_id = 5 )
  [1m[36mSQL (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mAREL (0.4ms)[0m  DELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 244
  [1m[36mSQL (3.0ms)[0m  [1mCOMMIT[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (1.1ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:27:37.269492', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:27:37.268812' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:27:37.268854') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (0.9ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:27:37.271781', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:27:37.271297' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:27:37.271317') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[36mSQL (2.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.0ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.4ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (1.0ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (1.0ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mListing Load (0.7ms)[0m  [1mSELECT "listings".* FROM "listings" WHERE "listings"."id" = 5 LIMIT 1[0m
  [1m[35mListing Count (1.5ms)[0m  
 SELECT count(*) 
 FROM community_memberships, communities_listings 
 WHERE community_memberships.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' 
 AND community_memberships.community_id = communities_listings.community_id
 AND communities_listings.listing_id = '5'
 AND communities_listings.community_id = '1'
 
  [1m[36mSQL (0.5ms)[0m  [1mBEGIN[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.4ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags".id = "taggings".tag_id WHERE (("taggings".taggable_id = 5) AND ("taggings".taggable_type = 'Listing')) AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)
  [1m[36mAREL (1.1ms)[0m  [1mUPDATE "listings" SET "times_viewed" = 3, "updated_at" = '2013-03-20 15:27:37.476399' WHERE "listings"."id" = 5[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.4ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags".id = "taggings".tag_id WHERE (("taggings".taggable_id = 5) AND ("taggings".taggable_type = 'Listing')) AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)
  [1m[36mSQL (52.2ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listing_images"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.0ms)[0m  [1mSELECT COUNT(*) FROM "listing_images" WHERE ("listing_images".listing_id = 5)[0m
  [1m[35mListingImage Load (1.0ms)[0m  SELECT "listing_images".* FROM "listing_images" WHERE ("listing_images".listing_id = 5)
  [1m[36mPerson Load (1.6ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
Rendered listings/_edit_links.haml (3.6ms)
Rendered listings/_message_links.haml (4.4ms)
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"diet_listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.8ms)[0m  [1mSELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 5)[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"testimonials"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.2ms)[0m  [1mSELECT COUNT(*) FROM "testimonials" WHERE ("testimonials".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')[0m
  [1m[35mSQL (1.5ms)[0m  SELECT 1 FROM "people" INNER JOIN "community_memberships" ON "people".id = "community_memberships".person_id WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (("community_memberships".community_id = 1)) LIMIT 1
  [1m[36mLocation Load (1.1ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".listing_id = 5 AND (location_type = 'origin_loc')) LIMIT 1[0m
  [1m[35mSwapItem Load (1.3ms)[0m  SELECT "swap_items".* FROM "swap_items" WHERE ((receiver_listing_id = 5 or receiver_listing_id = 5) and acceptance is NULL) LIMIT 1
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"comments"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.0ms)[0m  SELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 5)
  [1m[36mComment Load (1.0ms)[0m  [1mSELECT "comments".* FROM "comments" WHERE ("comments".listing_id = 5)[0m
Rendered listings/_comment.haml (0.0ms)
Rendered listings/_follow_checkbox.haml (3.6ms)
Rendered listings/_comment_form.haml (20.5ms)
Rendered layouts/_kissmetrics.haml (3.1ms)
Rendered communities/default/logo/logo.haml (2.4ms)
Rendered layouts/_no_javascript.haml (16.6ms)
Rendered layouts/_facebook_sdk.haml (2.5ms)
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.9ms)[0m  SELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) AND participations.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_messages_icon.haml (16.5ms)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.1ms)[0m  SELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_notifications_icon.haml (105.1ms)
  [1m[36mSQL (2.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.0ms)[0m  SELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY') AND (acceptance is null)
Rendered layouts/_logged_in_swap_offers_icon.haml (13.1ms)
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"authentications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mAuthentication Load (1.0ms)[0m  SELECT "authentications".* FROM "authentications" WHERE "authentications"."user_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
Rendered layouts/_logged_in.haml (153.8ms)
Rendered layouts/_notifications.haml (7.3ms)
  [1m[36mLocation Load (1.2ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
Rendered layouts/_display_popup.haml (10.5ms)
Rendered listings/show.haml within layouts/application (465.6ms)
Completed 200 OK in 2043ms (Views: 443.6ms | ActiveRecord: 359.6ms | Sphinx: 0.0ms)
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (1.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:27:42.274030', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:27:42.273392' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:27:42.273426') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (1.8ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:27:47.276734', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:27:47.276107' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:27:47.276140') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:27:52.281064', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:27:52.279370' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:27:52.279445') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:27:57.287141', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:27:57.285182' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:27:57.285257') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:28:02.292864', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:28:02.291332' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:28:02.291398') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:28:07.298532', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:28:07.296968' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:28:07.297041') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:28:12.304235', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:28:12.302703' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:28:12.302778') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:28:17.310004', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:28:17.308439' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:28:17.308515') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:28:22.315714', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:28:22.314183' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:28:22.314256') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:28:27.321414', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:28:27.319882' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:28:27.319956') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:28:32.327064', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:28:32.325549' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:28:32.325619') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:28:37.332669', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:28:37.331184' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:28:37.331252') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (3.1ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:28:42.338588', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:28:42.336949' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:28:42.337029') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.6ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:28:47.345294', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:28:47.343646' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:28:47.343720') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:28:52.351325', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:28:52.349799' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:28:52.349874') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:28:57.357063', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:28:57.355484' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:28:57.355578') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:29:02.362819', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:29:02.361271' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:29:02.361341') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (1.8ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:29:07.368457', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:29:07.366999' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:29:07.367071') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (1.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:29:12.373091', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:29:12.371870' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:29:12.371953') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (1.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:29:17.376701', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:29:17.375182' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:29:17.375256') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.5ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:29:22.381213', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:29:22.379541' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:29:22.379614') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:29:27.389083', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:29:27.387552' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:29:27.387622') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:29:32.394737', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:29:32.393224' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:29:32.393295') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:29:37.400698', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:29:37.398738' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:29:37.398814') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:29:42.406362', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:29:42.404850' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:29:42.404921') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:29:47.412263', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:29:47.410738' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:29:47.410809') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:29:52.417951', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:29:52.416387' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:29:52.416457') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:29:57.423844', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:29:57.422318' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:29:57.422390') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:30:02.429352', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:30:02.427967' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:30:02.428019') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (1.1ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:30:07.433963', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:30:07.433085' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:30:07.433122') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (1.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:30:12.437089', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:30:12.436152' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:30:12.436213') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (1.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:30:17.440319', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:30:17.439464' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:30:17.439506') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:30:22.444317', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:30:22.442747' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:30:22.442820') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:30:27.450061', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:30:27.448463' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:30:27.448535') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:30:32.455718', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:30:32.454186' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:30:32.454259') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:30:37.461478', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:30:37.459873' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:30:37.459948') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.6ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:30:42.467211', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:30:42.465681' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:30:42.465753') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:30:47.473188', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:30:47.471611' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:30:47.471688') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:30:52.479843', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:30:52.477827' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:30:52.477902') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (1.0ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:30:57.484855', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:30:57.483904' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:30:57.483946') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (1.6ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:31:02.487886', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:31:02.486974' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:31:02.487017') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:31:07.492455', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:31:07.490840' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:31:07.490915') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:31:12.498042', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:31:12.496486' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:31:12.496564') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:31:17.503680', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:31:17.502089' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:31:17.502163') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:31:22.509581', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:31:22.507766' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:31:22.507842') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:31:27.515243', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:31:27.513727' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:31:27.513800') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (3.0ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:31:32.520845', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:31:32.519336' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:31:32.519412') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:31:37.527424', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:31:37.525915' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:31:37.525988') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (1.0ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:31:42.532777', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:31:42.531570' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:31:42.531616') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (1.6ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:31:47.535746', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:31:47.535098' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:31:47.535137') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:31:52.539818', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:31:52.538273' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:31:52.538347') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.6ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:31:57.545458', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:31:57.543948' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:31:57.544017') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.7ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:32:02.551654', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:32:02.550142' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:32:02.550217') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:32:07.557580', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:32:07.556111' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:32:07.556182') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:32:12.563080', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:32:12.562185' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:32:12.562260') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:32:17.568715', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:32:17.567195' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:32:17.567274') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (1.0ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:32:22.573295', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:32:22.572699' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:32:22.572730') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (1.0ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:32:27.575682', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:32:27.575041' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:32:27.575079') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (1.8ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:32:32.578215', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:32:32.577583' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:32:32.577617') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (1.7ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:32:37.581693', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:32:37.581057' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:32:37.581092') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (0.9ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:32:42.585286', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:32:42.584652' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:32:42.584712') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:32:47.588648', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:32:47.587137' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:32:47.587211') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:32:52.594318', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:32:52.592743' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:32:52.592817') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:32:57.599905', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:32:57.598388' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:32:57.598459') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (1.0ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:33:02.604524', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:33:02.603916' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:33:02.603952') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:33:07.607970', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:33:07.606456' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:33:07.606529') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:33:12.613602', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:33:12.612088' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:33:12.612161') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:33:17.619341', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:33:17.617741' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:33:17.617809') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:33:22.625071', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:33:22.623456' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:33:22.623532') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:33:27.630770', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:33:27.629225' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:33:27.629299') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:33:32.636555', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:33:32.635039' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:33:32.635111') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:33:37.642284', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:33:37.640763' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:33:37.640834') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:33:42.648045', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:33:42.646470' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:33:42.646564') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:33:47.653548', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:33:47.652029' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:33:47.652102') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:33:52.659160', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:33:52.657634' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:33:52.657726') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:33:57.664749', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:33:57.663248' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:33:57.663318') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:34:02.670370', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:34:02.668830' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:34:02.668902') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.1ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:34:07.676043', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:34:07.674533' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:34:07.674605') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:34:12.681602', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:34:12.680085' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:34:12.680159') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:34:17.687312', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:34:17.685816' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:34:17.685886') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m


Started GET "/listings/5-image-test/edit?locale=en" for 127.0.0.1 at 2013-03-20 21:04:21 +0530
  Processing by ListingsController#edit as HTML
  Parameters: {"locale"=>"en", "id"=>"5-image-test"}
  [1m[35mPK and serial sequence (4.6ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (2.4ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (2.1ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (5.7ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (1.7ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.1ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.4ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.3ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (6.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (1.9ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (1.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:34:22.691677', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:34:22.690851' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:34:22.690893') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[35mSQL (3.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.5ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (1.6ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (1.5ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.1ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mListing Load (1.1ms)[0m  SELECT "listings".* FROM "listings" WHERE "listings"."id" = 5 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mLocation Load (1.3ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".listing_id = 5 AND (location_type = 'origin_loc')) LIMIT 1
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"locations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listing_images"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "listing_images" WHERE ("listing_images".listing_id = 5)[0m
Rendered listings/form/_javascripts.haml (3.7ms)
Rendered listings/form/_share_type.haml (2.4ms)
Rendered listings/form/_title_step.haml (3.4ms)
Rendered listings/form/_description.haml (2.9ms)
Rendered listings/form/_receipe.haml (2.6ms)
Rendered listings/form/_portions.haml (2.6ms)
  [1m[35mActsAsTaggableOn::Tag Load (0.9ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags".id = "taggings".tag_id WHERE (("taggings".taggable_id = 5) AND ("taggings".taggable_type = 'Listing')) AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)
Rendered listings/form/_tag_list.haml (8.8ms)
  [1m[36mDiet Load (0.8ms)[0m  [1mSELECT "diets".* FROM "diets" INNER JOIN "diet_listings" ON "diets".id = "diet_listings".diet_id WHERE (("diet_listings".listing_id = 5))[0m
Rendered listings/form/_restriction_list.html.haml (8.9ms)
Rendered listings/form/_valid_until_radio_buttons.haml (7.4ms)
Rendered listings/form/_valid_until.haml (12.5ms)
Rendered listings/form/_origin.haml (4.6ms)
  [1m[35mLocation Load (1.3ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".community_id = 1) LIMIT 1
Rendered listings/form/_googlemap.haml (6.6ms)
  [1m[36mListingImage Load (1.1ms)[0m  [1mSELECT "listing_images".* FROM "listing_images" WHERE ("listing_images".listing_id = 5)[0m
Rendered listings/form/_images.haml (113.2ms)
Rendered listings/form/_visibility.haml (4.1ms)
Rendered listings/form/_additional_details_step.html.haml (5.7ms)
Rendered listings/form/_send_button.haml (3.0ms)
Rendered listings/help_texts/_help_share_type.en.haml (2.3ms)
Rendered listings/_help_texts.haml (7.0ms)
Rendered listings/help_texts/_help_tags.en.haml (2.2ms)
Rendered listings/_help_texts.haml (6.9ms)
Rendered listings/help_texts/_help_valid_until.en.haml (2.4ms)
Rendered listings/_help_texts.haml (6.9ms)
Rendered layouts/_kissmetrics.haml (3.6ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.8ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.0ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (10.1ms)
Rendered communities/default/logo/logo.haml (97.5ms)
Rendered layouts/_no_javascript.haml (110.8ms)
Rendered layouts/_facebook_sdk.haml (6.3ms)
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.7ms)[0m  SELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) AND participations.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_messages_icon.haml (16.9ms)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_notifications_icon.haml (12.5ms)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY') AND (acceptance is null)
Rendered layouts/_logged_in_swap_offers_icon.haml (13.2ms)
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"authentications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mAuthentication Load (1.2ms)[0m  SELECT "authentications".* FROM "authentications" WHERE "authentications"."user_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
Rendered layouts/_logged_in.haml (65.1ms)
Rendered layouts/_notifications.haml (7.4ms)
  [1m[36mLocation Load (1.1ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
Rendered layouts/_display_popup.haml (11.0ms)
Rendered listings/edit.haml within layouts/application (510.8ms)
Completed 200 OK in 2005ms (Views: 497.6ms | ActiveRecord: 92.1ms | Sphinx: 0.0ms)
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:34:27.695491', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:34:27.693988' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:34:27.694057') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:34:32.700845', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:34:32.699641' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:34:32.699701') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *


Started POST "/listings/5-image-test?locale=en" for 127.0.0.1 at 2013-03-20 21:04:33 +0530
  Processing by ListingsController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"WJyxSApP1ZoDya7qcieJqUg5S0Zc4q5IQ7Pj2USt5FE=", "listing"=>{"share_type"=>"trade", "listing_type"=>"offer", "category"=>"item", "title"=>"image test", "description"=>"detailed description", "link_to_information"=>"", "number_of_portions"=>"number of portions", "tag_list"=>"", "diet_tag_names"=>"", "origin"=>"Abhay Khadilkar Road, Shukrawar Peth, Pune, Maharashtra 411002, India", "origin_loc_attributes"=>{"address"=>"Abhay Khadilkar Road, Shukrawar Peth, Pune, Maharashtra 411002, India", "google_address"=>"Abhay Khadilkar Road, Shukrawar Peth, Pune, Maharashtra 411002, India", "latitude"=>"18.5124816", "longitude"=>"73.85450249999997", "location_type"=>"origin_loc"}, "listing_images_attributes"=>{"0"=>{"id"=>"1"}}, "visibility"=>"everybody", "current_community_id"=>"1", "story_behind"=>"estoruy", "ingredient_list"=>"ingredient", "trade_conditions"=>"trade request"}, "valid_until_select"=>"for_now", "commit"=>"Save", "locale"=>"en", "id"=>"5-image-test"}
  [1m[35mPK and serial sequence (6.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.1ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.4ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.1ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.1ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (1.9ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.1ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (6.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.3ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.2ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (1.5ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (1.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (0.7ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.0ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mListing Load (1.2ms)[0m  SELECT "listings".* FROM "listings" WHERE "listings"."id" = 5 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  BEGIN
  [1m[36mActsAsTaggableOn::Tag Load (1.4ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags".id = "taggings".tag_id WHERE (("taggings".taggable_id = 5) AND ("taggings".taggable_type = 'Listing')) AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags".id = "taggings".tag_id WHERE (("taggings".taggable_id = 5) AND ("taggings".taggable_type = 'Listing')) AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)
  [1m[36mSQL (0.6ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (0.4ms)[0m  BEGIN
  [1m[36mLocation Load (1.0ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".listing_id = 5 AND (location_type = 'origin_loc')) LIMIT 1[0m
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"locations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listing_images"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mListingImage Load (1.0ms)[0m  SELECT "listing_images".* FROM "listing_images" WHERE "listing_images"."id" IN (1) AND ("listing_images".listing_id = 5)
  [1m[36mSQL (1.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listing_images"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.8ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities_listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.8ms)[0m  SELECT * FROM "communities" INNER JOIN "communities_listings" ON "communities".id = "communities_listings".community_id WHERE ("communities_listings".listing_id = 5 )
  [1m[36mSQL (1.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities_listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mAREL (0.9ms)[0m  DELETE FROM "communities_listings" WHERE "communities_listings"."listing_id" = 5 AND "communities_listings"."community_id" IN (1)
  [1m[36mCommunity Load (1.6ms)[0m  [1mSELECT "communities".* FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY'))[0m
  [1m[35mSQL (1.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities_listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (5.9ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (3.9ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "communities_listings" ("community_id", "listing_id") VALUES (1, 5)[0m
  [1m[35mPK and serial sequence (5.9ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.2ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mAREL (1.9ms)[0m  UPDATE "listings" SET "origin" = 'Abhay Khadilkar Road, Shukrawar Peth, Pune, Maharashtra 411002, India', "delta" = 't', "updated_at" = '2013-03-20 15:34:35.790703' WHERE "listings"."id" = 5
  [1m[36mActsAsTaggableOn::Tag Load (1.5ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags".id = "taggings".tag_id WHERE (("taggings".taggable_id = 5) AND ("taggings".taggable_type = 'Listing')) AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"locations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.0ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"locations"'::regclass
[0m
  [1m[35mSQL (21.1ms)[0m  INSERT INTO "locations" ("latitude", "longitude", "address", "google_address", "city", "created_at", "updated_at", "listing_id", "person_id", "location_type", "community_id") VALUES (18.5124816, 73.85450249999997, 'Abhay Khadilkar Road, Shukrawar Peth, Pune, Maharashtra 411002, India', 'Abhay Khadilkar Road, Shukrawar Peth, Pune, Maharashtra 411002, India', NULL, '2013-03-20 15:34:35.804322', '2013-03-20 15:34:35.804322', 5, NULL, 'origin_loc', NULL) RETURNING "id"
  [1m[36mDiet Load (1.4ms)[0m  [1mSELECT "diets".* FROM "diets" INNER JOIN "diet_listings" ON "diets".id = "diet_listings".diet_id WHERE (("diet_listings".listing_id = 5))[0m
  [1m[35mSQL (12.9ms)[0m  COMMIT
  [1m[36mLocation Load (1.6ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".listing_id = 5) LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  BEGIN
  [1m[36mSQL (0.5ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (0.3ms)[0m  BEGIN
  [1m[36mSQL (1.8ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:ListingUpdatedJob
listing_id: 5
host: !binary |-
 bG9jYWxob3N0
', NULL, '2013-03-20 15:34:36.186359', NULL, NULL, NULL, '2013-03-20 15:34:36.186544', '2013-03-20 15:34:36.186544', NULL) RETURNING "id"[0m
  [1m[35mSQL (28.2ms)[0m  COMMIT
Redirected to http://localhost:3000/listings/5-image-test?locale=en
Completed 302 Found in 2073ms


Started GET "/listings/5-image-test?locale=en" for 127.0.0.1 at 2013-03-20 21:04:36 +0530
  Processing by ListingsController#show as HTML
  Parameters: {"locale"=>"en", "id"=>"5-image-test"}
  [1m[36mPK and serial sequence (6.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.0ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (1.3ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.0ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.0ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (1.9ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (2.5ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (1.7ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (2.4ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (1.6ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (1.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (36.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:34:37.705663', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:34:37.705019' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:34:37.705059') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mCommunity Load (1.1ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'localhost' LIMIT 1
  [1m[36mListing Load (1.0ms)[0m  [1mSELECT "listings".* FROM "listings" WHERE "listings"."id" = 5 LIMIT 1[0m
  [1m[35mPerson Load (1.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mPerson Load (0.8ms)[0m  [1mSELECT * FROM "people" INNER JOIN "listing_followers" ON "people".id = "listing_followers".person_id WHERE ("listing_followers".listing_id = 5 )[0m
  [1m[35mSQL (0.3ms)[0m  BEGIN
  [1m[36mAREL (0.9ms)[0m  [1mDELETE FROM "delayed_jobs" WHERE "delayed_jobs"."id" = 245[0m
  [1m[35mSQL (3.6ms)[0m  COMMIT
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (1.1ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:34:37.765321', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:34:37.764706' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:34:37.764740') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (1.1ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:34:37.767831', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:34:37.767270' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:34:37.767304') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mSQL (2.6ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (0.5ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.0ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (1.5ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (1.0ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mSQL (1.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mListing Load (0.9ms)[0m  [1mSELECT "listings".* FROM "listings" WHERE "listings"."id" = 5 LIMIT 1[0m
  [1m[35mListing Count (1.4ms)[0m  
 SELECT count(*) 
 FROM community_memberships, communities_listings 
 WHERE community_memberships.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' 
 AND community_memberships.community_id = communities_listings.community_id
 AND communities_listings.listing_id = '5'
 AND communities_listings.community_id = '1'
 
  [1m[36mSQL (0.5ms)[0m  [1mBEGIN[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.4ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags".id = "taggings".tag_id WHERE (("taggings".taggable_id = 5) AND ("taggings".taggable_type = 'Listing')) AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)
  [1m[36mAREL (1.1ms)[0m  [1mUPDATE "listings" SET "times_viewed" = 4, "updated_at" = '2013-03-20 15:34:38.072750' WHERE "listings"."id" = 5[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.3ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags".id = "taggings".tag_id WHERE (("taggings".taggable_id = 5) AND ("taggings".taggable_type = 'Listing')) AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)
  [1m[36mSQL (28.8ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listing_images"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.4ms)[0m  [1mSELECT COUNT(*) FROM "listing_images" WHERE ("listing_images".listing_id = 5)[0m
  [1m[35mListingImage Load (0.9ms)[0m  SELECT "listing_images".* FROM "listing_images" WHERE ("listing_images".listing_id = 5)
  [1m[36mPerson Load (1.5ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
Rendered listings/_edit_links.haml (103.8ms)
Rendered listings/_message_links.haml (5.4ms)
  [1m[35mSQL (1.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"diet_listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 5)[0m
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"testimonials"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "testimonials" WHERE ("testimonials".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')[0m
  [1m[35mSQL (1.4ms)[0m  SELECT 1 FROM "people" INNER JOIN "community_memberships" ON "people".id = "community_memberships".person_id WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (("community_memberships".community_id = 1)) LIMIT 1
  [1m[36mLocation Load (1.2ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".listing_id = 5 AND (location_type = 'origin_loc')) LIMIT 1[0m
  [1m[35mSQL (1.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"locations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mLocation Load (0.9ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".community_id = 1) LIMIT 1[0m
Rendered listings/_googlemap.haml (9.3ms)
Rendered listings/_origin.haml (5.6ms)
  [1m[35mLocation Load (0.5ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".listing_id = 5) LIMIT 1
Rendered listings/_availability.haml (2.8ms)
  [1m[36mSwapItem Load (1.0ms)[0m  [1mSELECT "swap_items".* FROM "swap_items" WHERE ((receiver_listing_id = 5 or receiver_listing_id = 5) and acceptance is NULL) LIMIT 1[0m
  [1m[35mSQL (1.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"comments"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.6ms)[0m  [1mSELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 5)[0m
  [1m[35mComment Load (0.6ms)[0m  SELECT "comments".* FROM "comments" WHERE ("comments".listing_id = 5)
Rendered listings/_comment.haml (0.0ms)
Rendered listings/_follow_checkbox.haml (3.3ms)
Rendered listings/_comment_form.haml (15.7ms)
Rendered layouts/_kissmetrics.haml (3.0ms)
Rendered communities/default/logo/logo.haml (2.5ms)
Rendered layouts/_no_javascript.haml (16.1ms)
Rendered layouts/_facebook_sdk.haml (3.5ms)
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.9ms)[0m  [1mSELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) AND participations.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')[0m
Rendered layouts/_logged_in_messages_icon.haml (16.7ms)
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.0ms)[0m  [1mSELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')[0m
Rendered layouts/_logged_in_notifications_icon.haml (14.8ms)
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.2ms)[0m  [1mSELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY') AND (acceptance is null)[0m
Rendered layouts/_logged_in_swap_offers_icon.haml (16.1ms)
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"authentications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mAuthentication Load (1.0ms)[0m  [1mSELECT "authentications".* FROM "authentications" WHERE "authentications"."user_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
Rendered layouts/_logged_in.haml (70.3ms)
Rendered layouts/_notifications.haml (8.1ms)
  [1m[35mLocation Load (1.2ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1
Rendered layouts/_display_popup.haml (11.1ms)
Rendered listings/show.haml within layouts/application (555.8ms)
Completed 200 OK in 2174ms (Views: 529.6ms | ActiveRecord: 314.0ms | Sphinx: 0.0ms)
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:34:42.771305', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:34:42.769786' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:34:42.769862') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (3.0ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:34:47.777023', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:34:47.775457' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:34:47.775533') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *


Started GET "/en/homepage" for 127.0.0.1 at 2013-03-20 21:04:48 +0530
  Processing by HomepageController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mPK and serial sequence (3.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.1ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (1.4ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.0ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (0.8ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (0.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (5.1ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.0ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (6.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (6.2ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (1.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.6ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.6ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.5ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (0.9ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (1.0ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mSQL (1.2ms)[0m  SELECT 1 FROM "people" INNER JOIN "community_memberships" ON "people".id = "community_memberships".person_id WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (("community_memberships".community_id = 1)) LIMIT 1
  [1m[36mSQL (1.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.1ms)[0m  SELECT "communities".* FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY'))
~~~~~~~~~~~~~~~not request.xhr~~~~~~~~~
  [1m[36mSQL (1.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"news_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.6ms)[0m  SELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 1)
  [1m[36mCommunity Load (0.7ms)[0m  [1mSELECT "communities".* FROM "communities"[0m
  [1m[35mSQL (1.1ms)[0m  SELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 1) LIMIT 2
  [1m[36mSQL (2.5ms)[0m  [1mSELECT COUNT(*) FROM "listings" WHERE "listings"."listing_type" = 'offer' AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')
 ) AND (open = '1' AND (valid_until IS NULL OR valid_until > '2013-03-20 15:34:49'))[0m
  [1m[35mListing Load (3.1ms)[0m  SELECT "listings".* FROM "listings" WHERE "listings"."listing_type" = 'offer' AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')
 ) AND (open = '1' AND (valid_until IS NULL OR valid_until > '2013-03-20 15:34:49')) ORDER BY listings.created_at DESC LIMIT 3 OFFSET 0
  [1m[36mListingImage Load (1.3ms)[0m  [1mSELECT "listing_images".* FROM "listing_images" WHERE ("listing_images".listing_id IN (5,4,3))[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listing_images"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"diet_listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.8ms)[0m  [1mSELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 5)[0m
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"comments"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 5)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 4)[0m
  [1m[35mSQL (0.8ms)[0m  SELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 4)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 3)
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 3)[0m
Rendered homepage/_recent_listing.haml (49.8ms)
Rendered common/_staples.haml (2.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
Rendered homepage/_user_communities.haml (4.6ms)
Rendered common/_staples.haml (2.2ms)
  [1m[36mLocation Load (1.7ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
Rendered common/_staples.haml (2.6ms)
Rendered homepage/_profile_info_empty_notification.haml (3.9ms)
Rendered common/_staples.haml (2.4ms)
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"event_feed_events"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.1ms)[0m  [1mSELECT COUNT(*) FROM "event_feed_events" WHERE ("event_feed_events".community_id = 1)[0m
Rendered common/_staples.haml (2.6ms)
  [1m[35mEventFeedEvent Load (1.6ms)[0m  SELECT "event_feed_events".* FROM "event_feed_events" WHERE ("event_feed_events".community_id = 1) ORDER BY id DESC LIMIT 5
  [1m[36mPerson Load (1.4ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bpSZp8Kxar4Oag3a6HdQnY' LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
Rendered event_feed_events/_join.haml (10.1ms)
  [1m[36mPerson Load (1.6ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'c7iNZKKvar4Oae3a6HdQnY' LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
Rendered event_feed_events/_join.haml (7.6ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
Rendered event_feed_events/_login.haml (4.3ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
Rendered event_feed_events/_login.haml (4.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
Rendered event_feed_events/_login.haml (3.9ms)
Rendered homepage/_event_feed_event.haml (54.8ms)
Rendered homepage/_event_feed.haml (64.5ms)
Rendered common/_staples.haml (2.3ms)
Rendered common/_staples.haml (2.4ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 1) LIMIT 2
Rendered homepage/_news_items.haml (5.5ms)
Rendered common/_staples.haml (2.2ms)
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"polls"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPoll Load (0.9ms)[0m  SELECT "polls".* FROM "polls" WHERE "polls"."active" = 't' AND ("polls".community_id = 1) LIMIT 1
Rendered layouts/_kissmetrics.haml (104.4ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.9ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.2ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (10.8ms)
Rendered communities/default/logo/logo.haml (2.6ms)
Rendered layouts/_no_javascript.haml (17.3ms)
Rendered layouts/_facebook_sdk.haml (2.5ms)
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.0ms)[0m  [1mSELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) AND participations.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')[0m
Rendered layouts/_logged_in_messages_icon.haml (15.9ms)
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.7ms)[0m  [1mSELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')[0m
Rendered layouts/_logged_in_notifications_icon.haml (15.0ms)
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY') AND (acceptance is null)[0m
Rendered layouts/_logged_in_swap_offers_icon.haml (10.4ms)
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"authentications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mAuthentication Load (0.9ms)[0m  [1mSELECT "authentications".* FROM "authentications" WHERE "authentications"."user_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
Rendered layouts/_logged_in.haml (61.7ms)
Rendered layouts/_notifications.haml (4.6ms)
Rendered layouts/_display_popup.haml (7.4ms)
Rendered homepage/index.haml within layouts/application (615.4ms)
Completed 200 OK in 2216ms (Views: 673.6ms | ActiveRecord: 112.9ms | Sphinx: 0.0ms)
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.6ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:34:52.783356', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:34:52.781848' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:34:52.781921') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m


Started GET "/?locale=en&page=2" for 127.0.0.1 at 2013-03-20 21:04:54 +0530
  Processing by DashboardController#index as 
  Parameters: {"locale"=>"en", "page"=>"2"}
  [1m[35mPK and serial sequence (6.3ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.0ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (1.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.6ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mLocation Load (1.0ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
~~~~~~~~~~~~~~~dashboard#index~~~~~~~~~1
  [1m[35mPK and serial sequence (6.0ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (3.4ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (1.9ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.3ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.2ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (5.7ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (1.9ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
Rendered dashboard/_header.haml (7.7ms)
  [1m[36mSQL (1.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.4ms)[0m  SELECT COUNT(*) FROM "communities"
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "communities"[0m
  [1m[35mCommunity Load (0.7ms)[0m  SELECT "communities".* FROM "communities" ORDER BY name asc
Rendered dashboard/_community_list.haml (133.1ms)
Rendered dashboard/_footer.haml (9.2ms)
Rendered layouts/_kissmetrics.haml (3.1ms)
Rendered layouts/_dashboard_no_javascript.haml (3.0ms)
Rendered dashboard/index.haml within layouts/dashboard (185.6ms)
Completed 200 OK in 1693ms (Views: 192.7ms | ActiveRecord: 52.8ms | Sphinx: 0.0ms)
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:34:57.789305', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:34:57.787811' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:34:57.787881') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *


Started GET "/en/offers" for 127.0.0.1 at 2013-03-20 21:04:59 +0530
  Processing by ListingsController#offers as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mPK and serial sequence (6.3ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.3ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (1.1ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (5.6ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.0ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (0.9ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (1.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (2.4ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (1.5ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (2.3ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (1.5ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (1.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.1ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" IS NULL LIMIT 1[0m
  [1m[35mLocation Load (0.9ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"restrictions"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.2ms)[0m  SELECT COUNT(*) FROM "restrictions" WHERE ("restrictions".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Completed 500 Internal Server Error in 1486ms

NoMethodError (undefined method `location' for nil:NilClass):
  app/models/listing.rb:319:in `find_with'
  app/controllers/listings_controller.rb:77:in `load'
  app/controllers/listings_controller.rb:46:in `offers'

Rendered /home/chaitanya/.rvm/gems/ruby-1.9.3-p194@strgf/gems/actionpack-3.0.19/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.7ms)
Rendered /home/chaitanya/.rvm/gems/ruby-1.9.3-p194@strgf/gems/actionpack-3.0.19/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (16.9ms)
Rendered /home/chaitanya/.rvm/gems/ruby-1.9.3-p194@strgf/gems/actionpack-3.0.19/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (23.4ms)
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:35:02.795082', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:35:02.793553' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:35:02.793622') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:35:07.800687', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:35:07.799184' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:35:07.799255') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:35:12.806077', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:35:12.804782' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:35:12.804856') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.5ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:35:17.811568', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:35:17.810061' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:35:17.810135') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:35:22.817361', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:35:22.815859' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:35:22.815931') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:35:27.823066', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:35:27.821525' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:35:27.821596') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (1.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:35:32.827751', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:35:32.827159' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:35:32.827192') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (1.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:35:37.830310', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:35:37.829720' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:35:37.829753') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
DEPRECATION WARNING: config.action_view.debug_rjs will be removed in 3.1, from 3.1 onwards you will need to install prototype-rails to continue to use RJS templates . (called from <top (required)> at /home/chaitanya/workArea/ST-to-RGF/config/environment.rb:10)
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (1.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:35:42.832890', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:35:42.832302' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:35:42.832335') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[36mSQL (0.4ms)[0m  [1mSHOW client_min_messages[0m
  [1m[35mSQL (0.3ms)[0m  SET client_min_messages TO 'panic'
  [1m[36mSQL (0.3ms)[0m  [1mSET standard_conforming_strings = on[0m
  [1m[35mSQL (0.3ms)[0m  SET client_min_messages TO 'notice'
  [1m[36mSQL (0.6ms)[0m  [1mSET time zone 'UTC'[0m
  [1m[35mSQL (0.3ms)[0m  SHOW TIME ZONE
  [1m[36mPK and serial sequence (4.5ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (2.3ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
DEPRECATION WARNING: RAILS_ROOT is deprecated. Please use ::Rails.root.to_s. (called from <class:Person> at /home/chaitanya/workArea/ST-to-RGF/app/models/person.rb:134)
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:35:47.836528', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:35:47.835012' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:35:47.835083') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:35:52.842138', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:35:52.840602' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:35:52.840674') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m


Started GET "/en/offers" for 127.0.0.1 at 2013-03-20 21:05:52 +0530
  Processing by ListingsController#offers as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mPK and serial sequence (6.4ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.4ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (1.3ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.1ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.1ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (1.9ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (5.3ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (1.5ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (2.4ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (2.8ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.9ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" IS NULL LIMIT 1[0m
  [1m[35mLocation Load (1.0ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"restrictions"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.8ms)[0m  SELECT COUNT(*) FROM "restrictions" WHERE ("restrictions".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Completed 500 Internal Server Error in 1355ms

NoMethodError (undefined method `location' for nil:NilClass):
  app/models/listing.rb:319:in `find_with'
  app/controllers/listings_controller.rb:77:in `load'
  app/controllers/listings_controller.rb:46:in `offers'

Rendered /home/chaitanya/.rvm/gems/ruby-1.9.3-p194@strgf/gems/actionpack-3.0.19/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.6ms)
Rendered /home/chaitanya/.rvm/gems/ruby-1.9.3-p194@strgf/gems/actionpack-3.0.19/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (16.6ms)
Rendered /home/chaitanya/.rvm/gems/ruby-1.9.3-p194@strgf/gems/actionpack-3.0.19/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (23.0ms)
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:35:57.847906', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:35:57.846320' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:35:57.846395') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *


Started GET "/en/homepage" for 127.0.0.1 at 2013-03-20 21:06:01 +0530
  Processing by HomepageController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mPK and serial sequence (6.7ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.1ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (1.3ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (1.6ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (1.9ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (2.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (2.4ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.1ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (5.9ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (1.8ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (1.4ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:36:02.852900', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:36:02.851931' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:36:02.851979') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[36mSQL (1.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (0.7ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" IS NULL LIMIT 1[0m
  [1m[35mLocation Load (0.5ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
Redirected to http://localhost:3000/?locale=en
~~~~~~~~~~~~~~~not request.xhr~~~~~~~~~
  [1m[36mCommunity Load (0.7ms)[0m  [1mSELECT "communities".* FROM "communities"[0m
Completed 302 Found in 1417ms


Started GET "/?locale=en" for 127.0.0.1 at 2013-03-20 21:06:03 +0530
  Processing by DashboardController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[35mPK and serial sequence (6.3ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (3.9ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.3ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mLocation Load (1.0ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
~~~~~~~~~~~~~~~dashboard#index~~~~~~~~~
  [1m[35mPK and serial sequence (6.1ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (2.9ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.0ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (2.2ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (6.1ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.0ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
Rendered dashboard/_header.haml (5.4ms)
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.8ms)[0m  SELECT COUNT(*) FROM "communities"
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "communities"[0m
  [1m[35mCommunity Load (1.1ms)[0m  SELECT "communities".* FROM "communities" ORDER BY name asc
Rendered dashboard/_community_list.haml (135.3ms)
Rendered dashboard/_footer.haml (9.9ms)
Rendered layouts/_kissmetrics.haml (3.2ms)
Rendered layouts/_dashboard_no_javascript.haml (3.1ms)
Rendered dashboard/index.haml within layouts/dashboard (184.9ms)
Completed 200 OK in 1559ms (Views: 184.9ms | ActiveRecord: 160.6ms | Sphinx: 0.0ms)
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:36:07.857045', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:36:07.855582' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:36:07.855652') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *


Started GET "/?cid=1" for 127.0.0.1 at 2013-03-20 21:06:08 +0530
  Processing by DashboardController#index as HTML
  Parameters: {"cid"=>"1"}
Redirected to http://localhost:3000/en/homepage
Completed 302 Found in 1ms


Started GET "/en/homepage" for 127.0.0.1 at 2013-03-20 21:06:09 +0530
  Processing by HomepageController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mPK and serial sequence (6.9ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (1.6ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (3.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (1.2ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mSQL (2.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.3ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (1.9ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.2ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (6.3ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.1ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (2.0ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.7ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (1.4ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (1.0ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mSQL (1.4ms)[0m  SELECT 1 FROM "people" INNER JOIN "community_memberships" ON "people".id = "community_memberships".person_id WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (("community_memberships".community_id = 1)) LIMIT 1
  [1m[36mSQL (2.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.7ms)[0m  SELECT "communities".* FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY'))
~~~~~~~~~~~~~~~not request.xhr~~~~~~~~~
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"news_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.0ms)[0m  SELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 1)
  [1m[36mCommunity Load (1.1ms)[0m  [1mSELECT "communities".* FROM "communities"[0m
  [1m[35mSQL (1.1ms)[0m  SELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 1) LIMIT 2
  [1m[36mSQL (2.5ms)[0m  [1mSELECT COUNT(*) FROM "listings" WHERE "listings"."listing_type" = 'offer' AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')
 ) AND (open = '1' AND (valid_until IS NULL OR valid_until > '2013-03-20 15:36:10'))[0m
  [1m[35mListing Load (4.3ms)[0m  SELECT "listings".* FROM "listings" WHERE "listings"."listing_type" = 'offer' AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')
 ) AND (open = '1' AND (valid_until IS NULL OR valid_until > '2013-03-20 15:36:10')) ORDER BY listings.created_at DESC LIMIT 3 OFFSET 0
  [1m[36mListingImage Load (1.4ms)[0m  [1mSELECT "listing_images".* FROM "listing_images" WHERE ("listing_images".listing_id IN (5,4,3))[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listing_images"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"diet_listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.1ms)[0m  [1mSELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 5)[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"comments"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.0ms)[0m  [1mSELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 5)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mSQL (1.1ms)[0m  [1mSELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 4)[0m
  [1m[35mSQL (1.0ms)[0m  SELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 4)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (1.1ms)[0m  SELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 3)
  [1m[36mSQL (1.0ms)[0m  [1mSELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 3)[0m
Rendered homepage/_recent_listing.haml (155.0ms)
Rendered common/_staples.haml (3.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
Rendered homepage/_user_communities.haml (4.9ms)
Rendered common/_staples.haml (2.5ms)
  [1m[36mLocation Load (1.3ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
Rendered common/_staples.haml (2.3ms)
Rendered homepage/_profile_info_empty_notification.haml (3.5ms)
Rendered common/_staples.haml (2.2ms)
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"event_feed_events"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.0ms)[0m  [1mSELECT COUNT(*) FROM "event_feed_events" WHERE ("event_feed_events".community_id = 1)[0m
Rendered common/_staples.haml (2.3ms)
  [1m[35mEventFeedEvent Load (1.7ms)[0m  SELECT "event_feed_events".* FROM "event_feed_events" WHERE ("event_feed_events".community_id = 1) ORDER BY id DESC LIMIT 5
  [1m[36mPerson Load (1.7ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'bpSZp8Kxar4Oag3a6HdQnY' LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
Rendered event_feed_events/_join.haml (9.6ms)
  [1m[36mPerson Load (1.7ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'c7iNZKKvar4Oae3a6HdQnY' LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
Rendered event_feed_events/_join.haml (12.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
Rendered event_feed_events/_login.haml (4.6ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
Rendered event_feed_events/_login.haml (4.6ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
Rendered event_feed_events/_login.haml (4.2ms)
Rendered homepage/_event_feed_event.haml (160.7ms)
Rendered homepage/_event_feed.haml (167.3ms)
Rendered common/_staples.haml (2.4ms)
Rendered common/_staples.haml (2.3ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 1) LIMIT 2
Rendered homepage/_news_items.haml (6.1ms)
Rendered common/_staples.haml (2.4ms)
  [1m[36mSQL (2.6ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"polls"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPoll Load (1.1ms)[0m  SELECT "polls".* FROM "polls" WHERE "polls"."active" = 't' AND ("polls".community_id = 1) LIMIT 1
Rendered layouts/_kissmetrics.haml (3.0ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.7ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.6ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (10.8ms)
Rendered communities/default/logo/logo.haml (2.2ms)
Rendered layouts/_no_javascript.haml (15.4ms)
Rendered layouts/_facebook_sdk.haml (2.4ms)
  [1m[36mSQL (3.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.9ms)[0m  [1mSELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) AND participations.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')[0m
Rendered layouts/_logged_in_messages_icon.haml (18.2ms)
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.1ms)[0m  [1mSELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')[0m
Rendered layouts/_logged_in_notifications_icon.haml (11.5ms)
  [1m[35mSQL (3.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.0ms)[0m  [1mSELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY') AND (acceptance is null)[0m
Rendered layouts/_logged_in_swap_offers_icon.haml (12.0ms)
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"authentications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mAuthentication Load (1.1ms)[0m  [1mSELECT "authentications".* FROM "authentications" WHERE "authentications"."user_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
Rendered layouts/_logged_in.haml (162.9ms)
Rendered layouts/_notifications.haml (6.8ms)
Rendered layouts/_display_popup.haml (7.7ms)
Rendered homepage/index.haml within layouts/application (720.4ms)
Completed 200 OK in 2289ms (Views: 671.4ms | ActiveRecord: 130.7ms | Sphinx: 0.0ms)
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:36:12.862800', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:36:12.861194' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:36:12.861269') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m


Started GET "/en/offers" for 127.0.0.1 at 2013-03-20 21:06:14 +0530
  Processing by ListingsController#offers as HTML
  Parameters: {"locale"=>"en"}
  [1m[35mPK and serial sequence (6.4ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.5ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.6ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.8ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.1ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.4ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (5.7ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (6.1ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (3.7ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (1.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.0ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (1.5ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (1.1ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.0ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"restrictions"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.8ms)[0m  SELECT COUNT(*) FROM "restrictions" WHERE ("restrictions".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
  [1m[36mLocation Load (1.2ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".community_id = 1) LIMIT 1[0m
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"locations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.7ms)[0m  [1mSELECT "communities".* FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY'))[0m
  [1m[35mSQL (3.6ms)[0m  SELECT COUNT(*) FROM "listings" INNER JOIN "locations" ON "locations"."listing_id" = "listings"."id" WHERE (open = '1' AND (valid_until IS NULL OR valid_until > '2013-03-20 15:36:15')) AND (google_address LIKE '% Pune%') AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')
 )
  [1m[36mListing Load (3.8ms)[0m  [1mSELECT "listings".* FROM "listings" INNER JOIN "locations" ON "locations"."listing_id" = "listings"."id" WHERE (open = '1' AND (valid_until IS NULL OR valid_until > '2013-03-20 15:36:15')) AND (google_address LIKE '% Pune%') AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')
 ) ORDER BY created_at DESC, listings.id DESC LIMIT 15 OFFSET 0[0m
  [1m[35mSQL (1.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listing_images"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.5ms)[0m  [1mSELECT COUNT(*) FROM "listing_images" WHERE ("listing_images".listing_id = 5)[0m
  [1m[35mListingImage Load (0.7ms)[0m  SELECT "listing_images".* FROM "listing_images" WHERE ("listing_images".listing_id = 5) LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
Rendered listings/_listed_listing_closed_status.haml (2.8ms)
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"diet_listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.8ms)[0m  [1mSELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 5)[0m
Rendered listings/_listed_listing_edit_links.haml (3.9ms)
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"comments"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.8ms)[0m  [1mSELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 5)[0m
Rendered listings/_listed_listing.haml (91.0ms)
Rendered listings/_listed_listings.haml (219.6ms)
Rendered layouts/_kissmetrics.haml (3.0ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (2.0ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.5ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (117.0ms)
Rendered communities/default/logo/logo.haml (2.7ms)
Rendered layouts/_no_javascript.haml (17.0ms)
Rendered layouts/_facebook_sdk.haml (2.7ms)
  [1m[35mSQL (1.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.7ms)[0m  SELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) AND participations.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_messages_icon.haml (15.9ms)
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.0ms)[0m  SELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_notifications_icon.haml (11.7ms)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY') AND (acceptance is null)
Rendered layouts/_logged_in_swap_offers_icon.haml (10.5ms)
  [1m[36mSQL (1.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"authentications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mAuthentication Load (1.0ms)[0m  SELECT "authentications".* FROM "authentications" WHERE "authentications"."user_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
Rendered layouts/_logged_in.haml (56.0ms)
Rendered layouts/_notifications.haml (5.9ms)
  [1m[36mLocation Load (1.5ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
Rendered layouts/_display_popup.haml (14.4ms)
Rendered listings/index.haml within layouts/application (511.0ms)
Completed 200 OK in 2074ms (Views: 520.3ms | ActiveRecord: 107.9ms | Sphinx: 0.0ms)
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (1.5ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:36:17.868522', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:36:17.866938' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:36:17.867012') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *


Started GET "/en/offers/map" for 127.0.0.1 at 2013-03-20 21:06:20 +0530
  Processing by ListingsController#offers_on_map as HTML
  Parameters: {"locale"=>"en"}
  [1m[35mPK and serial sequence (2.6ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (5.8ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (1.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (0.9ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (1.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (3.8ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (2.7ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.2ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (4.3ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.5ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (2.4ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (1.6ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (1.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.3ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (1.9ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (1.0ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.0ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"restrictions"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "restrictions" WHERE ("restrictions".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
  [1m[36mLocation Load (1.0ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".community_id = 1) LIMIT 1[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"locations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.8ms)[0m  [1mSELECT "communities".* FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY'))[0m
Rendered listings/_listings_on_map.haml (12.6ms)
Rendered layouts/_kissmetrics.haml (3.1ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.9ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.3ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (11.7ms)
Rendered communities/default/logo/logo.haml (2.4ms)
Rendered layouts/_no_javascript.haml (15.7ms)
Rendered layouts/_facebook_sdk.haml (2.9ms)
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.7ms)[0m  SELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) AND participations.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_messages_icon.haml (18.9ms)
  [1m[36mSQL (0.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.4ms)[0m  SELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_notifications_icon.haml (12.1ms)
  [1m[36mSQL (1.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.4ms)[0m  SELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY') AND (acceptance is null)
Rendered layouts/_logged_in_swap_offers_icon.haml (10.3ms)
  [1m[36mSQL (1.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"authentications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mAuthentication Load (0.9ms)[0m  SELECT "authentications".* FROM "authentications" WHERE "authentications"."user_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
Rendered layouts/_logged_in.haml (62.9ms)
Rendered layouts/_notifications.haml (6.7ms)
  [1m[36mLocation Load (0.6ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
Rendered layouts/_display_popup.haml (9.8ms)
Rendered listings/index.haml within layouts/application (304.9ms)
Completed 200 OK in 1924ms (Views: 304.2ms | ActiveRecord: 67.7ms | Sphinx: 0.0ms)
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (1.5ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:36:22.872714', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:36:22.871840' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:36:22.871882') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m


Started GET "/api/query?listing_type=offer&category%5B%5D=all&share_type%5B%5D=all" for 127.0.0.1 at 2013-03-20 21:06:27 +0530
  Processing by ListingsController#serve_listing_data as 
  Parameters: {"listing_type"=>"offer", "category"=>["all"], "share_type"=>["all"]}
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (1.0ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:36:27.876134', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:36:27.875321' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:36:27.875362') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[35mPK and serial sequence (4.6ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.7ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.5ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (5.4ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (1.6ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.0ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (1.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (2.6ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (1.5ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (2.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.2ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.2ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (1.5ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (1.2ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.0ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"restrictions"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.8ms)[0m  SELECT COUNT(*) FROM "restrictions" WHERE ("restrictions".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
  [1m[36mLocation Load (1.0ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".community_id = 1) LIMIT 1[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"locations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.9ms)[0m  [1mSELECT "communities".* FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY'))[0m
  [1m[35mSQL (0.8ms)[0m  SHOW max_identifier_length
  [1m[36mListing Load (1.7ms)[0m  [1mSELECT listings.id, listing_type, category, latitude, longitude FROM "listings" INNER JOIN "locations" ON "locations"."listing_id" = "listings"."id" AND location_type = 'origin_loc' INNER JOIN "locations" "locations_listings" ON "locations_listings"."listing_id" = "listings"."id" WHERE (open = '1' AND (valid_until IS NULL OR valid_until > '2013-03-20 15:36:28')) AND (google_address LIKE '% Pune%') AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')
 ) GROUP BY listings.id ORDER BY listings.created_at DESC, listings.id DESC[0m
PG::Error: ERROR:  column reference "latitude" is ambiguous
LINE 1: SELECT listings.id, listing_type, category, latitude, longit...
                                                    ^
: SELECT listings.id, listing_type, category, latitude, longitude FROM "listings" INNER JOIN "locations" ON "locations"."listing_id" = "listings"."id" AND location_type = 'origin_loc' INNER JOIN "locations" "locations_listings" ON "locations_listings"."listing_id" = "listings"."id" WHERE (open = '1' AND (valid_until IS NULL OR valid_until > '2013-03-20 15:36:28')) AND (google_address LIKE '% Pune%') AND (
        (listings.visibility = 'everybody' 
        OR (
          listings.visibility IN ('communities','this_community') 
          AND listings.id IN (
            SELECT listing_id 
            FROM communities_listings
            WHERE community_id IN ('1')
          )
        ))
        AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')
      ) GROUP BY listings.id ORDER BY listings.created_at DESC, listings.id DESC
Completed 500 Internal Server Error in 1639ms

ActiveRecord::StatementInvalid (PG::Error: ERROR:  column reference "latitude" is ambiguous
LINE 1: SELECT listings.id, listing_type, category, latitude, longit...
                                                    ^
: SELECT listings.id, listing_type, category, latitude, longitude FROM "listings" INNER JOIN "locations" ON "locations"."listing_id" = "listings"."id" AND location_type = 'origin_loc' INNER JOIN "locations" "locations_listings" ON "locations_listings"."listing_id" = "listings"."id" WHERE (open = '1' AND (valid_until IS NULL OR valid_until > '2013-03-20 15:36:28')) AND (google_address LIKE '% Pune%') AND (
        (listings.visibility = 'everybody' 
        OR (
          listings.visibility IN ('communities','this_community') 
          AND listings.id IN (
            SELECT listing_id 
            FROM communities_listings
            WHERE community_id IN ('1')
          )
        ))
        AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')
      ) GROUP BY listings.id ORDER BY listings.created_at DESC, listings.id DESC):
  app/controllers/listings_controller.rb:117:in `serve_listing_data'

Rendered /home/chaitanya/.rvm/gems/ruby-1.9.3-p194@strgf/gems/actionpack-3.0.19/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.7ms)
  [1m[35mListing Load (1.4ms)[0m  SELECT listings.id, listing_type, category, latitude, longitude FROM "listings" INNER JOIN "locations" ON "locations"."listing_id" = "listings"."id" AND location_type = 'origin_loc' INNER JOIN "locations" "locations_listings" ON "locations_listings"."listing_id" = "listings"."id" WHERE (open = '1' AND (valid_until IS NULL OR valid_until > '2013-03-20 15:36:28')) AND (google_address LIKE '% Pune%') AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')
 ) GROUP BY listings.id ORDER BY listings.created_at DESC, listings.id DESC
PG::Error: ERROR:  column reference "latitude" is ambiguous
LINE 1: SELECT listings.id, listing_type, category, latitude, longit...
                                                    ^
: SELECT listings.id, listing_type, category, latitude, longitude FROM "listings" INNER JOIN "locations" ON "locations"."listing_id" = "listings"."id" AND location_type = 'origin_loc' INNER JOIN "locations" "locations_listings" ON "locations_listings"."listing_id" = "listings"."id" WHERE (open = '1' AND (valid_until IS NULL OR valid_until > '2013-03-20 15:36:28')) AND (google_address LIKE '% Pune%') AND (
        (listings.visibility = 'everybody' 
        OR (
          listings.visibility IN ('communities','this_community') 
          AND listings.id IN (
            SELECT listing_id 
            FROM communities_listings
            WHERE community_id IN ('1')
          )
        ))
        AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')
      ) GROUP BY listings.id ORDER BY listings.created_at DESC, listings.id DESC
Rendered /home/chaitanya/.rvm/gems/ruby-1.9.3-p194@strgf/gems/actionpack-3.0.19/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (18.7ms)
Rendered /home/chaitanya/.rvm/gems/ruby-1.9.3-p194@strgf/gems/actionpack-3.0.19/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (24.7ms)
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.0ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:36:32.879819', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:36:32.878249' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:36:32.878323') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (3.0ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:36:37.885290', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:36:37.883784' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:36:37.883859') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (1.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:36:42.891248', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:36:42.890339' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:36:42.890413') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:36:47.895760', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:36:47.894293' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:36:47.894362') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *


Started GET "/api/query?listing_type=offer&category%5B%5D=today" for 127.0.0.1 at 2013-03-20 21:06:48 +0530
  Processing by ListingsController#serve_listing_data as 
  Parameters: {"listing_type"=>"offer", "category"=>["today"]}
  [1m[36mPK and serial sequence (2.4ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.6ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (1.4ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.1ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.0ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.2ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (7.7ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.6ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (6.1ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.6ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.5ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.5ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (1.3ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (1.1ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"restrictions"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.0ms)[0m  [1mSELECT COUNT(*) FROM "restrictions" WHERE ("restrictions".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')[0m
  [1m[35mLocation Load (1.2ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".community_id = 1) LIMIT 1
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"locations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.9ms)[0m  SELECT "communities".* FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY'))
  [1m[36mListing Load (1.8ms)[0m  [1mSELECT listings.id, listing_type, category, latitude, longitude FROM "listings" INNER JOIN "locations" ON "locations"."listing_id" = "listings"."id" AND location_type = 'origin_loc' INNER JOIN "locations" "locations_listings" ON "locations_listings"."listing_id" = "listings"."id" WHERE (open = '1' AND (valid_until IS NULL OR valid_until > '2013-03-20 15:36:49')) AND ((valid_from IS NOT NULL and valid_until IS NOT NULL) and (valid_from <= '2013-03-20 15:36:50' and valid_until >= '2013-03-20 15:36:50')) AND (google_address LIKE '% Pune%') AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')
 ) GROUP BY listings.id ORDER BY listings.created_at DESC, listings.id DESC[0m
PG::Error: ERROR:  column reference "latitude" is ambiguous
LINE 1: SELECT listings.id, listing_type, category, latitude, longit...
                                                    ^
: SELECT listings.id, listing_type, category, latitude, longitude FROM "listings" INNER JOIN "locations" ON "locations"."listing_id" = "listings"."id" AND location_type = 'origin_loc' INNER JOIN "locations" "locations_listings" ON "locations_listings"."listing_id" = "listings"."id" WHERE (open = '1' AND (valid_until IS NULL OR valid_until > '2013-03-20 15:36:49')) AND ((valid_from IS NOT NULL and valid_until IS NOT NULL) and  (valid_from <= '2013-03-20 15:36:50' and valid_until >= '2013-03-20 15:36:50')) AND (google_address LIKE '% Pune%') AND (
        (listings.visibility = 'everybody' 
        OR (
          listings.visibility IN ('communities','this_community') 
          AND listings.id IN (
            SELECT listing_id 
            FROM communities_listings
            WHERE community_id IN ('1')
          )
        ))
        AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')
      ) GROUP BY listings.id ORDER BY listings.created_at DESC, listings.id DESC
Completed 500 Internal Server Error in 1538ms

ActiveRecord::StatementInvalid (PG::Error: ERROR:  column reference "latitude" is ambiguous
LINE 1: SELECT listings.id, listing_type, category, latitude, longit...
                                                    ^
: SELECT listings.id, listing_type, category, latitude, longitude FROM "listings" INNER JOIN "locations" ON "locations"."listing_id" = "listings"."id" AND location_type = 'origin_loc' INNER JOIN "locations" "locations_listings" ON "locations_listings"."listing_id" = "listings"."id" WHERE (open = '1' AND (valid_until IS NULL OR valid_until > '2013-03-20 15:36:49')) AND ((valid_from IS NOT NULL and valid_until IS NOT NULL) and  (valid_from <= '2013-03-20 15:36:50' and valid_until >= '2013-03-20 15:36:50')) AND (google_address LIKE '% Pune%') AND (
        (listings.visibility = 'everybody' 
        OR (
          listings.visibility IN ('communities','this_community') 
          AND listings.id IN (
            SELECT listing_id 
            FROM communities_listings
            WHERE community_id IN ('1')
          )
        ))
        AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')
      ) GROUP BY listings.id ORDER BY listings.created_at DESC, listings.id DESC):
  app/controllers/listings_controller.rb:117:in `serve_listing_data'

Rendered /home/chaitanya/.rvm/gems/ruby-1.9.3-p194@strgf/gems/actionpack-3.0.19/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.7ms)
  [1m[35mListing Load (1.3ms)[0m  SELECT listings.id, listing_type, category, latitude, longitude FROM "listings" INNER JOIN "locations" ON "locations"."listing_id" = "listings"."id" AND location_type = 'origin_loc' INNER JOIN "locations" "locations_listings" ON "locations_listings"."listing_id" = "listings"."id" WHERE (open = '1' AND (valid_until IS NULL OR valid_until > '2013-03-20 15:36:49')) AND ((valid_from IS NOT NULL and valid_until IS NOT NULL) and (valid_from <= '2013-03-20 15:36:50' and valid_until >= '2013-03-20 15:36:50')) AND (google_address LIKE '% Pune%') AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')
 ) GROUP BY listings.id ORDER BY listings.created_at DESC, listings.id DESC
PG::Error: ERROR:  column reference "latitude" is ambiguous
LINE 1: SELECT listings.id, listing_type, category, latitude, longit...
                                                    ^
: SELECT listings.id, listing_type, category, latitude, longitude FROM "listings" INNER JOIN "locations" ON "locations"."listing_id" = "listings"."id" AND location_type = 'origin_loc' INNER JOIN "locations" "locations_listings" ON "locations_listings"."listing_id" = "listings"."id" WHERE (open = '1' AND (valid_until IS NULL OR valid_until > '2013-03-20 15:36:49')) AND ((valid_from IS NOT NULL and valid_until IS NOT NULL) and  (valid_from <= '2013-03-20 15:36:50' and valid_until >= '2013-03-20 15:36:50')) AND (google_address LIKE '% Pune%') AND (
        (listings.visibility = 'everybody' 
        OR (
          listings.visibility IN ('communities','this_community') 
          AND listings.id IN (
            SELECT listing_id 
            FROM communities_listings
            WHERE community_id IN ('1')
          )
        ))
        AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')
      ) GROUP BY listings.id ORDER BY listings.created_at DESC, listings.id DESC
Rendered /home/chaitanya/.rvm/gems/ruby-1.9.3-p194@strgf/gems/actionpack-3.0.19/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (19.1ms)
Rendered /home/chaitanya/.rvm/gems/ruby-1.9.3-p194@strgf/gems/actionpack-3.0.19/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (25.2ms)
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:36:52.901529', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:36:52.899922' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:36:52.899997') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m


Started GET "/api/query?listing_type=offer&category%5B%5D=all" for 127.0.0.1 at 2013-03-20 21:06:52 +0530
  Processing by ListingsController#serve_listing_data as 
  Parameters: {"listing_type"=>"offer", "category"=>["all"]}
  [1m[36mPK and serial sequence (2.5ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (1.6ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (3.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (1.5ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.3ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.8ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.1ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.6ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.4ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (6.8ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.6ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.6ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.4ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.9ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (1.0ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (1.0ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"restrictions"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.2ms)[0m  [1mSELECT COUNT(*) FROM "restrictions" WHERE ("restrictions".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')[0m
  [1m[35mLocation Load (1.1ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".community_id = 1) LIMIT 1
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"locations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.8ms)[0m  SELECT "communities".* FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY'))
  [1m[36mListing Load (1.8ms)[0m  [1mSELECT listings.id, listing_type, category, latitude, longitude FROM "listings" INNER JOIN "locations" ON "locations"."listing_id" = "listings"."id" AND location_type = 'origin_loc' INNER JOIN "locations" "locations_listings" ON "locations_listings"."listing_id" = "listings"."id" WHERE (open = '1' AND (valid_until IS NULL OR valid_until > '2013-03-20 15:36:54')) AND (google_address LIKE '% Pune%') AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')
 ) GROUP BY listings.id ORDER BY listings.created_at DESC, listings.id DESC[0m
PG::Error: ERROR:  column reference "latitude" is ambiguous
LINE 1: SELECT listings.id, listing_type, category, latitude, longit...
                                                    ^
: SELECT listings.id, listing_type, category, latitude, longitude FROM "listings" INNER JOIN "locations" ON "locations"."listing_id" = "listings"."id" AND location_type = 'origin_loc' INNER JOIN "locations" "locations_listings" ON "locations_listings"."listing_id" = "listings"."id" WHERE (open = '1' AND (valid_until IS NULL OR valid_until > '2013-03-20 15:36:54')) AND (google_address LIKE '% Pune%') AND (
        (listings.visibility = 'everybody' 
        OR (
          listings.visibility IN ('communities','this_community') 
          AND listings.id IN (
            SELECT listing_id 
            FROM communities_listings
            WHERE community_id IN ('1')
          )
        ))
        AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')
      ) GROUP BY listings.id ORDER BY listings.created_at DESC, listings.id DESC
Completed 500 Internal Server Error in 1603ms

ActiveRecord::StatementInvalid (PG::Error: ERROR:  column reference "latitude" is ambiguous
LINE 1: SELECT listings.id, listing_type, category, latitude, longit...
                                                    ^
: SELECT listings.id, listing_type, category, latitude, longitude FROM "listings" INNER JOIN "locations" ON "locations"."listing_id" = "listings"."id" AND location_type = 'origin_loc' INNER JOIN "locations" "locations_listings" ON "locations_listings"."listing_id" = "listings"."id" WHERE (open = '1' AND (valid_until IS NULL OR valid_until > '2013-03-20 15:36:54')) AND (google_address LIKE '% Pune%') AND (
        (listings.visibility = 'everybody' 
        OR (
          listings.visibility IN ('communities','this_community') 
          AND listings.id IN (
            SELECT listing_id 
            FROM communities_listings
            WHERE community_id IN ('1')
          )
        ))
        AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')
      ) GROUP BY listings.id ORDER BY listings.created_at DESC, listings.id DESC):
  app/controllers/listings_controller.rb:117:in `serve_listing_data'

Rendered /home/chaitanya/.rvm/gems/ruby-1.9.3-p194@strgf/gems/actionpack-3.0.19/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.7ms)
  [1m[35mListing Load (1.4ms)[0m  SELECT listings.id, listing_type, category, latitude, longitude FROM "listings" INNER JOIN "locations" ON "locations"."listing_id" = "listings"."id" AND location_type = 'origin_loc' INNER JOIN "locations" "locations_listings" ON "locations_listings"."listing_id" = "listings"."id" WHERE (open = '1' AND (valid_until IS NULL OR valid_until > '2013-03-20 15:36:54')) AND (google_address LIKE '% Pune%') AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')
 ) GROUP BY listings.id ORDER BY listings.created_at DESC, listings.id DESC
PG::Error: ERROR:  column reference "latitude" is ambiguous
LINE 1: SELECT listings.id, listing_type, category, latitude, longit...
                                                    ^
: SELECT listings.id, listing_type, category, latitude, longitude FROM "listings" INNER JOIN "locations" ON "locations"."listing_id" = "listings"."id" AND location_type = 'origin_loc' INNER JOIN "locations" "locations_listings" ON "locations_listings"."listing_id" = "listings"."id" WHERE (open = '1' AND (valid_until IS NULL OR valid_until > '2013-03-20 15:36:54')) AND (google_address LIKE '% Pune%') AND (
        (listings.visibility = 'everybody' 
        OR (
          listings.visibility IN ('communities','this_community') 
          AND listings.id IN (
            SELECT listing_id 
            FROM communities_listings
            WHERE community_id IN ('1')
          )
        ))
        AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')
      ) GROUP BY listings.id ORDER BY listings.created_at DESC, listings.id DESC
Rendered /home/chaitanya/.rvm/gems/ruby-1.9.3-p194@strgf/gems/actionpack-3.0.19/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (119.8ms)
Rendered /home/chaitanya/.rvm/gems/ruby-1.9.3-p194@strgf/gems/actionpack-3.0.19/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (125.8ms)


Started GET "/en/offers" for 127.0.0.1 at 2013-03-20 21:06:57 +0530
  Processing by ListingsController#offers as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mPK and serial sequence (6.8ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.5ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (1.5ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.3ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (5.9ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (1.0ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:36:57.906482', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:36:57.905661' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:36:57.905705') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[35mSQL (2.4ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.0ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.2ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (6.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.2ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.6ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.3ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.4ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (1.6ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (1.0ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"restrictions"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "restrictions" WHERE ("restrictions".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')[0m
  [1m[35mLocation Load (1.1ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".community_id = 1) LIMIT 1
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"locations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.7ms)[0m  SELECT "communities".* FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY'))
  [1m[36mSQL (3.0ms)[0m  [1mSELECT COUNT(*) FROM "listings" INNER JOIN "locations" ON "locations"."listing_id" = "listings"."id" WHERE (open = '1' AND (valid_until IS NULL OR valid_until > '2013-03-20 15:36:58')) AND (google_address LIKE '% Pune%') AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')
 )[0m
  [1m[35mListing Load (1.9ms)[0m  SELECT "listings".* FROM "listings" INNER JOIN "locations" ON "locations"."listing_id" = "listings"."id" WHERE (open = '1' AND (valid_until IS NULL OR valid_until > '2013-03-20 15:36:58')) AND (google_address LIKE '% Pune%') AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')
 ) ORDER BY created_at DESC, listings.id DESC LIMIT 15 OFFSET 0
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listing_images"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.0ms)[0m  SELECT COUNT(*) FROM "listing_images" WHERE ("listing_images".listing_id = 5)
  [1m[36mListingImage Load (1.2ms)[0m  [1mSELECT "listing_images".* FROM "listing_images" WHERE ("listing_images".listing_id = 5) LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
Rendered listings/_listed_listing_closed_status.haml (2.6ms)
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"diet_listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 5)
Rendered listings/_listed_listing_edit_links.haml (3.8ms)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"comments"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 5)
Rendered listings/_listed_listing.haml (192.9ms)
Rendered listings/_listed_listings.haml (211.9ms)
Rendered layouts/_kissmetrics.haml (3.7ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.9ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.2ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (10.5ms)
Rendered communities/default/logo/logo.haml (2.5ms)
Rendered layouts/_no_javascript.haml (16.0ms)
Rendered layouts/_facebook_sdk.haml (2.9ms)
  [1m[36mSQL (3.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.9ms)[0m  [1mSELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) AND participations.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')[0m
Rendered layouts/_logged_in_messages_icon.haml (119.9ms)
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')[0m
Rendered layouts/_logged_in_notifications_icon.haml (10.9ms)
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY') AND (acceptance is null)[0m
Rendered layouts/_logged_in_swap_offers_icon.haml (11.9ms)
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"authentications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mAuthentication Load (1.0ms)[0m  [1mSELECT "authentications".* FROM "authentications" WHERE "authentications"."user_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
Rendered layouts/_logged_in.haml (161.7ms)
Rendered layouts/_notifications.haml (6.7ms)
  [1m[35mLocation Load (1.1ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1
Rendered layouts/_display_popup.haml (12.5ms)
Rendered listings/index.haml within layouts/application (495.2ms)
Completed 200 OK in 2085ms (Views: 471.2ms | ActiveRecord: 115.1ms | Sphinx: 0.0ms)


Started GET "/en/load?listing_type=offer&category%5B%5D=today" for 127.0.0.1 at 2013-03-20 21:07:02 +0530
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (1.0ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:37:02.909371', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:37:02.908539' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:37:02.908580') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  Processing by ListingsController#load as 
  Parameters: {"listing_type"=>"offer", "category"=>["today"], "locale"=>"en"}
  [1m[36mPK and serial sequence (6.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.1ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (1.4ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.1ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.2ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (1.6ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (1.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (1.8ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (5.5ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.1ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.3ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.5ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (1.1ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (1.0ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"restrictions"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.8ms)[0m  [1mSELECT COUNT(*) FROM "restrictions" WHERE ("restrictions".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')[0m
  [1m[35mLocation Load (1.1ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".community_id = 1) LIMIT 1
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"locations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.7ms)[0m  SELECT "communities".* FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY'))
  [1m[36mSQL (3.3ms)[0m  [1mSELECT COUNT(*) FROM "listings" INNER JOIN "locations" ON "locations"."listing_id" = "listings"."id" WHERE (open = '1' AND (valid_until IS NULL OR valid_until > '2013-03-20 15:37:03')) AND ((valid_from IS NOT NULL and valid_until IS NOT NULL) and (valid_from <= '2013-03-20 15:37:04' and valid_until >= '2013-03-20 15:37:04')) AND (google_address LIKE '% Pune%') AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')
 )[0m
Rendered listings/_listed_listings.haml (9.8ms)
Completed 200 OK in 1511ms (Views: 11.3ms | ActiveRecord: 74.8ms | Sphinx: 0.0ms)


Started GET "/en/load?listing_type=offer&category%5B%5D=all" for 127.0.0.1 at 2013-03-20 21:07:06 +0530
  Processing by ListingsController#load as 
  Parameters: {"listing_type"=>"offer", "category"=>["all"], "locale"=>"en"}
  [1m[35mPK and serial sequence (6.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (1.8ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.3ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.1ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (1.9ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (2.5ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (1.7ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (2.5ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (1.7ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (1.4ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:37:07.912290', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:37:07.911449' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:37:07.911492') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[35mSQL (2.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.5ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (1.8ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (2.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (1.5ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.0ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"restrictions"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "restrictions" WHERE ("restrictions".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
  [1m[36mLocation Load (1.5ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".community_id = 1) LIMIT 1[0m
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"locations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.6ms)[0m  [1mSELECT "communities".* FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY'))[0m
  [1m[35mSQL (2.7ms)[0m  SELECT COUNT(*) FROM "listings" INNER JOIN "locations" ON "locations"."listing_id" = "listings"."id" WHERE (open = '1' AND (valid_until IS NULL OR valid_until > '2013-03-20 15:37:07')) AND (google_address LIKE '% Pune%') AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')
 )
  [1m[36mListing Load (3.7ms)[0m  [1mSELECT "listings".* FROM "listings" INNER JOIN "locations" ON "locations"."listing_id" = "listings"."id" WHERE (open = '1' AND (valid_until IS NULL OR valid_until > '2013-03-20 15:37:07')) AND (google_address LIKE '% Pune%') AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')
 ) ORDER BY created_at DESC, listings.id DESC LIMIT 15 OFFSET 0[0m
  [1m[35mSQL (1.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listing_images"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.6ms)[0m  [1mSELECT COUNT(*) FROM "listing_images" WHERE ("listing_images".listing_id = 5)[0m
  [1m[35mListingImage Load (0.6ms)[0m  SELECT "listing_images".* FROM "listing_images" WHERE ("listing_images".listing_id = 5) LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
Rendered listings/_listed_listing_closed_status.haml (2.5ms)
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"diet_listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.1ms)[0m  [1mSELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 5)[0m
Rendered listings/_listed_listing_edit_links.haml (3.9ms)
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"comments"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 5)[0m
Rendered listings/_listed_listing.haml (196.7ms)
Rendered listings/_listed_listings.haml (216.4ms)
Completed 200 OK in 1819ms (Views: 205.9ms | ActiveRecord: 78.2ms | Sphinx: 0.0ms)
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:37:12.916303', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:37:12.914821' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:37:12.914893') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:37:17.920973', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:37:17.920386' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:37:17.920417') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:37:22.925274', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:37:22.923908' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:37:22.923945') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m


Started GET "/en/offers/map" for 127.0.0.1 at 2013-03-20 21:07:23 +0530
  Processing by ListingsController#offers_on_map as HTML
  Parameters: {"locale"=>"en"}
  [1m[35mPK and serial sequence (6.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.0ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.3ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.1ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.2ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (1.9ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.0ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (6.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.2ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.3ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (1.5ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (1.0ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (0.6ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mSQL (1.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"restrictions"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.7ms)[0m  SELECT COUNT(*) FROM "restrictions" WHERE ("restrictions".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
  [1m[36mLocation Load (1.1ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".community_id = 1) LIMIT 1[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"locations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.7ms)[0m  [1mSELECT "communities".* FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY'))[0m
Rendered listings/_listings_on_map.haml (4.2ms)
Rendered layouts/_kissmetrics.haml (3.1ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.8ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.3ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (10.4ms)
Rendered communities/default/logo/logo.haml (2.4ms)
Rendered layouts/_no_javascript.haml (15.5ms)
Rendered layouts/_facebook_sdk.haml (110.9ms)
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.9ms)[0m  SELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) AND participations.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_messages_icon.haml (17.2ms)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.0ms)[0m  SELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_notifications_icon.haml (13.2ms)
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.2ms)[0m  SELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY') AND (acceptance is null)
Rendered layouts/_logged_in_swap_offers_icon.haml (13.9ms)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"authentications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mAuthentication Load (1.0ms)[0m  SELECT "authentications".* FROM "authentications" WHERE "authentications"."user_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
Rendered layouts/_logged_in.haml (66.2ms)
Rendered layouts/_notifications.haml (8.8ms)
  [1m[36mLocation Load (1.2ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
Rendered layouts/_display_popup.haml (10.6ms)
Rendered listings/index.haml within layouts/application (297.0ms)
Completed 200 OK in 1943ms (Views: 287.5ms | ActiveRecord: 90.1ms | Sphinx: 0.0ms)


Started GET "/api/query?listing_type=offer&category%5B%5D=all&share_type%5B%5D=all" for 127.0.0.1 at 2013-03-20 21:07:27 +0530
  Processing by ListingsController#serve_listing_data as 
  Parameters: {"listing_type"=>"offer", "category"=>["all"], "share_type"=>["all"]}
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (1.0ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:37:27.930235', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:37:27.929392' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:37:27.929433') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[35mPK and serial sequence (3.7ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (2.5ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (1.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (0.9ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (7.8ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (6.4ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (1.6ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.1ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (3.7ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (2.4ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (1.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (2.6ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (1.0ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (1.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (0.8ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (0.6ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"restrictions"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.8ms)[0m  SELECT COUNT(*) FROM "restrictions" WHERE ("restrictions".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
  [1m[36mLocation Load (1.4ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".community_id = 1) LIMIT 1[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"locations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (2.0ms)[0m  [1mSELECT "communities".* FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY'))[0m
  [1m[35mListing Load (1.9ms)[0m  SELECT listings.id, listing_type, category, latitude, longitude FROM "listings" INNER JOIN "locations" ON "locations"."listing_id" = "listings"."id" AND location_type = 'origin_loc' INNER JOIN "locations" "locations_listings" ON "locations_listings"."listing_id" = "listings"."id" WHERE (open = '1' AND (valid_until IS NULL OR valid_until > '2013-03-20 15:37:28')) AND (google_address LIKE '% Pune%') AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')
 ) GROUP BY listings.id ORDER BY listings.created_at DESC, listings.id DESC
PG::Error: ERROR:  column reference "latitude" is ambiguous
LINE 1: SELECT listings.id, listing_type, category, latitude, longit...
                                                    ^
: SELECT listings.id, listing_type, category, latitude, longitude FROM "listings" INNER JOIN "locations" ON "locations"."listing_id" = "listings"."id" AND location_type = 'origin_loc' INNER JOIN "locations" "locations_listings" ON "locations_listings"."listing_id" = "listings"."id" WHERE (open = '1' AND (valid_until IS NULL OR valid_until > '2013-03-20 15:37:28')) AND (google_address LIKE '% Pune%') AND (
        (listings.visibility = 'everybody' 
        OR (
          listings.visibility IN ('communities','this_community') 
          AND listings.id IN (
            SELECT listing_id 
            FROM communities_listings
            WHERE community_id IN ('1')
          )
        ))
        AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')
      ) GROUP BY listings.id ORDER BY listings.created_at DESC, listings.id DESC
Completed 500 Internal Server Error in 1676ms

ActiveRecord::StatementInvalid (PG::Error: ERROR:  column reference "latitude" is ambiguous
LINE 1: SELECT listings.id, listing_type, category, latitude, longit...
                                                    ^
: SELECT listings.id, listing_type, category, latitude, longitude FROM "listings" INNER JOIN "locations" ON "locations"."listing_id" = "listings"."id" AND location_type = 'origin_loc' INNER JOIN "locations" "locations_listings" ON "locations_listings"."listing_id" = "listings"."id" WHERE (open = '1' AND (valid_until IS NULL OR valid_until > '2013-03-20 15:37:28')) AND (google_address LIKE '% Pune%') AND (
        (listings.visibility = 'everybody' 
        OR (
          listings.visibility IN ('communities','this_community') 
          AND listings.id IN (
            SELECT listing_id 
            FROM communities_listings
            WHERE community_id IN ('1')
          )
        ))
        AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')
      ) GROUP BY listings.id ORDER BY listings.created_at DESC, listings.id DESC):
  app/controllers/listings_controller.rb:117:in `serve_listing_data'

Rendered /home/chaitanya/.rvm/gems/ruby-1.9.3-p194@strgf/gems/actionpack-3.0.19/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.8ms)
  [1m[36mListing Load (0.8ms)[0m  [1mSELECT listings.id, listing_type, category, latitude, longitude FROM "listings" INNER JOIN "locations" ON "locations"."listing_id" = "listings"."id" AND location_type = 'origin_loc' INNER JOIN "locations" "locations_listings" ON "locations_listings"."listing_id" = "listings"."id" WHERE (open = '1' AND (valid_until IS NULL OR valid_until > '2013-03-20 15:37:28')) AND (google_address LIKE '% Pune%') AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')
 ) GROUP BY listings.id ORDER BY listings.created_at DESC, listings.id DESC[0m
PG::Error: ERROR:  column reference "latitude" is ambiguous
LINE 1: SELECT listings.id, listing_type, category, latitude, longit...
                                                    ^
: SELECT listings.id, listing_type, category, latitude, longitude FROM "listings" INNER JOIN "locations" ON "locations"."listing_id" = "listings"."id" AND location_type = 'origin_loc' INNER JOIN "locations" "locations_listings" ON "locations_listings"."listing_id" = "listings"."id" WHERE (open = '1' AND (valid_until IS NULL OR valid_until > '2013-03-20 15:37:28')) AND (google_address LIKE '% Pune%') AND (
        (listings.visibility = 'everybody' 
        OR (
          listings.visibility IN ('communities','this_community') 
          AND listings.id IN (
            SELECT listing_id 
            FROM communities_listings
            WHERE community_id IN ('1')
          )
        ))
        AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')
      ) GROUP BY listings.id ORDER BY listings.created_at DESC, listings.id DESC
Rendered /home/chaitanya/.rvm/gems/ruby-1.9.3-p194@strgf/gems/actionpack-3.0.19/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (19.5ms)
Rendered /home/chaitanya/.rvm/gems/ruby-1.9.3-p194@strgf/gems/actionpack-3.0.19/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (25.8ms)
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (1.0ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:37:32.932963', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:37:32.932216' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:37:32.932252') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.7ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:37:37.936700', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:37:37.935184' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:37:37.935257') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:37:42.943073', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:37:42.941507' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:37:42.941577') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (4.4ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:37:47.948989', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:37:47.947435' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:37:47.947510') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *


Started GET "/api/query?listing_type=offer&category%5B%5D=today" for 127.0.0.1 at 2013-03-20 21:07:51 +0530
  Processing by ListingsController#serve_listing_data as 
  Parameters: {"listing_type"=>"offer", "category"=>["today"]}
  [1m[35mPK and serial sequence (6.4ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.1ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.5ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.8ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.5ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (1.9ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (1.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:37:52.955994', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:37:52.954939' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:37:52.954983') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[36mPK and serial sequence (6.6ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.2ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (7.1ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.5ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.4ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (1.6ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (1.1ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.0ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"restrictions"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.0ms)[0m  SELECT COUNT(*) FROM "restrictions" WHERE ("restrictions".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
  [1m[36mLocation Load (1.2ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".community_id = 1) LIMIT 1[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"locations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.9ms)[0m  [1mSELECT "communities".* FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY'))[0m
  [1m[35mListing Load (1.7ms)[0m  SELECT listings.id, listing_type, category, latitude, longitude FROM "listings" INNER JOIN "locations" ON "locations"."listing_id" = "listings"."id" AND location_type = 'origin_loc' INNER JOIN "locations" "locations_listings" ON "locations_listings"."listing_id" = "listings"."id" WHERE (open = '1' AND (valid_until IS NULL OR valid_until > '2013-03-20 15:37:53')) AND ((valid_from IS NOT NULL and valid_until IS NOT NULL) and (valid_from <= '2013-03-20 15:37:53' and valid_until >= '2013-03-20 15:37:53')) AND (google_address LIKE '% Pune%') AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')
 ) GROUP BY listings.id ORDER BY listings.created_at DESC, listings.id DESC
PG::Error: ERROR:  column reference "latitude" is ambiguous
LINE 1: SELECT listings.id, listing_type, category, latitude, longit...
                                                    ^
: SELECT listings.id, listing_type, category, latitude, longitude FROM "listings" INNER JOIN "locations" ON "locations"."listing_id" = "listings"."id" AND location_type = 'origin_loc' INNER JOIN "locations" "locations_listings" ON "locations_listings"."listing_id" = "listings"."id" WHERE (open = '1' AND (valid_until IS NULL OR valid_until > '2013-03-20 15:37:53')) AND ((valid_from IS NOT NULL and valid_until IS NOT NULL) and  (valid_from <= '2013-03-20 15:37:53' and valid_until >= '2013-03-20 15:37:53')) AND (google_address LIKE '% Pune%') AND (
        (listings.visibility = 'everybody' 
        OR (
          listings.visibility IN ('communities','this_community') 
          AND listings.id IN (
            SELECT listing_id 
            FROM communities_listings
            WHERE community_id IN ('1')
          )
        ))
        AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')
      ) GROUP BY listings.id ORDER BY listings.created_at DESC, listings.id DESC
Completed 500 Internal Server Error in 1555ms

ActiveRecord::StatementInvalid (PG::Error: ERROR:  column reference "latitude" is ambiguous
LINE 1: SELECT listings.id, listing_type, category, latitude, longit...
                                                    ^
: SELECT listings.id, listing_type, category, latitude, longitude FROM "listings" INNER JOIN "locations" ON "locations"."listing_id" = "listings"."id" AND location_type = 'origin_loc' INNER JOIN "locations" "locations_listings" ON "locations_listings"."listing_id" = "listings"."id" WHERE (open = '1' AND (valid_until IS NULL OR valid_until > '2013-03-20 15:37:53')) AND ((valid_from IS NOT NULL and valid_until IS NOT NULL) and  (valid_from <= '2013-03-20 15:37:53' and valid_until >= '2013-03-20 15:37:53')) AND (google_address LIKE '% Pune%') AND (
        (listings.visibility = 'everybody' 
        OR (
          listings.visibility IN ('communities','this_community') 
          AND listings.id IN (
            SELECT listing_id 
            FROM communities_listings
            WHERE community_id IN ('1')
          )
        ))
        AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')
      ) GROUP BY listings.id ORDER BY listings.created_at DESC, listings.id DESC):
  app/controllers/listings_controller.rb:117:in `serve_listing_data'

Rendered /home/chaitanya/.rvm/gems/ruby-1.9.3-p194@strgf/gems/actionpack-3.0.19/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.8ms)
  [1m[36mListing Load (1.3ms)[0m  [1mSELECT listings.id, listing_type, category, latitude, longitude FROM "listings" INNER JOIN "locations" ON "locations"."listing_id" = "listings"."id" AND location_type = 'origin_loc' INNER JOIN "locations" "locations_listings" ON "locations_listings"."listing_id" = "listings"."id" WHERE (open = '1' AND (valid_until IS NULL OR valid_until > '2013-03-20 15:37:53')) AND ((valid_from IS NOT NULL and valid_until IS NOT NULL) and (valid_from <= '2013-03-20 15:37:53' and valid_until >= '2013-03-20 15:37:53')) AND (google_address LIKE '% Pune%') AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')
 ) GROUP BY listings.id ORDER BY listings.created_at DESC, listings.id DESC[0m
PG::Error: ERROR:  column reference "latitude" is ambiguous
LINE 1: SELECT listings.id, listing_type, category, latitude, longit...
                                                    ^
: SELECT listings.id, listing_type, category, latitude, longitude FROM "listings" INNER JOIN "locations" ON "locations"."listing_id" = "listings"."id" AND location_type = 'origin_loc' INNER JOIN "locations" "locations_listings" ON "locations_listings"."listing_id" = "listings"."id" WHERE (open = '1' AND (valid_until IS NULL OR valid_until > '2013-03-20 15:37:53')) AND ((valid_from IS NOT NULL and valid_until IS NOT NULL) and  (valid_from <= '2013-03-20 15:37:53' and valid_until >= '2013-03-20 15:37:53')) AND (google_address LIKE '% Pune%') AND (
        (listings.visibility = 'everybody' 
        OR (
          listings.visibility IN ('communities','this_community') 
          AND listings.id IN (
            SELECT listing_id 
            FROM communities_listings
            WHERE community_id IN ('1')
          )
        ))
        AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')
      ) GROUP BY listings.id ORDER BY listings.created_at DESC, listings.id DESC
Rendered /home/chaitanya/.rvm/gems/ruby-1.9.3-p194@strgf/gems/actionpack-3.0.19/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (19.1ms)
Rendered /home/chaitanya/.rvm/gems/ruby-1.9.3-p194@strgf/gems/actionpack-3.0.19/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (25.4ms)


Started GET "/api/query?listing_type=offer&category%5B%5D=all" for 127.0.0.1 at 2013-03-20 21:07:56 +0530
  Processing by ListingsController#serve_listing_data as 
  Parameters: {"listing_type"=>"offer", "category"=>["all"]}
  [1m[35mPK and serial sequence (3.7ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.4ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.5ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (7.5ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.2ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (1.8ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (1.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (3.3ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.0ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (2.4ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (2.3ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (1.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (1.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:37:57.959033', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:37:57.958338' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:37:57.958376') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.3ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (1.6ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (0.8ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (0.6ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mSQL (1.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"restrictions"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.5ms)[0m  SELECT COUNT(*) FROM "restrictions" WHERE ("restrictions".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
  [1m[36mLocation Load (0.6ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".community_id = 1) LIMIT 1[0m
  [1m[35mSQL (1.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"locations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.8ms)[0m  [1mSELECT "communities".* FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY'))[0m
  [1m[35mListing Load (1.7ms)[0m  SELECT listings.id, listing_type, category, latitude, longitude FROM "listings" INNER JOIN "locations" ON "locations"."listing_id" = "listings"."id" AND location_type = 'origin_loc' INNER JOIN "locations" "locations_listings" ON "locations_listings"."listing_id" = "listings"."id" WHERE (open = '1' AND (valid_until IS NULL OR valid_until > '2013-03-20 15:37:57')) AND (google_address LIKE '% Pune%') AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')
 ) GROUP BY listings.id ORDER BY listings.created_at DESC, listings.id DESC
PG::Error: ERROR:  column reference "latitude" is ambiguous
LINE 1: SELECT listings.id, listing_type, category, latitude, longit...
                                                    ^
: SELECT listings.id, listing_type, category, latitude, longitude FROM "listings" INNER JOIN "locations" ON "locations"."listing_id" = "listings"."id" AND location_type = 'origin_loc' INNER JOIN "locations" "locations_listings" ON "locations_listings"."listing_id" = "listings"."id" WHERE (open = '1' AND (valid_until IS NULL OR valid_until > '2013-03-20 15:37:57')) AND (google_address LIKE '% Pune%') AND (
        (listings.visibility = 'everybody' 
        OR (
          listings.visibility IN ('communities','this_community') 
          AND listings.id IN (
            SELECT listing_id 
            FROM communities_listings
            WHERE community_id IN ('1')
          )
        ))
        AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')
      ) GROUP BY listings.id ORDER BY listings.created_at DESC, listings.id DESC
Completed 500 Internal Server Error in 1611ms

ActiveRecord::StatementInvalid (PG::Error: ERROR:  column reference "latitude" is ambiguous
LINE 1: SELECT listings.id, listing_type, category, latitude, longit...
                                                    ^
: SELECT listings.id, listing_type, category, latitude, longitude FROM "listings" INNER JOIN "locations" ON "locations"."listing_id" = "listings"."id" AND location_type = 'origin_loc' INNER JOIN "locations" "locations_listings" ON "locations_listings"."listing_id" = "listings"."id" WHERE (open = '1' AND (valid_until IS NULL OR valid_until > '2013-03-20 15:37:57')) AND (google_address LIKE '% Pune%') AND (
        (listings.visibility = 'everybody' 
        OR (
          listings.visibility IN ('communities','this_community') 
          AND listings.id IN (
            SELECT listing_id 
            FROM communities_listings
            WHERE community_id IN ('1')
          )
        ))
        AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')
      ) GROUP BY listings.id ORDER BY listings.created_at DESC, listings.id DESC):
  app/controllers/listings_controller.rb:117:in `serve_listing_data'

Rendered /home/chaitanya/.rvm/gems/ruby-1.9.3-p194@strgf/gems/actionpack-3.0.19/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.7ms)
  [1m[36mListing Load (1.4ms)[0m  [1mSELECT listings.id, listing_type, category, latitude, longitude FROM "listings" INNER JOIN "locations" ON "locations"."listing_id" = "listings"."id" AND location_type = 'origin_loc' INNER JOIN "locations" "locations_listings" ON "locations_listings"."listing_id" = "listings"."id" WHERE (open = '1' AND (valid_until IS NULL OR valid_until > '2013-03-20 15:37:57')) AND (google_address LIKE '% Pune%') AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')
 ) GROUP BY listings.id ORDER BY listings.created_at DESC, listings.id DESC[0m
PG::Error: ERROR:  column reference "latitude" is ambiguous
LINE 1: SELECT listings.id, listing_type, category, latitude, longit...
                                                    ^
: SELECT listings.id, listing_type, category, latitude, longitude FROM "listings" INNER JOIN "locations" ON "locations"."listing_id" = "listings"."id" AND location_type = 'origin_loc' INNER JOIN "locations" "locations_listings" ON "locations_listings"."listing_id" = "listings"."id" WHERE (open = '1' AND (valid_until IS NULL OR valid_until > '2013-03-20 15:37:57')) AND (google_address LIKE '% Pune%') AND (
        (listings.visibility = 'everybody' 
        OR (
          listings.visibility IN ('communities','this_community') 
          AND listings.id IN (
            SELECT listing_id 
            FROM communities_listings
            WHERE community_id IN ('1')
          )
        ))
        AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')
      ) GROUP BY listings.id ORDER BY listings.created_at DESC, listings.id DESC
Rendered /home/chaitanya/.rvm/gems/ruby-1.9.3-p194@strgf/gems/actionpack-3.0.19/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (123.3ms)
Rendered /home/chaitanya/.rvm/gems/ruby-1.9.3-p194@strgf/gems/actionpack-3.0.19/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (129.7ms)


Started GET "/en/offers" for 127.0.0.1 at 2013-03-20 21:07:59 +0530
  Processing by ListingsController#offers as HTML
  Parameters: {"locale"=>"en"}
  [1m[35mPK and serial sequence (6.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.0ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.3ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.0ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (2.6ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (1.9ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (5.7ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.0ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (6.1ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.1ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.7ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (1.4ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (2.2ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.1ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"restrictions"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "restrictions" WHERE ("restrictions".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
  [1m[36mLocation Load (1.0ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".community_id = 1) LIMIT 1[0m
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"locations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.8ms)[0m  [1mSELECT "communities".* FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY'))[0m
  [1m[35mSQL (2.9ms)[0m  SELECT COUNT(*) FROM "listings" INNER JOIN "locations" ON "locations"."listing_id" = "listings"."id" WHERE (open = '1' AND (valid_until IS NULL OR valid_until > '2013-03-20 15:38:00')) AND (google_address LIKE '% Pune%') AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')
 )
  [1m[36mListing Load (3.7ms)[0m  [1mSELECT "listings".* FROM "listings" INNER JOIN "locations" ON "locations"."listing_id" = "listings"."id" WHERE (open = '1' AND (valid_until IS NULL OR valid_until > '2013-03-20 15:38:00')) AND (google_address LIKE '% Pune%') AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')
 ) ORDER BY created_at DESC, listings.id DESC LIMIT 15 OFFSET 0[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listing_images"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "listing_images" WHERE ("listing_images".listing_id = 5)[0m
  [1m[35mListingImage Load (0.7ms)[0m  SELECT "listing_images".* FROM "listing_images" WHERE ("listing_images".listing_id = 5) LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
Rendered listings/_listed_listing_closed_status.haml (2.5ms)
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"diet_listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 5)[0m
Rendered listings/_listed_listing_edit_links.haml (3.7ms)
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"comments"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 5)[0m
Rendered listings/_listed_listing.haml (187.9ms)
Rendered listings/_listed_listings.haml (204.8ms)
Rendered layouts/_kissmetrics.haml (3.2ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.8ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.1ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (10.5ms)
Rendered communities/default/logo/logo.haml (2.9ms)
Rendered layouts/_no_javascript.haml (16.2ms)
Rendered layouts/_facebook_sdk.haml (2.5ms)
  [1m[35mSQL (3.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.8ms)[0m  SELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) AND participations.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_messages_icon.haml (125.3ms)
  [1m[36mSQL (0.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.4ms)[0m  SELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_notifications_icon.haml (9.2ms)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.0ms)[0m  SELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY') AND (acceptance is null)
Rendered layouts/_logged_in_swap_offers_icon.haml (11.6ms)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"authentications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mAuthentication Load (0.8ms)[0m  SELECT "authentications".* FROM "authentications" WHERE "authentications"."user_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
Rendered layouts/_logged_in.haml (170.5ms)
Rendered layouts/_notifications.haml (5.4ms)
  [1m[36mLocation Load (1.2ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
Rendered layouts/_display_popup.haml (10.6ms)
Rendered listings/index.haml within layouts/application (496.7ms)
Completed 200 OK in 2253ms (Views: 472.7ms | ActiveRecord: 106.8ms | Sphinx: 0.0ms)
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.0ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:38:02.961880', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:38:02.961158' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:38:02.961201') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.8ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:38:07.966626', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:38:07.965045' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:38:07.965127') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.8ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:38:12.972910', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:38:12.971371' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:38:12.971440') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:38:17.979105', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:38:17.977563' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:38:17.977630') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:38:22.985045', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:38:22.983439' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:38:22.983514') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:38:27.990699', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:38:27.989193' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:38:27.989262') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:38:32.996512', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:38:32.994893' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:38:32.994971') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (3.0ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:38:38.002238', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:38:38.000693' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:38:38.000767') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:38:43.008566', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:38:43.007095' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:38:43.007170') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:38:48.014264', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:38:48.012726' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:38:48.012798') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:38:53.019982', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:38:53.018473' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:38:53.018547') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:38:58.025692', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:38:58.024149' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:38:58.024220') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.0ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:39:03.030366', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:39:03.029740' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:39:03.029779') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (1.9ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:39:08.035150', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:39:08.033600' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:39:08.033708') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (1.0ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:39:13.039540', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:39:13.038592' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:39:13.038636') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:39:18.043236', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:39:18.041725' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:39:18.041801') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (1.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:39:23.048904', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:39:23.047397' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:39:23.047471') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:39:28.053480', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:39:28.051907' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:39:28.051982') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:39:33.059232', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:39:33.057669' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:39:33.057760') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:39:38.064865', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:39:38.063321' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:39:38.063392') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:39:43.070602', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:39:43.069056' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:39:43.069127') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:39:48.076293', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:39:48.074756' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:39:48.074845') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:39:53.081871', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:39:53.080367' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:39:53.080436') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:39:58.087393', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:39:58.085925' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:39:58.085994') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (3.1ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:40:03.092911', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:40:03.091385' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:40:03.091454') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:40:08.099646', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:40:08.098085' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:40:08.098161') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:40:13.105430', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:40:13.103816' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:40:13.103892') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (1.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:40:18.110178', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:40:18.109415' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:40:18.109449') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:40:23.113970', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:40:23.112423' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:40:23.112495') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:40:28.119641', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:40:28.118129' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:40:28.118204') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:40:33.125338', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:40:33.123833' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:40:33.123907') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:40:38.131006', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:40:38.129454' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:40:38.129530') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:40:43.136647', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:40:43.135135' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:40:43.135210') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:40:48.142218', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:40:48.140679' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:40:48.140754') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:40:53.147914', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:40:53.146414' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:40:53.146483') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:40:58.153581', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:40:58.152058' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:40:58.152140') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:41:03.159197', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:41:03.157688' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:41:03.157762') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:41:08.164909', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:41:08.163394' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:41:08.163467') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:41:13.170584', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:41:13.169035' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:41:13.169110') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:41:18.176313', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:41:18.174808' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:41:18.174884') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:41:23.181948', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:41:23.180417' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:41:23.180493') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.5ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:41:28.186821', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:41:28.185967' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:41:28.186014') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:41:33.192573', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:41:33.191054' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:41:33.191122') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:41:38.198228', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:41:38.196668' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:41:38.196737') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:41:43.203941', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:41:43.202378' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:41:43.202452') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:41:48.209501', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:41:48.208044' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:41:48.208114') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:41:53.215396', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:41:53.213723' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:41:53.213830') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:41:58.221009', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:41:58.219494' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:41:58.219568') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:42:03.226704', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:42:03.225101' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:42:03.225176') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.5ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:42:08.232571', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:42:08.230920' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:42:08.231015') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:42:13.238489', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:42:13.236953' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:42:13.237027') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:42:18.244229', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:42:18.242714' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:42:18.242790') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:42:23.250382', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:42:23.248309' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:42:23.248381') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:42:28.256122', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:42:28.254517' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:42:28.254591') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:42:33.261747', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:42:33.260195' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:42:33.260268') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:42:38.267466', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:42:38.265997' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:42:38.266068') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:42:43.273105', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:42:43.271583' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:42:43.271657') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:42:48.278644', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:42:48.277152' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:42:48.277219') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:42:53.284107', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:42:53.282620' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:42:53.282689') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (1.4ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:42:58.289092', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:42:58.288249' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:42:58.288320') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:43:03.293314', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:43:03.291781' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:43:03.291856') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:43:08.298997', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:43:08.297445' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:43:08.297521') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:43:13.304616', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:43:13.303080' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:43:13.303160') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:43:18.310340', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:43:18.308687' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:43:18.308761') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:43:23.315959', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:43:23.314403' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:43:23.314478') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:43:28.321745', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:43:28.320161' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:43:28.320234') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:43:33.327306', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:43:33.325798' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:43:33.325869') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:43:38.332871', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:43:38.331357' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:43:38.331431') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:43:43.338541', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:43:43.336999' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:43:43.337073') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:43:48.344291', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:43:48.342781' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:43:48.342855') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (1.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:43:53.349961', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:43:53.348440' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:43:53.348515') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:43:58.354647', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:43:58.353119' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:43:58.353193') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:44:03.360220', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:44:03.358750' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:44:03.358821') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:44:08.365848', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:44:08.364295' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:44:08.364370') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (3.1ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:44:13.371440', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:44:13.369922' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:44:13.369996') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:44:18.377527', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:44:18.376401' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:44:18.376475') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:44:23.383224', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:44:23.381697' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:44:23.381771') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:44:28.388954', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:44:28.387354' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:44:28.387447') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:44:33.394594', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:44:33.393032' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:44:33.393107') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:44:38.400274', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:44:38.398756' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:44:38.398831') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:44:43.405883', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:44:43.404368' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:44:43.404438') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.7ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:44:48.411430', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:44:48.409935' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:44:48.410009') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:44:53.417572', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:44:53.415981' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:44:53.416053') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:44:58.423885', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:44:58.422368' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:44:58.422443') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:45:03.429563', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:45:03.428045' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:45:03.428119') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:45:08.435281', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:45:08.433704' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:45:08.433779') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:45:13.441083', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:45:13.439559' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:45:13.439633') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:45:18.446972', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:45:18.445419' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:45:18.445494') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:45:23.452564', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:45:23.451046' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:45:23.451120') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:45:28.458188', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:45:28.456635' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:45:28.456710') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:45:33.463766', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:45:33.462247' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:45:33.462321') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:45:38.469503', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:45:38.467939' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:45:38.468013') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:45:43.475231', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:45:43.473726' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:45:43.473796') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:45:48.480856', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:45:48.479340' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:45:48.479414') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:45:53.486600', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:45:53.485040' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:45:53.485115') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:45:58.492190', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:45:58.490678' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:45:58.490753') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:46:03.497906', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:46:03.496298' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:46:03.496368') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:46:08.503385', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:46:08.501865' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:46:08.501940') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:46:13.509070', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:46:13.507561' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:46:13.507635') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:46:18.514680', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:46:18.513137' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:46:18.513212') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:46:23.520345', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:46:23.518806' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:46:23.518878') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:46:28.526018', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:46:28.524425' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:46:28.524499') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:46:33.531673', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:46:33.530151' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:46:33.530226') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:46:38.537234', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:46:38.535718' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:46:38.535793') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:46:43.542991', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:46:43.541439' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:46:43.541513') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:46:48.548689', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:46:48.547174' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:46:48.547250') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:46:53.555140', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:46:53.552774' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:46:53.552863') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:46:58.561123', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:46:58.559621' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:46:58.559695') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:47:03.566903', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:47:03.565231' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:47:03.565303') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:47:08.572572', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:47:08.571070' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:47:08.571144') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.0ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:47:13.578538', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:47:13.576793' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:47:13.576862') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (1.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:47:18.583871', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:47:18.582359' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:47:18.582431') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:47:23.588386', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:47:23.586874' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:47:23.586945') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (1.1ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:47:28.594052', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:47:28.592579' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:47:28.592654') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:47:33.598133', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:47:33.596568' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:47:33.596641') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:47:38.603755', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:47:38.602288' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:47:38.602358') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:47:43.609449', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:47:43.607846' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:47:43.607917') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:47:48.615062', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:47:48.613516' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:47:48.613590') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:47:53.621091', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:47:53.619381' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:47:53.619457') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:47:58.627087', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:47:58.625450' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:47:58.625517') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:48:03.632694', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:48:03.631189' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:48:03.631259') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:48:08.638476', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:48:08.636926' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:48:08.636994') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:48:13.644161', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:48:13.642640' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:48:13.642714') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.1ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:48:18.648867', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:48:18.648252' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:48:18.648285') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:48:23.653301', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:48:23.651798' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:48:23.651861') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:48:28.659011', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:48:28.657438' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:48:28.657506') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:48:33.664648', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:48:33.663139' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:48:33.663205') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:48:38.670302', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:48:38.668741' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:48:38.668809') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:48:43.675926', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:48:43.674428' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:48:43.674497') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:48:48.681548', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:48:48.680038' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:48:48.680104') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:48:53.755624', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:48:53.685686' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:48:53.685770') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:48:58.760402', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:48:58.758870' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:48:58.758945') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:49:03.766023', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:49:03.764500' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:49:03.764580') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:49:08.771671', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:49:08.770177' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:49:08.770242') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:49:13.777465', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:49:13.775935' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:49:13.776008') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:49:18.783288', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:49:18.781631' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:49:18.781731') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:49:23.789087', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:49:23.787419' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:49:23.787491') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:49:28.794763', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:49:28.793195' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:49:28.793266') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:49:33.800561', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:49:33.798903' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:49:33.798974') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:49:38.806361', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:49:38.804694' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:49:38.804761') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:49:43.812489', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:49:43.810968' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:49:43.811033') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:49:48.818146', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:49:48.816615' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:49:48.816680') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:49:53.823746', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:49:53.822211' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:49:53.822276') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:49:58.829421', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:49:58.827893' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:49:58.827959') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:50:03.835259', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:50:03.833566' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:50:03.833632') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:50:08.840886', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:50:08.839359' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:50:08.839431') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:50:13.846517', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:50:13.844941' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:50:13.845014') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:50:18.852184', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:50:18.850664' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:50:18.850728') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:50:23.857960', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:50:23.856384' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:50:23.856457') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:50:28.863663', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:50:28.862138' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:50:28.862205') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:50:33.869292', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:50:33.867765' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:50:33.867839') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:50:38.875102', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:50:38.873434' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:50:38.873500') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:50:43.880771', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:50:43.879242' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:50:43.879313') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.6ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:50:48.886708', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:50:48.884962' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:50:48.885049') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:50:53.892817', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:50:53.891134' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:50:53.891209') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:50:58.898560', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:50:58.897013' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:50:58.897079') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:51:03.904452', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:51:03.902869' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:51:03.902952') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:51:08.910273', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:51:08.908699' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:51:08.908772') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:51:13.915935', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:51:13.914412' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:51:13.914487') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (1.7ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:51:18.921178', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:51:18.920013' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:51:18.920049') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.6ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:51:23.925916', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:51:23.924373' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:51:23.924439') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:51:28.931847', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:51:28.930366' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:51:28.930429') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:51:33.937591', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:51:33.935958' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:51:33.936024') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:51:38.943360', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:51:38.941834' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:51:38.941910') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (0.9ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:51:43.948090', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:51:43.947462' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:51:43.947495') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:51:48.951520', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:51:48.950001' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:51:48.950073') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:51:53.957325', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:51:53.955806' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:51:53.955873') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:51:58.963069', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:51:58.961481' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:51:58.961554') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.6ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:52:03.968696', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:52:03.967225' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:52:03.967288') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:52:08.974696', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:52:08.973146' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:52:08.973216') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:52:13.980322', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:52:13.978807' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:52:13.978883') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:52:18.985992', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:52:18.984472' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:52:18.984543') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:52:23.991502', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:52:23.990035' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:52:23.990105') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:52:28.997133', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:52:28.995537' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:52:28.995611') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:52:34.002680', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:52:34.001321' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:52:34.001389') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:52:39.008160', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:52:39.006659' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:52:39.006724') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:52:44.013777', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:52:44.012230' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:52:44.012295') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:52:49.019379', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:52:49.017872' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:52:49.017936') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:52:54.025113', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:52:54.023494' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:52:54.023568') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:52:59.030710', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:52:59.029242' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:52:59.029337') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:53:04.035972', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:53:04.034465' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:53:04.034535') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:53:09.041693', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:53:09.040138' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:53:09.040208') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:53:14.047306', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:53:14.045798' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:53:14.045866') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:53:19.052897', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:53:19.051390' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:53:19.051455') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:53:24.058644', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:53:24.057003' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:53:24.057078') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:53:29.064417', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:53:29.062842' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:53:29.062906') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:53:34.070208', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:53:34.068645' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:53:34.068713') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:53:39.075849', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:53:39.074364' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:53:39.074427') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:53:44.081448', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:53:44.079944' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:53:44.080011') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:53:49.087294', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:53:49.085607' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:53:49.085710') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:53:54.093000', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:53:54.091494' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:53:54.091566') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.8ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:53:59.098822', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:53:59.097293' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:53:59.097362') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:54:04.104860', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:54:04.103358' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:54:04.103426') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:54:09.110528', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:54:09.108963' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:54:09.109027') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:54:14.116177', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:54:14.114673' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:54:14.114737') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:54:19.121835', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:54:19.120265' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:54:19.120330') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:54:24.127439', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:54:24.125886' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:54:24.125946') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:54:29.132950', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:54:29.131440' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:54:29.131513') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:54:34.138760', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:54:34.137211' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:54:34.137280') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:54:39.144481', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:54:39.142911' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:54:39.142985') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:54:44.150234', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:54:44.148690' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:54:44.148755') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:54:49.155812', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:54:49.154302' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:54:49.154376') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:54:54.161425', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:54:54.159926' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:54:54.159992') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (1.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:54:59.167231', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:54:59.165665' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:54:59.165740') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:55:04.171591', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:55:04.170014' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:55:04.170081') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:55:09.177145', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:55:09.175690' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:55:09.175756') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:55:14.182839', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:55:14.181310' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:55:14.181381') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:55:19.188656', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:55:19.187146' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:55:19.187220') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:55:24.194341', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:55:24.192807' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:55:24.192874') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:55:29.199950', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:55:29.198390' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:55:29.198454') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:55:34.205580', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:55:34.204084' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:55:34.204158') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:55:39.211013', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:55:39.209473' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:55:39.209541') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:55:44.216688', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:55:44.215217' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:55:44.215286') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:55:49.222391', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:55:49.220850' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:55:49.220915') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:55:54.228059', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:55:54.226551' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:55:54.226620') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:55:59.233769', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:55:59.232181' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:55:59.232250') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:56:04.239437', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:56:04.237834' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:56:04.237901') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:56:09.245024', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:56:09.243564' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:56:09.243628') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:56:14.250799', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:56:14.249228' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:56:14.249299') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:56:19.256534', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:56:19.255069' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:56:19.255139') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:56:24.262086', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:56:24.260536' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:56:24.260608') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:56:29.267223', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:56:29.265587' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:56:29.265691') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:56:34.272796', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:56:34.271333' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:56:34.271403') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:56:39.278420', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:56:39.276863' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:56:39.276937') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:56:44.284065', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:56:44.282554' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:56:44.282629') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:56:49.289784', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:56:49.288273' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:56:49.288360') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:56:54.295117', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:56:54.293527' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:56:54.293597') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (1.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:56:59.300745', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:56:59.299233' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:56:59.299308') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:57:04.305313', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:57:04.303747' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:57:04.303814') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:57:09.310967', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:57:09.309434' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:57:09.309503') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:57:14.316568', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:57:14.315049' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:57:14.315121') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:57:19.322175', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:57:19.320639' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:57:19.320714') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:57:24.327766', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:57:24.326239' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:57:24.326323') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (1.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:57:29.333464', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:57:29.331952' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:57:29.332026') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:57:34.338152', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:57:34.336490' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:57:34.336563') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:57:39.343906', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:57:39.342283' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:57:39.342357') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:57:44.349488', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:57:44.347992' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:57:44.348066') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:57:49.355278', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:57:49.353768' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:57:49.353841') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.6ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:57:54.360942', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:57:54.359433' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:57:54.359508') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:57:59.366908', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:57:59.365368' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:57:59.365442') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:58:04.372687', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:58:04.371220' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:58:04.371289') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:58:09.378475', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:58:09.376869' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:58:09.376958') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:58:14.384454', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:58:14.382592' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:58:14.382686') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:58:19.390171', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:58:19.388616' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:58:19.388687') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:58:24.395865', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:58:24.394356' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:58:24.394432') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:58:29.401514', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:58:29.399984' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:58:29.400060') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:58:34.407135', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:58:34.405606' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:58:34.405703') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:58:39.412855', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:58:39.411253' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:58:39.411322') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:58:44.418585', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:58:44.416944' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:58:44.417015') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:58:49.424191', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:58:49.422726' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:58:49.422797') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:58:54.429697', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:58:54.428198' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:58:54.428268') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:58:59.435283', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:58:59.433777' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:58:59.433852') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (1.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:59:04.440890', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:59:04.439374' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:59:04.439448') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:59:09.445579', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:59:09.444010' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:59:09.444082') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:59:14.451212', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:59:14.449696' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:59:14.449772') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:59:19.456840', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:59:19.455333' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:59:19.455405') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:59:24.462473', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:59:24.460929' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:59:24.460996') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:59:29.468040', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:59:29.466535' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:59:29.466611') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (1.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:59:34.473688', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:59:34.472149' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:59:34.472223') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (0.9ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:59:39.477248', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:59:39.476644' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:59:39.476679') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (0.9ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:59:44.479599', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:59:44.478989' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:59:44.479025') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:59:49.483022', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:59:49.481443' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:59:49.481519') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.7ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:59:54.488703', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:59:54.487192' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:59:54.487263') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 15:59:59.494851', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 15:59:59.493283' AND (locked_at IS NULL OR locked_at < '2013-03-20 11:59:59.493363') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 16:00:04.500319', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 16:00:04.498816' AND (locked_at IS NULL OR locked_at < '2013-03-20 12:00:04.498890') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (0.9ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 16:00:09.504913', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 16:00:09.504322' AND (locked_at IS NULL OR locked_at < '2013-03-20 12:00:09.504355') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (1.5ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 16:00:14.507572', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 16:00:14.506650' AND (locked_at IS NULL OR locked_at < '2013-03-20 12:00:14.506696') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 16:00:19.511799', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 16:00:19.510333' AND (locked_at IS NULL OR locked_at < '2013-03-20 12:00:19.510398') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 16:00:24.517355', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 16:00:24.515863' AND (locked_at IS NULL OR locked_at < '2013-03-20 12:00:24.515926') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 16:00:29.522978', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 16:00:29.521430' AND (locked_at IS NULL OR locked_at < '2013-03-20 12:00:29.521495') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 16:00:34.528571', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 16:00:34.527073' AND (locked_at IS NULL OR locked_at < '2013-03-20 12:00:34.527141') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 16:00:39.534176', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 16:00:39.532687' AND (locked_at IS NULL OR locked_at < '2013-03-20 12:00:39.532756') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.1ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 16:00:44.538764', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 16:00:44.538173' AND (locked_at IS NULL OR locked_at < '2013-03-20 12:00:44.538204') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (1.4ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 16:00:49.542519', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 16:00:49.541618' AND (locked_at IS NULL OR locked_at < '2013-03-20 12:00:49.541664') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 16:00:54.546638', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 16:00:54.545091' AND (locked_at IS NULL OR locked_at < '2013-03-20 12:00:54.545158') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 16:00:59.552281', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 16:00:59.550781' AND (locked_at IS NULL OR locked_at < '2013-03-20 12:00:59.550849') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 16:01:04.558048', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 16:01:04.556498' AND (locked_at IS NULL OR locked_at < '2013-03-20 12:01:04.556568') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 16:01:09.563660', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 16:01:09.562203' AND (locked_at IS NULL OR locked_at < '2013-03-20 12:01:09.562267') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (1.0ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 16:01:14.568356', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 16:01:14.567735' AND (locked_at IS NULL OR locked_at < '2013-03-20 12:01:14.567773') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 16:01:19.571689', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 16:01:19.570225' AND (locked_at IS NULL OR locked_at < '2013-03-20 12:01:19.570288') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (1.9ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 16:01:24.576910', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 16:01:24.575784' AND (locked_at IS NULL OR locked_at < '2013-03-20 12:01:24.575857') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 16:01:29.581504', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 16:01:29.580000' AND (locked_at IS NULL OR locked_at < '2013-03-20 12:01:29.580074') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (1.9ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 16:01:34.587137', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 16:01:34.585576' AND (locked_at IS NULL OR locked_at < '2013-03-20 12:01:34.585679') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 16:01:39.592079', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 16:01:39.590597' AND (locked_at IS NULL OR locked_at < '2013-03-20 12:01:39.590663') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 16:01:44.597708', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 16:01:44.596185' AND (locked_at IS NULL OR locked_at < '2013-03-20 12:01:44.596255') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 16:01:49.603493', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 16:01:49.601995' AND (locked_at IS NULL OR locked_at < '2013-03-20 12:01:49.602062') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 16:01:54.609070', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 16:01:54.607573' AND (locked_at IS NULL OR locked_at < '2013-03-20 12:01:54.607640') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 16:01:59.614596', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 16:01:59.613100' AND (locked_at IS NULL OR locked_at < '2013-03-20 12:01:59.613163') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 16:02:04.620361', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 16:02:04.618859' AND (locked_at IS NULL OR locked_at < '2013-03-20 12:02:04.618927') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 16:02:09.625994', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 16:02:09.624445' AND (locked_at IS NULL OR locked_at < '2013-03-20 12:02:09.624512') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 16:02:14.631551', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 16:02:14.630053' AND (locked_at IS NULL OR locked_at < '2013-03-20 12:02:14.630119') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 16:02:19.637061', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 16:02:19.635608' AND (locked_at IS NULL OR locked_at < '2013-03-20 12:02:19.635671') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 16:02:24.642621', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 16:02:24.641130' AND (locked_at IS NULL OR locked_at < '2013-03-20 12:02:24.641195') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 16:02:29.648278', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 16:02:29.646782' AND (locked_at IS NULL OR locked_at < '2013-03-20 12:02:29.646847') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 16:02:34.653880', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 16:02:34.652334' AND (locked_at IS NULL OR locked_at < '2013-03-20 12:02:34.652406') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 16:02:39.659415', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 16:02:39.657955' AND (locked_at IS NULL OR locked_at < '2013-03-20 12:02:39.658023') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 16:02:44.665063', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 16:02:44.663566' AND (locked_at IS NULL OR locked_at < '2013-03-20 12:02:44.663634') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 16:02:49.670652', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 16:02:49.669122' AND (locked_at IS NULL OR locked_at < '2013-03-20 12:02:49.669195') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 16:02:54.676349', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 16:02:54.674893' AND (locked_at IS NULL OR locked_at < '2013-03-20 12:02:54.674962') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 16:02:59.681349', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 16:02:59.680332' AND (locked_at IS NULL OR locked_at < '2013-03-20 12:02:59.680377') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 16:03:04.686500', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 16:03:04.684969' AND (locked_at IS NULL OR locked_at < '2013-03-20 12:03:04.685036') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 16:03:09.692166', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 16:03:09.690660' AND (locked_at IS NULL OR locked_at < '2013-03-20 12:03:09.690730') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 16:03:14.697777', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 16:03:14.696259' AND (locked_at IS NULL OR locked_at < '2013-03-20 12:03:14.696327') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 16:03:19.703346', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 16:03:19.701852' AND (locked_at IS NULL OR locked_at < '2013-03-20 12:03:19.701918') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (1.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 16:03:24.708902', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 16:03:24.707454' AND (locked_at IS NULL OR locked_at < '2013-03-20 12:03:24.707516') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 16:03:29.713532', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 16:03:29.711987' AND (locked_at IS NULL OR locked_at < '2013-03-20 12:03:29.712068') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 16:03:34.719125', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 16:03:34.717591' AND (locked_at IS NULL OR locked_at < '2013-03-20 12:03:34.717691') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 16:03:39.724642', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 16:03:39.723153' AND (locked_at IS NULL OR locked_at < '2013-03-20 12:03:39.723220') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 16:03:44.730230', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 16:03:44.728687' AND (locked_at IS NULL OR locked_at < '2013-03-20 12:03:44.728762') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 16:03:49.735950', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 16:03:49.734458' AND (locked_at IS NULL OR locked_at < '2013-03-20 12:03:49.734522') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 16:03:54.741725', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 16:03:54.740028' AND (locked_at IS NULL OR locked_at < '2013-03-20 12:03:54.740098') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 16:03:59.747269', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 16:03:59.745775' AND (locked_at IS NULL OR locked_at < '2013-03-20 12:03:59.745840') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 16:04:04.752894', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 16:04:04.751413' AND (locked_at IS NULL OR locked_at < '2013-03-20 12:04:04.751487') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 16:04:09.758542', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 16:04:09.756997' AND (locked_at IS NULL OR locked_at < '2013-03-20 12:04:09.757071') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 16:04:14.764070', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 16:04:14.762602' AND (locked_at IS NULL OR locked_at < '2013-03-20 12:04:14.762667') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 16:04:19.769790', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 16:04:19.768258' AND (locked_at IS NULL OR locked_at < '2013-03-20 12:04:19.768325') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 16:04:24.775340', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 16:04:24.773847' AND (locked_at IS NULL OR locked_at < '2013-03-20 12:04:24.773917') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.6ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 16:04:29.781142', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 16:04:29.779581' AND (locked_at IS NULL OR locked_at < '2013-03-20 12:04:29.779656') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 16:04:34.787084', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 16:04:34.785546' AND (locked_at IS NULL OR locked_at < '2013-03-20 12:04:34.785616') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.5ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 16:04:39.792660', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 16:04:39.791146' AND (locked_at IS NULL OR locked_at < '2013-03-20 12:04:39.791221') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 16:04:44.799067', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 16:04:44.797513' AND (locked_at IS NULL OR locked_at < '2013-03-20 12:04:44.797591') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (0.9ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 16:04:49.803652', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 16:04:49.803055' AND (locked_at IS NULL OR locked_at < '2013-03-20 12:04:49.803091') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 16:04:54.806963', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 16:04:54.805422' AND (locked_at IS NULL OR locked_at < '2013-03-20 12:04:54.805489') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 16:04:59.812521', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 16:04:59.811026' AND (locked_at IS NULL OR locked_at < '2013-03-20 12:04:59.811096') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 16:05:04.818199', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 16:05:04.816651' AND (locked_at IS NULL OR locked_at < '2013-03-20 12:05:04.816726') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 16:05:09.823761', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 16:05:09.822273' AND (locked_at IS NULL OR locked_at < '2013-03-20 12:05:09.822340') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 16:05:14.829363', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 16:05:14.827863' AND (locked_at IS NULL OR locked_at < '2013-03-20 12:05:14.827936') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 16:05:19.834936', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 16:05:19.833414' AND (locked_at IS NULL OR locked_at < '2013-03-20 12:05:19.833480') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 16:05:24.840384', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 16:05:24.838929' AND (locked_at IS NULL OR locked_at < '2013-03-20 12:05:24.838994') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (1.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 16:05:29.845974', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 16:05:29.844399' AND (locked_at IS NULL OR locked_at < '2013-03-20 12:05:29.844468') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 16:05:34.850476', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 16:05:34.848972' AND (locked_at IS NULL OR locked_at < '2013-03-20 12:05:34.849037') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 16:05:39.855958', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 16:05:39.854491' AND (locked_at IS NULL OR locked_at < '2013-03-20 12:05:39.854556') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 16:05:44.861539', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 16:05:44.860032' AND (locked_at IS NULL OR locked_at < '2013-03-20 12:05:44.860103') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 16:05:49.867093', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 16:05:49.865554' AND (locked_at IS NULL OR locked_at < '2013-03-20 12:05:49.865618') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 16:05:54.872637', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 16:05:54.871137' AND (locked_at IS NULL OR locked_at < '2013-03-20 12:05:54.871208') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 16:05:59.878213', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 16:05:59.876724' AND (locked_at IS NULL OR locked_at < '2013-03-20 12:05:59.876791') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (1.0ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 16:06:04.882983', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 16:06:04.882111' AND (locked_at IS NULL OR locked_at < '2013-03-20 12:06:04.882153') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (1.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 16:06:09.886505', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 16:06:09.884987' AND (locked_at IS NULL OR locked_at < '2013-03-20 12:06:09.885055') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 16:06:14.891011', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 16:06:14.889467' AND (locked_at IS NULL OR locked_at < '2013-03-20 12:06:14.889538') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 16:06:19.896643', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 16:06:19.895106' AND (locked_at IS NULL OR locked_at < '2013-03-20 12:06:19.895181') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 16:06:24.902233', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 16:06:24.900713' AND (locked_at IS NULL OR locked_at < '2013-03-20 12:06:24.900772') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 16:06:29.907721', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 16:06:29.906254' AND (locked_at IS NULL OR locked_at < '2013-03-20 12:06:29.906320') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 16:06:34.913274', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 16:06:34.911771' AND (locked_at IS NULL OR locked_at < '2013-03-20 12:06:34.911841') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mAREL (1.8ms)[0m  UPDATE "delayed_jobs" SET locked_by = null, locked_at = null WHERE (locked_by = 'host:chaitanya-laptop pid:11185')
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.0ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 16:06:39.997936', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 16:06:39.997377' AND (locked_at IS NULL OR locked_at < '2013-03-20 12:06:39.997393') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 16:06:45.002290', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 16:06:45.000766' AND (locked_at IS NULL OR locked_at < '2013-03-20 12:06:45.000830') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 16:06:50.007875', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 16:06:50.006312' AND (locked_at IS NULL OR locked_at < '2013-03-20 12:06:50.006381') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 16:06:55.013310', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 16:06:55.011859' AND (locked_at IS NULL OR locked_at < '2013-03-20 12:06:55.011920') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.0ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 16:07:00.019149', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 16:07:00.017351' AND (locked_at IS NULL OR locked_at < '2013-03-20 12:07:00.017466') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.4ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 16:07:05.024424', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 16:07:05.022934' AND (locked_at IS NULL OR locked_at < '2013-03-20 12:07:05.022998') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 16:07:10.030062', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 16:07:10.028541' AND (locked_at IS NULL OR locked_at < '2013-03-20 12:07:10.028609') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 16:07:15.035681', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 16:07:15.034030' AND (locked_at IS NULL OR locked_at < '2013-03-20 12:07:15.034099') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 16:07:20.041230', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 16:07:20.039721' AND (locked_at IS NULL OR locked_at < '2013-03-20 12:07:20.039794') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mDelayed::Backend::ActiveRecord::Job Load (2.2ms)[0m  UPDATE "delayed_jobs" SET locked_at = '2013-03-20 16:07:25.046783', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 16:07:25.045297' AND (locked_at IS NULL OR locked_at < '2013-03-20 12:07:25.045358') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *
  [1m[36mDelayed::Backend::ActiveRecord::Job Load (2.3ms)[0m  [1mUPDATE "delayed_jobs" SET locked_at = '2013-03-20 16:07:30.052254', locked_by = 'host:chaitanya-laptop pid:11185' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-03-20 16:07:30.050764' AND (locked_at IS NULL OR locked_at < '2013-03-20 12:07:30.050828') OR locked_by = 'host:chaitanya-laptop pid:11185') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING *[0m
  [1m[35mAREL (1.2ms)[0m  UPDATE "delayed_jobs" SET locked_by = null, locked_at = null WHERE (locked_by = 'host:chaitanya-laptop pid:11185')
  [1m[36mAREL (0.9ms)[0m  [1mUPDATE "delayed_jobs" SET locked_by = null, locked_at = null WHERE (locked_by = 'host:chaitanya-laptop pid:11185')[0m
DEPRECATION WARNING: config.action_view.debug_rjs will be removed in 3.1, from 3.1 onwards you will need to install prototype-rails to continue to use RJS templates . (called from <top (required)> at /home/chaitanya/workArea/ST-to-RGF/config/environment.rb:10)
  [1m[36mSQL (36.1ms)[0m  [1mSHOW client_min_messages[0m
  [1m[35mSQL (0.3ms)[0m  SET client_min_messages TO 'panic'
  [1m[36mSQL (0.2ms)[0m  [1mSET standard_conforming_strings = on[0m
  [1m[35mSQL (0.2ms)[0m  SET client_min_messages TO 'notice'
  [1m[36mSQL (15.4ms)[0m  [1mSET time zone 'UTC'[0m
  [1m[35mSQL (0.3ms)[0m  SHOW TIME ZONE
  [1m[36mPK and serial sequence (750.8ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (188.5ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
DEPRECATION WARNING: RAILS_ROOT is deprecated. Please use ::Rails.root.to_s. (called from <class:Person> at /home/chaitanya/workArea/ST-to-RGF/app/models/person.rb:134)


Started GET "/en/offers" for 127.0.0.1 at 2013-03-21 11:53:05 +0530
  [1m[36mSQL (0.5ms)[0m  [1mSHOW client_min_messages[0m
  [1m[35mSQL (0.6ms)[0m  SET client_min_messages TO 'panic'
  [1m[36mSQL (0.6ms)[0m  [1mSET standard_conforming_strings = on[0m
  [1m[35mSQL (0.5ms)[0m  SET client_min_messages TO 'notice'
  [1m[36mSQL (1.1ms)[0m  [1mSET time zone 'UTC'[0m
  [1m[35mSQL (0.6ms)[0m  SHOW TIME ZONE
  Processing by ListingsController#offers as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mSQL (286.9ms)[0m  [1m SELECT tablename
 FROM pg_tables
 WHERE schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (127.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (117.3ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (5.6ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (3.3ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (55.6ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (23.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (5.9ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (1.8ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (2.5ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (1.6ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (40.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (58.2ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (2.1ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (0.8ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mSQL (2.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"delayed_jobs"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.1ms)[0m  BEGIN
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"delayed_jobs"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (22.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"delayed_jobs"'::regclass
  [1m[36mSQL (152.4ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bG9jYWxob3N0
', NULL, '2013-03-21 06:23:08.601294', NULL, NULL, NULL, '2013-03-21 06:23:08.601446', '2013-03-21 06:23:08.601446', NULL) RETURNING "id"[0m
  [1m[35mSQL (157.6ms)[0m  COMMIT
  [1m[36mSQL (1.6ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (3.0ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mSQL (24.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"restrictions"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.3ms)[0m  SELECT COUNT(*) FROM "restrictions" WHERE ("restrictions".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
  [1m[36mLocation Load (1.2ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".community_id = 1) LIMIT 1[0m
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"locations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.8ms)[0m  [1mSELECT "communities".* FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY'))[0m
  [1m[35mSQL (75.7ms)[0m  SELECT COUNT(*) FROM "listings" INNER JOIN "locations" ON "locations"."listing_id" = "listings"."id" WHERE (open = '1' AND (valid_until IS NULL OR valid_until > '2013-03-21 06:23:07')) AND (google_address LIKE '% Pune%') AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')
 )
  [1m[36mListing Load (20.1ms)[0m  [1mSELECT "listings".* FROM "listings" INNER JOIN "locations" ON "locations"."listing_id" = "listings"."id" WHERE (open = '1' AND (valid_until IS NULL OR valid_until > '2013-03-21 06:23:07')) AND (google_address LIKE '% Pune%') AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')
 ) ORDER BY created_at DESC, listings.id DESC LIMIT 15 OFFSET 0[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listing_images"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (45.5ms)[0m  [1mSELECT COUNT(*) FROM "listing_images" WHERE ("listing_images".listing_id = 5)[0m
  [1m[35mListingImage Load (0.8ms)[0m  SELECT "listing_images".* FROM "listing_images" WHERE ("listing_images".listing_id = 5) LIMIT 1
  [1m[36mPerson Load (1.6ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
Rendered listings/_listed_listing_closed_status.haml (5.8ms)
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"diet_listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (9.8ms)[0m  [1mSELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 5)[0m
Rendered listings/_listed_listing_edit_links.haml (69.7ms)
  [1m[35mSQL (25.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"comments"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (20.9ms)[0m  [1mSELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 5)[0m
Rendered listings/_listed_listing.haml (10431.3ms)
Rendered listings/_listed_listings.haml (10565.4ms)
Rendered layouts/_kissmetrics.haml (4.0ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (7.2ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.2ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (122.9ms)
Rendered communities/default/logo/logo.haml (7.3ms)
Rendered layouts/_no_javascript.haml (79.2ms)
Rendered layouts/_facebook_sdk.haml (3.0ms)
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.6ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.7ms)[0m  SELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) AND participations.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_messages_icon.haml (16.7ms)
  [1m[36mSQL (1.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.0ms)[0m  SELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_notifications_icon.haml (14.3ms)
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.4ms)[0m  SELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY') AND (acceptance is null)
Rendered layouts/_logged_in_swap_offers_icon.haml (18.9ms)
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"authentications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mAuthentication Load (26.6ms)[0m  SELECT "authentications".* FROM "authentications" WHERE "authentications"."user_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
Rendered layouts/_logged_in.haml (101.2ms)
Rendered layouts/_notifications.haml (13.0ms)
  [1m[36mLocation Load (0.6ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
Rendered layouts/_display_popup.haml (82.2ms)
Rendered listings/index.haml within layouts/application (38203.0ms)
Completed 200 OK in 41004ms (Views: 38024.3ms | ActiveRecord: 1363.9ms | Sphinx: 0.0ms)
DEPRECATION WARNING: config.action_view.debug_rjs will be removed in 3.1, from 3.1 onwards you will need to install prototype-rails to continue to use RJS templates . (called from <top (required)> at /home/chaitanya/workArea/ST-to-RGF/config/environment.rb:10)
  [1m[36mSQL (0.6ms)[0m  [1mSHOW client_min_messages[0m
  [1m[35mSQL (0.4ms)[0m  SET client_min_messages TO 'panic'
  [1m[36mSQL (0.5ms)[0m  [1mSET standard_conforming_strings = on[0m
  [1m[35mSQL (0.4ms)[0m  SET client_min_messages TO 'notice'
  [1m[36mSQL (0.6ms)[0m  [1mSET time zone 'UTC'[0m
  [1m[35mSQL (0.6ms)[0m  SHOW TIME ZONE
  [1m[36mPK and serial sequence (8.5ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (2.4ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
DEPRECATION WARNING: RAILS_ROOT is deprecated. Please use ::Rails.root.to_s. (called from <class:Person> at /home/chaitanya/workArea/ST-to-RGF/app/models/person.rb:134)


Started GET "/en/load?listing_type=offer&category%5B%5D=all" for 127.0.0.1 at 2013-03-21 12:27:49 +0530
  Processing by ListingsController#load as 
  Parameters: {"listing_type"=>"offer", "category"=>["all"], "locale"=>"en"}
  [1m[35mPK and serial sequence (7.8ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.2ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (4.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (6.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (8.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.8ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (1.8ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (7.1ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.2ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (6.9ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.2ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (3.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.6ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (2.3ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (2.1ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (1.2ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (25.2ms)[0m  INSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bG9jYWxob3N0
', NULL, '2013-03-21 06:57:50.916041', NULL, NULL, NULL, '2013-03-21 06:57:50.916152', '2013-03-21 06:57:50.916152', NULL) RETURNING "id"
  [1m[36mSQL (14.5ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (2.0ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (1.9ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"restrictions"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.4ms)[0m  [1mSELECT COUNT(*) FROM "restrictions" WHERE ("restrictions".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')[0m
  [1m[35mLocation Load (1.3ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".community_id = 1) LIMIT 1
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"locations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (2.8ms)[0m  SELECT "communities".* FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY'))
  [1m[36mSQL (6.4ms)[0m  [1mSELECT COUNT(*) FROM "listings" INNER JOIN "locations" ON "locations"."listing_id" = "listings"."id" WHERE (open = '1' AND (valid_until IS NULL OR valid_until > '2013-03-21 06:57:50')) AND (google_address LIKE '% Pune%') AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')
 )[0m
  [1m[35mListing Load (5.6ms)[0m  SELECT "listings".* FROM "listings" INNER JOIN "locations" ON "locations"."listing_id" = "listings"."id" WHERE (open = '1' AND (valid_until IS NULL OR valid_until > '2013-03-21 06:57:50')) AND (google_address LIKE '% Pune%') AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')
 ) ORDER BY created_at DESC, listings.id DESC LIMIT 15 OFFSET 0
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listing_images"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.5ms)[0m  SELECT COUNT(*) FROM "listing_images" WHERE ("listing_images".listing_id = 5)
  [1m[36mListingImage Load (1.2ms)[0m  [1mSELECT "listing_images".* FROM "listing_images" WHERE ("listing_images".listing_id = 5) LIMIT 1[0m
  [1m[35mPerson Load (1.6ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
Rendered listings/_listed_listing_closed_status.haml (2.5ms)
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"diet_listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.4ms)[0m  SELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 5)
Rendered listings/_listed_listing_edit_links.haml (3.7ms)
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"comments"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.5ms)[0m  SELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 5)
Rendered listings/_listed_listing.haml (157.3ms)
Rendered listings/_listed_listings.haml (187.3ms)
Completed 200 OK in 1495ms (Views: 168.8ms | ActiveRecord: 164.1ms | Sphinx: 0.0ms)


Started GET "/en/load?listing_type=offer&category%5B%5D=today" for 127.0.0.1 at 2013-03-21 12:27:54 +0530
  Processing by ListingsController#load as 
  Parameters: {"listing_type"=>"offer", "category"=>["today"], "locale"=>"en"}
  [1m[36mPK and serial sequence (2.4ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (1.6ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (1.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (0.6ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mSQL (1.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (4.1ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (1.7ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (0.9ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (0.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (5.3ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (2.8ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (6.1ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.1ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.6ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.3ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.4ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (1.0ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  BEGIN
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bG9jYWxob3N0
', NULL, '2013-03-21 06:57:55.485500', NULL, NULL, NULL, '2013-03-21 06:57:55.485622', '2013-03-21 06:57:55.485622', NULL) RETURNING "id"[0m
  [1m[35mSQL (25.1ms)[0m  COMMIT
  [1m[36mSQL (2.0ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.1ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"restrictions"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.1ms)[0m  SELECT COUNT(*) FROM "restrictions" WHERE ("restrictions".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
  [1m[36mLocation Load (1.2ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".community_id = 1) LIMIT 1[0m
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"locations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (2.0ms)[0m  [1mSELECT "communities".* FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY'))[0m
  [1m[35mSQL (19.5ms)[0m  SELECT COUNT(*) FROM "listings" INNER JOIN "locations" ON "locations"."listing_id" = "listings"."id" WHERE (open = '1' AND (valid_until IS NULL OR valid_until > '2013-03-21 06:57:54')) AND ((valid_from IS NOT NULL and valid_until IS NOT NULL) and (valid_from <= '2013-03-21 06:57:55' and valid_until >= '2013-03-21 06:57:55')) AND (google_address LIKE '% Pune%') AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')
 )
Rendered listings/_listed_listings.haml (28.4ms)
Completed 200 OK in 1300ms (Views: 15.4ms | ActiveRecord: 104.5ms | Sphinx: 0.0ms)


Started GET "/en/load?listing_type=offer&category%5B%5D=all" for 127.0.0.1 at 2013-03-21 12:28:00 +0530
  Processing by ListingsController#load as 
  Parameters: {"listing_type"=>"offer", "category"=>["all"], "locale"=>"en"}
  [1m[36mPK and serial sequence (2.4ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (3.6ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (3.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (1.4ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mSQL (1.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.8ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.8ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.0ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.3ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.4ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (6.3ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.5ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.6ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.3ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.4ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (1.0ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  BEGIN
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bG9jYWxob3N0
', NULL, '2013-03-21 06:58:01.681807', NULL, NULL, NULL, '2013-03-21 06:58:01.682019', '2013-03-21 06:58:01.682019', NULL) RETURNING "id"[0m
  [1m[35mSQL (15.7ms)[0m  COMMIT
  [1m[36mSQL (1.6ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.5ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"restrictions"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.0ms)[0m  SELECT COUNT(*) FROM "restrictions" WHERE ("restrictions".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
  [1m[36mLocation Load (1.2ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".community_id = 1) LIMIT 1[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"locations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.8ms)[0m  [1mSELECT "communities".* FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY'))[0m
  [1m[35mSQL (2.9ms)[0m  SELECT COUNT(*) FROM "listings" INNER JOIN "locations" ON "locations"."listing_id" = "listings"."id" WHERE (open = '1' AND (valid_until IS NULL OR valid_until > '2013-03-21 06:58:01')) AND (google_address LIKE '% Pune%') AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')
 )
  [1m[36mListing Load (3.6ms)[0m  [1mSELECT "listings".* FROM "listings" INNER JOIN "locations" ON "locations"."listing_id" = "listings"."id" WHERE (open = '1' AND (valid_until IS NULL OR valid_until > '2013-03-21 06:58:01')) AND (google_address LIKE '% Pune%') AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')
 ) ORDER BY created_at DESC, listings.id DESC LIMIT 15 OFFSET 0[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listing_images"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "listing_images" WHERE ("listing_images".listing_id = 5)[0m
  [1m[35mListingImage Load (1.1ms)[0m  SELECT "listing_images".* FROM "listing_images" WHERE ("listing_images".listing_id = 5) LIMIT 1
  [1m[36mPerson Load (1.5ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
Rendered listings/_listed_listing_closed_status.haml (2.3ms)
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"diet_listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.8ms)[0m  [1mSELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 5)[0m
Rendered listings/_listed_listing_edit_links.haml (3.6ms)
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"comments"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 5)[0m
Rendered listings/_listed_listing.haml (95.7ms)
Rendered listings/_listed_listings.haml (113.7ms)
Completed 200 OK in 1498ms (Views: 100.5ms | ActiveRecord: 109.4ms | Sphinx: 0.0ms)


Started GET "/en/search?utf8=%E2%9C%93&q=image&commit=s" for 127.0.0.1 at 2013-03-21 12:28:11 +0530
  Processing by SearchController#show as HTML
  Parameters: {"utf8"=>"✓", "q"=>"image", "commit"=>"s", "locale"=>"en"}
  [1m[35mPK and serial sequence (3.9ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (2.4ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.3ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (3.0ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (1.7ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (1.1ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (0.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (2.5ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (1.6ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (2.3ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (2.1ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.3ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (1.4ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (1.0ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bG9jYWxob3N0
', NULL, '2013-03-21 06:58:12.931506', NULL, NULL, NULL, '2013-03-21 06:58:12.931619', '2013-03-21 06:58:12.931619', NULL) RETURNING "id"
  [1m[36mSQL (23.1ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (2.5ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (1.2ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>@ search controller index
  [1m[35mSQL (1.2ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'communities'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (1.0ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[32mSphinx Query (103.1ms)[0m  [1m*image*[0m
  [1m[32mSphinx[0m  Found 1 result
  [1m[35mSQL (1.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mListing Load (1.1ms)[0m  [1mSELECT "listings".* FROM "listings" WHERE "listings"."id" IN (5)[0m
  [1m[35mListingImage Load (0.6ms)[0m  SELECT "listing_images".* FROM "listing_images" WHERE ("listing_images".listing_id = 5)
  [1m[36mSQL (0.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listing_images"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (1.3ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
Rendered listings/_listed_listing_closed_status.haml (2.8ms)
  [1m[36mSQL (0.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"diet_listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 5)
Rendered listings/_listed_listing_edit_links.haml (73.5ms)
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"comments"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.7ms)[0m  SELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 5)
Rendered listings/_listed_listing.haml (117.4ms)
Rendered layouts/_kissmetrics.haml (3.4ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (3.6ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (5.5ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (43.5ms)
Rendered communities/default/logo/logo.haml (8.4ms)
Rendered layouts/_no_javascript.haml (52.0ms)
Rendered layouts/_facebook_sdk.haml (3.2ms)
  [1m[36mSQL (1.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.9ms)[0m  [1mSELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) AND participations.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')[0m
Rendered layouts/_logged_in_messages_icon.haml (18.0ms)
  [1m[35mSQL (1.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')[0m
Rendered layouts/_logged_in_notifications_icon.haml (11.7ms)
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.3ms)[0m  [1mSELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY') AND (acceptance is null)[0m
Rendered layouts/_logged_in_swap_offers_icon.haml (12.8ms)
  [1m[35mSQL (1.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"authentications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mAuthentication Load (1.1ms)[0m  [1mSELECT "authentications".* FROM "authentications" WHERE "authentications"."user_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
Rendered layouts/_logged_in.haml (69.6ms)
Rendered layouts/_notifications.haml (5.2ms)
  [1m[35mLocation Load (1.3ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1
Rendered layouts/_display_popup.haml (84.2ms)
Rendered search/show.haml within layouts/application (679.4ms)
Completed 200 OK in 2160ms (Views: 580.7ms | ActiveRecord: 96.9ms | Sphinx: 103.1ms)


Started GET "/en/homepage" for 127.0.0.1 at 2013-03-21 12:28:18 +0530
  Processing by HomepageController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mPK and serial sequence (6.3ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.1ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (1.4ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mSQL (3.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (2.6ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.6ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.1ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (2.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.9ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (2.0ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (5.3ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.3ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (1.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (0.6ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.4ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (1.0ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  BEGIN
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bG9jYWxob3N0
', NULL, '2013-03-21 06:58:19.584111', NULL, NULL, NULL, '2013-03-21 06:58:19.584235', '2013-03-21 06:58:19.584235', NULL) RETURNING "id"[0m
  [1m[35mSQL (14.6ms)[0m  COMMIT
  [1m[36mSQL (2.0ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.0ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mSQL (1.7ms)[0m  [1mSELECT 1 FROM "people" INNER JOIN "community_memberships" ON "people".id = "community_memberships".person_id WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (("community_memberships".community_id = 1)) LIMIT 1[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (2.2ms)[0m  [1mSELECT "communities".* FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY'))[0m
~~~~~~~~~~~~~~~not request.xhr~~~~~~~~~
  [1m[35mSQL (27.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"news_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (23.2ms)[0m  [1mSELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 1)[0m
  [1m[35mCommunity Load (1.8ms)[0m  SELECT "communities".* FROM "communities"
  [1m[36mSQL (1.0ms)[0m  [1mSELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 1) LIMIT 2[0m
  [1m[35mSQL (43.4ms)[0m  SELECT COUNT(*) FROM "listings" WHERE "listings"."listing_type" = 'offer' AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')
 ) AND (open = '1' AND (valid_until IS NULL OR valid_until > '2013-03-21 06:58:19'))
  [1m[36mListing Load (3.3ms)[0m  [1mSELECT "listings".* FROM "listings" WHERE "listings"."listing_type" = 'offer' AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')
 ) AND (open = '1' AND (valid_until IS NULL OR valid_until > '2013-03-21 06:58:19')) ORDER BY listings.created_at DESC LIMIT 3 OFFSET 0[0m
  [1m[35mListingImage Load (0.9ms)[0m  SELECT "listing_images".* FROM "listing_images" WHERE ("listing_images".listing_id IN (5,4,3))
  [1m[36mSQL (1.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listing_images"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (1.5ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"diet_listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.8ms)[0m  SELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 5)
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"comments"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.8ms)[0m  SELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 5)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (1.0ms)[0m  SELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 4)
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 4)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 3)[0m
  [1m[35mSQL (1.2ms)[0m  SELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 3)
Rendered homepage/_recent_listing.haml (67.0ms)
Rendered common/_staples.haml (2.5ms)
  [1m[36mCommunityMembership Load (1.0ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
Rendered homepage/_user_communities.haml (6.9ms)
Rendered common/_staples.haml (2.6ms)
  [1m[35mLocation Load (0.8ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1
Rendered common/_staples.haml (6.0ms)
Rendered homepage/_profile_info_empty_notification.haml (10.2ms)
Rendered common/_staples.haml (2.2ms)
  [1m[36mSQL (17.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"event_feed_events"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (19.2ms)[0m  SELECT COUNT(*) FROM "event_feed_events" WHERE ("event_feed_events".community_id = 1)
Rendered common/_staples.haml (5.9ms)
  [1m[36mEventFeedEvent Load (2.1ms)[0m  [1mSELECT "event_feed_events".* FROM "event_feed_events" WHERE ("event_feed_events".community_id = 1) ORDER BY id DESC LIMIT 5[0m
  [1m[35mPerson Load (1.7ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bpSZp8Kxar4Oag3a6HdQnY' LIMIT 1
  [1m[36mCommunity Load (0.6ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
Rendered event_feed_events/_join.haml (11.7ms)
  [1m[35mPerson Load (0.7ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'c7iNZKKvar4Oae3a6HdQnY' LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
Rendered event_feed_events/_join.haml (8.5ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
Rendered event_feed_events/_login.haml (5.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
Rendered event_feed_events/_login.haml (4.1ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
Rendered event_feed_events/_login.haml (4.9ms)
Rendered homepage/_event_feed_event.haml (134.2ms)
Rendered homepage/_event_feed.haml (151.0ms)
Rendered common/_staples.haml (2.5ms)
Rendered common/_staples.haml (2.2ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 1) LIMIT 2[0m
Rendered homepage/_news_items.haml (7.6ms)
Rendered common/_staples.haml (2.4ms)
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"polls"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPoll Load (1.0ms)[0m  [1mSELECT "polls".* FROM "polls" WHERE "polls"."active" = 't' AND ("polls".community_id = 1) LIMIT 1[0m
Rendered layouts/_kissmetrics.haml (3.1ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.8ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.4ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (11.3ms)
Rendered communities/default/logo/logo.haml (2.5ms)
Rendered layouts/_no_javascript.haml (16.4ms)
Rendered layouts/_facebook_sdk.haml (73.7ms)
  [1m[35mSQL (2.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.0ms)[0m  SELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) AND participations.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_messages_icon.haml (24.5ms)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.0ms)[0m  SELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_notifications_icon.haml (19.9ms)
  [1m[36mSQL (2.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.1ms)[0m  SELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY') AND (acceptance is null)
Rendered layouts/_logged_in_swap_offers_icon.haml (11.9ms)
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"authentications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mAuthentication Load (1.0ms)[0m  SELECT "authentications".* FROM "authentications" WHERE "authentications"."user_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
Rendered layouts/_logged_in.haml (79.8ms)
Rendered layouts/_notifications.haml (5.3ms)
Rendered layouts/_display_popup.haml (6.8ms)
Rendered homepage/index.haml within layouts/application (866.1ms)
Completed 200 OK in 2289ms (Views: 757.7ms | ActiveRecord: 260.0ms | Sphinx: 0.0ms)


Started GET "/?locale=en&page=2" for 127.0.0.1 at 2013-03-21 12:28:28 +0530
  Processing by DashboardController#index as 
  Parameters: {"locale"=>"en", "page"=>"2"}
  [1m[36mPK and serial sequence (6.4ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (1.7ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (3.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (1.4ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mSQL (3.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mLocation Load (1.1ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
~~~~~~~~~~~~~~~dashboard#index~~~~~~~~~1
  [1m[36mPK and serial sequence (3.8ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (2.4ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.0ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.0ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (6.1ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (1.6ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
Rendered dashboard/_header.haml (5.5ms)
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "communities"[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "communities"
  [1m[36mCommunity Load (1.6ms)[0m  [1mSELECT "communities".* FROM "communities" ORDER BY name asc[0m
Rendered dashboard/_community_list.haml (35.8ms)
Rendered dashboard/_footer.haml (10.1ms)
Rendered layouts/_kissmetrics.haml (3.9ms)
Rendered layouts/_dashboard_no_javascript.haml (4.4ms)
Rendered dashboard/index.haml within layouts/dashboard (221.0ms)
Completed 200 OK in 1444ms (Views: 250.8ms | ActiveRecord: 52.1ms | Sphinx: 0.0ms)


Started GET "/en/people/dPgoR6J6qr4Oaj3a6HdQnY/settings" for 127.0.0.1 at 2013-03-21 12:29:02 +0530
  Processing by SettingsController#show as HTML
  Parameters: {"locale"=>"en", "person_id"=>"dPgoR6J6qr4Oaj3a6HdQnY"}
  [1m[35mPK and serial sequence (5.3ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (2.9ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (3.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.3ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.1ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.0ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (1.9ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (2.5ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (2.6ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (1.6ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.3ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" IS NULL LIMIT 1
  [1m[36mLocation Load (0.9ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mLocation Load (1.4ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"locations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
WARNING: Can't mass-assign protected attributes: type
Rendered settings/profile.haml within layouts/settings (190.1ms)
Completed 500 Internal Server Error in 1411ms

ActionView::Template::Error (undefined method `real_name_required?' for nil:NilClass):
    1: - content_for :javascript do
    2:   initialize_update_profile_info_form('#{I18n.locale}','#{@person.id.to_s}', '#{t('address_validator')}', #{@current_community.real_name_required?});
    3: 
    4: - content_for :extra_javascript do
    5:   = javascript_include_tag "https://maps.google.com/maps/api/js?sensor=true"
  app/views/settings/profile.haml:2:in `block in _app_views_settings_profile_haml___173668980_123351120_579716220'
  app/views/settings/profile.haml:1:in `_app_views_settings_profile_haml___173668980_123351120_579716220'
  app/controllers/settings_controller.rb:15:in `show'

Rendered /home/chaitanya/.rvm/gems/ruby-1.9.3-p194@strgf/gems/actionpack-3.0.19/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.2ms)
Rendered /home/chaitanya/.rvm/gems/ruby-1.9.3-p194@strgf/gems/actionpack-3.0.19/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (94.4ms)
Rendered /home/chaitanya/.rvm/gems/ruby-1.9.3-p194@strgf/gems/actionpack-3.0.19/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (105.1ms)


Started GET "/en/homepage" for 127.0.0.1 at 2013-03-21 12:29:14 +0530
  Processing by HomepageController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mPK and serial sequence (7.6ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.7ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (0.8ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.6ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.3ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (1.9ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.8ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.6ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (7.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (2.1ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.1ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" IS NULL LIMIT 1[0m
  [1m[35mLocation Load (0.8ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
Redirected to http://localhost:3000/?locale=en
~~~~~~~~~~~~~~~not request.xhr~~~~~~~~~
  [1m[36mCommunity Load (1.4ms)[0m  [1mSELECT "communities".* FROM "communities"[0m
Completed 302 Found in 1178ms


Started GET "/?locale=en" for 127.0.0.1 at 2013-03-21 12:29:15 +0530
  Processing by DashboardController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[35mPK and serial sequence (9.0ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (3.1ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (3.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.5ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (3.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mLocation Load (1.0ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
~~~~~~~~~~~~~~~dashboard#index~~~~~~~~~
  [1m[35mPK and serial sequence (2.8ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (1.9ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (1.5ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.0ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (6.4ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (2.8ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
Rendered dashboard/_header.haml (5.8ms)
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "communities"
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "communities"[0m
  [1m[35mCommunity Load (1.2ms)[0m  SELECT "communities".* FROM "communities" ORDER BY name asc
Rendered dashboard/_community_list.haml (36.1ms)
Rendered dashboard/_footer.haml (8.5ms)
Rendered layouts/_kissmetrics.haml (2.9ms)
Rendered layouts/_dashboard_no_javascript.haml (3.5ms)
Rendered dashboard/index.haml within layouts/dashboard (158.6ms)
Completed 200 OK in 1359ms (Views: 157.7ms | ActiveRecord: 55.1ms | Sphinx: 0.0ms)


Started GET "/?cid=1" for 127.0.0.1 at 2013-03-21 12:29:20 +0530
  Processing by DashboardController#index as HTML
  Parameters: {"cid"=>"1"}
Redirected to http://localhost:3000/en/homepage
Completed 302 Found in 1ms


Started GET "/en/homepage" for 127.0.0.1 at 2013-03-21 12:29:21 +0530
  Processing by HomepageController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mPK and serial sequence (6.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (1.9ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (1.5ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mSQL (3.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.1ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.4ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (1.8ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (2.9ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (2.5ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (2.3ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (1.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.1ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.6ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (1.2ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  BEGIN
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bG9jYWxob3N0
', NULL, '2013-03-21 06:59:22.662080', NULL, NULL, NULL, '2013-03-21 06:59:22.662195', '2013-03-21 06:59:22.662195', NULL) RETURNING "id"[0m
  [1m[35mSQL (22.6ms)[0m  COMMIT
  [1m[36mSQL (1.6ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.0ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mSQL (0.9ms)[0m  [1mSELECT 1 FROM "people" INNER JOIN "community_memberships" ON "people".id = "community_memberships".person_id WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (("community_memberships".community_id = 1)) LIMIT 1[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.6ms)[0m  [1mSELECT "communities".* FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY'))[0m
~~~~~~~~~~~~~~~not request.xhr~~~~~~~~~
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"news_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 1)[0m
  [1m[35mCommunity Load (0.7ms)[0m  SELECT "communities".* FROM "communities"
  [1m[36mSQL (1.0ms)[0m  [1mSELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 1) LIMIT 2[0m
  [1m[35mSQL (2.4ms)[0m  SELECT COUNT(*) FROM "listings" WHERE "listings"."listing_type" = 'offer' AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')
 ) AND (open = '1' AND (valid_until IS NULL OR valid_until > '2013-03-21 06:59:22'))
  [1m[36mListing Load (3.1ms)[0m  [1mSELECT "listings".* FROM "listings" WHERE "listings"."listing_type" = 'offer' AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')
 ) AND (open = '1' AND (valid_until IS NULL OR valid_until > '2013-03-21 06:59:22')) ORDER BY listings.created_at DESC LIMIT 3 OFFSET 0[0m
  [1m[35mListingImage Load (1.3ms)[0m  SELECT "listing_images".* FROM "listing_images" WHERE ("listing_images".listing_id IN (5,4,3))
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listing_images"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (1.8ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"diet_listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.6ms)[0m  SELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 5)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"comments"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 5)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 4)
  [1m[36mSQL (0.8ms)[0m  [1mSELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 4)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mSQL (1.0ms)[0m  [1mSELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 3)[0m
  [1m[35mSQL (1.1ms)[0m  SELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 3)
Rendered homepage/_recent_listing.haml (135.1ms)
Rendered common/_staples.haml (2.9ms)
  [1m[36mCommunityMembership Load (1.1ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
Rendered homepage/_user_communities.haml (7.4ms)
Rendered common/_staples.haml (2.3ms)
  [1m[35mLocation Load (1.1ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1
Rendered common/_staples.haml (2.3ms)
Rendered homepage/_profile_info_empty_notification.haml (3.6ms)
Rendered common/_staples.haml (2.3ms)
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"event_feed_events"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.0ms)[0m  SELECT COUNT(*) FROM "event_feed_events" WHERE ("event_feed_events".community_id = 1)
Rendered common/_staples.haml (3.2ms)
  [1m[36mEventFeedEvent Load (1.6ms)[0m  [1mSELECT "event_feed_events".* FROM "event_feed_events" WHERE ("event_feed_events".community_id = 1) ORDER BY id DESC LIMIT 5[0m
  [1m[35mPerson Load (1.6ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bpSZp8Kxar4Oag3a6HdQnY' LIMIT 1
  [1m[36mCommunity Load (0.9ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
Rendered event_feed_events/_join.haml (16.4ms)
  [1m[35mPerson Load (1.9ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'c7iNZKKvar4Oae3a6HdQnY' LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
Rendered event_feed_events/_join.haml (7.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
Rendered event_feed_events/_login.haml (4.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
Rendered event_feed_events/_login.haml (4.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
Rendered event_feed_events/_login.haml (4.2ms)
Rendered homepage/_event_feed_event.haml (58.7ms)
Rendered homepage/_event_feed.haml (65.3ms)
Rendered common/_staples.haml (74.8ms)
Rendered common/_staples.haml (2.3ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 1) LIMIT 2[0m
Rendered homepage/_news_items.haml (6.2ms)
Rendered common/_staples.haml (2.6ms)
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"polls"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPoll Load (1.2ms)[0m  [1mSELECT "polls".* FROM "polls" WHERE "polls"."active" = 't' AND ("polls".community_id = 1) LIMIT 1[0m
Rendered layouts/_kissmetrics.haml (3.1ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.7ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.2ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (10.7ms)
Rendered communities/default/logo/logo.haml (2.4ms)
Rendered layouts/_no_javascript.haml (15.5ms)
Rendered layouts/_facebook_sdk.haml (2.4ms)
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.4ms)[0m  SELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) AND participations.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_messages_icon.haml (17.3ms)
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.0ms)[0m  SELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_notifications_icon.haml (12.7ms)
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.0ms)[0m  SELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY') AND (acceptance is null)
Rendered layouts/_logged_in_swap_offers_icon.haml (13.4ms)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"authentications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mAuthentication Load (1.2ms)[0m  SELECT "authentications".* FROM "authentications" WHERE "authentications"."user_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
Rendered layouts/_logged_in.haml (151.7ms)
Rendered layouts/_notifications.haml (4.9ms)
Rendered layouts/_display_popup.haml (7.3ms)
Rendered homepage/index.haml within layouts/application (663.8ms)
Completed 200 OK in 2085ms (Views: 615.4ms | ActiveRecord: 144.2ms | Sphinx: 0.0ms)


Started GET "/en/people/dPgoR6J6qr4Oaj3a6HdQnY/settings" for 127.0.0.1 at 2013-03-21 12:29:27 +0530
  Processing by SettingsController#show as HTML
  Parameters: {"locale"=>"en", "person_id"=>"dPgoR6J6qr4Oaj3a6HdQnY"}
  [1m[36mPK and serial sequence (5.0ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (1.7ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (1.4ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mSQL (1.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (2.4ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.1ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (0.9ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (1.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (5.3ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.0ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (6.1ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.1ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (3.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.3ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.5ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (0.5ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bG9jYWxob3N0
', NULL, '2013-03-21 06:59:29.395559', NULL, NULL, NULL, '2013-03-21 06:59:29.395672', '2013-03-21 06:59:29.395672', NULL) RETURNING "id"[0m
  [1m[35mSQL (23.1ms)[0m  COMMIT
  [1m[36mSQL (1.5ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.0ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mPerson Load (1.7ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mLocation Load (0.9ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"locations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
WARNING: Can't mass-assign protected attributes: type
  [1m[35mLocation Load (1.3ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".community_id = 1) LIMIT 1
  [1m[36mDiet Load (17.4ms)[0m  [1mSELECT "diets".* FROM "diets" INNER JOIN "restrictions" ON "diets".id = "restrictions".diet_id WHERE (("restrictions".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY'))[0m
Rendered layouts/_kissmetrics.haml (3.4ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (2.0ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.6ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (12.9ms)
Rendered communities/default/logo/logo.haml (2.6ms)
Rendered layouts/_no_javascript.haml (17.3ms)
Rendered layouts/_facebook_sdk.haml (3.0ms)
  [1m[35mSQL (0.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.0ms)[0m  SELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) AND participations.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_messages_icon.haml (15.9ms)
  [1m[36mSQL (0.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.4ms)[0m  SELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_notifications_icon.haml (8.6ms)
  [1m[36mSQL (0.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.4ms)[0m  SELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY') AND (acceptance is null)
Rendered layouts/_logged_in_swap_offers_icon.haml (8.7ms)
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"authentications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mAuthentication Load (0.9ms)[0m  SELECT "authentications".* FROM "authentications" WHERE "authentications"."user_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
Rendered layouts/_logged_in.haml (52.3ms)
Rendered layouts/_notifications.haml (4.6ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
Rendered layouts/_display_popup.haml (85.7ms)
Rendered layouts/application.haml (315.0ms)
Rendered settings/profile.haml within layouts/settings (368.3ms)
Completed 200 OK in 1772ms (Views: 344.6ms | ActiveRecord: 111.2ms | Sphinx: 0.0ms)


Started GET "/en/people/dPgoR6J6qr4Oaj3a6HdQnY/settings/avatar" for 127.0.0.1 at 2013-03-21 12:29:33 +0530
  Processing by SettingsController#avatar as HTML
  Parameters: {"locale"=>"en", "person_id"=>"dPgoR6J6qr4Oaj3a6HdQnY"}
  [1m[35mPK and serial sequence (6.3ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (5.0ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (2.1ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (7.1ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.3ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.0ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (7.4ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.2ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (6.1ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (3.9ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.6ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.4ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (1.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (0.6ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bG9jYWxob3N0
', NULL, '2013-03-21 06:59:35.443081', NULL, NULL, NULL, '2013-03-21 06:59:35.443201', '2013-03-21 06:59:35.443201', NULL) RETURNING "id"
  [1m[36mSQL (19.7ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (0.9ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (0.5ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mPerson Load (0.5ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
Completed 500 Internal Server Error in 1481ms

NoMethodError (undefined method `rescue_from' for #<SettingsController:0xed54a68>):
  app/controllers/settings_controller.rb:25:in `avatar'

Rendered /home/chaitanya/.rvm/gems/ruby-1.9.3-p194@strgf/gems/actionpack-3.0.19/lib/action_dispatch/middleware/templates/rescues/_trace.erb (4.6ms)
Rendered /home/chaitanya/.rvm/gems/ruby-1.9.3-p194@strgf/gems/actionpack-3.0.19/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (12.2ms)
Rendered /home/chaitanya/.rvm/gems/ruby-1.9.3-p194@strgf/gems/actionpack-3.0.19/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (28.1ms)


Started GET "/en/people/dPgoR6J6qr4Oaj3a6HdQnY/settings/avatar" for 127.0.0.1 at 2013-03-21 12:30:48 +0530
  Processing by SettingsController#avatar as HTML
  Parameters: {"locale"=>"en", "person_id"=>"dPgoR6J6qr4Oaj3a6HdQnY"}
  [1m[36mPK and serial sequence (8.3ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.1ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (3.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (1.8ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mSQL (2.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (9.1ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (5.2ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.7ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (2.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.5ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (2.5ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (5.4ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (2.1ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (0.6ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (1.2ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bG9jYWxob3N0
', NULL, '2013-03-21 07:00:49.608742', NULL, NULL, NULL, '2013-03-21 07:00:49.608855', '2013-03-21 07:00:49.608855', NULL) RETURNING "id"[0m
  [1m[35mSQL (29.1ms)[0m  COMMIT
  [1m[36mSQL (1.5ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (0.7ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mPerson Load (0.9ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
Rendered layouts/_kissmetrics.haml (3.0ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.8ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (85.3ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (93.6ms)
Rendered communities/default/logo/logo.haml (2.6ms)
Rendered layouts/_no_javascript.haml (16.3ms)
Rendered layouts/_facebook_sdk.haml (2.7ms)
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.1ms)[0m  SELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) AND participations.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_messages_icon.haml (17.6ms)
  [1m[36mSQL (1.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_notifications_icon.haml (10.7ms)
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.8ms)[0m  SELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY') AND (acceptance is null)
Rendered layouts/_logged_in_swap_offers_icon.haml (10.6ms)
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"authentications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mAuthentication Load (1.0ms)[0m  SELECT "authentications".* FROM "authentications" WHERE "authentications"."user_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
Rendered layouts/_logged_in.haml (56.9ms)
Rendered layouts/_notifications.haml (5.9ms)
  [1m[36mLocation Load (1.1ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
Rendered layouts/_display_popup.haml (11.3ms)
Rendered layouts/application.haml (243.6ms)
Rendered settings/avatar.haml within layouts/settings (297.1ms)
Completed 200 OK in 1671ms (Views: 298.6ms | ActiveRecord: 114.5ms | Sphinx: 0.0ms)


Started GET "/en/people/dPgoR6J6qr4Oaj3a6HdQnY/settings/avatar" for 127.0.0.1 at 2013-03-21 12:32:38 +0530

SyntaxError (/home/chaitanya/workArea/ST-to-RGF/app/controllers/settings_controller.rb:40: syntax error, unexpected tASSOC, expecting keyword_end
      flash[:error] => "Can't upload image this tim...
                      ^):
  

Rendered /home/chaitanya/.rvm/gems/ruby-1.9.3-p194@strgf/gems/actionpack-3.0.19/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.5ms)
Rendered /home/chaitanya/.rvm/gems/ruby-1.9.3-p194@strgf/gems/actionpack-3.0.19/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (6.3ms)
Rendered /home/chaitanya/.rvm/gems/ruby-1.9.3-p194@strgf/gems/actionpack-3.0.19/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (12.2ms)


Started GET "/en/people/dPgoR6J6qr4Oaj3a6HdQnY/settings/avatar" for 127.0.0.1 at 2013-03-21 12:32:46 +0530
  Processing by SettingsController#avatar as HTML
  Parameters: {"locale"=>"en", "person_id"=>"dPgoR6J6qr4Oaj3a6HdQnY"}
  [1m[35mPK and serial sequence (6.7ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.6ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.3ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.0ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.1ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.0ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (7.1ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (5.5ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (7.1ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.9ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (3.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.4ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (1.6ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (1.1ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.2ms)[0m  INSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bG9jYWxob3N0
', NULL, '2013-03-21 07:02:47.845874', NULL, NULL, NULL, '2013-03-21 07:02:47.846174', '2013-03-21 07:02:47.846174', NULL) RETURNING "id"
  [1m[36mSQL (17.8ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (1.3ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (1.0ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mPerson Load (1.3ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
Rendered layouts/_kissmetrics.haml (92.5ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (2.0ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.5ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (12.5ms)
Rendered communities/default/logo/logo.haml (2.6ms)
Rendered layouts/_no_javascript.haml (16.8ms)
Rendered layouts/_facebook_sdk.haml (2.5ms)
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.8ms)[0m  [1mSELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) AND participations.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')[0m
Rendered layouts/_logged_in_messages_icon.haml (18.0ms)
  [1m[35mSQL (1.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.4ms)[0m  [1mSELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')[0m
Rendered layouts/_logged_in_notifications_icon.haml (11.8ms)
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY') AND (acceptance is null)[0m
Rendered layouts/_logged_in_swap_offers_icon.haml (12.2ms)
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"authentications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mAuthentication Load (0.9ms)[0m  [1mSELECT "authentications".* FROM "authentications" WHERE "authentications"."user_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
Rendered layouts/_logged_in.haml (64.4ms)
Rendered layouts/_notifications.haml (8.4ms)
  [1m[35mLocation Load (1.1ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1
Rendered layouts/_display_popup.haml (11.9ms)
Rendered layouts/application.haml (270.2ms)
Rendered settings/avatar.haml within layouts/settings (290.0ms)
Completed 200 OK in 1652ms (Views: 279.9ms | ActiveRecord: 110.4ms | Sphinx: 0.0ms)


Started POST "/en/people/dPgoR6J6qr4Oaj3a6HdQnY/update_avatar" for 127.0.0.1 at 2013-03-21 12:33:17 +0530
  Processing by PeopleController#update_avatar as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"WJyxSApP1ZoDya7qcieJqUg5S0Zc4q5IQ7Pj2USt5FE=", "person"=>{"image"=>#<ActionDispatch::Http::UploadedFile:0xde1e468 @original_filename="599040_621248821224173_1433485066_n.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"person[image]\"; filename=\"599040_621248821224173_1433485066_n.jpg\"\r\nContent-Type: image/jpeg\r\n", @tempfile=#<File:/tmp/RackMultipart20130321-2910-h00tkr>>}, "commit"=>"Save picture", "locale"=>"en", "id"=>"dPgoR6J6qr4Oaj3a6HdQnY"}
  [1m[36mPK and serial sequence (6.4ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.1ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (1.4ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mSQL (2.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.1ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (1.9ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (1.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (5.9ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.1ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (6.6ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (5.9ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (0.9ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.4ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (1.1ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  BEGIN
  [1m[36mSQL (1.4ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bG9jYWxob3N0
', NULL, '2013-03-21 07:03:19.180818', NULL, NULL, NULL, '2013-03-21 07:03:19.180965', '2013-03-21 07:03:19.180965', NULL) RETURNING "id"[0m
  [1m[35mSQL (28.5ms)[0m  COMMIT
  [1m[36mSQL (1.9ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.1ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mPerson Load (1.9ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mLocation Load (1.6ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.4ms)[0m  SELECT 1 FROM "people" WHERE ("people"."username" = 'saraf') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mSELECT 1 FROM "people" WHERE ("people"."email" = 'chaitanya@stridepath.com') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1[0m
  [1m[35mAREL (146.8ms)[0m  UPDATE "people" SET "preferences" = '---
email_about_new_messages: true
email_about_new_comments_to_own_listing: true
email_when_conversation_accepted: true
email_when_conversation_rejected: true
email_about_new_badges: true
email_about_new_received_testimonials: true
email_about_accept_reminders: true
email_about_testimonial_reminders: true
email_about_weekly_events: true
' WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY'
[paperclip] Saving attachments.
  [1m[36mSQL (44.9ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (0.7ms)[0m  BEGIN
WARNING: Can't mass-assign protected attributes: image
  [1m[36mSQL (1.0ms)[0m  [1mSELECT 1 FROM "people" WHERE ("people"."username" = 'saraf') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  SELECT 1 FROM "people" WHERE ("people"."email" = 'chaitanya@stridepath.com') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1
  [1m[36mAREL (0.7ms)[0m  [1mUPDATE "people" SET "preferences" = '---
email_about_new_messages: true
email_about_new_comments_to_own_listing: true
email_when_conversation_accepted: true
email_when_conversation_rejected: true
email_about_new_badges: true
email_about_new_received_testimonials: true
email_about_accept_reminders: true
email_about_testimonial_reminders: true
email_about_weekly_events: true
' WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY'[0m
[paperclip] Saving attachments.
  [1m[35mSQL (9.4ms)[0m  COMMIT
Redirected to http://localhost:3000/en/people/dPgoR6J6qr4Oaj3a6HdQnY/settings/avatar
Completed 302 Found in 1757ms


Started GET "/en/people/dPgoR6J6qr4Oaj3a6HdQnY/settings/avatar" for 127.0.0.1 at 2013-03-21 12:33:19 +0530
  Processing by SettingsController#avatar as HTML
  Parameters: {"locale"=>"en", "person_id"=>"dPgoR6J6qr4Oaj3a6HdQnY"}
  [1m[36mPK and serial sequence (6.8ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.2ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (3.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (1.6ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mSQL (2.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.8ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.8ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (1.5ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.3ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (3.6ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (6.0ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (1.8ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.4ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.5ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (1.0ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  BEGIN
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bG9jYWxob3N0
', NULL, '2013-03-21 07:03:21.169516', NULL, NULL, NULL, '2013-03-21 07:03:21.169634', '2013-03-21 07:03:21.169634', NULL) RETURNING "id"[0m
  [1m[35mSQL (18.3ms)[0m  COMMIT
  [1m[36mSQL (0.9ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (0.6ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mPerson Load (0.8ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
Rendered layouts/_kissmetrics.haml (3.2ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.8ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.5ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (95.1ms)
Rendered communities/default/logo/logo.haml (3.8ms)
Rendered layouts/_no_javascript.haml (19.8ms)
Rendered layouts/_facebook_sdk.haml (2.6ms)
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.8ms)[0m  SELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) AND participations.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_messages_icon.haml (17.6ms)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.0ms)[0m  SELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_notifications_icon.haml (15.5ms)
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY') AND (acceptance is null)
Rendered layouts/_logged_in_swap_offers_icon.haml (10.5ms)
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"authentications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mAuthentication Load (1.1ms)[0m  SELECT "authentications".* FROM "authentications" WHERE "authentications"."user_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
Rendered layouts/_logged_in.haml (64.5ms)
Rendered layouts/_notifications.haml (6.5ms)
  [1m[36mLocation Load (1.1ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
Rendered layouts/_display_popup.haml (10.7ms)
Rendered layouts/application.haml (256.8ms)
Rendered settings/avatar.haml within layouts/settings (275.4ms)
Completed 200 OK in 1668ms (Views: 263.3ms | ActiveRecord: 414.5ms | Sphinx: 0.0ms)


Started GET "/en/people/dPgoR6J6qr4Oaj3a6HdQnY/settings/avatar" for 127.0.0.1 at 2013-03-21 12:36:07 +0530
  Processing by SettingsController#avatar as HTML
  Parameters: {"locale"=>"en", "person_id"=>"dPgoR6J6qr4Oaj3a6HdQnY"}
  [1m[35mPK and serial sequence (6.3ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (3.9ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.4ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (3.5ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (3.7ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (1.9ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.9ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.5ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (7.0ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (5.0ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (0.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.0ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (0.4ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bG9jYWxob3N0
', NULL, '2013-03-21 07:06:09.400767', NULL, NULL, NULL, '2013-03-21 07:06:09.401053', '2013-03-21 07:06:09.401053', NULL) RETURNING "id"
  [1m[36mSQL (24.9ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (1.4ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (0.7ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mPerson Load (1.2ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
Rendered layouts/_kissmetrics.haml (3.1ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.8ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (3.0ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (12.7ms)
Rendered communities/default/logo/logo.haml (3.0ms)
Rendered layouts/_no_javascript.haml (18.2ms)
Rendered layouts/_facebook_sdk.haml (2.9ms)
  [1m[36mSQL (1.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.3ms)[0m  [1mSELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) AND participations.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')[0m
Rendered layouts/_logged_in_messages_icon.haml (17.4ms)
  [1m[35mSQL (1.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.5ms)[0m  [1mSELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')[0m
Rendered layouts/_logged_in_notifications_icon.haml (10.8ms)
  [1m[35mSQL (1.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.5ms)[0m  [1mSELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY') AND (acceptance is null)[0m
Rendered layouts/_logged_in_swap_offers_icon.haml (15.0ms)
  [1m[35mSQL (1.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"authentications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mAuthentication Load (0.8ms)[0m  [1mSELECT "authentications".* FROM "authentications" WHERE "authentications"."user_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
Rendered layouts/_logged_in.haml (71.9ms)
Rendered layouts/_notifications.haml (7.3ms)
  [1m[35mLocation Load (1.8ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1
Rendered layouts/_display_popup.haml (11.3ms)
Rendered layouts/application.haml (270.5ms)
Rendered settings/avatar.haml within layouts/settings (296.0ms)
Completed 200 OK in 1721ms (Views: 288.5ms | ActiveRecord: 100.2ms | Sphinx: 0.0ms)


Started POST "/en/people/dPgoR6J6qr4Oaj3a6HdQnY/update_avatar" for 127.0.0.1 at 2013-03-21 12:36:20 +0530
  Processing by PeopleController#update_avatar as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"WJyxSApP1ZoDya7qcieJqUg5S0Zc4q5IQ7Pj2USt5FE=", "person"=>{"image"=>#<ActionDispatch::Http::UploadedFile:0xfaab900 @original_filename="296635_340218312739843_149979899_n.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"person[image]\"; filename=\"296635_340218312739843_149979899_n.jpg\"\r\nContent-Type: image/jpeg\r\n", @tempfile=#<File:/tmp/RackMultipart20130321-2910-hw35i6>>}, "commit"=>"Save picture", "locale"=>"en", "id"=>"dPgoR6J6qr4Oaj3a6HdQnY"}
  [1m[36mPK and serial sequence (6.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (3.9ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (1.3ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.1ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.0ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (1.9ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.3ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (57.8ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (2.3ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (2.7ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.4ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.4ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (0.9ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bG9jYWxob3N0
', NULL, '2013-03-21 07:06:22.281854', NULL, NULL, NULL, '2013-03-21 07:06:22.281962', '2013-03-21 07:06:22.281962', NULL) RETURNING "id"[0m
  [1m[35mSQL (22.5ms)[0m  COMMIT
  [1m[36mSQL (1.4ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.2ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mPerson Load (1.7ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mLocation Load (1.4ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.8ms)[0m  SELECT 1 FROM "people" WHERE ("people"."username" = 'saraf') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1
  [1m[36mSQL (1.4ms)[0m  [1mSELECT 1 FROM "people" WHERE ("people"."email" = 'chaitanya@stridepath.com') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1[0m
  [1m[35mAREL (0.7ms)[0m  UPDATE "people" SET "preferences" = '---
email_about_new_messages: true
email_about_new_comments_to_own_listing: true
email_when_conversation_accepted: true
email_when_conversation_rejected: true
email_about_new_badges: true
email_about_new_received_testimonials: true
email_about_accept_reminders: true
email_about_testimonial_reminders: true
email_about_weekly_events: true
' WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY'
[paperclip] Saving attachments.
  [1m[36mSQL (6.8ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (0.4ms)[0m  BEGIN
[paperclip] identify -format %wx%h '/tmp/stream20130321-2910-1g5adv3.jpg[0]' 2>/dev/null
[paperclip] convert '/tmp/stream20130321-2910-1g5adv3.jpg[0]' -resize "200x350>" '/tmp/stream20130321-2910-1g5adv320130321-2910-1dy0mky' 2>/dev/null
[paperclip] identify -format %wx%h '/tmp/stream20130321-2910-1g5adv3.jpg[0]' 2>/dev/null
[paperclip] convert '/tmp/stream20130321-2910-1g5adv3.jpg[0]' -resize "50x" -crop "50x50+0+3" +repage '/tmp/stream20130321-2910-1g5adv320130321-2910-3pj5m7' 2>/dev/null
[paperclip] identify -format %wx%h '/tmp/stream20130321-2910-1g5adv3.jpg[0]' 2>/dev/null
[paperclip] convert '/tmp/stream20130321-2910-1g5adv3.jpg[0]' -resize "200x350>" '/tmp/stream20130321-2910-1g5adv320130321-2910-1bu0u3l' 2>/dev/null
  [1m[36mSQL (1.1ms)[0m  [1mSELECT 1 FROM "people" WHERE ("people"."username" = 'saraf') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1[0m
  [1m[35mSQL (1.0ms)[0m  SELECT 1 FROM "people" WHERE ("people"."email" = 'chaitanya@stridepath.com') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1
  [1m[36mAREL (1.4ms)[0m  [1mUPDATE "people" SET "image_file_name" = '296635_340218312739843_149979899_n.jpg', "image_content_type" = 'image/jpeg', "image_file_size" = 14808, "image_updated_at" = '2013-03-21 07:06:22.557446', "updated_at" = '2013-03-21 07:06:23.738606', "preferences" = '---
email_about_new_messages: true
email_about_new_comments_to_own_listing: true
email_when_conversation_accepted: true
email_when_conversation_rejected: true
email_about_new_badges: true
email_about_new_received_testimonials: true
email_about_accept_reminders: true
email_about_testimonial_reminders: true
email_about_weekly_events: true
' WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY'[0m
[paperclip] Saving attachments.
  [1m[35mSQL (19.2ms)[0m  COMMIT
Redirected to http://localhost:3000/en/people/dPgoR6J6qr4Oaj3a6HdQnY/settings/avatar
Completed 302 Found in 9045ms


Started GET "/en/people/dPgoR6J6qr4Oaj3a6HdQnY/settings/avatar" for 127.0.0.1 at 2013-03-21 12:36:30 +0530
  Processing by SettingsController#avatar as HTML
  Parameters: {"locale"=>"en", "person_id"=>"dPgoR6J6qr4Oaj3a6HdQnY"}
  [1m[36mPK and serial sequence (6.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.1ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (1.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (1.4ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mSQL (1.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (2.7ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (2.1ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (1.9ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.0ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (6.6ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (2.1ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.3ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.4ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (1.0ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  BEGIN
  [1m[36mSQL (1.3ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bG9jYWxob3N0
', NULL, '2013-03-21 07:06:31.612893', NULL, NULL, NULL, '2013-03-21 07:06:31.613071', '2013-03-21 07:06:31.613071', NULL) RETURNING "id"[0m
  [1m[35mSQL (11.4ms)[0m  COMMIT
  [1m[36mSQL (0.9ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.7ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mPerson Load (1.4ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
Rendered layouts/_kissmetrics.haml (3.1ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (2.3ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.4ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (11.3ms)
Rendered communities/default/logo/logo.haml (4.1ms)
Rendered layouts/_no_javascript.haml (19.5ms)
Rendered layouts/_facebook_sdk.haml (2.5ms)
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.8ms)[0m  SELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) AND participations.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_messages_icon.haml (16.9ms)
  [1m[36mSQL (1.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.8ms)[0m  SELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_notifications_icon.haml (12.9ms)
  [1m[36mSQL (1.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.7ms)[0m  SELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY') AND (acceptance is null)
Rendered layouts/_logged_in_swap_offers_icon.haml (127.1ms)
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"authentications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mAuthentication Load (0.5ms)[0m  SELECT "authentications".* FROM "authentications" WHERE "authentications"."user_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
Rendered layouts/_logged_in.haml (178.8ms)
Rendered layouts/_notifications.haml (6.3ms)
  [1m[36mLocation Load (1.1ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
Rendered layouts/_display_popup.haml (16.2ms)
Rendered layouts/application.haml (298.6ms)
Rendered settings/avatar.haml within layouts/settings (414.2ms)
Completed 200 OK in 1803ms (Views: 405.0ms | ActiveRecord: 263.5ms | Sphinx: 0.0ms)


Started POST "/en/people/dPgoR6J6qr4Oaj3a6HdQnY/update_avatar" for 127.0.0.1 at 2013-03-21 12:37:26 +0530
  Processing by PeopleController#update_avatar as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"WJyxSApP1ZoDya7qcieJqUg5S0Zc4q5IQ7Pj2USt5FE=", "person"=>{"image"=>#<ActionDispatch::Http::UploadedFile:0xfda2de8 @original_filename="pain_and_gain_movie_official_dwayne_johnson_mark_wahlberg-1024x409.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"person[image]\"; filename=\"pain_and_gain_movie_official_dwayne_johnson_mark_wahlberg-1024x409.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<File:/tmp/RackMultipart20130321-2910-1h4aw74>>}, "commit"=>"Save picture", "locale"=>"en", "id"=>"dPgoR6J6qr4Oaj3a6HdQnY"}
  [1m[35mPK and serial sequence (8.5ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.7ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (3.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.5ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (5.3ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (1.8ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.0ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (3.8ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (2.4ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (3.6ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (2.4ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (3.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.4ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (1.8ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (1.1ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.2ms)[0m  INSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bG9jYWxob3N0
', NULL, '2013-03-21 07:07:27.948862', NULL, NULL, NULL, '2013-03-21 07:07:27.948981', '2013-03-21 07:07:27.948981', NULL) RETURNING "id"
  [1m[36mSQL (18.5ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (1.6ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (1.1ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mPerson Load (1.4ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mLocation Load (1.0ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  BEGIN
  [1m[36mSQL (1.0ms)[0m  [1mSELECT 1 FROM "people" WHERE ("people"."username" = 'saraf') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  SELECT 1 FROM "people" WHERE ("people"."email" = 'chaitanya@stridepath.com') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1
  [1m[36mAREL (1.2ms)[0m  [1mUPDATE "people" SET "preferences" = '---
email_about_new_messages: true
email_about_new_comments_to_own_listing: true
email_when_conversation_accepted: true
email_when_conversation_rejected: true
email_about_new_badges: true
email_about_new_received_testimonials: true
email_about_accept_reminders: true
email_about_testimonial_reminders: true
email_about_weekly_events: true
' WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY'[0m
[paperclip] Saving attachments.
  [1m[35mSQL (13.1ms)[0m  COMMIT
  [1m[36mSQL (0.6ms)[0m  [1mBEGIN[0m
[paperclip] identify -format %wx%h '/tmp/stream20130321-2910-3djbhe.png[0]' 2>/dev/null
[paperclip] convert '/tmp/stream20130321-2910-3djbhe.png[0]' -resize "200x350>" '/tmp/stream20130321-2910-3djbhe20130321-2910-1snbq1o' 2>/dev/null
[paperclip] identify -format %wx%h '/tmp/stream20130321-2910-3djbhe.png[0]' 2>/dev/null
[paperclip] convert '/tmp/stream20130321-2910-3djbhe.png[0]' -resize "x50" -crop "50x50+37+0" +repage '/tmp/stream20130321-2910-3djbhe20130321-2910-156orhz' 2>/dev/null
[paperclip] identify -format %wx%h '/tmp/stream20130321-2910-3djbhe.png[0]' 2>/dev/null
[paperclip] convert '/tmp/stream20130321-2910-3djbhe.png[0]' -resize "200x350>" '/tmp/stream20130321-2910-3djbhe20130321-2910-ko02zi' 2>/dev/null
  [1m[35mSQL (1.1ms)[0m  SELECT 1 FROM "people" WHERE ("people"."username" = 'saraf') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mSELECT 1 FROM "people" WHERE ("people"."email" = 'chaitanya@stridepath.com') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1[0m
  [1m[35mAREL (1.3ms)[0m  UPDATE "people" SET "image_file_name" = 'pain_and_gain_movie_official_dwayne_johnson_mark_wahlberg-1024x409.png', "image_content_type" = 'image/png', "image_file_size" = 27415, "image_updated_at" = '2013-03-21 07:07:35.665394', "updated_at" = '2013-03-21 07:07:36.229505', "preferences" = '---
email_about_new_messages: true
email_about_new_comments_to_own_listing: true
email_when_conversation_accepted: true
email_when_conversation_rejected: true
email_about_new_badges: true
email_about_new_received_testimonials: true
email_about_accept_reminders: true
email_about_testimonial_reminders: true
email_about_weekly_events: true
' WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY'
[paperclip] Saving attachments.
  [1m[36mSQL (20.7ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:3000/en/people/dPgoR6J6qr4Oaj3a6HdQnY/settings/avatar
Completed 302 Found in 21439ms


Started GET "/en/people/dPgoR6J6qr4Oaj3a6HdQnY/settings/avatar" for 127.0.0.1 at 2013-03-21 12:37:48 +0530
  Processing by SettingsController#avatar as HTML
  Parameters: {"locale"=>"en", "person_id"=>"dPgoR6J6qr4Oaj3a6HdQnY"}
  [1m[35mPK and serial sequence (6.0ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.2ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.5ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (3.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (7.3ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (5.2ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (1.9ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.4ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (2.6ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (6.4ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (6.6ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (0.5ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (1.0ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (0.5ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bG9jYWxob3N0
', NULL, '2013-03-21 07:07:49.857246', NULL, NULL, NULL, '2013-03-21 07:07:49.857363', '2013-03-21 07:07:49.857363', NULL) RETURNING "id"
  [1m[36mSQL (32.9ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (1.6ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (1.0ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mPerson Load (1.4ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
Rendered layouts/_kissmetrics.haml (3.1ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.7ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.7ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (97.5ms)
Rendered communities/default/logo/logo.haml (2.8ms)
Rendered layouts/_no_javascript.haml (18.2ms)
Rendered layouts/_facebook_sdk.haml (2.8ms)
  [1m[36mSQL (1.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.1ms)[0m  [1mSELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) AND participations.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')[0m
Rendered layouts/_logged_in_messages_icon.haml (21.5ms)
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.0ms)[0m  [1mSELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')[0m
Rendered layouts/_logged_in_notifications_icon.haml (17.3ms)
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY') AND (acceptance is null)[0m
Rendered layouts/_logged_in_swap_offers_icon.haml (16.2ms)
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"authentications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mAuthentication Load (1.0ms)[0m  [1mSELECT "authentications".* FROM "authentications" WHERE "authentications"."user_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
Rendered layouts/_logged_in.haml (80.5ms)
Rendered layouts/_notifications.haml (7.8ms)
  [1m[35mLocation Load (1.2ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1
Rendered layouts/_display_popup.haml (13.1ms)
Rendered layouts/application.haml (278.6ms)
Rendered settings/avatar.haml within layouts/settings (296.4ms)
Completed 200 OK in 1820ms (Views: 284.8ms | ActiveRecord: 248.2ms | Sphinx: 0.0ms)


Started POST "/en/people/dPgoR6J6qr4Oaj3a6HdQnY/update_avatar" for 127.0.0.1 at 2013-03-21 12:38:16 +0530
  Processing by PeopleController#update_avatar as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"WJyxSApP1ZoDya7qcieJqUg5S0Zc4q5IQ7Pj2USt5FE=", "person"=>{"image"=>#<ActionDispatch::Http::UploadedFile:0xd14fc8c @original_filename="_DSC0001.JPG", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"person[image]\"; filename=\"_DSC0001.JPG\"\r\nContent-Type: image/jpeg\r\n", @tempfile=#<File:/tmp/RackMultipart20130321-2910-1dwvzgu>>}, "commit"=>"Save picture", "locale"=>"en", "id"=>"dPgoR6J6qr4Oaj3a6HdQnY"}
  [1m[36mPK and serial sequence (7.6ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.1ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (2.3ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mSQL (2.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.1ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.0ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.4ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.2ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (6.3ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (1.8ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (1.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.0ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.4ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (1.0ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  BEGIN
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bG9jYWxob3N0
', NULL, '2013-03-21 07:08:18.296751', NULL, NULL, NULL, '2013-03-21 07:08:18.296864', '2013-03-21 07:08:18.296864', NULL) RETURNING "id"[0m
  [1m[35mSQL (14.1ms)[0m  COMMIT
  [1m[36mSQL (1.7ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.0ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mPerson Load (1.3ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mLocation Load (0.9ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  SELECT 1 FROM "people" WHERE ("people"."username" = 'saraf') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1
  [1m[36mSQL (1.1ms)[0m  [1mSELECT 1 FROM "people" WHERE ("people"."email" = 'chaitanya@stridepath.com') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1[0m
  [1m[35mAREL (1.0ms)[0m  UPDATE "people" SET "preferences" = '---
email_about_new_messages: true
email_about_new_comments_to_own_listing: true
email_when_conversation_accepted: true
email_when_conversation_rejected: true
email_about_new_badges: true
email_about_new_received_testimonials: true
email_about_accept_reminders: true
email_about_testimonial_reminders: true
email_about_weekly_events: true
' WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY'
[paperclip] Saving attachments.
  [1m[36mSQL (10.5ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (0.6ms)[0m  BEGIN
[paperclip] identify -format %wx%h '/tmp/stream20130321-2910-yazax3.JPG[0]' 2>/dev/null
[paperclip] convert '/tmp/stream20130321-2910-yazax3.JPG[0]' -resize "200x350>" '/tmp/stream20130321-2910-yazax320130321-2910-1jm38vd' 2>/dev/null
[paperclip] identify -format %wx%h '/tmp/stream20130321-2910-yazax3.JPG[0]' 2>/dev/null
[paperclip] convert '/tmp/stream20130321-2910-yazax3.JPG[0]' -resize "x50" -crop "50x50+12+0" +repage '/tmp/stream20130321-2910-yazax320130321-2910-1we3nv6' 2>/dev/null
[paperclip] identify -format %wx%h '/tmp/stream20130321-2910-yazax3.JPG[0]' 2>/dev/null
[paperclip] convert '/tmp/stream20130321-2910-yazax3.JPG[0]' -resize "200x350>" '/tmp/stream20130321-2910-yazax320130321-2910-11nfha3' 2>/dev/null
  [1m[36mSQL (1.4ms)[0m  [1mSELECT 1 FROM "people" WHERE ("people"."username" = 'saraf') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  SELECT 1 FROM "people" WHERE ("people"."email" = 'chaitanya@stridepath.com') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1
  [1m[36mAREL (0.7ms)[0m  [1mUPDATE "people" SET "image_file_name" = '_DSC0001.JPG', "image_content_type" = 'image/jpeg', "image_file_size" = 99406, "image_updated_at" = '2013-03-21 07:08:29.462048', "updated_at" = '2013-03-21 07:08:33.479161', "preferences" = '---
email_about_new_messages: true
email_about_new_comments_to_own_listing: true
email_when_conversation_accepted: true
email_when_conversation_rejected: true
email_about_new_badges: true
email_about_new_received_testimonials: true
email_about_accept_reminders: true
email_about_testimonial_reminders: true
email_about_weekly_events: true
' WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY'[0m
[paperclip] Saving attachments.
  [1m[35mSQL (18.7ms)[0m  COMMIT
Redirected to http://localhost:3000/en/people/dPgoR6J6qr4Oaj3a6HdQnY/settings/avatar
Completed 302 Found in 41912ms


Started GET "/en/people/dPgoR6J6qr4Oaj3a6HdQnY/settings/avatar" for 127.0.0.1 at 2013-03-21 12:38:59 +0530
  Processing by SettingsController#avatar as HTML
  Parameters: {"locale"=>"en", "person_id"=>"dPgoR6J6qr4Oaj3a6HdQnY"}
  [1m[36mPK and serial sequence (6.5ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.4ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (1.4ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mSQL (1.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (5.3ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (2.4ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (1.9ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.3ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.2ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (7.4ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (5.2ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.0ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.6ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (1.1ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  BEGIN
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bG9jYWxob3N0
', NULL, '2013-03-21 07:09:00.561308', NULL, NULL, NULL, '2013-03-21 07:09:00.561423', '2013-03-21 07:09:00.561423', NULL) RETURNING "id"[0m
  [1m[35mSQL (25.6ms)[0m  COMMIT
  [1m[36mSQL (1.7ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.0ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mPerson Load (1.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
Rendered layouts/_kissmetrics.haml (3.1ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.8ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.1ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (10.2ms)
Rendered communities/default/logo/logo.haml (3.0ms)
Rendered layouts/_no_javascript.haml (17.0ms)
Rendered layouts/_facebook_sdk.haml (2.4ms)
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.7ms)[0m  SELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) AND participations.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_messages_icon.haml (15.4ms)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.1ms)[0m  SELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_notifications_icon.haml (12.7ms)
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.0ms)[0m  SELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY') AND (acceptance is null)
Rendered layouts/_logged_in_swap_offers_icon.haml (14.3ms)
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"authentications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mAuthentication Load (1.4ms)[0m  SELECT "authentications".* FROM "authentications" WHERE "authentications"."user_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
Rendered layouts/_logged_in.haml (62.9ms)
Rendered layouts/_notifications.haml (100.3ms)
  [1m[36mLocation Load (1.2ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
Rendered layouts/_display_popup.haml (10.9ms)
Rendered layouts/application.haml (262.9ms)
Rendered settings/avatar.haml within layouts/settings (281.8ms)
Completed 200 OK in 1739ms (Views: 268.2ms | ActiveRecord: 234.9ms | Sphinx: 0.0ms)


Started POST "/en/people/dPgoR6J6qr4Oaj3a6HdQnY/update_avatar" for 127.0.0.1 at 2013-03-21 12:39:30 +0530
  Processing by PeopleController#update_avatar as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"WJyxSApP1ZoDya7qcieJqUg5S0Zc4q5IQ7Pj2USt5FE=", "person"=>{"image"=>#<ActionDispatch::Http::UploadedFile:0x1052a8b8 @original_filename="_DSC0009.JPG", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"person[image]\"; filename=\"_DSC0009.JPG\"\r\nContent-Type: image/jpeg\r\n", @tempfile=#<File:/tmp/RackMultipart20130321-2910-1v48ne>>}, "commit"=>"Save picture", "locale"=>"en", "id"=>"dPgoR6J6qr4Oaj3a6HdQnY"}
  [1m[35mPK and serial sequence (6.9ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.4ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.5ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (5.6ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (1.9ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.1ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.5ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.5ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (6.4ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.5ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.4ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (1.5ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (1.1ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.2ms)[0m  INSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bG9jYWxob3N0
', NULL, '2013-03-21 07:09:32.309244', NULL, NULL, NULL, '2013-03-21 07:09:32.309531', '2013-03-21 07:09:32.309531', NULL) RETURNING "id"
  [1m[36mSQL (18.1ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (2.1ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (0.6ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mPerson Load (1.2ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mLocation Load (0.7ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mSELECT 1 FROM "people" WHERE ("people"."username" = 'saraf') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  SELECT 1 FROM "people" WHERE ("people"."email" = 'chaitanya@stridepath.com') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1
  [1m[36mAREL (1.3ms)[0m  [1mUPDATE "people" SET "preferences" = '---
email_about_new_messages: true
email_about_new_comments_to_own_listing: true
email_when_conversation_accepted: true
email_when_conversation_rejected: true
email_about_new_badges: true
email_about_new_received_testimonials: true
email_about_accept_reminders: true
email_about_testimonial_reminders: true
email_about_weekly_events: true
' WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY'[0m
[paperclip] Saving attachments.
  [1m[35mSQL (4.3ms)[0m  COMMIT
  [1m[36mSQL (0.4ms)[0m  [1mBEGIN[0m
[paperclip] identify -format %wx%h '/tmp/stream20130321-2910-1n1cqkz.JPG[0]' 2>/dev/null
[paperclip] convert '/tmp/stream20130321-2910-1n1cqkz.JPG[0]' -resize "200x350>" '/tmp/stream20130321-2910-1n1cqkz20130321-2910-1vluzkd' 2>/dev/null
[paperclip] identify -format %wx%h '/tmp/stream20130321-2910-1n1cqkz.JPG[0]' 2>/dev/null
[paperclip] convert '/tmp/stream20130321-2910-1n1cqkz.JPG[0]' -resize "x50" -crop "50x50+12+0" +repage '/tmp/stream20130321-2910-1n1cqkz20130321-2910-uj8oyw' 2>/dev/null
[paperclip] identify -format %wx%h '/tmp/stream20130321-2910-1n1cqkz.JPG[0]' 2>/dev/null
[paperclip] convert '/tmp/stream20130321-2910-1n1cqkz.JPG[0]' -resize "200x350>" '/tmp/stream20130321-2910-1n1cqkz20130321-2910-cbj45o' 2>/dev/null
  [1m[35mSQL (1.6ms)[0m  SELECT 1 FROM "people" WHERE ("people"."username" = 'saraf') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1
  [1m[36mSQL (1.2ms)[0m  [1mSELECT 1 FROM "people" WHERE ("people"."email" = 'chaitanya@stridepath.com') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1[0m
  [1m[35mAREL (1.5ms)[0m  UPDATE "people" SET "image_file_name" = '_DSC0009.JPG', "image_file_size" = 96343, "image_updated_at" = '2013-03-21 07:09:37.894796', "updated_at" = '2013-03-21 07:09:42.015159', "preferences" = '---
email_about_new_messages: true
email_about_new_comments_to_own_listing: true
email_when_conversation_accepted: true
email_when_conversation_rejected: true
email_about_new_badges: true
email_about_new_received_testimonials: true
email_about_accept_reminders: true
email_about_testimonial_reminders: true
email_about_weekly_events: true
' WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY'
[paperclip] Saving attachments.
  [1m[36mSQL (19.1ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:3000/en/people/dPgoR6J6qr4Oaj3a6HdQnY/settings/avatar
Completed 302 Found in 27038ms


Started GET "/en/people/dPgoR6J6qr4Oaj3a6HdQnY/settings/avatar" for 127.0.0.1 at 2013-03-21 12:39:58 +0530
  Processing by SettingsController#avatar as HTML
  Parameters: {"locale"=>"en", "person_id"=>"dPgoR6J6qr4Oaj3a6HdQnY"}
  [1m[35mPK and serial sequence (6.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.6ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.8ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.1ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (2.7ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.0ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (5.9ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (2.6ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (3.6ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (2.5ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (1.6ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.4ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (1.5ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (1.1ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bG9jYWxob3N0
', NULL, '2013-03-21 07:09:59.675765', NULL, NULL, NULL, '2013-03-21 07:09:59.675892', '2013-03-21 07:09:59.675892', NULL) RETURNING "id"
  [1m[36mSQL (19.1ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (1.3ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (1.2ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mPerson Load (1.3ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
Rendered layouts/_kissmetrics.haml (3.1ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.7ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.2ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (10.6ms)
Rendered communities/default/logo/logo.haml (2.7ms)
Rendered layouts/_no_javascript.haml (16.6ms)
Rendered layouts/_facebook_sdk.haml (2.8ms)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.9ms)[0m  [1mSELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) AND participations.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')[0m
Rendered layouts/_logged_in_messages_icon.haml (17.3ms)
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')[0m
Rendered layouts/_logged_in_notifications_icon.haml (12.1ms)
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY') AND (acceptance is null)[0m
Rendered layouts/_logged_in_swap_offers_icon.haml (12.1ms)
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"authentications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mAuthentication Load (1.0ms)[0m  [1mSELECT "authentications".* FROM "authentications" WHERE "authentications"."user_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
Rendered layouts/_logged_in.haml (63.9ms)
Rendered layouts/_notifications.haml (5.8ms)
  [1m[35mLocation Load (1.1ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1
Rendered layouts/_display_popup.haml (10.0ms)
Rendered layouts/application.haml (170.2ms)
Rendered settings/avatar.haml within layouts/settings (191.4ms)
Completed 200 OK in 1423ms (Views: 178.9ms | ActiveRecord: 221.7ms | Sphinx: 0.0ms)


Started POST "/en/people/dPgoR6J6qr4Oaj3a6HdQnY/update_avatar" for 127.0.0.1 at 2013-03-21 12:43:09 +0530
  Processing by PeopleController#update_avatar as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"WJyxSApP1ZoDya7qcieJqUg5S0Zc4q5IQ7Pj2USt5FE=", "person"=>{"image"=>#<ActionDispatch::Http::UploadedFile:0x10207190 @original_filename="_DSC0145.JPG", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"person[image]\"; filename=\"_DSC0145.JPG\"\r\nContent-Type: image/jpeg\r\n", @tempfile=#<File:/tmp/RackMultipart20130321-2910-15tbsnb>>}, "commit"=>"Save picture", "locale"=>"en", "id"=>"dPgoR6J6qr4Oaj3a6HdQnY"}
  [1m[36mPK and serial sequence (8.9ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.1ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (1.5ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mSQL (2.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (2.9ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (2.0ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (1.9ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.1ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.0ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (6.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.2ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.2ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.4ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (0.9ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  BEGIN
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bG9jYWxob3N0
', NULL, '2013-03-21 07:13:10.547052', NULL, NULL, NULL, '2013-03-21 07:13:10.547166', '2013-03-21 07:13:10.547166', NULL) RETURNING "id"[0m
  [1m[35mSQL (8.7ms)[0m  COMMIT
  [1m[36mSQL (1.5ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.0ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mPerson Load (1.3ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mLocation Load (0.9ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  SELECT 1 FROM "people" WHERE ("people"."username" = 'saraf') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1
  [1m[36mSQL (1.3ms)[0m  [1mSELECT 1 FROM "people" WHERE ("people"."email" = 'chaitanya@stridepath.com') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1[0m
  [1m[35mAREL (1.2ms)[0m  UPDATE "people" SET "preferences" = '---
email_about_new_messages: true
email_about_new_comments_to_own_listing: true
email_when_conversation_accepted: true
email_when_conversation_rejected: true
email_about_new_badges: true
email_about_new_received_testimonials: true
email_about_accept_reminders: true
email_about_testimonial_reminders: true
email_about_weekly_events: true
' WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY'
[paperclip] Saving attachments.
  [1m[36mSQL (6.0ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (0.3ms)[0m  BEGIN
[paperclip] identify -format %wx%h '/tmp/stream20130321-2910-s4uylr.JPG[0]' 2>/dev/null
[paperclip] convert '/tmp/stream20130321-2910-s4uylr.JPG[0]' -resize "200x350>" '/tmp/stream20130321-2910-s4uylr20130321-2910-uw3pbn' 2>/dev/null
[paperclip] identify -format %wx%h '/tmp/stream20130321-2910-s4uylr.JPG[0]' 2>/dev/null
[paperclip] convert '/tmp/stream20130321-2910-s4uylr.JPG[0]' -resize "x50" -crop "50x50+12+0" +repage '/tmp/stream20130321-2910-s4uylr20130321-2910-1cp5d1h' 2>/dev/null
[paperclip] identify -format %wx%h '/tmp/stream20130321-2910-s4uylr.JPG[0]' 2>/dev/null
[paperclip] convert '/tmp/stream20130321-2910-s4uylr.JPG[0]' -resize "200x350>" '/tmp/stream20130321-2910-s4uylr20130321-2910-5plb5c' 2>/dev/null
  [1m[36mSQL (1.5ms)[0m  [1mSELECT 1 FROM "people" WHERE ("people"."username" = 'saraf') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  SELECT 1 FROM "people" WHERE ("people"."email" = 'chaitanya@stridepath.com') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1
  [1m[36mAREL (1.4ms)[0m  [1mUPDATE "people" SET "image_file_name" = '_DSC0145.JPG', "image_file_size" = 84997, "image_updated_at" = '2013-03-21 07:13:15.051667', "updated_at" = '2013-03-21 07:13:18.857084', "preferences" = '---
email_about_new_messages: true
email_about_new_comments_to_own_listing: true
email_when_conversation_accepted: true
email_when_conversation_rejected: true
email_about_new_badges: true
email_about_new_received_testimonials: true
email_about_accept_reminders: true
email_about_testimonial_reminders: true
email_about_weekly_events: true
' WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY'[0m
[paperclip] Saving attachments.
  [1m[35mSQL (1.2ms)[0m  ROLLBACK
Completed 500 Internal Server Error in 76590ms

Timeout::Error (Timeout::Error):
  app/models/person.rb:282:in `update_attributes'
  app/controllers/people_controller.rb:236:in `update_avatar'

Rendered /home/chaitanya/.rvm/gems/ruby-1.9.3-p194@strgf/gems/actionpack-3.0.19/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.1ms)
Rendered /home/chaitanya/.rvm/gems/ruby-1.9.3-p194@strgf/gems/actionpack-3.0.19/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (25.3ms)
Rendered /home/chaitanya/.rvm/gems/ruby-1.9.3-p194@strgf/gems/actionpack-3.0.19/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (33.0ms)


Started GET "/en/people/dPgoR6J6qr4Oaj3a6HdQnY/update_avatar" for 127.0.0.1 at 2013-03-21 12:48:04 +0530
  Processing by PeopleController#show as HTML
  Parameters: {"locale"=>"en", "id"=>"dPgoR6J6qr4Oaj3a6HdQnY", "type"=>"update_avatar"}
  [1m[36mPK and serial sequence (6.7ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.2ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.6ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (1.7ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mSQL (2.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (7.3ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.2ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.2ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (1.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.1ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (6.1ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.0ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.3ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.4ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (1.0ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  BEGIN
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bG9jYWxob3N0
', NULL, '2013-03-21 07:18:05.628991', NULL, NULL, NULL, '2013-03-21 07:18:05.629104', '2013-03-21 07:18:05.629104', NULL) RETURNING "id"[0m
  [1m[35mSQL (27.2ms)[0m  COMMIT
  [1m[36mSQL (2.0ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.3ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mPerson Load (1.3ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mCommunityMembership Load (1.2ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (2.0ms)[0m  [1mSELECT "communities".* FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY'))[0m
  [1m[35mBadge Load (21.7ms)[0m  SELECT "badges".* FROM "badges" WHERE ("badges".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY') ORDER BY id DESC LIMIT 6
Rendered people/_edit_links.haml (3.2ms)
  [1m[36mSQL (1.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"badges"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.7ms)[0m  SELECT COUNT(*) FROM "badges" WHERE ("badges".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"testimonials"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.5ms)[0m  SELECT COUNT(*) FROM "testimonials" WHERE ("testimonials".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered people/_inactive_notification.haml (7.2ms)
  [1m[36mLocation Load (1.1ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
  [1m[35mSQL (2.5ms)[0m  SELECT COUNT(*) FROM "listings" WHERE ("listings".author_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND ("listings"."listing_type" = 'offer')) AND (open = '1' AND (valid_until IS NULL OR valid_until > '2013-03-21 07:18:05')) AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')
 )
  [1m[36mListing Load (2.1ms)[0m  [1mSELECT "listings".* FROM "listings" WHERE ("listings".author_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND ("listings"."listing_type" = 'offer')) AND (open = '1' AND (valid_until IS NULL OR valid_until > '2013-03-21 07:18:05')) AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')
 ) ORDER BY id DESC, open DESC, id DESC LIMIT 15 OFFSET 0[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listing_images"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "listing_images" WHERE ("listing_images".listing_id = 5)[0m
  [1m[35mListingImage Load (1.2ms)[0m  SELECT "listing_images".* FROM "listing_images" WHERE ("listing_images".listing_id = 5) LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
Rendered listings/_listed_listing_closed_status.haml (2.7ms)
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"diet_listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 5)[0m
Rendered listings/_listed_listing_edit_links.haml (3.9ms)
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"comments"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 5)[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "listing_images" WHERE ("listing_images".listing_id = 4)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
Rendered listings/_listed_listing_closed_status.haml (3.0ms)
  [1m[35mSQL (1.0ms)[0m  SELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 4)
Rendered listings/_listed_listing_edit_links.haml (4.6ms)
  [1m[36mSQL (1.1ms)[0m  [1mSELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 4)[0m
  [1m[35mSQL (1.0ms)[0m  SELECT COUNT(*) FROM "listing_images" WHERE ("listing_images".listing_id = 3)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
Rendered listings/_listed_listing_closed_status.haml (3.0ms)
  [1m[35mSQL (1.0ms)[0m  SELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 3)
Rendered listings/_listed_listing_edit_links.haml (4.3ms)
  [1m[36mSQL (1.0ms)[0m  [1mSELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 3)[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "listing_images" WHERE ("listing_images".listing_id = 2)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
Rendered listings/_listed_listing_closed_status.haml (2.8ms)
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 2)
  [1m[36mDietListing Load (0.9ms)[0m  [1mSELECT "diet_listings".* FROM "diet_listings" WHERE ("diet_listings".listing_id = 2)[0m
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"diets"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mDiet Load (34.8ms)[0m  [1mSELECT "diets".* FROM "diets" WHERE "diets"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"diets"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
Rendered listings/_listed_listing_edit_links.haml (4.2ms)
  [1m[36mSQL (1.1ms)[0m  [1mSELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 2)[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "listing_images" WHERE ("listing_images".listing_id = 1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
Rendered listings/_listed_listing_closed_status.haml (3.4ms)
  [1m[35mSQL (1.0ms)[0m  SELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 1)
Rendered listings/_listed_listing_edit_links.haml (3.8ms)
  [1m[36mSQL (1.0ms)[0m  [1mSELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 1)[0m
Rendered listings/_listed_listing.haml (344.7ms)
Rendered people/_profile_listings.haml (365.0ms)
Rendered layouts/_kissmetrics.haml (3.7ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (2.4ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.9ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (12.8ms)
Rendered communities/default/logo/logo.haml (2.8ms)
Rendered layouts/_no_javascript.haml (36.1ms)
Rendered layouts/_facebook_sdk.haml (2.8ms)
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.7ms)[0m  SELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) AND participations.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_messages_icon.haml (16.0ms)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_notifications_icon.haml (12.0ms)
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY') AND (acceptance is null)
Rendered layouts/_logged_in_swap_offers_icon.haml (14.1ms)
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"authentications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mAuthentication Load (1.0ms)[0m  SELECT "authentications".* FROM "authentications" WHERE "authentications"."user_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
Rendered layouts/_logged_in.haml (62.8ms)
Rendered layouts/_notifications.haml (7.2ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
Rendered layouts/_display_popup.haml (7.9ms)
Rendered people/show.haml within layouts/application (716.6ms)
Completed 200 OK in 1885ms (Views: 619.1ms | ActiveRecord: 216.7ms | Sphinx: 0.0ms)


Started GET "/en/people/dPgoR6J6qr4Oaj3a6HdQnY/settings" for 127.0.0.1 at 2013-03-21 12:48:15 +0530
  Processing by SettingsController#show as HTML
  Parameters: {"locale"=>"en", "person_id"=>"dPgoR6J6qr4Oaj3a6HdQnY"}
  [1m[35mPK and serial sequence (6.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.1ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.4ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.1ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.1ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.3ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (1.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.3ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (1.9ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (6.6ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (3.7ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (3.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.3ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (1.5ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (0.7ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bG9jYWxob3N0
', NULL, '2013-03-21 07:18:16.541872', NULL, NULL, NULL, '2013-03-21 07:18:16.541984', '2013-03-21 07:18:16.541984', NULL) RETURNING "id"
  [1m[36mSQL (24.8ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (1.6ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (1.0ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mPerson Load (1.4ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mLocation Load (1.2ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"locations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
WARNING: Can't mass-assign protected attributes: type
  [1m[36mLocation Load (3.4ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".community_id = 1) LIMIT 1[0m
  [1m[35mDiet Load (0.6ms)[0m  SELECT "diets".* FROM "diets" INNER JOIN "restrictions" ON "diets".id = "restrictions".diet_id WHERE (("restrictions".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY'))
Rendered layouts/_kissmetrics.haml (3.2ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.9ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.3ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (12.0ms)
Rendered communities/default/logo/logo.haml (2.5ms)
Rendered layouts/_no_javascript.haml (16.7ms)
Rendered layouts/_facebook_sdk.haml (2.5ms)
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.7ms)[0m  [1mSELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) AND participations.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')[0m
Rendered layouts/_logged_in_messages_icon.haml (15.3ms)
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')[0m
Rendered layouts/_logged_in_notifications_icon.haml (13.7ms)
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY') AND (acceptance is null)[0m
Rendered layouts/_logged_in_swap_offers_icon.haml (14.2ms)
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"authentications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mAuthentication Load (0.9ms)[0m  [1mSELECT "authentications".* FROM "authentications" WHERE "authentications"."user_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
Rendered layouts/_logged_in.haml (63.8ms)
Rendered layouts/_notifications.haml (7.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1
Rendered layouts/_display_popup.haml (8.2ms)
Rendered layouts/application.haml (174.1ms)
Rendered settings/profile.haml within layouts/settings (305.8ms)
Completed 200 OK in 1464ms (Views: 290.3ms | ActiveRecord: 116.4ms | Sphinx: 0.0ms)


Started GET "/en/people/dPgoR6J6qr4Oaj3a6HdQnY/settings/avatar" for 127.0.0.1 at 2013-03-21 12:48:30 +0530
  Processing by SettingsController#avatar as HTML
  Parameters: {"locale"=>"en", "person_id"=>"dPgoR6J6qr4Oaj3a6HdQnY"}
  [1m[36mPK and serial sequence (6.9ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.2ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (3.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (1.5ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mSQL (2.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.4ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.6ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.7ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (2.6ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.1ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.1ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (6.6ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (2.9ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.4ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.5ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (1.0ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  BEGIN
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bG9jYWxob3N0
', NULL, '2013-03-21 07:18:31.679605', NULL, NULL, NULL, '2013-03-21 07:18:31.679765', '2013-03-21 07:18:31.679765', NULL) RETURNING "id"[0m
  [1m[35mSQL (7.8ms)[0m  COMMIT
  [1m[36mSQL (1.2ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (0.6ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mPerson Load (0.8ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
Rendered layouts/_kissmetrics.haml (3.3ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.9ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.4ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (11.0ms)
Rendered communities/default/logo/logo.haml (3.7ms)
Rendered layouts/_no_javascript.haml (19.2ms)
Rendered layouts/_facebook_sdk.haml (3.3ms)
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.6ms)[0m  SELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) AND participations.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_messages_icon.haml (16.8ms)
  [1m[36mSQL (2.6ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.0ms)[0m  SELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_notifications_icon.haml (11.9ms)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.0ms)[0m  SELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY') AND (acceptance is null)
Rendered layouts/_logged_in_swap_offers_icon.haml (11.3ms)
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"authentications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mAuthentication Load (0.9ms)[0m  SELECT "authentications".* FROM "authentications" WHERE "authentications"."user_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
Rendered layouts/_logged_in.haml (60.2ms)
Rendered layouts/_notifications.haml (6.9ms)
  [1m[36mLocation Load (1.1ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
Rendered layouts/_display_popup.haml (11.7ms)
Rendered layouts/application.haml (272.1ms)
Rendered settings/avatar.haml within layouts/settings (293.0ms)
Completed 200 OK in 1373ms (Views: 285.6ms | ActiveRecord: 97.3ms | Sphinx: 0.0ms)


Started POST "/en/people/dPgoR6J6qr4Oaj3a6HdQnY/update_avatar" for 127.0.0.1 at 2013-03-21 12:48:44 +0530
  Processing by PeopleController#update_avatar as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"WJyxSApP1ZoDya7qcieJqUg5S0Zc4q5IQ7Pj2USt5FE=", "person"=>{"image"=>#<ActionDispatch::Http::UploadedFile:0xb6963a50 @original_filename="_DSC0142.JPG", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"person[image]\"; filename=\"_DSC0142.JPG\"\r\nContent-Type: image/jpeg\r\n", @tempfile=#<File:/tmp/RackMultipart20130321-2910-5ribwt>>}, "commit"=>"Save picture", "locale"=>"en", "id"=>"dPgoR6J6qr4Oaj3a6HdQnY"}
  [1m[35mPK and serial sequence (6.7ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.2ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.8ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (2.4ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (1.6ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.6ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.4ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.2ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (7.1ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.3ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (1.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (3.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.5ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (1.4ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (0.4ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bG9jYWxob3N0
', NULL, '2013-03-21 07:18:45.887868', NULL, NULL, NULL, '2013-03-21 07:18:45.887979', '2013-03-21 07:18:45.887979', NULL) RETURNING "id"
  [1m[36mSQL (23.1ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (0.6ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (1.0ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mPerson Load (1.3ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mLocation Load (1.0ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  BEGIN
  [1m[36mSQL (1.4ms)[0m  [1mSELECT 1 FROM "people" WHERE ("people"."username" = 'saraf') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  SELECT 1 FROM "people" WHERE ("people"."email" = 'chaitanya@stridepath.com') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1
  [1m[36mAREL (1.4ms)[0m  [1mUPDATE "people" SET "preferences" = '---
email_about_new_messages: true
email_about_new_comments_to_own_listing: true
email_when_conversation_accepted: true
email_when_conversation_rejected: true
email_about_new_badges: true
email_about_new_received_testimonials: true
email_about_accept_reminders: true
email_about_testimonial_reminders: true
email_about_weekly_events: true
' WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY'[0m
[paperclip] Saving attachments.
  [1m[35mSQL (6.5ms)[0m  COMMIT
  [1m[36mSQL (0.5ms)[0m  [1mBEGIN[0m
[paperclip] identify -format %wx%h '/tmp/stream20130321-2910-ton50b.JPG[0]' 2>/dev/null
[paperclip] convert '/tmp/stream20130321-2910-ton50b.JPG[0]' -resize "200x350>" '/tmp/stream20130321-2910-ton50b20130321-2910-1u1yfwf' 2>/dev/null
[paperclip] identify -format %wx%h '/tmp/stream20130321-2910-ton50b.JPG[0]' 2>/dev/null
[paperclip] convert '/tmp/stream20130321-2910-ton50b.JPG[0]' -resize "x50" -crop "50x50+12+0" +repage '/tmp/stream20130321-2910-ton50b20130321-2910-udr92l' 2>/dev/null
[paperclip] identify -format %wx%h '/tmp/stream20130321-2910-ton50b.JPG[0]' 2>/dev/null
[paperclip] convert '/tmp/stream20130321-2910-ton50b.JPG[0]' -resize "200x350>" '/tmp/stream20130321-2910-ton50b20130321-2910-pdnq8s' 2>/dev/null
  [1m[35mSQL (1.1ms)[0m  SELECT 1 FROM "people" WHERE ("people"."username" = 'saraf') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1
  [1m[36mSQL (1.0ms)[0m  [1mSELECT 1 FROM "people" WHERE ("people"."email" = 'chaitanya@stridepath.com') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1[0m
  [1m[35mAREL (1.3ms)[0m  UPDATE "people" SET "image_file_name" = '_DSC0142.JPG', "image_file_size" = 87627, "image_updated_at" = '2013-03-21 07:18:50.741052', "updated_at" = '2013-03-21 07:18:54.719780', "preferences" = '---
email_about_new_messages: true
email_about_new_comments_to_own_listing: true
email_when_conversation_accepted: true
email_when_conversation_rejected: true
email_about_new_badges: true
email_about_new_received_testimonials: true
email_about_accept_reminders: true
email_about_testimonial_reminders: true
email_about_weekly_events: true
' WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY'
[paperclip] Saving attachments.
  [1m[36mSQL (21.6ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:3000/en/people/dPgoR6J6qr4Oaj3a6HdQnY/settings/avatar
Completed 302 Found in 20494ms


Started GET "/en/people/dPgoR6J6qr4Oaj3a6HdQnY/settings/avatar" for 127.0.0.1 at 2013-03-21 12:49:05 +0530
  Processing by SettingsController#avatar as HTML
  Parameters: {"locale"=>"en", "person_id"=>"dPgoR6J6qr4Oaj3a6HdQnY"}
  [1m[35mPK and serial sequence (62.7ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (2.9ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.6ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (5.8ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (1.5ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (1.9ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (5.8ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.1ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (6.1ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (3.8ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (1.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.3ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (1.4ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (0.9ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bG9jYWxob3N0
', NULL, '2013-03-21 07:19:06.517179', NULL, NULL, NULL, '2013-03-21 07:19:06.517300', '2013-03-21 07:19:06.517300', NULL) RETURNING "id"
  [1m[36mSQL (14.4ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (1.4ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (1.6ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mPerson Load (2.3ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
Rendered layouts/_kissmetrics.haml (3.1ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (2.0ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.7ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (11.5ms)
Rendered communities/default/logo/logo.haml (2.6ms)
Rendered layouts/_no_javascript.haml (17.7ms)
Rendered layouts/_facebook_sdk.haml (2.9ms)
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.3ms)[0m  [1mSELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) AND participations.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')[0m
Rendered layouts/_logged_in_messages_icon.haml (24.2ms)
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')[0m
Rendered layouts/_logged_in_notifications_icon.haml (12.8ms)
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY') AND (acceptance is null)[0m
Rendered layouts/_logged_in_swap_offers_icon.haml (10.6ms)
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"authentications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mAuthentication Load (0.9ms)[0m  [1mSELECT "authentications".* FROM "authentications" WHERE "authentications"."user_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
Rendered layouts/_logged_in.haml (68.8ms)
Rendered layouts/_notifications.haml (6.8ms)
  [1m[35mLocation Load (1.1ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1
Rendered layouts/_display_popup.haml (11.7ms)
Rendered layouts/application.haml (178.7ms)
Rendered settings/avatar.haml within layouts/settings (200.7ms)
Completed 200 OK in 1317ms (Views: 188.1ms | ActiveRecord: 279.7ms | Sphinx: 0.0ms)


Started POST "/en/people/dPgoR6J6qr4Oaj3a6HdQnY/update_avatar" for 127.0.0.1 at 2013-03-21 12:52:28 +0530
  Processing by PeopleController#update_avatar as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"WJyxSApP1ZoDya7qcieJqUg5S0Zc4q5IQ7Pj2USt5FE=", "person"=>{"image"=>#<ActionDispatch::Http::UploadedFile:0xf3ba8e4 @original_filename="_DSC0143.JPG", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"person[image]\"; filename=\"_DSC0143.JPG\"\r\nContent-Type: image/jpeg\r\n", @tempfile=#<File:/tmp/RackMultipart20130321-2910-16stkee>>}, "commit"=>"Save picture", "locale"=>"en", "id"=>"dPgoR6J6qr4Oaj3a6HdQnY"}
  [1m[36mPK and serial sequence (6.3ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.1ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.6ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (0.7ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (5.3ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (1.8ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (1.9ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (1.5ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (2.4ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (1.8ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (1.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.3ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.4ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (1.1ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  BEGIN
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bG9jYWxob3N0
', NULL, '2013-03-21 07:22:30.657175', NULL, NULL, NULL, '2013-03-21 07:22:30.657285', '2013-03-21 07:22:30.657285', NULL) RETURNING "id"[0m
  [1m[35mSQL (34.0ms)[0m  COMMIT
  [1m[36mSQL (1.5ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (0.5ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mPerson Load (0.6ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mLocation Load (1.1ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  SELECT 1 FROM "people" WHERE ("people"."username" = 'saraf') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1
  [1m[36mSQL (1.3ms)[0m  [1mSELECT 1 FROM "people" WHERE ("people"."email" = 'chaitanya@stridepath.com') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1[0m
  [1m[35mAREL (1.2ms)[0m  UPDATE "people" SET "preferences" = '---
email_about_new_messages: true
email_about_new_comments_to_own_listing: true
email_when_conversation_accepted: true
email_when_conversation_rejected: true
email_about_new_badges: true
email_about_new_received_testimonials: true
email_about_accept_reminders: true
email_about_testimonial_reminders: true
email_about_weekly_events: true
' WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY'
[paperclip] Saving attachments.
  [1m[36mSQL (6.1ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (0.5ms)[0m  BEGIN
[paperclip] identify -format %wx%h '/tmp/stream20130321-2910-1gr5gl3.JPG[0]' 2>/dev/null
[paperclip] convert '/tmp/stream20130321-2910-1gr5gl3.JPG[0]' -resize "200x350>" '/tmp/stream20130321-2910-1gr5gl320130321-2910-1aj8p1e' 2>/dev/null
[paperclip] identify -format %wx%h '/tmp/stream20130321-2910-1gr5gl3.JPG[0]' 2>/dev/null
[paperclip] convert '/tmp/stream20130321-2910-1gr5gl3.JPG[0]' -resize "x50" -crop "50x50+12+0" +repage '/tmp/stream20130321-2910-1gr5gl320130321-2910-w79f73' 2>/dev/null
[paperclip] identify -format %wx%h '/tmp/stream20130321-2910-1gr5gl3.JPG[0]' 2>/dev/null
[paperclip] convert '/tmp/stream20130321-2910-1gr5gl3.JPG[0]' -resize "200x350>" '/tmp/stream20130321-2910-1gr5gl320130321-2910-1wivaoj' 2>/dev/null
  [1m[36mSQL (1.2ms)[0m  [1mSELECT 1 FROM "people" WHERE ("people"."username" = 'saraf') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  SELECT 1 FROM "people" WHERE ("people"."email" = 'chaitanya@stridepath.com') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1
  [1m[36mAREL (0.9ms)[0m  [1mUPDATE "people" SET "image_file_name" = '_DSC0143.JPG', "image_file_size" = 92185, "image_updated_at" = '2013-03-21 07:22:36.858601', "updated_at" = '2013-03-21 07:22:40.814012', "preferences" = '---
email_about_new_messages: true
email_about_new_comments_to_own_listing: true
email_when_conversation_accepted: true
email_when_conversation_rejected: true
email_about_new_badges: true
email_about_new_received_testimonials: true
email_about_accept_reminders: true
email_about_testimonial_reminders: true
email_about_weekly_events: true
' WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY'[0m
[paperclip] Saving attachments.
  [1m[35mSQL (26.5ms)[0m  COMMIT
Redirected to http://localhost:3000/en/people/dPgoR6J6qr4Oaj3a6HdQnY/settings/avatar
Completed 302 Found in 29085ms


Started GET "/en/people/dPgoR6J6qr4Oaj3a6HdQnY/settings/avatar" for 127.0.0.1 at 2013-03-21 12:52:59 +0530
  Processing by SettingsController#avatar as HTML
  Parameters: {"locale"=>"en", "person_id"=>"dPgoR6J6qr4Oaj3a6HdQnY"}
  [1m[36mPK and serial sequence (6.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.1ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (1.5ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.4ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.6ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (1.5ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (1.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.0ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.7ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (6.8ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.2ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.0ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.4ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (1.0ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  BEGIN
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bG9jYWxob3N0
', NULL, '2013-03-21 07:23:00.239251', NULL, NULL, NULL, '2013-03-21 07:23:00.239417', '2013-03-21 07:23:00.239417', NULL) RETURNING "id"[0m
  [1m[35mSQL (28.5ms)[0m  COMMIT
  [1m[36mSQL (1.7ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.0ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mPerson Load (1.2ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
Rendered layouts/_kissmetrics.haml (3.5ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.8ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.1ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (10.1ms)
Rendered communities/default/logo/logo.haml (2.4ms)
Rendered layouts/_no_javascript.haml (16.1ms)
Rendered layouts/_facebook_sdk.haml (3.5ms)
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.8ms)[0m  SELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) AND participations.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_messages_icon.haml (15.9ms)
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.8ms)[0m  SELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_notifications_icon.haml (15.6ms)
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY') AND (acceptance is null)
Rendered layouts/_logged_in_swap_offers_icon.haml (10.5ms)
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"authentications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mAuthentication Load (0.9ms)[0m  SELECT "authentications".* FROM "authentications" WHERE "authentications"."user_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
Rendered layouts/_logged_in.haml (62.8ms)
Rendered layouts/_notifications.haml (5.0ms)
  [1m[36mLocation Load (1.2ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
Rendered layouts/_display_popup.haml (114.1ms)
Rendered layouts/application.haml (268.4ms)
Rendered settings/avatar.haml within layouts/settings (289.0ms)
Completed 200 OK in 1388ms (Views: 282.7ms | ActiveRecord: 248.4ms | Sphinx: 0.0ms)


Started POST "/en/people/dPgoR6J6qr4Oaj3a6HdQnY/update_avatar" for 127.0.0.1 at 2013-03-21 12:53:33 +0530
  Processing by PeopleController#update_avatar as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"WJyxSApP1ZoDya7qcieJqUg5S0Zc4q5IQ7Pj2USt5FE=", "person"=>{"image"=>#<ActionDispatch::Http::UploadedFile:0xf93e93c @original_filename="_DSC0145.JPG", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"person[image]\"; filename=\"_DSC0145.JPG\"\r\nContent-Type: image/jpeg\r\n", @tempfile=#<File:/tmp/RackMultipart20130321-2910-jicpnd>>}, "commit"=>"Save picture", "locale"=>"en", "id"=>"dPgoR6J6qr4Oaj3a6HdQnY"}
  [1m[35mPK and serial sequence (6.3ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.7ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.5ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (7.8ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (2.4ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (1.9ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (5.7ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (1.7ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (4.0ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (3.3ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.3ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (1.4ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (1.0ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bG9jYWxob3N0
', NULL, '2013-03-21 07:23:34.423859', NULL, NULL, NULL, '2013-03-21 07:23:34.423972', '2013-03-21 07:23:34.423972', NULL) RETURNING "id"
  [1m[36mSQL (31.6ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (1.6ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (1.0ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mPerson Load (1.6ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mLocation Load (0.6ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.4ms)[0m  [1mSELECT 1 FROM "people" WHERE ("people"."username" = 'saraf') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  SELECT 1 FROM "people" WHERE ("people"."email" = 'chaitanya@stridepath.com') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1
  [1m[36mAREL (0.6ms)[0m  [1mUPDATE "people" SET "preferences" = '---
email_about_new_messages: true
email_about_new_comments_to_own_listing: true
email_when_conversation_accepted: true
email_when_conversation_rejected: true
email_about_new_badges: true
email_about_new_received_testimonials: true
email_about_accept_reminders: true
email_about_testimonial_reminders: true
email_about_weekly_events: true
' WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY'[0m
[paperclip] Saving attachments.
  [1m[35mSQL (13.8ms)[0m  COMMIT
  [1m[36mSQL (0.7ms)[0m  [1mBEGIN[0m
[paperclip] identify -format %wx%h '/tmp/stream20130321-2910-8gp16y.JPG[0]' 2>/dev/null
[paperclip] convert '/tmp/stream20130321-2910-8gp16y.JPG[0]' -resize "200x350>" '/tmp/stream20130321-2910-8gp16y20130321-2910-etpkyw' 2>/dev/null
[paperclip] identify -format %wx%h '/tmp/stream20130321-2910-8gp16y.JPG[0]' 2>/dev/null
[paperclip] convert '/tmp/stream20130321-2910-8gp16y.JPG[0]' -resize "x50" -crop "50x50+12+0" +repage '/tmp/stream20130321-2910-8gp16y20130321-2910-zi2iuk' 2>/dev/null
[paperclip] identify -format %wx%h '/tmp/stream20130321-2910-8gp16y.JPG[0]' 2>/dev/null
[paperclip] convert '/tmp/stream20130321-2910-8gp16y.JPG[0]' -resize "200x350>" '/tmp/stream20130321-2910-8gp16y20130321-2910-1185c95' 2>/dev/null
  [1m[35mSQL (1.5ms)[0m  SELECT 1 FROM "people" WHERE ("people"."username" = 'saraf') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1
  [1m[36mSQL (1.7ms)[0m  [1mSELECT 1 FROM "people" WHERE ("people"."email" = 'chaitanya@stridepath.com') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1[0m
  [1m[35mAREL (1.4ms)[0m  UPDATE "people" SET "image_file_name" = '_DSC0145.JPG', "image_file_size" = 84997, "image_updated_at" = '2013-03-21 07:23:40.625362', "updated_at" = '2013-03-21 07:23:44.382717', "preferences" = '---
email_about_new_messages: true
email_about_new_comments_to_own_listing: true
email_when_conversation_accepted: true
email_when_conversation_rejected: true
email_about_new_badges: true
email_about_new_received_testimonials: true
email_about_accept_reminders: true
email_about_testimonial_reminders: true
email_about_weekly_events: true
' WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY'
[paperclip] Saving attachments.
  [1m[36mSQL (28.0ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:3000/en/people/dPgoR6J6qr4Oaj3a6HdQnY/settings/avatar
Completed 302 Found in 32694ms


Started GET "/en/people/dPgoR6J6qr4Oaj3a6HdQnY/settings/avatar" for 127.0.0.1 at 2013-03-21 12:54:06 +0530
  Processing by SettingsController#avatar as HTML
  Parameters: {"locale"=>"en", "person_id"=>"dPgoR6J6qr4Oaj3a6HdQnY"}
  [1m[35mPK and serial sequence (5.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.0ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.1ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (3.9ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.0ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.4ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.0ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (6.7ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.2ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.2ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (1.5ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (0.7ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bG9jYWxob3N0
', NULL, '2013-03-21 07:24:07.442026', NULL, NULL, NULL, '2013-03-21 07:24:07.442192', '2013-03-21 07:24:07.442192', NULL) RETURNING "id"
  [1m[36mSQL (34.2ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (0.9ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (1.0ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mPerson Load (1.3ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
Rendered layouts/_kissmetrics.haml (3.1ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.7ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.1ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (10.1ms)
Rendered communities/default/logo/logo.haml (3.8ms)
Rendered layouts/_no_javascript.haml (120.8ms)
Rendered layouts/_facebook_sdk.haml (2.6ms)
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.7ms)[0m  [1mSELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) AND participations.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')[0m
Rendered layouts/_logged_in_messages_icon.haml (16.3ms)
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.6ms)[0m  [1mSELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')[0m
Rendered layouts/_logged_in_notifications_icon.haml (14.5ms)
  [1m[35mSQL (1.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY') AND (acceptance is null)[0m
Rendered layouts/_logged_in_swap_offers_icon.haml (10.1ms)
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"authentications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mAuthentication Load (0.9ms)[0m  [1mSELECT "authentications".* FROM "authentications" WHERE "authentications"."user_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
Rendered layouts/_logged_in.haml (59.5ms)
Rendered layouts/_notifications.haml (7.4ms)
  [1m[35mLocation Load (0.9ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1
Rendered layouts/_display_popup.haml (11.6ms)
Rendered layouts/application.haml (271.6ms)
Rendered settings/avatar.haml within layouts/settings (303.7ms)
Completed 200 OK in 1348ms (Views: 298.8ms | ActiveRecord: 266.1ms | Sphinx: 0.0ms)


Started POST "/en/people/dPgoR6J6qr4Oaj3a6HdQnY/update_avatar" for 127.0.0.1 at 2013-03-21 12:59:26 +0530
  Processing by PeopleController#update_avatar as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"WJyxSApP1ZoDya7qcieJqUg5S0Zc4q5IQ7Pj2USt5FE=", "person"=>{"image"=>#<ActionDispatch::Http::UploadedFile:0xed34a24 @original_filename="_DSC0148.JPG", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"person[image]\"; filename=\"_DSC0148.JPG\"\r\nContent-Type: image/jpeg\r\n", @tempfile=#<File:/tmp/RackMultipart20130321-2910-1e115i>>}, "commit"=>"Save picture", "locale"=>"en", "id"=>"dPgoR6J6qr4Oaj3a6HdQnY"}
  [1m[36mPK and serial sequence (2.4ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (1.6ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (1.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (1.3ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.9ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.0ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.6ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (4.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.1ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (1.6ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (2.6ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (2.6ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.6ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.4ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (3.2ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (1.0ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  BEGIN
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bG9jYWxob3N0
', NULL, '2013-03-21 07:29:27.852164', NULL, NULL, NULL, '2013-03-21 07:29:27.852282', '2013-03-21 07:29:27.852282', NULL) RETURNING "id"[0m
  [1m[35mSQL (23.3ms)[0m  COMMIT
  [1m[36mSQL (1.6ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.3ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mPerson Load (1.4ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mLocation Load (1.0ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  SELECT 1 FROM "people" WHERE ("people"."username" = 'saraf') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mSELECT 1 FROM "people" WHERE ("people"."email" = 'chaitanya@stridepath.com') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  ROLLBACK
Completed 500 Internal Server Error in 992ms

NoMethodError (undefined method `person' for #<Person:0x10483388>):
  app/models/person.rb:163:in `validate_image_size'
  app/models/person.rb:287:in `update_attributes'
  app/controllers/people_controller.rb:238:in `update_avatar'

Rendered /home/chaitanya/.rvm/gems/ruby-1.9.3-p194@strgf/gems/actionpack-3.0.19/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.7ms)
Rendered /home/chaitanya/.rvm/gems/ruby-1.9.3-p194@strgf/gems/actionpack-3.0.19/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (21.9ms)
Rendered /home/chaitanya/.rvm/gems/ruby-1.9.3-p194@strgf/gems/actionpack-3.0.19/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (28.5ms)


Started POST "/en/people/dPgoR6J6qr4Oaj3a6HdQnY/update_avatar" for 127.0.0.1 at 2013-03-21 13:00:49 +0530
  Processing by PeopleController#update_avatar as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"WJyxSApP1ZoDya7qcieJqUg5S0Zc4q5IQ7Pj2USt5FE=", "person"=>{"image"=>#<ActionDispatch::Http::UploadedFile:0x12101b40 @original_filename="_DSC0148.JPG", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"person[image]\"; filename=\"_DSC0148.JPG\"\r\nContent-Type: image/jpeg\r\n", @tempfile=#<File:/tmp/RackMultipart20130321-2910-x0llhk>>}, "commit"=>"Save picture", "locale"=>"en", "id"=>"dPgoR6J6qr4Oaj3a6HdQnY"}
  [1m[36mPK and serial sequence (6.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.5ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (1.5ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mSQL (2.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (8.3ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.1ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.1ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.1ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.5ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (6.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.1ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.2ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.4ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (1.0ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  BEGIN
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bG9jYWxob3N0
', NULL, '2013-03-21 07:30:50.592116', NULL, NULL, NULL, '2013-03-21 07:30:50.592231', '2013-03-21 07:30:50.592231', NULL) RETURNING "id"[0m
  [1m[35mSQL (25.6ms)[0m  COMMIT
  [1m[36mSQL (1.5ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.0ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mPerson Load (1.4ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mLocation Load (1.0ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (2.3ms)[0m  SELECT 1 FROM "people" WHERE ("people"."username" = 'saraf') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1
  [1m[36mSQL (1.0ms)[0m  [1mSELECT 1 FROM "people" WHERE ("people"."email" = 'chaitanya@stridepath.com') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1[0m
  [1m[35mAREL (0.9ms)[0m  UPDATE "people" SET "preferences" = '---
email_about_new_messages: true
email_about_new_comments_to_own_listing: true
email_when_conversation_accepted: true
email_when_conversation_rejected: true
email_about_new_badges: true
email_about_new_received_testimonials: true
email_about_accept_reminders: true
email_about_testimonial_reminders: true
email_about_weekly_events: true
' WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY'
[paperclip] Saving attachments.
  [1m[36mSQL (6.0ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (0.3ms)[0m  BEGIN
[paperclip] identify -format %wx%h '/tmp/stream20130321-2910-1is6l47.JPG[0]' 2>/dev/null
[paperclip] convert '/tmp/stream20130321-2910-1is6l47.JPG[0]' -resize "200x350>" '/tmp/stream20130321-2910-1is6l4720130321-2910-1wm3mps' 2>/dev/null
[paperclip] identify -format %wx%h '/tmp/stream20130321-2910-1is6l47.JPG[0]' 2>/dev/null
[paperclip] convert '/tmp/stream20130321-2910-1is6l47.JPG[0]' -resize "x50" -crop "50x50+12+0" +repage '/tmp/stream20130321-2910-1is6l4720130321-2910-11yvfis' 2>/dev/null
[paperclip] identify -format %wx%h '/tmp/stream20130321-2910-1is6l47.JPG[0]' 2>/dev/null
[paperclip] convert '/tmp/stream20130321-2910-1is6l47.JPG[0]' -resize "200x350>" '/tmp/stream20130321-2910-1is6l4720130321-2910-v2e58j' 2>/dev/null
  [1m[36mSQL (1.3ms)[0m  [1mSELECT 1 FROM "people" WHERE ("people"."username" = 'saraf') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1[0m
  [1m[35mSQL (1.0ms)[0m  SELECT 1 FROM "people" WHERE ("people"."email" = 'chaitanya@stridepath.com') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1
  [1m[36mAREL (1.4ms)[0m  [1mUPDATE "people" SET "image_file_name" = '_DSC0148.JPG', "image_file_size" = 86968, "image_updated_at" = '2013-03-21 07:30:56.156455', "updated_at" = '2013-03-21 07:31:00.634378', "preferences" = '---
email_about_new_messages: true
email_about_new_comments_to_own_listing: true
email_when_conversation_accepted: true
email_when_conversation_rejected: true
email_about_new_badges: true
email_about_new_received_testimonials: true
email_about_accept_reminders: true
email_about_testimonial_reminders: true
email_about_weekly_events: true
' WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY'[0m
[paperclip] Saving attachments.
  [1m[35mSQL (27.4ms)[0m  COMMIT
Redirected to http://localhost:3000/en/people/dPgoR6J6qr4Oaj3a6HdQnY/settings/avatar
Completed 302 Found in 30852ms


Started GET "/en/people/dPgoR6J6qr4Oaj3a6HdQnY/settings/avatar" for 127.0.0.1 at 2013-03-21 13:01:20 +0530
  Processing by SettingsController#avatar as HTML
  Parameters: {"locale"=>"en", "person_id"=>"dPgoR6J6qr4Oaj3a6HdQnY"}
  [1m[36mPK and serial sequence (6.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.0ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (1.5ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (5.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (1.6ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (1.9ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.1ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (3.8ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (2.4ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (2.1ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (3.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (0.7ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.5ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (0.9ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  BEGIN
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bG9jYWxob3N0
', NULL, '2013-03-21 07:31:21.671143', NULL, NULL, NULL, '2013-03-21 07:31:21.671274', '2013-03-21 07:31:21.671274', NULL) RETURNING "id"[0m
  [1m[35mSQL (34.5ms)[0m  COMMIT
  [1m[36mSQL (1.9ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.0ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mPerson Load (1.3ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
Rendered layouts/_kissmetrics.haml (3.0ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.7ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.0ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (10.6ms)
Rendered communities/default/logo/logo.haml (2.7ms)
Rendered layouts/_no_javascript.haml (18.1ms)
Rendered layouts/_facebook_sdk.haml (2.6ms)
  [1m[35mSQL (1.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.2ms)[0m  SELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) AND participations.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_messages_icon.haml (22.4ms)
  [1m[36mSQL (1.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_notifications_icon.haml (13.0ms)
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.6ms)[0m  SELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY') AND (acceptance is null)
Rendered layouts/_logged_in_swap_offers_icon.haml (16.6ms)
  [1m[36mSQL (1.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"authentications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mAuthentication Load (0.7ms)[0m  SELECT "authentications".* FROM "authentications" WHERE "authentications"."user_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
Rendered layouts/_logged_in.haml (73.7ms)
Rendered layouts/_notifications.haml (6.0ms)
  [1m[36mLocation Load (0.6ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
Rendered layouts/_display_popup.haml (10.6ms)
Rendered layouts/application.haml (288.5ms)
Rendered settings/avatar.haml within layouts/settings (307.3ms)
Completed 200 OK in 1394ms (Views: 298.4ms | ActiveRecord: 252.3ms | Sphinx: 0.0ms)


Started POST "/en/people/dPgoR6J6qr4Oaj3a6HdQnY/update_avatar" for 127.0.0.1 at 2013-03-21 13:03:04 +0530
  Processing by PeopleController#update_avatar as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"WJyxSApP1ZoDya7qcieJqUg5S0Zc4q5IQ7Pj2USt5FE=", "person"=>{"image"=>#<ActionDispatch::Http::UploadedFile:0x12253084 @original_filename="_DSC0157.JPG", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"person[image]\"; filename=\"_DSC0157.JPG\"\r\nContent-Type: image/jpeg\r\n", @tempfile=#<File:/tmp/RackMultipart20130321-2910-1kkebtp>>}, "commit"=>"Save picture", "locale"=>"en", "id"=>"dPgoR6J6qr4Oaj3a6HdQnY"}
  [1m[35mPK and serial sequence (13.9ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (3.4ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (31.8ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (5.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (1.5ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.0ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.7ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.2ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (6.3ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.9ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (3.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.5ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (1.5ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (1.2ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.2ms)[0m  INSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bG9jYWxob3N0
', NULL, '2013-03-21 07:33:05.583504', NULL, NULL, NULL, '2013-03-21 07:33:05.583639', '2013-03-21 07:33:05.583639', NULL) RETURNING "id"
  [1m[36mSQL (29.5ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (1.6ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (1.3ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mPerson Load (0.6ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mLocation Load (0.6ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mSELECT 1 FROM "people" WHERE ("people"."username" = 'saraf') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  SELECT 1 FROM "people" WHERE ("people"."email" = 'chaitanya@stridepath.com') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1
  [1m[36mAREL (1.2ms)[0m  [1mUPDATE "people" SET "preferences" = '---
email_about_new_messages: true
email_about_new_comments_to_own_listing: true
email_when_conversation_accepted: true
email_when_conversation_rejected: true
email_about_new_badges: true
email_about_new_received_testimonials: true
email_about_accept_reminders: true
email_about_testimonial_reminders: true
email_about_weekly_events: true
' WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY'[0m
[paperclip] Saving attachments.
  [1m[35mSQL (9.2ms)[0m  COMMIT
  [1m[36mSQL (0.6ms)[0m  [1mBEGIN[0m
[paperclip] identify -format %wx%h '/tmp/stream20130321-2910-ppued7.JPG[0]' 2>/dev/null
[paperclip] convert '/tmp/stream20130321-2910-ppued7.JPG[0]' -resize "200x350>" '/tmp/stream20130321-2910-ppued720130321-2910-xiplux' 2>/dev/null
[paperclip] identify -format %wx%h '/tmp/stream20130321-2910-ppued7.JPG[0]' 2>/dev/null
[paperclip] convert '/tmp/stream20130321-2910-ppued7.JPG[0]' -resize "x50" -crop "50x50+12+0" +repage '/tmp/stream20130321-2910-ppued720130321-2910-1fceb3' 2>/dev/null
[paperclip] identify -format %wx%h '/tmp/stream20130321-2910-ppued7.JPG[0]' 2>/dev/null
[paperclip] convert '/tmp/stream20130321-2910-ppued7.JPG[0]' -resize "200x350>" '/tmp/stream20130321-2910-ppued720130321-2910-4md0ew' 2>/dev/null
  [1m[35mSQL (2.5ms)[0m  SELECT 1 FROM "people" WHERE ("people"."username" = 'saraf') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1
  [1m[36mSQL (1.7ms)[0m  [1mSELECT 1 FROM "people" WHERE ("people"."email" = 'chaitanya@stridepath.com') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1[0m
  [1m[35mAREL (1.3ms)[0m  UPDATE "people" SET "image_file_name" = '_DSC0157.JPG', "image_file_size" = 100717, "image_updated_at" = '2013-03-21 07:33:12.624772', "updated_at" = '2013-03-21 07:33:17.042059', "preferences" = '---
email_about_new_messages: true
email_about_new_comments_to_own_listing: true
email_when_conversation_accepted: true
email_when_conversation_rejected: true
email_about_new_badges: true
email_about_new_received_testimonials: true
email_about_accept_reminders: true
email_about_testimonial_reminders: true
email_about_weekly_events: true
' WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY'
[paperclip] Saving attachments.
  [1m[36mSQL (34.7ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:3000/en/people/dPgoR6J6qr4Oaj3a6HdQnY/settings/avatar
Completed 302 Found in 32391ms


Started GET "/en/people/dPgoR6J6qr4Oaj3a6HdQnY/settings/avatar" for 127.0.0.1 at 2013-03-21 13:03:37 +0530
  Processing by SettingsController#avatar as HTML
  Parameters: {"locale"=>"en", "person_id"=>"dPgoR6J6qr4Oaj3a6HdQnY"}
  [1m[35mPK and serial sequence (6.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.0ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.4ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (1.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.1ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (1.2ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (1.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.0ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (6.4ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.5ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.2ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (1.4ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (1.1ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.2ms)[0m  INSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bG9jYWxob3N0
', NULL, '2013-03-21 07:33:38.150819', NULL, NULL, NULL, '2013-03-21 07:33:38.150934', '2013-03-21 07:33:38.150934', NULL) RETURNING "id"
  [1m[36mSQL (28.0ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (1.7ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (1.0ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mPerson Load (1.3ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
Rendered layouts/_kissmetrics.haml (3.7ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.7ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.1ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (10.4ms)
Rendered communities/default/logo/logo.haml (2.6ms)
Rendered layouts/_no_javascript.haml (16.5ms)
Rendered layouts/_facebook_sdk.haml (2.4ms)
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.8ms)[0m  [1mSELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) AND participations.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')[0m
Rendered layouts/_logged_in_messages_icon.haml (15.8ms)
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')[0m
Rendered layouts/_logged_in_notifications_icon.haml (11.9ms)
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.2ms)[0m  [1mSELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY') AND (acceptance is null)[0m
Rendered layouts/_logged_in_swap_offers_icon.haml (14.2ms)
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"authentications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mAuthentication Load (1.0ms)[0m  [1mSELECT "authentications".* FROM "authentications" WHERE "authentications"."user_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
Rendered layouts/_logged_in.haml (63.3ms)
Rendered layouts/_notifications.haml (8.1ms)
  [1m[35mLocation Load (1.1ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1
Rendered layouts/_display_popup.haml (10.1ms)
Rendered layouts/application.haml (170.2ms)
Rendered settings/avatar.haml within layouts/settings (188.5ms)
Completed 200 OK in 1257ms (Views: 175.2ms | ActiveRecord: 306.1ms | Sphinx: 0.0ms)


Started POST "/en/people/dPgoR6J6qr4Oaj3a6HdQnY/update_avatar" for 127.0.0.1 at 2013-03-21 13:04:27 +0530
  Processing by PeopleController#update_avatar as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"WJyxSApP1ZoDya7qcieJqUg5S0Zc4q5IQ7Pj2USt5FE=", "person"=>{"image"=>#<ActionDispatch::Http::UploadedFile:0x1246811c @original_filename="522838_4087357066424_1357598483_3633576_1647827916_n.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"person[image]\"; filename=\"522838_4087357066424_1357598483_3633576_1647827916_n.jpg\"\r\nContent-Type: image/jpeg\r\n", @tempfile=#<File:/tmp/RackMultipart20130321-2910-1j7ta2w>>}, "commit"=>"Save picture", "locale"=>"en", "id"=>"dPgoR6J6qr4Oaj3a6HdQnY"}
  [1m[36mPK and serial sequence (6.8ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.3ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (1.4ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mSQL (3.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.8ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (1.6ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (1.9ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.4ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (2.1ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (2.4ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (3.9ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.6ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.6ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.4ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (0.9ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bG9jYWxob3N0
', NULL, '2013-03-21 07:34:28.859654', NULL, NULL, NULL, '2013-03-21 07:34:28.859820', '2013-03-21 07:34:28.859820', NULL) RETURNING "id"[0m
  [1m[35mSQL (26.1ms)[0m  COMMIT
  [1m[36mSQL (1.5ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (0.8ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mPerson Load (1.5ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mLocation Load (0.6ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  SELECT 1 FROM "people" WHERE ("people"."username" = 'saraf') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mSELECT 1 FROM "people" WHERE ("people"."email" = 'chaitanya@stridepath.com') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  ROLLBACK
  [1m[36mSQL (0.2ms)[0m  [1mBEGIN[0m
[paperclip] identify -format %wx%h '/tmp/stream20130321-2910-y662sy.jpg[0]' 2>/dev/null
[paperclip] convert '/tmp/stream20130321-2910-y662sy.jpg[0]' -resize "200x350>" '/tmp/stream20130321-2910-y662sy20130321-2910-1rrj72' 2>/dev/null
[paperclip] identify -format %wx%h '/tmp/stream20130321-2910-y662sy.jpg[0]' 2>/dev/null
[paperclip] convert '/tmp/stream20130321-2910-y662sy.jpg[0]' -resize "x50" -crop "50x50+12+0" +repage '/tmp/stream20130321-2910-y662sy20130321-2910-152kdxv' 2>/dev/null
[paperclip] identify -format %wx%h '/tmp/stream20130321-2910-y662sy.jpg[0]' 2>/dev/null
[paperclip] convert '/tmp/stream20130321-2910-y662sy.jpg[0]' -resize "200x350>" '/tmp/stream20130321-2910-y662sy20130321-2910-1qwlnov' 2>/dev/null
  [1m[35mCACHE (0.0ms)[0m  SELECT 1 FROM "people" WHERE ("people"."username" = 'saraf') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT 1 FROM "people" WHERE ("people"."email" = 'chaitanya@stridepath.com') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  ROLLBACK
Redirected to http://localhost:3000/en/people/dPgoR6J6qr4Oaj3a6HdQnY/settings/avatar
Completed 302 Found in 10899ms


Started GET "/en/people/dPgoR6J6qr4Oaj3a6HdQnY/settings/avatar" for 127.0.0.1 at 2013-03-21 13:04:38 +0530
  Processing by SettingsController#avatar as HTML
  Parameters: {"locale"=>"en", "person_id"=>"dPgoR6J6qr4Oaj3a6HdQnY"}
  [1m[36mPK and serial sequence (6.1ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (1.9ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (1.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (1.4ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.3ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.1ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (1.8ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.1ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.1ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (7.1ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.4ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (0.6ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.6ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (1.1ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  BEGIN
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bG9jYWxob3N0
', NULL, '2013-03-21 07:34:39.952007', NULL, NULL, NULL, '2013-03-21 07:34:39.952126', '2013-03-21 07:34:39.952126', NULL) RETURNING "id"[0m
  [1m[35mSQL (35.7ms)[0m  COMMIT
  [1m[36mSQL (1.6ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.0ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mPerson Load (1.3ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
Rendered layouts/_kissmetrics.haml (3.3ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (2.1ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.7ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (11.6ms)
Rendered communities/default/logo/logo.haml (2.5ms)
Rendered layouts/_no_javascript.haml (16.8ms)
Rendered layouts/_facebook_sdk.haml (2.6ms)
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.1ms)[0m  SELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) AND participations.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_messages_icon.haml (23.8ms)
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.1ms)[0m  SELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_notifications_icon.haml (21.3ms)
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.1ms)[0m  SELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY') AND (acceptance is null)
Rendered layouts/_logged_in_swap_offers_icon.haml (27.8ms)
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"authentications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mAuthentication Load (1.1ms)[0m  SELECT "authentications".* FROM "authentications" WHERE "authentications"."user_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
Rendered layouts/_logged_in.haml (105.1ms)
Rendered layouts/_notifications.haml (5.6ms)
  [1m[36mLocation Load (1.2ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
Rendered layouts/_display_popup.haml (10.7ms)
Rendered layouts/application.haml (325.9ms)
Rendered settings/avatar.haml within layouts/settings (343.9ms)
Completed 200 OK in 1274ms (Views: 329.0ms | ActiveRecord: 215.7ms | Sphinx: 0.0ms)


Started POST "/en/people/dPgoR6J6qr4Oaj3a6HdQnY/update_avatar" for 127.0.0.1 at 2013-03-21 13:12:06 +0530
  Processing by PeopleController#update_avatar as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"WJyxSApP1ZoDya7qcieJqUg5S0Zc4q5IQ7Pj2USt5FE=", "person"=>{"image"=>#<ActionDispatch::Http::UploadedFile:0x13befdd0 @original_filename="amir_khan.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"person[image]\"; filename=\"amir_khan.jpg\"\r\nContent-Type: image/jpeg\r\n", @tempfile=#<File:/tmp/RackMultipart20130321-2910-1xn9sah>>}, "commit"=>"Save picture", "locale"=>"en", "id"=>"dPgoR6J6qr4Oaj3a6HdQnY"}
  [1m[35mPK and serial sequence (6.3ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.1ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.3ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.0ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (1.9ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (2.2ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (2.5ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (1.7ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (1.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.4ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (1.5ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (0.9ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.5ms)[0m  INSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bG9jYWxob3N0
', NULL, '2013-03-21 07:42:07.463269', NULL, NULL, NULL, '2013-03-21 07:42:07.463382', '2013-03-21 07:42:07.463382', NULL) RETURNING "id"
  [1m[36mSQL (118.8ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (1.0ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (0.9ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mPerson Load (0.7ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mLocation Load (0.5ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.5ms)[0m  [1mSELECT 1 FROM "people" WHERE ("people"."username" = 'saraf') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  SELECT 1 FROM "people" WHERE ("people"."email" = 'chaitanya@stridepath.com') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mROLLBACK[0m
Completed 500 Internal Server Error in 1013ms

NameError (undefined local variable or method `person' for #<Person:0x13209348>):
  app/models/person.rb:163:in `validate_image_size'
  app/models/person.rb:287:in `update_attributes'
  app/controllers/people_controller.rb:238:in `update_avatar'

Rendered /home/chaitanya/.rvm/gems/ruby-1.9.3-p194@strgf/gems/actionpack-3.0.19/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.8ms)
Rendered /home/chaitanya/.rvm/gems/ruby-1.9.3-p194@strgf/gems/actionpack-3.0.19/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (135.8ms)
Rendered /home/chaitanya/.rvm/gems/ruby-1.9.3-p194@strgf/gems/actionpack-3.0.19/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (158.7ms)


Started POST "/en/people/dPgoR6J6qr4Oaj3a6HdQnY/update_avatar" for 127.0.0.1 at 2013-03-21 13:13:54 +0530
  Processing by PeopleController#update_avatar as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"WJyxSApP1ZoDya7qcieJqUg5S0Zc4q5IQ7Pj2USt5FE=", "person"=>{"image"=>#<ActionDispatch::Http::UploadedFile:0x121282a4 @original_filename="amir_khan.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"person[image]\"; filename=\"amir_khan.jpg\"\r\nContent-Type: image/jpeg\r\n", @tempfile=#<File:/tmp/RackMultipart20130321-2910-1fig65c>>}, "commit"=>"Save picture", "locale"=>"en", "id"=>"dPgoR6J6qr4Oaj3a6HdQnY"}
  [1m[35mPK and serial sequence (3.0ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (2.6ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (3.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.4ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (3.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.4ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (3.9ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.5ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.4ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (3.8ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (2.8ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (3.5ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (2.6ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (1.4ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (1.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (1.0ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.2ms)[0m  INSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bG9jYWxob3N0
', NULL, '2013-03-21 07:43:55.428978', NULL, NULL, NULL, '2013-03-21 07:43:55.429117', '2013-03-21 07:43:55.429117', NULL) RETURNING "id"
  [1m[36mSQL (27.2ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (1.7ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (1.1ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mPerson Load (0.6ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mLocation Load (1.0ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  BEGIN
  [1m[36mSQL (1.0ms)[0m  [1mSELECT 1 FROM "people" WHERE ("people"."username" = 'saraf') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  SELECT 1 FROM "people" WHERE ("people"."email" = 'chaitanya@stridepath.com') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mROLLBACK[0m
Completed 500 Internal Server Error in 1062ms

NoMethodError (undefined method `size' for #<Person:0x11f9953c>):
  app/models/person.rb:164:in `validate_image_size'
  app/models/person.rb:288:in `update_attributes'
  app/controllers/people_controller.rb:238:in `update_avatar'

Rendered /home/chaitanya/.rvm/gems/ruby-1.9.3-p194@strgf/gems/actionpack-3.0.19/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.0ms)
Rendered /home/chaitanya/.rvm/gems/ruby-1.9.3-p194@strgf/gems/actionpack-3.0.19/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (25.9ms)
Rendered /home/chaitanya/.rvm/gems/ruby-1.9.3-p194@strgf/gems/actionpack-3.0.19/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (34.1ms)


Started POST "/en/people/dPgoR6J6qr4Oaj3a6HdQnY/update_avatar" for 127.0.0.1 at 2013-03-21 13:14:15 +0530
  Processing by PeopleController#update_avatar as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"WJyxSApP1ZoDya7qcieJqUg5S0Zc4q5IQ7Pj2USt5FE=", "person"=>{"image"=>#<ActionDispatch::Http::UploadedFile:0x11022f68 @original_filename="amir_khan.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"person[image]\"; filename=\"amir_khan.jpg\"\r\nContent-Type: image/jpeg\r\n", @tempfile=#<File:/tmp/RackMultipart20130321-2910-1ql5u4k>>}, "commit"=>"Save picture", "locale"=>"en", "id"=>"dPgoR6J6qr4Oaj3a6HdQnY"}
  [1m[35mPK and serial sequence (10.0ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (5.0ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.6ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (3.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.2ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (1.9ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (1.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (2.4ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (2.0ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (2.9ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (3.3ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (1.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.6ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (1.4ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (1.1ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.2ms)[0m  INSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bG9jYWxob3N0
', NULL, '2013-03-21 07:44:16.736756', NULL, NULL, NULL, '2013-03-21 07:44:16.736890', '2013-03-21 07:44:16.736890', NULL) RETURNING "id"
  [1m[36mSQL (29.7ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (0.7ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (0.5ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mPerson Load (0.7ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mLocation Load (0.5ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.5ms)[0m  [1mSELECT 1 FROM "people" WHERE ("people"."username" = 'saraf') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1[0m
  [1m[35mSQL (1.3ms)[0m  SELECT 1 FROM "people" WHERE ("people"."email" = 'chaitanya@stridepath.com') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1
  [1m[36mAREL (2.1ms)[0m  [1mUPDATE "people" SET "preferences" = '---
email_about_new_messages: true
email_about_new_comments_to_own_listing: true
email_when_conversation_accepted: true
email_when_conversation_rejected: true
email_about_new_badges: true
email_about_new_received_testimonials: true
email_about_accept_reminders: true
email_about_testimonial_reminders: true
email_about_weekly_events: true
' WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY'[0m
[paperclip] Saving attachments.
  [1m[35mSQL (10.5ms)[0m  COMMIT
  [1m[36mSQL (0.2ms)[0m  [1mBEGIN[0m
[paperclip] identify -format %wx%h '/tmp/stream20130321-2910-w382s8.jpg[0]' 2>/dev/null
[paperclip] convert '/tmp/stream20130321-2910-w382s8.jpg[0]' -resize "200x350>" '/tmp/stream20130321-2910-w382s820130321-2910-lk3v2c' 2>/dev/null
[paperclip] identify -format %wx%h '/tmp/stream20130321-2910-w382s8.jpg[0]' 2>/dev/null
[paperclip] convert '/tmp/stream20130321-2910-w382s8.jpg[0]' -resize "x50" -crop "50x50+12+0" +repage '/tmp/stream20130321-2910-w382s820130321-2910-1ks35fx' 2>/dev/null
[paperclip] identify -format %wx%h '/tmp/stream20130321-2910-w382s8.jpg[0]' 2>/dev/null
[paperclip] convert '/tmp/stream20130321-2910-w382s8.jpg[0]' -resize "200x350>" '/tmp/stream20130321-2910-w382s820130321-2910-1cbig0e' 2>/dev/null
  [1m[35mSQL (1.6ms)[0m  SELECT 1 FROM "people" WHERE ("people"."username" = 'saraf') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1
  [1m[36mSQL (1.0ms)[0m  [1mSELECT 1 FROM "people" WHERE ("people"."email" = 'chaitanya@stridepath.com') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1[0m
  [1m[35mAREL (1.4ms)[0m  UPDATE "people" SET "image_file_name" = 'amir_khan.jpg', "image_file_size" = 4606, "image_updated_at" = '2013-03-21 07:44:22.195121', "updated_at" = '2013-03-21 07:44:22.693110', "preferences" = '---
email_about_new_messages: true
email_about_new_comments_to_own_listing: true
email_when_conversation_accepted: true
email_when_conversation_rejected: true
email_about_new_badges: true
email_about_new_received_testimonials: true
email_about_accept_reminders: true
email_about_testimonial_reminders: true
email_about_weekly_events: true
' WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY'
[paperclip] Saving attachments.
  [1m[36mSQL (30.3ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:3000/en/people/dPgoR6J6qr4Oaj3a6HdQnY/settings/avatar
Completed 302 Found in 19515ms


Started GET "/en/people/dPgoR6J6qr4Oaj3a6HdQnY/settings/avatar" for 127.0.0.1 at 2013-03-21 13:14:35 +0530
  Processing by SettingsController#avatar as HTML
  Parameters: {"locale"=>"en", "person_id"=>"dPgoR6J6qr4Oaj3a6HdQnY"}
  [1m[35mPK and serial sequence (6.1ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.0ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.3ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (5.9ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (1.6ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.0ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (5.5ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (1.6ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (2.3ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (1.6ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (1.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.2ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (1.5ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (1.0ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.2ms)[0m  INSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bG9jYWxob3N0
', NULL, '2013-03-21 07:44:36.355177', NULL, NULL, NULL, '2013-03-21 07:44:36.355292', '2013-03-21 07:44:36.355292', NULL) RETURNING "id"
  [1m[36mSQL (33.2ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (1.6ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (0.9ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mPerson Load (1.3ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
Rendered layouts/_kissmetrics.haml (3.0ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.9ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.4ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (11.4ms)
Rendered communities/default/logo/logo.haml (2.7ms)
Rendered layouts/_no_javascript.haml (17.0ms)
Rendered layouts/_facebook_sdk.haml (2.5ms)
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.3ms)[0m  [1mSELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) AND participations.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')[0m
Rendered layouts/_logged_in_messages_icon.haml (24.4ms)
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.0ms)[0m  [1mSELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')[0m
Rendered layouts/_logged_in_notifications_icon.haml (17.2ms)
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.0ms)[0m  [1mSELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY') AND (acceptance is null)[0m
Rendered layouts/_logged_in_swap_offers_icon.haml (11.6ms)
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"authentications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mAuthentication Load (1.0ms)[0m  [1mSELECT "authentications".* FROM "authentications" WHERE "authentications"."user_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
Rendered layouts/_logged_in.haml (76.1ms)
Rendered layouts/_notifications.haml (6.7ms)
  [1m[35mLocation Load (1.1ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1
Rendered layouts/_display_popup.haml (12.1ms)
Rendered layouts/application.haml (299.9ms)
Rendered settings/avatar.haml within layouts/settings (320.1ms)
Completed 200 OK in 1242ms (Views: 307.7ms | ActiveRecord: 346.9ms | Sphinx: 0.0ms)


Started POST "/en/people/dPgoR6J6qr4Oaj3a6HdQnY/update_avatar" for 127.0.0.1 at 2013-03-21 13:15:57 +0530
  Processing by PeopleController#update_avatar as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"WJyxSApP1ZoDya7qcieJqUg5S0Zc4q5IQ7Pj2USt5FE=", "person"=>{"image"=>#<ActionDispatch::Http::UploadedFile:0x142e35ec @original_filename="amir.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"person[image]\"; filename=\"amir.jpg\"\r\nContent-Type: image/jpeg\r\n", @tempfile=#<File:/tmp/RackMultipart20130321-2910-18om11k>>}, "commit"=>"Save picture", "locale"=>"en", "id"=>"dPgoR6J6qr4Oaj3a6HdQnY"}
  [1m[36mPK and serial sequence (2.6ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (2.0ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (1.4ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.8ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (1.6ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.0ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.7ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.1ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (6.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.2ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.6ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.1ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.3ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (0.4ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bG9jYWxob3N0
', NULL, '2013-03-21 07:45:58.261049', NULL, NULL, NULL, '2013-03-21 07:45:58.261160', '2013-03-21 07:45:58.261160', NULL) RETURNING "id"[0m
  [1m[35mSQL (36.4ms)[0m  COMMIT
  [1m[36mSQL (1.6ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.0ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mPerson Load (1.4ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mLocation Load (1.0ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  SELECT 1 FROM "people" WHERE ("people"."username" = 'saraf') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mSELECT 1 FROM "people" WHERE ("people"."email" = 'chaitanya@stridepath.com') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  ROLLBACK
  [1m[36mSQL (0.3ms)[0m  [1mBEGIN[0m
[paperclip] identify -format %wx%h '/tmp/stream20130321-2910-1m2go69.jpg[0]' 2>/dev/null
[paperclip] convert '/tmp/stream20130321-2910-1m2go69.jpg[0]' -resize "200x350>" '/tmp/stream20130321-2910-1m2go6920130321-2910-20jhxg' 2>/dev/null
[paperclip] identify -format %wx%h '/tmp/stream20130321-2910-1m2go69.jpg[0]' 2>/dev/null
[paperclip] convert '/tmp/stream20130321-2910-1m2go69.jpg[0]' -resize "x50" -crop "50x50+19+0" +repage '/tmp/stream20130321-2910-1m2go6920130321-2910-184ow92' 2>/dev/null
[paperclip] identify -format %wx%h '/tmp/stream20130321-2910-1m2go69.jpg[0]' 2>/dev/null
[paperclip] convert '/tmp/stream20130321-2910-1m2go69.jpg[0]' -resize "200x350>" '/tmp/stream20130321-2910-1m2go6920130321-2910-lbxm2j' 2>/dev/null
  [1m[35mCACHE (0.0ms)[0m  SELECT 1 FROM "people" WHERE ("people"."username" = 'saraf') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT 1 FROM "people" WHERE ("people"."email" = 'chaitanya@stridepath.com') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  ROLLBACK
Redirected to http://localhost:3000/en/people/dPgoR6J6qr4Oaj3a6HdQnY/settings/avatar
Completed 302 Found in 7321ms


Started GET "/en/people/dPgoR6J6qr4Oaj3a6HdQnY/settings/avatar" for 127.0.0.1 at 2013-03-21 13:16:04 +0530
  Processing by SettingsController#avatar as HTML
  Parameters: {"locale"=>"en", "person_id"=>"dPgoR6J6qr4Oaj3a6HdQnY"}
  [1m[36mPK and serial sequence (6.3ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.0ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (1.3ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.0ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.0ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (7.7ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.2ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (6.6ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (1.7ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.3ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.6ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (1.2ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  BEGIN
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bG9jYWxob3N0
', NULL, '2013-03-21 07:46:05.738923', NULL, NULL, NULL, '2013-03-21 07:46:05.739087', '2013-03-21 07:46:05.739087', NULL) RETURNING "id"[0m
  [1m[35mSQL (34.6ms)[0m  COMMIT
  [1m[36mSQL (1.5ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (0.6ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mPerson Load (1.4ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
Rendered layouts/_kissmetrics.haml (3.2ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.9ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.2ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (10.8ms)
Rendered communities/default/logo/logo.haml (2.4ms)
Rendered layouts/_no_javascript.haml (16.4ms)
Rendered layouts/_facebook_sdk.haml (3.2ms)
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.7ms)[0m  SELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) AND participations.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_messages_icon.haml (16.1ms)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_notifications_icon.haml (10.8ms)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.8ms)[0m  SELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY') AND (acceptance is null)
Rendered layouts/_logged_in_swap_offers_icon.haml (12.4ms)
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"authentications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mAuthentication Load (1.6ms)[0m  SELECT "authentications".* FROM "authentications" WHERE "authentications"."user_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
Rendered layouts/_logged_in.haml (65.3ms)
Rendered layouts/_notifications.haml (5.1ms)
  [1m[36mLocation Load (1.1ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
Rendered layouts/_display_popup.haml (12.5ms)
Rendered layouts/application.haml (173.7ms)
Rendered settings/avatar.haml within layouts/settings (194.3ms)
Completed 200 OK in 1262ms (Views: 181.9ms | ActiveRecord: 225.3ms | Sphinx: 0.0ms)


Started POST "/en/people/dPgoR6J6qr4Oaj3a6HdQnY/update_avatar" for 127.0.0.1 at 2013-03-21 13:16:48 +0530
  Processing by PeopleController#update_avatar as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"WJyxSApP1ZoDya7qcieJqUg5S0Zc4q5IQ7Pj2USt5FE=", "person"=>{"image"=>#<ActionDispatch::Http::UploadedFile:0x115a78a8 @original_filename="amir.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"person[image]\"; filename=\"amir.jpg\"\r\nContent-Type: image/jpeg\r\n", @tempfile=#<File:/tmp/RackMultipart20130321-2910-16l4ap1>>}, "commit"=>"Save picture", "locale"=>"en", "id"=>"dPgoR6J6qr4Oaj3a6HdQnY"}
  [1m[35mPK and serial sequence (6.8ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.4ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (2.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.4ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (1.7ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.0ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.8ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.1ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (6.6ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (5.8ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.4ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (1.6ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (1.0ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bG9jYWxob3N0
', NULL, '2013-03-21 07:46:49.366746', NULL, NULL, NULL, '2013-03-21 07:46:49.366866', '2013-03-21 07:46:49.366866', NULL) RETURNING "id"
  [1m[36mSQL (72.7ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (0.9ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (0.9ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mPerson Load (1.5ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mLocation Load (0.8ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mSELECT 1 FROM "people" WHERE ("people"."username" = 'saraf') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  SELECT 1 FROM "people" WHERE ("people"."email" = 'chaitanya@stridepath.com') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mROLLBACK[0m
  [1m[35mSQL (0.4ms)[0m  BEGIN
[paperclip] identify -format %wx%h '/tmp/stream20130321-2910-1d3aihc.jpg[0]' 2>/dev/null
[paperclip] convert '/tmp/stream20130321-2910-1d3aihc.jpg[0]' -resize "200x350>" '/tmp/stream20130321-2910-1d3aihc20130321-2910-1lg4h7p' 2>/dev/null
[paperclip] identify -format %wx%h '/tmp/stream20130321-2910-1d3aihc.jpg[0]' 2>/dev/null
[paperclip] convert '/tmp/stream20130321-2910-1d3aihc.jpg[0]' -resize "x50" -crop "50x50+19+0" +repage '/tmp/stream20130321-2910-1d3aihc20130321-2910-1qtbc4b' 2>/dev/null
[paperclip] identify -format %wx%h '/tmp/stream20130321-2910-1d3aihc.jpg[0]' 2>/dev/null
[paperclip] convert '/tmp/stream20130321-2910-1d3aihc.jpg[0]' -resize "200x350>" '/tmp/stream20130321-2910-1d3aihc20130321-2910-1g6pqlu' 2>/dev/null
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT 1 FROM "people" WHERE ("people"."username" = 'saraf') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT 1 FROM "people" WHERE ("people"."email" = 'chaitanya@stridepath.com') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mROLLBACK[0m
Redirected to http://localhost:3000/en/people/dPgoR6J6qr4Oaj3a6HdQnY/settings/avatar
Completed 302 Found in 7046ms


Started GET "/en/people/dPgoR6J6qr4Oaj3a6HdQnY/settings/avatar" for 127.0.0.1 at 2013-03-21 13:16:55 +0530
  Processing by SettingsController#avatar as HTML
  Parameters: {"locale"=>"en", "person_id"=>"dPgoR6J6qr4Oaj3a6HdQnY"}
  [1m[35mPK and serial sequence (6.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.0ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.3ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.1ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.0ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.1ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.3ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.0ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (6.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.2ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.3ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (1.4ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (1.0ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bG9jYWxob3N0
', NULL, '2013-03-21 07:46:56.577613', NULL, NULL, NULL, '2013-03-21 07:46:56.577735', '2013-03-21 07:46:56.577735', NULL) RETURNING "id"
  [1m[36mSQL (28.2ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (1.6ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (1.1ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mPerson Load (1.3ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
Rendered layouts/_kissmetrics.haml (3.0ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.8ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (3.1ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (11.6ms)
Rendered communities/default/logo/logo.haml (2.4ms)
Rendered layouts/_no_javascript.haml (17.3ms)
Rendered layouts/_facebook_sdk.haml (2.4ms)
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.2ms)[0m  [1mSELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) AND participations.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')[0m
Rendered layouts/_logged_in_messages_icon.haml (17.4ms)
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')[0m
Rendered layouts/_logged_in_notifications_icon.haml (14.9ms)
  [1m[35mSQL (3.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.3ms)[0m  [1mSELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY') AND (acceptance is null)[0m
Rendered layouts/_logged_in_swap_offers_icon.haml (133.9ms)
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"authentications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mAuthentication Load (1.7ms)[0m  [1mSELECT "authentications".* FROM "authentications" WHERE "authentications"."user_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
Rendered layouts/_logged_in.haml (194.1ms)
Rendered layouts/_notifications.haml (7.5ms)
  [1m[35mLocation Load (1.1ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1
Rendered layouts/_display_popup.haml (10.8ms)
Rendered layouts/application.haml (306.5ms)
Rendered settings/avatar.haml within layouts/settings (329.1ms)
Completed 200 OK in 1394ms (Views: 315.0ms | ActiveRecord: 268.0ms | Sphinx: 0.0ms)


Started POST "/en/people/dPgoR6J6qr4Oaj3a6HdQnY/update_avatar" for 127.0.0.1 at 2013-03-21 13:18:08 +0530
  Processing by PeopleController#update_avatar as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"WJyxSApP1ZoDya7qcieJqUg5S0Zc4q5IQ7Pj2USt5FE=", "person"=>{"image"=>#<ActionDispatch::Http::UploadedFile:0x1413581c @original_filename="amir.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"person[image]\"; filename=\"amir.jpg\"\r\nContent-Type: image/jpeg\r\n", @tempfile=#<File:/tmp/RackMultipart20130321-2910-1t10sql>>}, "commit"=>"Save picture", "locale"=>"en", "id"=>"dPgoR6J6qr4Oaj3a6HdQnY"}
  [1m[36mPK and serial sequence (6.8ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.7ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (1.6ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mSQL (2.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (4.8ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (3.8ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (0.9ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (1.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (3.7ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (2.5ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (3.3ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (2.2ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.7ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.5ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (1.0ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  BEGIN
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bG9jYWxob3N0
', NULL, '2013-03-21 07:48:09.719072', NULL, NULL, NULL, '2013-03-21 07:48:09.719187', '2013-03-21 07:48:09.719187', NULL) RETURNING "id"[0m
  [1m[35mSQL (39.6ms)[0m  COMMIT
  [1m[36mSQL (1.5ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (0.9ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mPerson Load (1.5ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mLocation Load (1.1ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  SELECT 1 FROM "people" WHERE ("people"."username" = 'saraf') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mSELECT 1 FROM "people" WHERE ("people"."email" = 'chaitanya@stridepath.com') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1[0m
DEPRECATION WARNING: Errors#add_to_base(msg) has been deprecated, use Errors#add(:base, msg) instead. (called from validate_image_size at /home/chaitanya/workArea/ST-to-RGF/app/models/person.rb:166)
  [1m[35mSQL (0.4ms)[0m  ROLLBACK
  [1m[36mSQL (0.4ms)[0m  [1mBEGIN[0m
[paperclip] identify -format %wx%h '/tmp/stream20130321-2910-uuxahs.jpg[0]' 2>/dev/null
[paperclip] convert '/tmp/stream20130321-2910-uuxahs.jpg[0]' -resize "200x350>" '/tmp/stream20130321-2910-uuxahs20130321-2910-c0cq3h' 2>/dev/null
[paperclip] identify -format %wx%h '/tmp/stream20130321-2910-uuxahs.jpg[0]' 2>/dev/null
[paperclip] convert '/tmp/stream20130321-2910-uuxahs.jpg[0]' -resize "x50" -crop "50x50+19+0" +repage '/tmp/stream20130321-2910-uuxahs20130321-2910-8quke6' 2>/dev/null
[paperclip] identify -format %wx%h '/tmp/stream20130321-2910-uuxahs.jpg[0]' 2>/dev/null
[paperclip] convert '/tmp/stream20130321-2910-uuxahs.jpg[0]' -resize "200x350>" '/tmp/stream20130321-2910-uuxahs20130321-2910-1efc9om' 2>/dev/null
  [1m[35mCACHE (0.0ms)[0m  SELECT 1 FROM "people" WHERE ("people"."username" = 'saraf') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT 1 FROM "people" WHERE ("people"."email" = 'chaitanya@stridepath.com') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1[0m
DEPRECATION WARNING: Errors#add_to_base(msg) has been deprecated, use Errors#add(:base, msg) instead. (called from validate_image_size at /home/chaitanya/workArea/ST-to-RGF/app/models/person.rb:166)
  [1m[35mSQL (0.7ms)[0m  ROLLBACK
Redirected to http://localhost:3000/en/people/dPgoR6J6qr4Oaj3a6HdQnY/settings/avatar
Completed 302 Found in 7088ms


Started GET "/en/people/dPgoR6J6qr4Oaj3a6HdQnY/settings/avatar" for 127.0.0.1 at 2013-03-21 13:18:15 +0530
  Processing by SettingsController#avatar as HTML
  Parameters: {"locale"=>"en", "person_id"=>"dPgoR6J6qr4Oaj3a6HdQnY"}
  [1m[36mPK and serial sequence (6.1ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.0ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (1.6ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (1.4ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.0ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (1.9ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.7ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.1ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (6.1ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.4ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.3ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (0.6ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  BEGIN
  [1m[36mSQL (1.3ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bG9jYWxob3N0
', NULL, '2013-03-21 07:48:17.006103', NULL, NULL, NULL, '2013-03-21 07:48:17.006283', '2013-03-21 07:48:17.006283', NULL) RETURNING "id"[0m
  [1m[35mSQL (36.8ms)[0m  COMMIT
  [1m[36mSQL (1.4ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.3ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mPerson Load (0.8ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
Rendered layouts/_kissmetrics.haml (5.1ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (3.0ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (3.2ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (13.8ms)
Rendered communities/default/logo/logo.haml (2.6ms)
Rendered layouts/_no_javascript.haml (18.6ms)
Rendered layouts/_facebook_sdk.haml (4.4ms)
  [1m[35mSQL (1.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.6ms)[0m  SELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) AND participations.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_messages_icon.haml (21.6ms)
  [1m[36mSQL (1.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.7ms)[0m  SELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_notifications_icon.haml (11.8ms)
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY') AND (acceptance is null)
Rendered layouts/_logged_in_swap_offers_icon.haml (15.0ms)
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"authentications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mAuthentication Load (1.2ms)[0m  SELECT "authentications".* FROM "authentications" WHERE "authentications"."user_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
Rendered layouts/_logged_in.haml (79.6ms)
Rendered layouts/_notifications.haml (10.1ms)
  [1m[36mLocation Load (1.2ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
Rendered layouts/_display_popup.haml (11.3ms)
Rendered layouts/application.haml (216.7ms)
Rendered settings/avatar.haml within layouts/settings (237.9ms)
Completed 200 OK in 1310ms (Views: 228.3ms | ActiveRecord: 222.5ms | Sphinx: 0.0ms)


Started POST "/en/people/dPgoR6J6qr4Oaj3a6HdQnY/update_avatar" for 127.0.0.1 at 2013-03-21 13:19:18 +0530
  Processing by PeopleController#update_avatar as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"WJyxSApP1ZoDya7qcieJqUg5S0Zc4q5IQ7Pj2USt5FE=", "person"=>{"image"=>#<ActionDispatch::Http::UploadedFile:0x11a90090 @original_filename="amazing_flowers-wide.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"person[image]\"; filename=\"amazing_flowers-wide.jpg\"\r\nContent-Type: image/jpeg\r\n", @tempfile=#<File:/tmp/RackMultipart20130321-2910-uu3vrf>>}, "commit"=>"Save picture", "locale"=>"en", "id"=>"dPgoR6J6qr4Oaj3a6HdQnY"}
  [1m[35mPK and serial sequence (6.3ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.0ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.7ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (2.0ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (1.9ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (4.0ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (2.1ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (2.3ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (3.4ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.2ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (1.4ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (1.0ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.3ms)[0m  INSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bG9jYWxob3N0
', NULL, '2013-03-21 07:49:19.883757', NULL, NULL, NULL, '2013-03-21 07:49:19.883876', '2013-03-21 07:49:19.883876', NULL) RETURNING "id"
  [1m[36mSQL (27.8ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (1.0ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (1.7ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mPerson Load (1.7ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mLocation Load (0.7ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.5ms)[0m  [1mSELECT 1 FROM "people" WHERE ("people"."username" = 'saraf') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  SELECT 1 FROM "people" WHERE ("people"."email" = 'chaitanya@stridepath.com') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1
DEPRECATION WARNING: Errors#add_to_base(msg) has been deprecated, use Errors#add(:base, msg) instead. (called from validate_image_size at /home/chaitanya/workArea/ST-to-RGF/app/models/person.rb:166)
  [1m[36mSQL (0.5ms)[0m  [1mROLLBACK[0m
  [1m[35mSQL (0.4ms)[0m  BEGIN
[paperclip] identify -format %wx%h '/tmp/stream20130321-2910-xpxii3.jpg[0]' 2>/dev/null
[paperclip] convert '/tmp/stream20130321-2910-xpxii3.jpg[0]' -resize "200x350>" '/tmp/stream20130321-2910-xpxii320130321-2910-1vn8yxk' 2>/dev/null
[paperclip] identify -format %wx%h '/tmp/stream20130321-2910-xpxii3.jpg[0]' 2>/dev/null
[paperclip] convert '/tmp/stream20130321-2910-xpxii3.jpg[0]' -resize "x50" -crop "50x50+15+0" +repage '/tmp/stream20130321-2910-xpxii320130321-2910-horv2b' 2>/dev/null
[paperclip] identify -format %wx%h '/tmp/stream20130321-2910-xpxii3.jpg[0]' 2>/dev/null
[paperclip] convert '/tmp/stream20130321-2910-xpxii3.jpg[0]' -resize "200x350>" '/tmp/stream20130321-2910-xpxii320130321-2910-12azj2z' 2>/dev/null
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT 1 FROM "people" WHERE ("people"."username" = 'saraf') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT 1 FROM "people" WHERE ("people"."email" = 'chaitanya@stridepath.com') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1
DEPRECATION WARNING: Errors#add_to_base(msg) has been deprecated, use Errors#add(:base, msg) instead. (called from validate_image_size at /home/chaitanya/workArea/ST-to-RGF/app/models/person.rb:166)
  [1m[36mSQL (0.7ms)[0m  [1mROLLBACK[0m
Redirected to http://localhost:3000/en/people/dPgoR6J6qr4Oaj3a6HdQnY/settings/avatar
Completed 302 Found in 7884ms


Started GET "/en/people/dPgoR6J6qr4Oaj3a6HdQnY/settings/avatar" for 127.0.0.1 at 2013-03-21 13:19:26 +0530
  Processing by SettingsController#avatar as HTML
  Parameters: {"locale"=>"en", "person_id"=>"dPgoR6J6qr4Oaj3a6HdQnY"}
  [1m[35mPK and serial sequence (6.1ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.1ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.5ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.5ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.2ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.1ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (5.9ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (2.3ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (2.4ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (1.8ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (1.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (3.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.6ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (0.7ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (1.1ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bG9jYWxob3N0
', NULL, '2013-03-21 07:49:28.492031', NULL, NULL, NULL, '2013-03-21 07:49:28.492156', '2013-03-21 07:49:28.492156', NULL) RETURNING "id"
  [1m[36mSQL (1028.6ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (1.6ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (1.0ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mPerson Load (1.4ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
Rendered layouts/_kissmetrics.haml (3.2ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (2.1ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (3.1ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (12.1ms)
Rendered communities/default/logo/logo.haml (2.5ms)
Rendered layouts/_no_javascript.haml (16.4ms)
Rendered layouts/_facebook_sdk.haml (2.6ms)
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.7ms)[0m  [1mSELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) AND participations.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')[0m
Rendered layouts/_logged_in_messages_icon.haml (16.0ms)
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')[0m
Rendered layouts/_logged_in_notifications_icon.haml (10.5ms)
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.0ms)[0m  [1mSELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY') AND (acceptance is null)[0m
Rendered layouts/_logged_in_swap_offers_icon.haml (11.2ms)
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"authentications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mAuthentication Load (0.9ms)[0m  [1mSELECT "authentications".* FROM "authentications" WHERE "authentications"."user_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
Rendered layouts/_logged_in.haml (57.5ms)
Rendered layouts/_notifications.haml (6.4ms)
  [1m[35mLocation Load (1.1ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1
Rendered layouts/_display_popup.haml (12.3ms)
Rendered layouts/application.haml (169.6ms)
Rendered settings/avatar.haml within layouts/settings (189.6ms)
Completed 200 OK in 2664ms (Views: 177.2ms | ActiveRecord: 1197.5ms | Sphinx: 0.0ms)


Started POST "/en/people/dPgoR6J6qr4Oaj3a6HdQnY/update_avatar" for 127.0.0.1 at 2013-03-21 13:23:25 +0530
  Processing by PeopleController#update_avatar as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"WJyxSApP1ZoDya7qcieJqUg5S0Zc4q5IQ7Pj2USt5FE=", "person"=>{"image"=>#<ActionDispatch::Http::UploadedFile:0x1188e724 @original_filename="_DSC0244.JPG", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"person[image]\"; filename=\"_DSC0244.JPG\"\r\nContent-Type: image/jpeg\r\n", @tempfile=#<File:/tmp/RackMultipart20130321-2910-1eev9bt>>}, "commit"=>"Save picture", "locale"=>"en", "id"=>"dPgoR6J6qr4Oaj3a6HdQnY"}
  [1m[36mPK and serial sequence (6.8ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.7ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (1.4ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mSQL (2.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.7ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.0ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (7.4ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (1.6ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (3.7ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (2.0ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (1.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (0.6ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (0.8ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  BEGIN
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bG9jYWxob3N0
', NULL, '2013-03-21 07:53:26.544097', NULL, NULL, NULL, '2013-03-21 07:53:26.544212', '2013-03-21 07:53:26.544212', NULL) RETURNING "id"[0m
  [1m[35mSQL (14.3ms)[0m  COMMIT
  [1m[36mSQL (1.7ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.0ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mPerson Load (1.4ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mLocation Load (0.9ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  SELECT 1 FROM "people" WHERE ("people"."username" = 'saraf') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mSELECT 1 FROM "people" WHERE ("people"."email" = 'chaitanya@stridepath.com') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1[0m
  [1m[35mAREL (0.8ms)[0m  UPDATE "people" SET "preferences" = '---
email_about_new_messages: true
email_about_new_comments_to_own_listing: true
email_when_conversation_accepted: true
email_when_conversation_rejected: true
email_about_new_badges: true
email_about_new_received_testimonials: true
email_about_accept_reminders: true
email_about_testimonial_reminders: true
email_about_weekly_events: true
' WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY'
[paperclip] Saving attachments.
  [1m[36mSQL (4.9ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (0.3ms)[0m  BEGIN
[paperclip] identify -format %wx%h '/tmp/stream20130321-2910-nzs5j6.JPG[0]' 2>/dev/null
[paperclip] convert '/tmp/stream20130321-2910-nzs5j6.JPG[0]' -resize "200x350>" '/tmp/stream20130321-2910-nzs5j620130321-2910-1ahzs7' 2>/dev/null
[paperclip] identify -format %wx%h '/tmp/stream20130321-2910-nzs5j6.JPG[0]' 2>/dev/null
[paperclip] convert '/tmp/stream20130321-2910-nzs5j6.JPG[0]' -resize "x50" -crop "50x50+12+0" +repage '/tmp/stream20130321-2910-nzs5j620130321-2910-3pk0uu' 2>/dev/null
[paperclip] identify -format %wx%h '/tmp/stream20130321-2910-nzs5j6.JPG[0]' 2>/dev/null
[paperclip] convert '/tmp/stream20130321-2910-nzs5j6.JPG[0]' -resize "200x350>" '/tmp/stream20130321-2910-nzs5j620130321-2910-1svczo3' 2>/dev/null
  [1m[36mSQL (1.4ms)[0m  [1mSELECT 1 FROM "people" WHERE ("people"."username" = 'saraf') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1[0m
  [1m[35mSQL (1.0ms)[0m  SELECT 1 FROM "people" WHERE ("people"."email" = 'chaitanya@stridepath.com') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1
  [1m[36mAREL (1.4ms)[0m  [1mUPDATE "people" SET "image_file_name" = '_DSC0244.JPG', "image_file_size" = 99502, "image_updated_at" = '2013-03-21 07:53:32.007098', "updated_at" = '2013-03-21 07:53:36.614820', "preferences" = '---
email_about_new_messages: true
email_about_new_comments_to_own_listing: true
email_when_conversation_accepted: true
email_when_conversation_rejected: true
email_about_new_badges: true
email_about_new_received_testimonials: true
email_about_accept_reminders: true
email_about_testimonial_reminders: true
email_about_weekly_events: true
' WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY'[0m
[paperclip] Saving attachments.
  [1m[35mSQL (35.4ms)[0m  COMMIT
Redirected to http://localhost:3000/en/people/dPgoR6J6qr4Oaj3a6HdQnY/settings/avatar
Completed 302 Found in 31243ms


Started GET "/en/people/dPgoR6J6qr4Oaj3a6HdQnY/settings/avatar" for 127.0.0.1 at 2013-03-21 13:23:56 +0530
  Processing by SettingsController#avatar as HTML
  Parameters: {"locale"=>"en", "person_id"=>"dPgoR6J6qr4Oaj3a6HdQnY"}
  [1m[36mPK and serial sequence (6.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.1ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.6ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (1.4ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (5.4ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (1.6ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (1.9ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (3.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (7.5ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (2.2ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (2.5ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (1.8ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (1.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.6ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.3ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.4ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (0.9ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  BEGIN
  [1m[36mSQL (1.4ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bG9jYWxob3N0
', NULL, '2013-03-21 07:53:58.103596', NULL, NULL, NULL, '2013-03-21 07:53:58.103788', '2013-03-21 07:53:58.103788', NULL) RETURNING "id"[0m
  [1m[35mSQL (30.8ms)[0m  COMMIT
  [1m[36mSQL (1.5ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.0ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mPerson Load (1.4ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
Rendered layouts/_kissmetrics.haml (3.1ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.9ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.1ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (10.5ms)
Rendered communities/default/logo/logo.haml (2.9ms)
Rendered layouts/_no_javascript.haml (16.6ms)
Rendered layouts/_facebook_sdk.haml (2.8ms)
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.8ms)[0m  SELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) AND participations.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_messages_icon.haml (16.8ms)
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_notifications_icon.haml (12.8ms)
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY') AND (acceptance is null)
Rendered layouts/_logged_in_swap_offers_icon.haml (14.4ms)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"authentications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mAuthentication Load (1.0ms)[0m  SELECT "authentications".* FROM "authentications" WHERE "authentications"."user_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
Rendered layouts/_logged_in.haml (65.5ms)
Rendered layouts/_notifications.haml (9.0ms)
  [1m[36mLocation Load (1.1ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
Rendered layouts/_display_popup.haml (10.0ms)
Rendered layouts/application.haml (174.3ms)
Rendered settings/avatar.haml within layouts/settings (193.0ms)
Completed 200 OK in 1143ms (Views: 179.9ms | ActiveRecord: 233.5ms | Sphinx: 0.0ms)


Started POST "/en/people/dPgoR6J6qr4Oaj3a6HdQnY/update_avatar" for 127.0.0.1 at 2013-03-21 13:24:58 +0530
  Processing by PeopleController#update_avatar as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"WJyxSApP1ZoDya7qcieJqUg5S0Zc4q5IQ7Pj2USt5FE=", "person"=>{"image"=>#<ActionDispatch::Http::UploadedFile:0x12dc6dd0 @original_filename="_DSC0361.JPG", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"person[image]\"; filename=\"_DSC0361.JPG\"\r\nContent-Type: image/jpeg\r\n", @tempfile=#<File:/tmp/RackMultipart20130321-2910-1u4m4tb>>}, "commit"=>"Save picture", "locale"=>"en", "id"=>"dPgoR6J6qr4Oaj3a6HdQnY"}
  [1m[35mPK and serial sequence (6.4ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.1ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.4ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (5.8ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (2.2ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (1.9ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (4.5ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (1.5ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (2.6ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (2.6ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.6ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (1.4ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (1.0ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bG9jYWxob3N0
', NULL, '2013-03-21 07:54:59.805575', NULL, NULL, NULL, '2013-03-21 07:54:59.805695', '2013-03-21 07:54:59.805695', NULL) RETURNING "id"
  [1m[36mSQL (82.6ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (1.4ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (1.0ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mPerson Load (1.4ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mLocation Load (0.4ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.4ms)[0m  [1mSELECT 1 FROM "people" WHERE ("people"."username" = 'saraf') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  SELECT 1 FROM "people" WHERE ("people"."email" = 'chaitanya@stridepath.com') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1
  [1m[36mAREL (0.6ms)[0m  [1mUPDATE "people" SET "preferences" = '---
email_about_new_messages: true
email_about_new_comments_to_own_listing: true
email_when_conversation_accepted: true
email_when_conversation_rejected: true
email_about_new_badges: true
email_about_new_received_testimonials: true
email_about_accept_reminders: true
email_about_testimonial_reminders: true
email_about_weekly_events: true
' WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY'[0m
[paperclip] Saving attachments.
  [1m[35mSQL (34.2ms)[0m  COMMIT
  [1m[36mSQL (0.6ms)[0m  [1mBEGIN[0m
[paperclip] identify -format %wx%h '/tmp/stream20130321-2910-225gkt.JPG[0]' 2>/dev/null
[paperclip] convert '/tmp/stream20130321-2910-225gkt.JPG[0]' -resize "200x350>" '/tmp/stream20130321-2910-225gkt20130321-2910-1ab141b' 2>/dev/null
[paperclip] identify -format %wx%h '/tmp/stream20130321-2910-225gkt.JPG[0]' 2>/dev/null
[paperclip] convert '/tmp/stream20130321-2910-225gkt.JPG[0]' -resize "x50" -crop "50x50+12+0" +repage '/tmp/stream20130321-2910-225gkt20130321-2910-b8p5hw' 2>/dev/null
[paperclip] identify -format %wx%h '/tmp/stream20130321-2910-225gkt.JPG[0]' 2>/dev/null
[paperclip] convert '/tmp/stream20130321-2910-225gkt.JPG[0]' -resize "200x350>" '/tmp/stream20130321-2910-225gkt20130321-2910-1yomu61' 2>/dev/null
  [1m[35mSQL (1.1ms)[0m  SELECT 1 FROM "people" WHERE ("people"."username" = 'saraf') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mSELECT 1 FROM "people" WHERE ("people"."email" = 'chaitanya@stridepath.com') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1[0m
  [1m[35mAREL (0.8ms)[0m  UPDATE "people" SET "image_file_name" = '_DSC0361.JPG', "image_file_size" = 95174, "image_updated_at" = '2013-03-21 07:55:06.688948', "updated_at" = '2013-03-21 07:55:10.797066', "preferences" = '---
email_about_new_messages: true
email_about_new_comments_to_own_listing: true
email_when_conversation_accepted: true
email_when_conversation_rejected: true
email_about_new_badges: true
email_about_new_received_testimonials: true
email_about_accept_reminders: true
email_about_testimonial_reminders: true
email_about_weekly_events: true
' WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY'
[paperclip] Saving attachments.
  [1m[36mSQL (27.7ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:3000/en/people/dPgoR6J6qr4Oaj3a6HdQnY/settings/avatar
Completed 302 Found in 36276ms


Started GET "/en/people/dPgoR6J6qr4Oaj3a6HdQnY/settings/avatar" for 127.0.0.1 at 2013-03-21 13:25:35 +0530
  Processing by SettingsController#avatar as HTML
  Parameters: {"locale"=>"en", "person_id"=>"dPgoR6J6qr4Oaj3a6HdQnY"}
  [1m[35mPK and serial sequence (6.4ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (3.4ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (0.7ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (5.5ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.0ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (1.8ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (1.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (5.3ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (3.8ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (2.5ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (3.2ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.1ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (1.6ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (1.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (0.7ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bG9jYWxob3N0
', NULL, '2013-03-21 07:55:36.391746', NULL, NULL, NULL, '2013-03-21 07:55:36.391871', '2013-03-21 07:55:36.391871', NULL) RETURNING "id"
  [1m[36mSQL (29.1ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (1.8ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (1.0ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mPerson Load (1.3ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
Rendered layouts/_kissmetrics.haml (3.2ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.7ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.5ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (11.9ms)
Rendered communities/default/logo/logo.haml (2.4ms)
Rendered layouts/_no_javascript.haml (15.9ms)
Rendered layouts/_facebook_sdk.haml (2.4ms)
  [1m[36mSQL (1.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.7ms)[0m  [1mSELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) AND participations.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')[0m
Rendered layouts/_logged_in_messages_icon.haml (15.7ms)
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')[0m
Rendered layouts/_logged_in_notifications_icon.haml (10.7ms)
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY') AND (acceptance is null)[0m
Rendered layouts/_logged_in_swap_offers_icon.haml (10.9ms)
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"authentications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mAuthentication Load (0.9ms)[0m  [1mSELECT "authentications".* FROM "authentications" WHERE "authentications"."user_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
Rendered layouts/_logged_in.haml (55.3ms)
Rendered layouts/_notifications.haml (9.0ms)
  [1m[35mLocation Load (0.5ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1
Rendered layouts/_display_popup.haml (9.8ms)
Rendered layouts/application.haml (162.0ms)
Rendered settings/avatar.haml within layouts/settings (182.8ms)
Completed 200 OK in 1155ms (Views: 174.0ms | ActiveRecord: 310.7ms | Sphinx: 0.0ms)


Started GET "/en/homepage" for 127.0.0.1 at 2013-03-21 13:26:11 +0530
  Processing by HomepageController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mPK and serial sequence (7.9ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (5.1ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (2.7ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mSQL (1.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (8.0ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (6.2ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (2.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (4.8ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.2ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (2.7ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (2.4ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (3.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.1ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (0.4ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bG9jYWxob3N0
', NULL, '2013-03-21 07:56:12.521228', NULL, NULL, NULL, '2013-03-21 07:56:12.521348', '2013-03-21 07:56:12.521348', NULL) RETURNING "id"[0m
  [1m[35mSQL (19.9ms)[0m  COMMIT
  [1m[36mSQL (0.7ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.0ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mSQL (0.9ms)[0m  [1mSELECT 1 FROM "people" INNER JOIN "community_memberships" ON "people".id = "community_memberships".person_id WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (("community_memberships".community_id = 1)) LIMIT 1[0m
  [1m[35mSQL (1.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.7ms)[0m  [1mSELECT "communities".* FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY'))[0m
~~~~~~~~~~~~~~~not request.xhr~~~~~~~~~
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"news_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.9ms)[0m  [1mSELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 1)[0m
  [1m[35mCommunity Load (1.3ms)[0m  SELECT "communities".* FROM "communities"
  [1m[36mSQL (0.8ms)[0m  [1mSELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 1) LIMIT 2[0m
  [1m[35mSQL (18.9ms)[0m  SELECT COUNT(*) FROM "listings" WHERE "listings"."listing_type" = 'offer' AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')
 ) AND (open = '1' AND (valid_until IS NULL OR valid_until > '2013-03-21 07:56:12'))
  [1m[36mListing Load (1.4ms)[0m  [1mSELECT "listings".* FROM "listings" WHERE "listings"."listing_type" = 'offer' AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '1')
 ) AND (open = '1' AND (valid_until IS NULL OR valid_until > '2013-03-21 07:56:12')) ORDER BY listings.created_at DESC LIMIT 3 OFFSET 0[0m
  [1m[35mListingImage Load (1.3ms)[0m  SELECT "listing_images".* FROM "listing_images" WHERE ("listing_images".listing_id IN (5,4,3))
  [1m[36mSQL (1.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listing_images"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (0.8ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mSQL (1.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"diet_listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 5)
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"comments"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 5)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  SELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 4)
  [1m[36mSQL (0.7ms)[0m  [1mSELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 4)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 3)[0m
  [1m[35mSQL (0.7ms)[0m  SELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 3)
Rendered homepage/_recent_listing.haml (74.3ms)
Rendered common/_staples.haml (5.3ms)
  [1m[36mCommunityMembership Load (1.1ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
Rendered homepage/_user_communities.haml (6.4ms)
Rendered common/_staples.haml (3.1ms)
  [1m[35mLocation Load (1.0ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1
Rendered common/_staples.haml (5.1ms)
Rendered homepage/_profile_info_empty_notification.haml (5.7ms)
Rendered common/_staples.haml (3.3ms)
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"event_feed_events"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.0ms)[0m  SELECT COUNT(*) FROM "event_feed_events" WHERE ("event_feed_events".community_id = 1)
Rendered common/_staples.haml (4.1ms)
  [1m[36mEventFeedEvent Load (1.7ms)[0m  [1mSELECT "event_feed_events".* FROM "event_feed_events" WHERE ("event_feed_events".community_id = 1) ORDER BY id DESC LIMIT 5[0m
  [1m[35mPerson Load (1.7ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'bpSZp8Kxar4Oag3a6HdQnY' LIMIT 1
  [1m[36mCommunity Load (0.9ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
Rendered event_feed_events/_join.haml (16.3ms)
  [1m[35mPerson Load (1.9ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'c7iNZKKvar4Oae3a6HdQnY' LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
Rendered event_feed_events/_join.haml (8.3ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
Rendered event_feed_events/_login.haml (11.3ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
Rendered event_feed_events/_login.haml (4.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
Rendered event_feed_events/_login.haml (4.1ms)
Rendered homepage/_event_feed_event.haml (68.3ms)
Rendered homepage/_event_feed.haml (77.4ms)
Rendered common/_staples.haml (2.3ms)
Rendered common/_staples.haml (2.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 1) LIMIT 2[0m
Rendered homepage/_news_items.haml (5.4ms)
Rendered common/_staples.haml (2.2ms)
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"polls"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPoll Load (1.0ms)[0m  [1mSELECT "polls".* FROM "polls" WHERE "polls"."active" = 't' AND ("polls".community_id = 1) LIMIT 1[0m
Rendered layouts/_kissmetrics.haml (3.3ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (3.7ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (3.0ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (11.9ms)
Rendered communities/default/logo/logo.haml (3.3ms)
Rendered layouts/_no_javascript.haml (19.6ms)
Rendered layouts/_facebook_sdk.haml (7.5ms)
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.8ms)[0m  SELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) AND participations.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_messages_icon.haml (16.8ms)
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.0ms)[0m  SELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_notifications_icon.haml (14.2ms)
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.1ms)[0m  SELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY') AND (acceptance is null)
Rendered layouts/_logged_in_swap_offers_icon.haml (16.1ms)
  [1m[36mSQL (2.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"authentications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mAuthentication Load (1.3ms)[0m  SELECT "authentications".* FROM "authentications" WHERE "authentications"."user_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
Rendered layouts/_logged_in.haml (73.4ms)
Rendered layouts/_notifications.haml (7.0ms)
Rendered layouts/_display_popup.haml (12.7ms)
Rendered homepage/index.haml within layouts/application (669.4ms)
Completed 200 OK in 1744ms (Views: 626.3ms | ActiveRecord: 158.8ms | Sphinx: 0.0ms)


Started GET "/listings/5-image-test?locale=en" for 127.0.0.1 at 2013-03-21 13:26:19 +0530
  Processing by ListingsController#show as HTML
  Parameters: {"locale"=>"en", "id"=>"5-image-test"}
  [1m[36mPK and serial sequence (6.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.3ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (1.3ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (5.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (1.6ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (0.9ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (0.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (2.3ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (3.8ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (6.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.3ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (3.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.4ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.5ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (1.1ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  BEGIN
  [1m[36mSQL (23.3ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bG9jYWxob3N0
', NULL, '2013-03-21 07:56:20.040183', NULL, NULL, NULL, '2013-03-21 07:56:20.040302', '2013-03-21 07:56:20.040302', NULL) RETURNING "id"[0m
  [1m[35mSQL (21.3ms)[0m  COMMIT
  [1m[36mSQL (1.4ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (0.9ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mListing Load (1.8ms)[0m  SELECT "listings".* FROM "listings" WHERE "listings"."id" = 5 LIMIT 1
  [1m[36mListing Count (1.5ms)[0m  [1m
 SELECT count(*) 
 FROM community_memberships, communities_listings 
 WHERE community_memberships.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' 
 AND community_memberships.community_id = communities_listings.community_id
 AND communities_listings.listing_id = '5'
 AND communities_listings.community_id = '1'
 [0m
  [1m[35mSQL (0.4ms)[0m  BEGIN
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"taggings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mActsAsTaggableOn::Tag Load (2.5ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags".id = "taggings".tag_id WHERE (("taggings".taggable_id = 5) AND ("taggings".taggable_type = 'Listing')) AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)
  [1m[36mAREL (1.3ms)[0m  [1mUPDATE "listings" SET "times_viewed" = 5, "updated_at" = '2013-03-21 07:56:20.148964' WHERE "listings"."id" = 5[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.3ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags".id = "taggings".tag_id WHERE (("taggings".taggable_id = 5) AND ("taggings".taggable_type = 'Listing')) AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)
  [1m[36mSQL (9.0ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (1.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listing_images"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "listing_images" WHERE ("listing_images".listing_id = 5)[0m
  [1m[35mListingImage Load (1.1ms)[0m  SELECT "listing_images".* FROM "listing_images" WHERE ("listing_images".listing_id = 5)
  [1m[36mPerson Load (1.5ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
Rendered listings/_edit_links.haml (6.0ms)
Rendered listings/_message_links.haml (5.6ms)
  [1m[35mSQL (0.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"diet_listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.4ms)[0m  [1mSELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 5)[0m
  [1m[35mSQL (1.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"testimonials"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.8ms)[0m  [1mSELECT COUNT(*) FROM "testimonials" WHERE ("testimonials".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')[0m
  [1m[35mSQL (1.5ms)[0m  SELECT 1 FROM "people" INNER JOIN "community_memberships" ON "people".id = "community_memberships".person_id WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (("community_memberships".community_id = 1)) LIMIT 1
  [1m[36mLocation Load (1.2ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".listing_id = 5 AND (location_type = 'origin_loc')) LIMIT 1[0m
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"locations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mLocation Load (3.1ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".community_id = 1) LIMIT 1[0m
Rendered listings/_googlemap.haml (136.8ms)
Rendered listings/_origin.haml (4.0ms)
  [1m[35mLocation Load (1.2ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".listing_id = 5) LIMIT 1
Rendered listings/_availability.haml (2.8ms)
  [1m[36mSwapItem Load (1.3ms)[0m  [1mSELECT "swap_items".* FROM "swap_items" WHERE ((receiver_listing_id = 5 or receiver_listing_id = 5) and acceptance is NULL) LIMIT 1[0m
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"comments"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 5)[0m
  [1m[35mComment Load (1.0ms)[0m  SELECT "comments".* FROM "comments" WHERE ("comments".listing_id = 5)
Rendered listings/_comment.haml (0.0ms)
Rendered listings/_follow_checkbox.haml (3.7ms)
Rendered listings/_comment_form.haml (19.6ms)
Rendered layouts/_kissmetrics.haml (3.6ms)
Rendered communities/default/logo/logo.haml (2.7ms)
Rendered layouts/_no_javascript.haml (18.0ms)
Rendered layouts/_facebook_sdk.haml (2.5ms)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.8ms)[0m  [1mSELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) AND participations.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')[0m
Rendered layouts/_logged_in_messages_icon.haml (17.6ms)
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')[0m
Rendered layouts/_logged_in_notifications_icon.haml (10.7ms)
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY') AND (acceptance is null)[0m
Rendered layouts/_logged_in_swap_offers_icon.haml (10.6ms)
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"authentications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mAuthentication Load (0.9ms)[0m  [1mSELECT "authentications".* FROM "authentications" WHERE "authentications"."user_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
Rendered layouts/_logged_in.haml (60.3ms)
Rendered layouts/_notifications.haml (6.1ms)
  [1m[35mLocation Load (1.3ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1
Rendered layouts/_display_popup.haml (13.0ms)
Rendered listings/show.haml within layouts/application (462.3ms)
Completed 200 OK in 1536ms (Views: 448.9ms | ActiveRecord: 165.6ms | Sphinx: 0.0ms)


Started GET "/listings/5-image-test/edit?locale=en" for 127.0.0.1 at 2013-03-21 13:26:27 +0530
  Processing by ListingsController#edit as HTML
  Parameters: {"locale"=>"en", "id"=>"5-image-test"}
  [1m[36mPK and serial sequence (7.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.2ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (2.2ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mSQL (2.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.6ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.0ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.1ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.3ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (6.1ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.5ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (3.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.8ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.5ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (1.2ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  BEGIN
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bG9jYWxob3N0
', NULL, '2013-03-21 07:56:28.752224', NULL, NULL, NULL, '2013-03-21 07:56:28.752338', '2013-03-21 07:56:28.752338', NULL) RETURNING "id"[0m
  [1m[35mSQL (32.3ms)[0m  COMMIT
  [1m[36mSQL (1.5ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (0.5ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mSQL (0.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mListing Load (0.6ms)[0m  SELECT "listings".* FROM "listings" WHERE "listings"."id" = 5 LIMIT 1
  [1m[36mPerson Load (0.7ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mLocation Load (1.0ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".listing_id = 5 AND (location_type = 'origin_loc')) LIMIT 1
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"locations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listing_images"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "listing_images" WHERE ("listing_images".listing_id = 5)[0m
Rendered listings/form/_javascripts.haml (3.6ms)
Rendered listings/form/_share_type.haml (5.9ms)
Rendered listings/form/_title_step.haml (5.0ms)
Rendered listings/form/_description.haml (3.7ms)
Rendered listings/form/_receipe.haml (3.4ms)
Rendered listings/form/_portions.haml (3.5ms)
  [1m[35mActsAsTaggableOn::Tag Load (1.6ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags".id = "taggings".tag_id WHERE (("taggings".taggable_id = 5) AND ("taggings".taggable_type = 'Listing')) AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)
Rendered listings/form/_tag_list.haml (10.7ms)
  [1m[36mDiet Load (23.4ms)[0m  [1mSELECT "diets".* FROM "diets" INNER JOIN "diet_listings" ON "diets".id = "diet_listings".diet_id WHERE (("diet_listings".listing_id = 5))[0m
Rendered listings/form/_restriction_list.html.haml (32.0ms)
Rendered listings/form/_valid_until_radio_buttons.haml (8.6ms)
Rendered listings/form/_valid_until.haml (18.2ms)
Rendered listings/form/_origin.haml (5.5ms)
  [1m[35mLocation Load (1.2ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".community_id = 1) LIMIT 1
Rendered listings/form/_googlemap.haml (8.9ms)
  [1m[36mListingImage Load (1.3ms)[0m  [1mSELECT "listing_images".* FROM "listing_images" WHERE ("listing_images".listing_id = 5)[0m
Rendered listings/form/_images.haml (26.8ms)
Rendered listings/form/_visibility.haml (3.9ms)
Rendered listings/form/_additional_details_step.html.haml (5.8ms)
Rendered listings/form/_send_button.haml (2.4ms)
Rendered listings/help_texts/_help_share_type.en.haml (2.4ms)
Rendered listings/_help_texts.haml (8.2ms)
Rendered listings/help_texts/_help_tags.en.haml (2.6ms)
Rendered listings/_help_texts.haml (8.1ms)
Rendered listings/help_texts/_help_valid_until.en.haml (2.6ms)
Rendered listings/_help_texts.haml (8.3ms)
Rendered layouts/_kissmetrics.haml (3.5ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.9ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.2ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (10.8ms)
Rendered communities/default/logo/logo.haml (2.4ms)
Rendered layouts/_no_javascript.haml (15.8ms)
Rendered layouts/_facebook_sdk.haml (3.4ms)
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.7ms)[0m  SELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) AND participations.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_messages_icon.haml (17.0ms)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_notifications_icon.haml (13.1ms)
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.8ms)[0m  SELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY') AND (acceptance is null)
Rendered layouts/_logged_in_swap_offers_icon.haml (15.1ms)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"authentications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mAuthentication Load (0.9ms)[0m  SELECT "authentications".* FROM "authentications" WHERE "authentications"."user_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
Rendered layouts/_logged_in.haml (67.3ms)
Rendered layouts/_notifications.haml (7.5ms)
  [1m[36mLocation Load (1.2ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
Rendered layouts/_display_popup.haml (13.0ms)
Rendered listings/edit.haml within layouts/application (545.8ms)
Completed 200 OK in 1633ms (Views: 519.5ms | ActiveRecord: 160.1ms | Sphinx: 0.0ms)


Started DELETE "/en/listings/5-image-test/images/1" for 127.0.0.1 at 2013-03-21 13:26:36 +0530
  Processing by ListingImagesController#destroy as JS
  Parameters: {"locale"=>"en", "listing_id"=>"5-image-test", "id"=>"1"}
  [1m[35mPK and serial sequence (7.1ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.5ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (2.1ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (1.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (7.5ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.2ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.5ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.6ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (1.8ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (5.8ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.0ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (1.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.4ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (1.4ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (1.0ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bG9jYWxob3N0
', NULL, '2013-03-21 07:56:37.243805', NULL, NULL, NULL, '2013-03-21 07:56:37.243921', '2013-03-21 07:56:37.243921', NULL) RETURNING "id"
  [1m[36mSQL (29.9ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (1.5ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (1.0ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listing_images"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mListingImage Load (13.0ms)[0m  [1mSELECT "listing_images".* FROM "listing_images" WHERE "listing_images"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  BEGIN
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listing_images"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
[paperclip] Deleting attachments.
  [1m[35mAREL (1.5ms)[0m  DELETE FROM "listing_images" WHERE "listing_images"."id" = 1
  [1m[36mSQL (32.3ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (0.6ms)[0m  BEGIN
[paperclip] Deleting attachments.
  [1m[36mSQL (0.7ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mListing Load (1.5ms)[0m  [1mSELECT "listings".* FROM "listings" WHERE "listings"."id" = 5 LIMIT 1[0m
Rendered listing_images/destroy.js.erb (0.9ms)
Completed 200 OK in 13781ms (Views: 16.3ms | ActiveRecord: 156.1ms | Sphinx: 0.0ms)


Started POST "/en/people/dPgoR6J6qr4Oaj3a6HdQnY/update_avatar" for 127.0.0.1 at 2013-03-21 13:27:18 +0530
  Processing by PeopleController#update_avatar as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"WJyxSApP1ZoDya7qcieJqUg5S0Zc4q5IQ7Pj2USt5FE=", "person"=>{"image"=>#<ActionDispatch::Http::UploadedFile:0x101878dc @original_filename="_DSC0248.JPG", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"person[image]\"; filename=\"_DSC0248.JPG\"\r\nContent-Type: image/jpeg\r\n", @tempfile=#<File:/tmp/RackMultipart20130321-2910-gz9nm8>>}, "commit"=>"Save picture", "locale"=>"en", "id"=>"dPgoR6J6qr4Oaj3a6HdQnY"}
  [1m[35mPK and serial sequence (6.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.0ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (0.7ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (1.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (5.0ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (2.2ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (1.9ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.0ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (6.1ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.2ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.3ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (1.4ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (1.0ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bG9jYWxob3N0
', NULL, '2013-03-21 07:57:20.191597', NULL, NULL, NULL, '2013-03-21 07:57:20.191710', '2013-03-21 07:57:20.191710', NULL) RETURNING "id"
  [1m[36mSQL (36.3ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (1.0ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (1.0ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mPerson Load (1.4ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mLocation Load (1.1ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  BEGIN
  [1m[36mSQL (1.0ms)[0m  [1mSELECT 1 FROM "people" WHERE ("people"."username" = 'saraf') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1[0m
  [1m[35mSQL (1.1ms)[0m  SELECT 1 FROM "people" WHERE ("people"."email" = 'chaitanya@stridepath.com') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1
  [1m[36mAREL (1.3ms)[0m  [1mUPDATE "people" SET "preferences" = '---
email_about_new_messages: true
email_about_new_comments_to_own_listing: true
email_when_conversation_accepted: true
email_when_conversation_rejected: true
email_about_new_badges: true
email_about_new_received_testimonials: true
email_about_accept_reminders: true
email_about_testimonial_reminders: true
email_about_weekly_events: true
' WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY'[0m
[paperclip] Saving attachments.
  [1m[35mSQL (7.4ms)[0m  COMMIT
  [1m[36mSQL (0.6ms)[0m  [1mBEGIN[0m
[paperclip] identify -format %wx%h '/tmp/stream20130321-2910-g55uld.JPG[0]' 2>/dev/null
[paperclip] convert '/tmp/stream20130321-2910-g55uld.JPG[0]' -resize "200x350>" '/tmp/stream20130321-2910-g55uld20130321-2910-9n97kg' 2>/dev/null
[paperclip] identify -format %wx%h '/tmp/stream20130321-2910-g55uld.JPG[0]' 2>/dev/null
[paperclip] convert '/tmp/stream20130321-2910-g55uld.JPG[0]' -resize "x50" -crop "50x50+12+0" +repage '/tmp/stream20130321-2910-g55uld20130321-2910-qandvv' 2>/dev/null
[paperclip] identify -format %wx%h '/tmp/stream20130321-2910-g55uld.JPG[0]' 2>/dev/null
[paperclip] convert '/tmp/stream20130321-2910-g55uld.JPG[0]' -resize "200x350>" '/tmp/stream20130321-2910-g55uld20130321-2910-1pm1ej4' 2>/dev/null
  [1m[35mSQL (0.6ms)[0m  SELECT 1 FROM "people" WHERE ("people"."username" = 'saraf') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mSELECT 1 FROM "people" WHERE ("people"."email" = 'chaitanya@stridepath.com') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1[0m
  [1m[35mAREL (1.5ms)[0m  UPDATE "people" SET "image_file_name" = '_DSC0248.JPG', "image_file_size" = 98048, "image_updated_at" = '2013-03-21 07:57:26.475774', "updated_at" = '2013-03-21 07:57:31.037710', "preferences" = '---
email_about_new_messages: true
email_about_new_comments_to_own_listing: true
email_when_conversation_accepted: true
email_when_conversation_rejected: true
email_about_new_badges: true
email_about_new_received_testimonials: true
email_about_accept_reminders: true
email_about_testimonial_reminders: true
email_about_weekly_events: true
' WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY'
[paperclip] Saving attachments.
  [1m[36mSQL (30.4ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:3000/en/people/dPgoR6J6qr4Oaj3a6HdQnY/settings/avatar
Completed 302 Found in 32555ms


Started POST "/listings/5-image-test?locale=en" for 127.0.0.1 at 2013-03-21 13:27:51 +0530
  Processing by ListingsController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"WJyxSApP1ZoDya7qcieJqUg5S0Zc4q5IQ7Pj2USt5FE=", "listing"=>{"share_type"=>"trade", "listing_type"=>"offer", "category"=>"item", "title"=>"image test", "description"=>"detailed description", "link_to_information"=>"", "number_of_portions"=>"number of portions", "tag_list"=>"", "diet_tag_names"=>"", "origin"=>"Abhay Khadilkar Road, Shukrawar Peth, Pune, Maharashtra 411002, India", "origin_loc_attributes"=>{"address"=>"Abhay Khadilkar Road, Shukrawar Peth, Pune, Maharashtra 411002, India", "google_address"=>"Abhay Khadilkar Road, Shukrawar Peth, Pune, Maharashtra 411002, India", "latitude"=>"18.5124816", "longitude"=>"73.8545025", "location_type"=>"origin_loc", "id"=>"6"}, "listing_images_attributes"=>{"0"=>{"image"=>#<ActionDispatch::Http::UploadedFile:0x124a6e30 @original_filename="_DSC0244.JPG", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"listing[listing_images_attributes][0][image]\"; filename=\"_DSC0244.JPG\"\r\nContent-Type: image/jpeg\r\n", @tempfile=#<File:/tmp/RackMultipart20130321-2910-d47xsp>>}}, "visibility"=>"everybody", "current_community_id"=>"1", "story_behind"=>"estoruy", "ingredient_list"=>"ingredient", "trade_conditions"=>"trade request"}, "valid_until_select"=>"for_now", "commit"=>"Save", "locale"=>"en", "id"=>"5-image-test"}
  [1m[35mPK and serial sequence (6.4ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.5ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (3.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (2.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (3.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.5ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.1ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.0ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (7.1ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.1ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (7.6ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (6.8ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (3.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.7ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (1.6ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.6ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (1.2ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.2ms)[0m  INSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bG9jYWxob3N0
', NULL, '2013-03-21 07:57:52.924325', NULL, NULL, NULL, '2013-03-21 07:57:52.924507', '2013-03-21 07:57:52.924507', NULL) RETURNING "id"
  [1m[36mSQL (34.3ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (1.6ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (1.0ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mListing Load (2.0ms)[0m  [1mSELECT "listings".* FROM "listings" WHERE "listings"."id" = 5 LIMIT 1[0m
  [1m[35mPerson Load (1.5ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mBEGIN[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.6ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags".id = "taggings".tag_id WHERE (("taggings".taggable_id = 5) AND ("taggings".taggable_type = 'Listing')) AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags".id = "taggings".tag_id WHERE (("taggings".taggable_id = 5) AND ("taggings".taggable_type = 'Listing')) AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  [1m[35mSQL (0.6ms)[0m  COMMIT
  [1m[36mSQL (0.6ms)[0m  [1mBEGIN[0m
  [1m[35mLocation Load (1.7ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".listing_id = 5 AND (location_type = 'origin_loc')) LIMIT 1
  [1m[36mSQL (2.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"locations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listing_images"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[paperclip] identify -format %wx%h '/tmp/stream20130321-2910-ov0701.JPG[0]' 2>/dev/null
[paperclip] convert '/tmp/stream20130321-2910-ov0701.JPG[0]' -resize "300x640>" '/tmp/stream20130321-2910-ov070120130321-2910-1yd41t8' 2>/dev/null
[paperclip] identify -format %wx%h '/tmp/stream20130321-2910-ov0701.JPG[0]' 2>/dev/null
[paperclip] convert '/tmp/stream20130321-2910-ov0701.JPG[0]' -resize "x85" -crop "85x85+21+0" +repage '/tmp/stream20130321-2910-ov070120130321-2910-gcgbz5' 2>/dev/null
[paperclip] identify -format %wx%h '/tmp/stream20130321-2910-ov0701.JPG[0]' 2>/dev/null
[paperclip] convert '/tmp/stream20130321-2910-ov0701.JPG[0]' -resize "300x640>" '/tmp/stream20130321-2910-ov070120130321-2910-1ymhdcq' 2>/dev/null
  [1m[36mSQL (2.5ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (1.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities_listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (23.6ms)[0m  [1mSELECT * FROM "communities" INNER JOIN "communities_listings" ON "communities".id = "communities_listings".community_id WHERE ("communities_listings".listing_id = 5 )[0m
  [1m[35mSQL (1.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities_listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mAREL (0.9ms)[0m  [1mDELETE FROM "communities_listings" WHERE "communities_listings"."listing_id" = 5 AND "communities_listings"."community_id" IN (1)[0m
  [1m[35mCommunity Load (1.4ms)[0m  SELECT "communities".* FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY'))
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities_listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.6ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.1ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "communities_listings" ("community_id", "listing_id") VALUES (1, 5)
  [1m[36mPK and serial sequence (5.9ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.2ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mAREL (1.3ms)[0m  [1mUPDATE "listings" SET "delta" = 't', "updated_at" = '2013-03-21 07:57:57.388398' WHERE "listings"."id" = 5[0m
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listing_images"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (7.0ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_images"'::regclass
[0m
  [1m[35mSQL (43.2ms)[0m  INSERT INTO "listing_images" ("listing_id", "created_at", "updated_at", "image_file_name", "image_content_type", "image_file_size", "image_updated_at") VALUES (5, '2013-03-21 07:57:57.393531', '2013-03-21 07:57:57.393531', '_DSC0244.JPG', 'image/jpeg', 139840, '2013-03-21 07:57:53.238326') RETURNING "id"
[paperclip] Saving attachments.
  [1m[36mActsAsTaggableOn::Tag Load (1.6ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags".id = "taggings".tag_id WHERE (("taggings".taggable_id = 5) AND ("taggings".taggable_type = 'Listing')) AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  [1m[35mDiet Load (0.8ms)[0m  SELECT "diets".* FROM "diets" INNER JOIN "diet_listings" ON "diets".id = "diet_listings".diet_id WHERE (("diet_listings".listing_id = 5))
  [1m[36mSQL (22.3ms)[0m  [1mCOMMIT[0m
  [1m[35mLocation Load (1.8ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".listing_id = 5) LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  COMMIT
  [1m[36mSQL (0.7ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:ListingUpdatedJob
listing_id: 5
host: !binary |-
 bG9jYWxob3N0
', NULL, '2013-03-21 07:58:14.525463', NULL, NULL, NULL, '2013-03-21 07:58:14.525941', '2013-03-21 07:58:14.525941', NULL) RETURNING "id"
  [1m[36mSQL (20.9ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:3000/listings/5-image-test?locale=en
Completed 302 Found in 22551ms


Started GET "/en/people/dPgoR6J6qr4Oaj3a6HdQnY/settings/avatar" for 127.0.0.1 at 2013-03-21 13:28:14 +0530
  Processing by SettingsController#avatar as HTML
  Parameters: {"locale"=>"en", "person_id"=>"dPgoR6J6qr4Oaj3a6HdQnY"}
  [1m[35mPK and serial sequence (2.4ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.2ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (0.6ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (1.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (5.3ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (2.5ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.0ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (5.4ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (3.4ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (2.6ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (1.7ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.2ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (1.4ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (1.0ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bG9jYWxob3N0
', NULL, '2013-03-21 07:58:15.627887', NULL, NULL, NULL, '2013-03-21 07:58:15.628021', '2013-03-21 07:58:15.628021', NULL) RETURNING "id"
  [1m[36mSQL (30.6ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (1.4ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (1.0ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mPerson Load (1.3ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
Rendered layouts/_kissmetrics.haml (3.4ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (2.0ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.4ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (11.1ms)
Rendered communities/default/logo/logo.haml (3.6ms)
Rendered layouts/_no_javascript.haml (18.3ms)
Rendered layouts/_facebook_sdk.haml (2.5ms)
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.9ms)[0m  [1mSELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) AND participations.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')[0m
Rendered layouts/_logged_in_messages_icon.haml (16.7ms)
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.3ms)[0m  [1mSELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')[0m
Rendered layouts/_logged_in_notifications_icon.haml (16.4ms)
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.1ms)[0m  [1mSELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY') AND (acceptance is null)[0m
Rendered layouts/_logged_in_swap_offers_icon.haml (14.9ms)
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"authentications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mAuthentication Load (1.0ms)[0m  [1mSELECT "authentications".* FROM "authentications" WHERE "authentications"."user_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
Rendered layouts/_logged_in.haml (70.1ms)
Rendered layouts/_notifications.haml (7.2ms)
  [1m[35mLocation Load (1.1ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1
Rendered layouts/_display_popup.haml (13.1ms)
Rendered layouts/application.haml (307.4ms)
Rendered settings/avatar.haml within layouts/settings (326.5ms)
Completed 200 OK in 1183ms (Views: 312.9ms | ActiveRecord: 250.7ms | Sphinx: 0.0ms)


Started GET "/listings/5-image-test?locale=en" for 127.0.0.1 at 2013-03-21 13:28:16 +0530
  Processing by ListingsController#show as HTML
  Parameters: {"locale"=>"en", "id"=>"5-image-test"}
  [1m[36mPK and serial sequence (7.0ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (6.3ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (0.9ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mSQL (1.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (4.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (2.5ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (0.9ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (1.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.3ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.5ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (7.6ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.7ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.6ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.8ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.6ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (0.6ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  BEGIN
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bG9jYWxob3N0
', NULL, '2013-03-21 07:58:17.157632', NULL, NULL, NULL, '2013-03-21 07:58:17.157748', '2013-03-21 07:58:17.157748', NULL) RETURNING "id"[0m
  [1m[35mSQL (32.0ms)[0m  COMMIT
  [1m[36mSQL (0.7ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (0.5ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mSQL (1.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mListing Load (1.1ms)[0m  SELECT "listings".* FROM "listings" WHERE "listings"."id" = 5 LIMIT 1
  [1m[36mListing Count (0.7ms)[0m  [1m
 SELECT count(*) 
 FROM community_memberships, communities_listings 
 WHERE community_memberships.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' 
 AND community_memberships.community_id = communities_listings.community_id
 AND communities_listings.listing_id = '5'
 AND communities_listings.community_id = '1'
 [0m
  [1m[35mSQL (0.2ms)[0m  BEGIN
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags".id = "taggings".tag_id WHERE (("taggings".taggable_id = 5) AND ("taggings".taggable_type = 'Listing')) AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  [1m[35mAREL (0.6ms)[0m  UPDATE "listings" SET "times_viewed" = 6, "updated_at" = '2013-03-21 07:58:17.273983' WHERE "listings"."id" = 5
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags".id = "taggings".tag_id WHERE (("taggings".taggable_id = 5) AND ("taggings".taggable_type = 'Listing')) AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  [1m[35mSQL (4.0ms)[0m  COMMIT
  [1m[36mSQL (1.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listing_images"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.5ms)[0m  SELECT COUNT(*) FROM "listing_images" WHERE ("listing_images".listing_id = 5)
  [1m[36mListingImage Load (0.6ms)[0m  [1mSELECT "listing_images".* FROM "listing_images" WHERE ("listing_images".listing_id = 5)[0m
  [1m[35mPerson Load (0.7ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
Rendered listings/_edit_links.haml (3.8ms)
Rendered listings/_message_links.haml (4.8ms)
  [1m[36mSQL (1.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"diet_listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 5)
  [1m[36mSQL (1.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"testimonials"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.6ms)[0m  SELECT COUNT(*) FROM "testimonials" WHERE ("testimonials".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
  [1m[36mSQL (0.8ms)[0m  [1mSELECT 1 FROM "people" INNER JOIN "community_memberships" ON "people".id = "community_memberships".person_id WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (("community_memberships".community_id = 1)) LIMIT 1[0m
  [1m[35mLocation Load (0.8ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".listing_id = 5 AND (location_type = 'origin_loc')) LIMIT 1
  [1m[36mSQL (1.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"locations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mLocation Load (0.7ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".community_id = 1) LIMIT 1
Rendered listings/_googlemap.haml (6.6ms)
Rendered listings/_origin.haml (3.8ms)
  [1m[36mLocation Load (0.6ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".listing_id = 5) LIMIT 1[0m
Rendered listings/_availability.haml (2.8ms)
  [1m[35mSwapItem Load (0.6ms)[0m  SELECT "swap_items".* FROM "swap_items" WHERE ((receiver_listing_id = 5 or receiver_listing_id = 5) and acceptance is NULL) LIMIT 1
  [1m[36mSQL (1.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"comments"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.5ms)[0m  SELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 5)
  [1m[36mComment Load (0.5ms)[0m  [1mSELECT "comments".* FROM "comments" WHERE ("comments".listing_id = 5)[0m
Rendered listings/_comment.haml (0.0ms)
Rendered listings/_follow_checkbox.haml (3.6ms)
Rendered listings/_comment_form.haml (16.3ms)
Rendered layouts/_kissmetrics.haml (3.3ms)
Rendered communities/default/logo/logo.haml (2.8ms)
Rendered layouts/_no_javascript.haml (19.5ms)
Rendered layouts/_facebook_sdk.haml (2.7ms)
  [1m[35mSQL (1.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) AND participations.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_messages_icon.haml (14.1ms)
  [1m[36mSQL (1.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.5ms)[0m  SELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_notifications_icon.haml (13.6ms)
  [1m[36mSQL (1.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.5ms)[0m  SELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY') AND (acceptance is null)
Rendered layouts/_logged_in_swap_offers_icon.haml (12.9ms)
  [1m[36mSQL (1.6ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"authentications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mAuthentication Load (0.5ms)[0m  SELECT "authentications".* FROM "authentications" WHERE "authentications"."user_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
Rendered layouts/_logged_in.haml (60.6ms)
Rendered layouts/_notifications.haml (5.4ms)
  [1m[36mLocation Load (0.6ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
Rendered layouts/_display_popup.haml (10.1ms)
Rendered listings/show.haml within layouts/application (290.4ms)
Completed 200 OK in 1451ms (Views: 276.4ms | ActiveRecord: 420.2ms | Sphinx: 0.0ms)


Started POST "/en/people/dPgoR6J6qr4Oaj3a6HdQnY/update_avatar" for 127.0.0.1 at 2013-03-21 13:39:01 +0530
  Processing by PeopleController#update_avatar as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"WJyxSApP1ZoDya7qcieJqUg5S0Zc4q5IQ7Pj2USt5FE=", "person"=>{"image"=>#<ActionDispatch::Http::UploadedFile:0xfa475f4 @original_filename="_DSC0609.JPG", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"person[image]\"; filename=\"_DSC0609.JPG\"\r\nContent-Type: image/jpeg\r\n", @tempfile=#<File:/tmp/RackMultipart20130321-2910-jiiv6s>>}, "commit"=>"Save picture", "locale"=>"en", "id"=>"dPgoR6J6qr4Oaj3a6HdQnY"}
  [1m[35mPK and serial sequence (2.4ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (1.5ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (1.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (0.6ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (2.3ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (1.5ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (0.8ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.3ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (1.6ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (2.4ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (1.6ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (0.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.3ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (1.4ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (1.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (1.0ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.5ms)[0m  INSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bG9jYWxob3N0
', NULL, '2013-03-21 08:09:03.173076', NULL, NULL, NULL, '2013-03-21 08:09:03.173184', '2013-03-21 08:09:03.173184', NULL) RETURNING "id"
  [1m[36mSQL (17.4ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (1.6ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (1.0ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mPerson Load (1.3ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mLocation Load (1.3ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  BEGIN
  [1m[36mSQL (1.1ms)[0m  [1mSELECT 1 FROM "people" WHERE ("people"."username" = 'saraf') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  SELECT 1 FROM "people" WHERE ("people"."email" = 'chaitanya@stridepath.com') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mROLLBACK[0m
  [1m[35mSQL (0.5ms)[0m  BEGIN
[paperclip] identify -format %wx%h '/tmp/stream20130321-2910-fz2rik.JPG[0]' 2>/dev/null
[paperclip] convert '/tmp/stream20130321-2910-fz2rik.JPG[0]' -resize "200x350>" '/tmp/stream20130321-2910-fz2rik20130321-2910-1tnuxpf' 2>/dev/null
[paperclip] identify -format %wx%h '/tmp/stream20130321-2910-fz2rik.JPG[0]' 2>/dev/null
[paperclip] convert '/tmp/stream20130321-2910-fz2rik.JPG[0]' -resize "x50" -crop "50x50+12+0" +repage '/tmp/stream20130321-2910-fz2rik20130321-2910-13s4gu2' 2>/dev/null
[paperclip] identify -format %wx%h '/tmp/stream20130321-2910-fz2rik.JPG[0]' 2>/dev/null
[paperclip] convert '/tmp/stream20130321-2910-fz2rik.JPG[0]' -resize "200x350>" '/tmp/stream20130321-2910-fz2rik20130321-2910-14r3hbg' 2>/dev/null
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT 1 FROM "people" WHERE ("people"."username" = 'saraf') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT 1 FROM "people" WHERE ("people"."email" = 'chaitanya@stridepath.com') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mROLLBACK[0m
Redirected to http://localhost:3000/en/people/dPgoR6J6qr4Oaj3a6HdQnY/settings/avatar
Completed 302 Found in 11667ms


Started GET "/en/people/dPgoR6J6qr4Oaj3a6HdQnY/settings/avatar" for 127.0.0.1 at 2013-03-21 13:39:14 +0530
  Processing by SettingsController#avatar as HTML
  Parameters: {"locale"=>"en", "person_id"=>"dPgoR6J6qr4Oaj3a6HdQnY"}
  [1m[35mPK and serial sequence (6.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.1ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.3ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (5.6ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (2.5ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.0ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.1ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (2.2ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (4.1ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (2.5ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.0ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (1.5ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (1.0ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bG9jYWxob3N0
', NULL, '2013-03-21 08:09:15.306444', NULL, NULL, NULL, '2013-03-21 08:09:15.306583', '2013-03-21 08:09:15.306583', NULL) RETURNING "id"
  [1m[36mSQL (28.6ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (1.1ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (1.0ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mPerson Load (0.7ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
Rendered layouts/_kissmetrics.haml (3.2ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (2.6ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.6ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (11.7ms)
Rendered communities/default/logo/logo.haml (2.5ms)
Rendered layouts/_no_javascript.haml (17.2ms)
Rendered layouts/_facebook_sdk.haml (2.8ms)
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.5ms)[0m  [1mSELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) AND participations.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')[0m
Rendered layouts/_logged_in_messages_icon.haml (16.8ms)
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')[0m
Rendered layouts/_logged_in_notifications_icon.haml (11.6ms)
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY') AND (acceptance is null)[0m
Rendered layouts/_logged_in_swap_offers_icon.haml (11.9ms)
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"authentications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mAuthentication Load (1.0ms)[0m  [1mSELECT "authentications".* FROM "authentications" WHERE "authentications"."user_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
Rendered layouts/_logged_in.haml (58.8ms)
Rendered layouts/_notifications.haml (5.8ms)
  [1m[35mLocation Load (1.0ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1
Rendered layouts/_display_popup.haml (11.0ms)
Rendered layouts/application.haml (175.5ms)
Rendered settings/avatar.haml within layouts/settings (196.8ms)
Completed 200 OK in 1232ms (Views: 184.7ms | ActiveRecord: 172.8ms | Sphinx: 0.0ms)


Started POST "/en/people/dPgoR6J6qr4Oaj3a6HdQnY/update_avatar" for 127.0.0.1 at 2013-03-21 13:40:32 +0530
  Processing by PeopleController#update_avatar as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"WJyxSApP1ZoDya7qcieJqUg5S0Zc4q5IQ7Pj2USt5FE=", "person"=>{"image"=>#<ActionDispatch::Http::UploadedFile:0x1413874c @original_filename="_DSC0576.JPG", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"person[image]\"; filename=\"_DSC0576.JPG\"\r\nContent-Type: image/jpeg\r\n", @tempfile=#<File:/tmp/RackMultipart20130321-2910-1n6i45m>>}, "commit"=>"Save picture", "locale"=>"en", "id"=>"dPgoR6J6qr4Oaj3a6HdQnY"}
  [1m[36mPK and serial sequence (6.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.0ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (1.4ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.1ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.0ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (1.6ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (5.9ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.1ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (4.3ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.1ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.3ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.4ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (1.0ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bG9jYWxob3N0
', NULL, '2013-03-21 08:10:33.657335', NULL, NULL, NULL, '2013-03-21 08:10:33.657448', '2013-03-21 08:10:33.657448', NULL) RETURNING "id"[0m
  [1m[35mSQL (29.9ms)[0m  COMMIT
  [1m[36mSQL (1.5ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.0ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mPerson Load (0.8ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mLocation Load (0.8ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  SELECT 1 FROM "people" WHERE ("people"."username" = 'saraf') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mSELECT 1 FROM "people" WHERE ("people"."email" = 'chaitanya@stridepath.com') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  ROLLBACK
  [1m[36mSQL (0.4ms)[0m  [1mBEGIN[0m
[paperclip] identify -format %wx%h '/tmp/stream20130321-2910-1bgu45r.JPG[0]' 2>/dev/null
[paperclip] convert '/tmp/stream20130321-2910-1bgu45r.JPG[0]' -resize "200x350>" '/tmp/stream20130321-2910-1bgu45r20130321-2910-h9ss2a' 2>/dev/null
[paperclip] identify -format %wx%h '/tmp/stream20130321-2910-1bgu45r.JPG[0]' 2>/dev/null
[paperclip] convert '/tmp/stream20130321-2910-1bgu45r.JPG[0]' -resize "x50" -crop "50x50+12+0" +repage '/tmp/stream20130321-2910-1bgu45r20130321-2910-9dct9z' 2>/dev/null
[paperclip] identify -format %wx%h '/tmp/stream20130321-2910-1bgu45r.JPG[0]' 2>/dev/null
[paperclip] convert '/tmp/stream20130321-2910-1bgu45r.JPG[0]' -resize "200x350>" '/tmp/stream20130321-2910-1bgu45r20130321-2910-1s279ul' 2>/dev/null
  [1m[35mCACHE (0.0ms)[0m  SELECT 1 FROM "people" WHERE ("people"."username" = 'saraf') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT 1 FROM "people" WHERE ("people"."email" = 'chaitanya@stridepath.com') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  ROLLBACK
Redirected to http://localhost:3000/en/people/dPgoR6J6qr4Oaj3a6HdQnY/settings/avatar
Completed 302 Found in 10863ms


Started GET "/en/people/dPgoR6J6qr4Oaj3a6HdQnY/settings/avatar" for 127.0.0.1 at 2013-03-21 13:40:43 +0530
  Processing by SettingsController#avatar as HTML
  Parameters: {"locale"=>"en", "person_id"=>"dPgoR6J6qr4Oaj3a6HdQnY"}
  [1m[36mPK and serial sequence (3.4ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (2.5ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (1.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (1.7ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.0ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (3.8ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (1.9ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (3.9ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (2.4ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (3.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (3.8ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (1.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (3.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.4ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (2.3ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mSQL (2.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (0.8ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  BEGIN
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bG9jYWxob3N0
', NULL, '2013-03-21 08:10:44.748794', NULL, NULL, NULL, '2013-03-21 08:10:44.748921', '2013-03-21 08:10:44.748921', NULL) RETURNING "id"[0m
  [1m[35mSQL (27.2ms)[0m  COMMIT
  [1m[36mSQL (1.5ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.0ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mPerson Load (0.9ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
Rendered layouts/_kissmetrics.haml (3.5ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.9ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.2ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (11.0ms)
Rendered communities/default/logo/logo.haml (2.4ms)
Rendered layouts/_no_javascript.haml (16.6ms)
Rendered layouts/_facebook_sdk.haml (3.0ms)
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.0ms)[0m  SELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) AND participations.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_messages_icon.haml (20.0ms)
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.7ms)[0m  SELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_notifications_icon.haml (14.4ms)
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.7ms)[0m  SELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY') AND (acceptance is null)
Rendered layouts/_logged_in_swap_offers_icon.haml (12.1ms)
  [1m[36mSQL (1.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"authentications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mAuthentication Load (1.0ms)[0m  SELECT "authentications".* FROM "authentications" WHERE "authentications"."user_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
Rendered layouts/_logged_in.haml (70.6ms)
Rendered layouts/_notifications.haml (5.5ms)
  [1m[36mLocation Load (1.0ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
Rendered layouts/_display_popup.haml (10.3ms)
Rendered layouts/application.haml (181.1ms)
Rendered settings/avatar.haml within layouts/settings (201.9ms)
Completed 200 OK in 1243ms (Views: 192.7ms | ActiveRecord: 200.6ms | Sphinx: 0.0ms)


Started POST "/en/people/dPgoR6J6qr4Oaj3a6HdQnY/update_avatar" for 127.0.0.1 at 2013-03-21 13:50:17 +0530
  Processing by PeopleController#update_avatar as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"WJyxSApP1ZoDya7qcieJqUg5S0Zc4q5IQ7Pj2USt5FE=", "person"=>{"image"=>#<ActionDispatch::Http::UploadedFile:0x143d4528 @original_filename="_DSC0567.JPG", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"person[image]\"; filename=\"_DSC0567.JPG\"\r\nContent-Type: image/jpeg\r\n", @tempfile=#<File:/tmp/RackMultipart20130321-2910-h29x4z>>}, "commit"=>"Save picture", "locale"=>"en", "id"=>"dPgoR6J6qr4Oaj3a6HdQnY"}
  [1m[35mPK and serial sequence (7.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.2ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.5ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (4.3ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (2.4ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (1.9ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (3.9ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (6.1ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.1ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.6ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.2ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (1.5ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (0.5ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.2ms)[0m  INSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bG9jYWxob3N0
', NULL, '2013-03-21 08:20:18.636601', NULL, NULL, NULL, '2013-03-21 08:20:18.636717', '2013-03-21 08:20:18.636717', NULL) RETURNING "id"
  [1m[36mSQL (29.5ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (1.4ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (1.0ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mPerson Load (1.5ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mLocation Load (1.0ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  BEGIN
  [1m[36mSQL (1.0ms)[0m  [1mSELECT 1 FROM "people" WHERE ("people"."username" = 'saraf') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  SELECT 1 FROM "people" WHERE ("people"."email" = 'chaitanya@stridepath.com') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mROLLBACK[0m
  [1m[35mSQL (0.5ms)[0m  BEGIN
[paperclip] identify -format %wx%h '/tmp/stream20130321-2910-1qi32g7.JPG[0]' 2>/dev/null
[paperclip] convert '/tmp/stream20130321-2910-1qi32g7.JPG[0]' -resize "200x350>" '/tmp/stream20130321-2910-1qi32g720130321-2910-wn1z5r' 2>/dev/null
[paperclip] identify -format %wx%h '/tmp/stream20130321-2910-1qi32g7.JPG[0]' 2>/dev/null
[paperclip] convert '/tmp/stream20130321-2910-1qi32g7.JPG[0]' -resize "x50" -crop "50x50+12+0" +repage '/tmp/stream20130321-2910-1qi32g720130321-2910-kneqxb' 2>/dev/null
[paperclip] identify -format %wx%h '/tmp/stream20130321-2910-1qi32g7.JPG[0]' 2>/dev/null
[paperclip] convert '/tmp/stream20130321-2910-1qi32g7.JPG[0]' -resize "200x350>" '/tmp/stream20130321-2910-1qi32g720130321-2910-1oldz1v' 2>/dev/null
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT 1 FROM "people" WHERE ("people"."username" = 'saraf') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT 1 FROM "people" WHERE ("people"."email" = 'chaitanya@stridepath.com') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mROLLBACK[0m
Redirected to http://localhost:3000/en/people/dPgoR6J6qr4Oaj3a6HdQnY/settings/avatar
Completed 302 Found in 15599ms


Started GET "/en/people/dPgoR6J6qr4Oaj3a6HdQnY/settings/avatar" for 127.0.0.1 at 2013-03-21 13:50:33 +0530
  Processing by SettingsController#avatar as HTML
  Parameters: {"locale"=>"en", "person_id"=>"dPgoR6J6qr4Oaj3a6HdQnY"}
  [1m[35mPK and serial sequence (6.4ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.0ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.4ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (3.6ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (1.9ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.0ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (6.8ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.2ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (0.7ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (1.4ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (0.9ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bG9jYWxob3N0
', NULL, '2013-03-21 08:20:34.631382', NULL, NULL, NULL, '2013-03-21 08:20:34.631503', '2013-03-21 08:20:34.631503', NULL) RETURNING "id"
  [1m[36mSQL (34.4ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (1.6ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (1.0ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mPerson Load (1.4ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
Rendered layouts/_kissmetrics.haml (3.4ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.7ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.0ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (10.3ms)
Rendered communities/default/logo/logo.haml (2.4ms)
Rendered layouts/_no_javascript.haml (16.1ms)
Rendered layouts/_facebook_sdk.haml (2.8ms)
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.8ms)[0m  [1mSELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) AND participations.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')[0m
Rendered layouts/_logged_in_messages_icon.haml (16.1ms)
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.0ms)[0m  [1mSELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')[0m
Rendered layouts/_logged_in_notifications_icon.haml (13.7ms)
  [1m[35mSQL (1.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.8ms)[0m  [1mSELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY') AND (acceptance is null)[0m
Rendered layouts/_logged_in_swap_offers_icon.haml (17.0ms)
  [1m[35mSQL (1.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"authentications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mAuthentication Load (0.7ms)[0m  [1mSELECT "authentications".* FROM "authentications" WHERE "authentications"."user_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
Rendered layouts/_logged_in.haml (70.7ms)
Rendered layouts/_notifications.haml (6.8ms)
  [1m[35mLocation Load (0.6ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1
Rendered layouts/_display_popup.haml (10.4ms)
Rendered layouts/application.haml (177.7ms)
Rendered settings/avatar.haml within layouts/settings (196.4ms)
Completed 200 OK in 1113ms (Views: 185.7ms | ActiveRecord: 220.8ms | Sphinx: 0.0ms)


Started POST "/en/people/dPgoR6J6qr4Oaj3a6HdQnY/update_avatar" for 127.0.0.1 at 2013-03-21 13:52:11 +0530
  Processing by PeopleController#update_avatar as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"WJyxSApP1ZoDya7qcieJqUg5S0Zc4q5IQ7Pj2USt5FE=", "person"=>{"image"=>#<ActionDispatch::Http::UploadedFile:0x149198bc @original_filename="_DSC0572.JPG", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"person[image]\"; filename=\"_DSC0572.JPG\"\r\nContent-Type: image/jpeg\r\n", @tempfile=#<File:/tmp/RackMultipart20130321-2910-15w043u>>}, "commit"=>"Save picture", "locale"=>"en", "id"=>"dPgoR6J6qr4Oaj3a6HdQnY"}
  [1m[36mPK and serial sequence (9.7ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.7ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.6ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (1.2ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mSQL (2.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (7.0ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (5.0ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (1.7ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (1.6ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (5.4ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (1.8ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (2.4ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (2.1ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (4.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (0.6ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.4ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (0.7ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bG9jYWxob3N0
', NULL, '2013-03-21 08:22:13.034734', NULL, NULL, NULL, '2013-03-21 08:22:13.034847', '2013-03-21 08:22:13.034847', NULL) RETURNING "id"[0m
  [1m[35mSQL (28.1ms)[0m  COMMIT
  [1m[36mSQL (1.6ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.0ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mPerson Load (1.2ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mLocation Load (1.1ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  SELECT 1 FROM "people" WHERE ("people"."username" = 'saraf') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mSELECT 1 FROM "people" WHERE ("people"."email" = 'chaitanya@stridepath.com') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1[0m
  [1m[35mAREL (1.4ms)[0m  UPDATE "people" SET "preferences" = '---
email_about_new_messages: true
email_about_new_comments_to_own_listing: true
email_when_conversation_accepted: true
email_when_conversation_rejected: true
email_about_new_badges: true
email_about_new_received_testimonials: true
email_about_accept_reminders: true
email_about_testimonial_reminders: true
email_about_weekly_events: true
' WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY'
[paperclip] Saving attachments.
  [1m[36mSQL (12.1ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (0.5ms)[0m  BEGIN
[paperclip] identify -format %wx%h '/tmp/stream20130321-2910-1mxnsr3.JPG[0]' 2>/dev/null
[paperclip] convert '/tmp/stream20130321-2910-1mxnsr3.JPG[0]' -resize "200x350>" '/tmp/stream20130321-2910-1mxnsr320130321-2910-1caxx5u' 2>/dev/null
[paperclip] identify -format %wx%h '/tmp/stream20130321-2910-1mxnsr3.JPG[0]' 2>/dev/null
[paperclip] convert '/tmp/stream20130321-2910-1mxnsr3.JPG[0]' -resize "x50" -crop "50x50+12+0" +repage '/tmp/stream20130321-2910-1mxnsr320130321-2910-1g7qmu4' 2>/dev/null
[paperclip] identify -format %wx%h '/tmp/stream20130321-2910-1mxnsr3.JPG[0]' 2>/dev/null
[paperclip] convert '/tmp/stream20130321-2910-1mxnsr3.JPG[0]' -resize "200x350>" '/tmp/stream20130321-2910-1mxnsr320130321-2910-1hidwq7' 2>/dev/null
  [1m[36mSQL (14.8ms)[0m  [1mSELECT 1 FROM "people" WHERE ("people"."username" = 'saraf') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  SELECT 1 FROM "people" WHERE ("people"."email" = 'chaitanya@stridepath.com') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1
  [1m[36mAREL (1.3ms)[0m  [1mUPDATE "people" SET "image_file_name" = '_DSC0572.JPG', "image_file_size" = 88977, "image_updated_at" = '2013-03-21 08:22:18.832942', "updated_at" = '2013-03-21 08:22:22.663458', "preferences" = '---
email_about_new_messages: true
email_about_new_comments_to_own_listing: true
email_when_conversation_accepted: true
email_when_conversation_rejected: true
email_about_new_badges: true
email_about_new_received_testimonials: true
email_about_accept_reminders: true
email_about_testimonial_reminders: true
email_about_weekly_events: true
' WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY'[0m
[paperclip] Saving attachments.
  [1m[35mSQL (27.0ms)[0m  COMMIT
Redirected to http://localhost:3000/en/people/dPgoR6J6qr4Oaj3a6HdQnY/settings/avatar
Completed 302 Found in 28108ms


Started GET "/en/people/dPgoR6J6qr4Oaj3a6HdQnY/settings/avatar" for 127.0.0.1 at 2013-03-21 13:52:40 +0530
  Processing by SettingsController#avatar as HTML
  Parameters: {"locale"=>"en", "person_id"=>"dPgoR6J6qr4Oaj3a6HdQnY"}
  [1m[36mPK and serial sequence (6.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.1ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (1.4ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.1ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.0ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (1.9ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.1ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.0ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (6.3ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.2ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.3ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.4ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (1.0ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  BEGIN
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bG9jYWxob3N0
', NULL, '2013-03-21 08:22:41.369347', NULL, NULL, NULL, '2013-03-21 08:22:41.369511', '2013-03-21 08:22:41.369511', NULL) RETURNING "id"[0m
  [1m[35mSQL (36.0ms)[0m  COMMIT
  [1m[36mSQL (1.6ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.0ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mPerson Load (1.3ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
Rendered layouts/_kissmetrics.haml (4.2ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (2.0ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.2ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (10.7ms)
Rendered communities/default/logo/logo.haml (4.9ms)
Rendered layouts/_no_javascript.haml (25.4ms)
Rendered layouts/_facebook_sdk.haml (2.9ms)
  [1m[35mSQL (1.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.8ms)[0m  SELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) AND participations.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_messages_icon.haml (14.6ms)
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.7ms)[0m  SELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')
Rendered layouts/_logged_in_notifications_icon.haml (12.4ms)
  [1m[36mSQL (1.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.6ms)[0m  SELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY') AND (acceptance is null)
Rendered layouts/_logged_in_swap_offers_icon.haml (11.0ms)
  [1m[36mSQL (1.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"authentications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mAuthentication Load (0.8ms)[0m  SELECT "authentications".* FROM "authentications" WHERE "authentications"."user_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
Rendered layouts/_logged_in.haml (60.8ms)
Rendered layouts/_notifications.haml (5.5ms)
  [1m[36mLocation Load (1.1ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
Rendered layouts/_display_popup.haml (10.3ms)
Rendered layouts/application.haml (179.5ms)
Rendered settings/avatar.haml within layouts/settings (199.2ms)
Completed 200 OK in 1275ms (Views: 190.5ms | ActiveRecord: 274.6ms | Sphinx: 0.0ms)


Started POST "/en/people/dPgoR6J6qr4Oaj3a6HdQnY/update_avatar" for 127.0.0.1 at 2013-03-21 13:53:09 +0530
  Processing by PeopleController#update_avatar as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"WJyxSApP1ZoDya7qcieJqUg5S0Zc4q5IQ7Pj2USt5FE=", "person"=>{"image"=>#<ActionDispatch::Http::UploadedFile:0x14325fa0 @original_filename="_DSC0585.JPG", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"person[image]\"; filename=\"_DSC0585.JPG\"\r\nContent-Type: image/jpeg\r\n", @tempfile=#<File:/tmp/RackMultipart20130321-2910-1n3mm9v>>}, "commit"=>"Save picture", "locale"=>"en", "id"=>"dPgoR6J6qr4Oaj3a6HdQnY"}
  [1m[35mPK and serial sequence (6.9ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (5.7ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.6ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (8.0ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.7ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.0ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.5ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.6ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (7.0ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.7ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (1.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.3ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (1.5ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (0.9ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bG9jYWxob3N0
', NULL, '2013-03-21 08:23:10.968542', NULL, NULL, NULL, '2013-03-21 08:23:10.968664', '2013-03-21 08:23:10.968664', NULL) RETURNING "id"
  [1m[36mSQL (36.0ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (1.6ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (1.0ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mPerson Load (1.3ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
  [1m[36mLocation Load (1.1ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  BEGIN
  [1m[36mSQL (1.2ms)[0m  [1mSELECT 1 FROM "people" WHERE ("people"."username" = 'saraf') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1[0m
  [1m[35mSQL (1.0ms)[0m  SELECT 1 FROM "people" WHERE ("people"."email" = 'chaitanya@stridepath.com') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1
  [1m[36mAREL (1.3ms)[0m  [1mUPDATE "people" SET "preferences" = '---
email_about_new_messages: true
email_about_new_comments_to_own_listing: true
email_when_conversation_accepted: true
email_when_conversation_rejected: true
email_about_new_badges: true
email_about_new_received_testimonials: true
email_about_accept_reminders: true
email_about_testimonial_reminders: true
email_about_weekly_events: true
' WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY'[0m
[paperclip] Saving attachments.
  [1m[35mSQL (7.8ms)[0m  COMMIT
  [1m[36mSQL (0.6ms)[0m  [1mBEGIN[0m
[paperclip] identify -format %wx%h '/tmp/stream20130321-2910-16gfc4b.JPG[0]' 2>/dev/null
[paperclip] convert '/tmp/stream20130321-2910-16gfc4b.JPG[0]' -resize "200x350>" '/tmp/stream20130321-2910-16gfc4b20130321-2910-1rqzc4h' 2>/dev/null
[paperclip] identify -format %wx%h '/tmp/stream20130321-2910-16gfc4b.JPG[0]' 2>/dev/null
[paperclip] convert '/tmp/stream20130321-2910-16gfc4b.JPG[0]' -resize "x50" -crop "50x50+12+0" +repage '/tmp/stream20130321-2910-16gfc4b20130321-2910-1txc69w' 2>/dev/null
[paperclip] identify -format %wx%h '/tmp/stream20130321-2910-16gfc4b.JPG[0]' 2>/dev/null
[paperclip] convert '/tmp/stream20130321-2910-16gfc4b.JPG[0]' -resize "200x350>" '/tmp/stream20130321-2910-16gfc4b20130321-2910-whq9ts' 2>/dev/null
  [1m[35mSQL (1.1ms)[0m  SELECT 1 FROM "people" WHERE ("people"."username" = 'saraf') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1
  [1m[36mSQL (1.4ms)[0m  [1mSELECT 1 FROM "people" WHERE ("people"."email" = 'chaitanya@stridepath.com') AND ("people".id <> 'dPgoR6J6qr4Oaj3a6HdQnY') LIMIT 1[0m
  [1m[35mAREL (1.6ms)[0m  UPDATE "people" SET "image_file_name" = '_DSC0585.JPG', "image_file_size" = 92000, "image_updated_at" = '2013-03-21 08:23:16.923062', "updated_at" = '2013-03-21 08:23:20.862277', "preferences" = '---
email_about_new_messages: true
email_about_new_comments_to_own_listing: true
email_when_conversation_accepted: true
email_when_conversation_rejected: true
email_about_new_badges: true
email_about_new_received_testimonials: true
email_about_accept_reminders: true
email_about_testimonial_reminders: true
email_about_weekly_events: true
' WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY'
[paperclip] Saving attachments.
  [1m[36mSQL (19.0ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:3000/en/people/dPgoR6J6qr4Oaj3a6HdQnY/settings/avatar
Completed 302 Found in 32538ms


Started GET "/en/people/dPgoR6J6qr4Oaj3a6HdQnY/settings/avatar" for 127.0.0.1 at 2013-03-21 13:53:42 +0530
  Processing by SettingsController#avatar as HTML
  Parameters: {"locale"=>"en", "person_id"=>"dPgoR6J6qr4Oaj3a6HdQnY"}
  [1m[35mPK and serial sequence (8.9ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.2ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (5.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (2.5ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (1.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.1ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.0ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (0.9ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (0.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (5.9ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (3.2ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (6.3ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (3.4ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.3ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 1 LIMIT 1
  [1m[36mSQL (1.4ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (1.0ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.2ms)[0m  INSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 1
host: !binary |-
 bG9jYWxob3N0
', NULL, '2013-03-21 08:23:43.847520', NULL, NULL, NULL, '2013-03-21 08:23:43.847639', '2013-03-21 08:23:43.847639', NULL) RETURNING "id"
  [1m[36mSQL (22.2ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (1.4ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 1 AND (("community_memberships".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (0.5ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mPerson Load (0.7ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1
Rendered layouts/_kissmetrics.haml (3.8ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (2.1ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.4ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (11.5ms)
Rendered communities/default/logo/logo.haml (2.8ms)
Rendered layouts/_no_javascript.haml (17.7ms)
Rendered layouts/_facebook_sdk.haml (3.7ms)
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.8ms)[0m  [1mSELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'dPgoR6J6qr4Oaj3a6HdQnY')) AND participations.person_id = 'dPgoR6J6qr4Oaj3a6HdQnY')[0m
Rendered layouts/_logged_in_messages_icon.haml (17.9ms)
  [1m[35mSQL (1.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.6ms)[0m  [1mSELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY')[0m
Rendered layouts/_logged_in_notifications_icon.haml (11.6ms)
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.8ms)[0m  [1mSELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'dPgoR6J6qr4Oaj3a6HdQnY') AND (acceptance is null)[0m
Rendered layouts/_logged_in_swap_offers_icon.haml (11.2ms)
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"authentications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mAuthentication Load (0.9ms)[0m  [1mSELECT "authentications".* FROM "authentications" WHERE "authentications"."user_id" = 'dPgoR6J6qr4Oaj3a6HdQnY' LIMIT 1[0m
Rendered layouts/_logged_in.haml (60.8ms)
Rendered layouts/_notifications.haml (6.5ms)
  [1m[35mLocation Load (1.1ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'dPgoR6J6qr4Oaj3a6HdQnY' AND (location_type = 'person')) LIMIT 1
Rendered layouts/_display_popup.haml (12.8ms)
Rendered layouts/application.haml (174.6ms)
Rendered settings/avatar.haml within layouts/settings (194.4ms)
Completed 200 OK in 1247ms (Views: 183.2ms | ActiveRecord: 258.0ms | Sphinx: 0.0ms)
