DEPRECATION WARNING: config.action_view.debug_rjs will be removed in 3.1, from 3.1 onwards you will need to install prototype-rails to continue to use RJS templates . (called from <top (required)> at /home/chaitanya/workArea/ST-to-RGF/config/environment.rb:10)
Starting the New Relic Agent.
NewRelic Agent Developer Mode enabled.
To view performance information, go to http://localhost:3000/newrelic
Installed New Relic Browser Monitoring middleware
  [1m[36mSQL (0.3ms)[0m  [1mSHOW client_min_messages[0m
  [1m[35mSQL (0.5ms)[0m  SET client_min_messages TO 'panic'
  [1m[36mSQL (0.5ms)[0m  [1mSET standard_conforming_strings = on[0m
  [1m[35mSQL (0.4ms)[0m  SET client_min_messages TO 'notice'
  [1m[36mSQL (0.9ms)[0m  [1mSET time zone 'UTC'[0m
  [1m[35mSQL (0.4ms)[0m  SHOW TIME ZONE
  [1m[36mPK and serial sequence (11.5ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.8ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
DEPRECATION WARNING: RAILS_ROOT is deprecated. Please use ::Rails.root.to_s. (called from <class:Person> at /home/chaitanya/workArea/ST-to-RGF/app/models/person.rb:134)


Started GET "/en/homepage" for 127.0.0.1 at 2012-11-30 12:52:41 +0530
  [1m[36mSQL (0.3ms)[0m  [1mSHOW client_min_messages[0m
  [1m[35mSQL (0.4ms)[0m  SET client_min_messages TO 'panic'
  [1m[36mSQL (0.4ms)[0m  [1mSET standard_conforming_strings = on[0m
  [1m[35mSQL (0.4ms)[0m  SET client_min_messages TO 'notice'
  [1m[36mSQL (0.6ms)[0m  [1mSET time zone 'UTC'[0m
  [1m[35mSQL (0.5ms)[0m  SHOW TIME ZONE
  Processing by HomepageController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mSQL (6.6ms)[0m  [1m SELECT tablename
 FROM pg_tables
 WHERE schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (6.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (4.3ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (8.1ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.2ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (3.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (2.6ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 3 LIMIT 1[0m
  [1m[35mSQL (1.9ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 3 AND (("community_memberships".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mSQL (3.6ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (1.3ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 3 LIMIT 1[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"delayed_jobs"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.5ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"delayed_jobs"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.0ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"delayed_jobs"'::regclass
[0m
  [1m[35mSQL (2.0ms)[0m  INSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 35
host: !binary |-
 bHZoLm1l
', NULL, '2012-11-30 07:22:42.429516', NULL, NULL, NULL, '2012-11-30 07:22:42.429648', '2012-11-30 07:22:42.429648', NULL) RETURNING "id"
  [1m[36mSQL (7.1ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (1.7ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 3 AND (("community_memberships".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (1.6ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
~~~~~~~~~~~~~~~~~~3
  [1m[35mSQL (1.8ms)[0m  SELECT 1 FROM "people" INNER JOIN "community_memberships" ON "people".id = "community_memberships".person_id WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND (("community_memberships".community_id = 3)) LIMIT 1
  [1m[36mSQL (2.3ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.4ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (5.4ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (2.4ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (1.6ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.6ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (2.0ms)[0m  [1mSELECT "communities".* FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE (("community_memberships".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY'))[0m
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"news_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.4ms)[0m  [1mSELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 3)[0m
  [1m[35mCommunity Load (2.1ms)[0m  SELECT "communities".* FROM "communities"
  [1m[36mSQL (1.1ms)[0m  [1mSELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 3) LIMIT 2[0m
  [1m[35mSQL (4.0ms)[0m  SELECT COUNT(*) FROM "listings" WHERE "listings"."listing_type" = 'offer' AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1','3','2')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '3')
 ) AND (open = '1' AND (valid_until IS NULL OR valid_until > '2012-11-30 07:22:42'))
  [1m[36mListing Load (5.5ms)[0m  [1mSELECT "listings".* FROM "listings" WHERE "listings"."listing_type" = 'offer' AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1','3','2')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '3')
 ) AND (open = '1' AND (valid_until IS NULL OR valid_until > '2012-11-30 07:22:42')) ORDER BY listings.created_at DESC LIMIT 15 OFFSET 0[0m
  [1m[35mListingImage Load (1.9ms)[0m  SELECT "listing_images".* FROM "listing_images" WHERE ("listing_images".listing_id IN (12,8,7,6,2,1))
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listing_images"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (2.2ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"diet_listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.6ms)[0m  SELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 12)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"comments"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.5ms)[0m  SELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 12)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (1.0ms)[0m  SELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 8)
  [1m[36mSQL (1.0ms)[0m  [1mSELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 8)[0m
  [1m[35mPerson Load (1.6ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cPLJhUmKGr4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 7)[0m
  [1m[35mDietListing Load (1.3ms)[0m  SELECT "diet_listings".* FROM "diet_listings" WHERE ("diet_listings".listing_id = 7)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"diets"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mDiet Load (1.5ms)[0m  SELECT "diets".* FROM "diets" WHERE "diets"."id" = 2 LIMIT 1
  [1m[36mSQL (1.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"diets"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 7)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cPLJhUmKGr4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (1.0ms)[0m  SELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 6)
  [1m[36mDietListing Load (0.8ms)[0m  [1mSELECT "diet_listings".* FROM "diet_listings" WHERE ("diet_listings".listing_id = 6)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "diets".* FROM "diets" WHERE "diets"."id" = 2 LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 6)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (1.0ms)[0m  [1mSELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 2)[0m
  [1m[35mDietListing Load (0.9ms)[0m  SELECT "diet_listings".* FROM "diet_listings" WHERE ("diet_listings".listing_id = 2)
  [1m[36mDiet Load (0.9ms)[0m  [1mSELECT "diets".* FROM "diets" WHERE "diets"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  SELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 2)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 2)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cPLJhUmKGr4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (1.0ms)[0m  [1mSELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 1)[0m
  [1m[35mDietListing Load (0.9ms)[0m  SELECT "diet_listings".* FROM "diet_listings" WHERE ("diet_listings".listing_id = 1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "diets".* FROM "diets" WHERE "diets"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 1)
Rendered homepage/_recent_listing.haml (11316.2ms)
  [1m[36mSQL (2.6ms)[0m  [1mSELECT COUNT(*) FROM "listings" WHERE "listings"."listing_type" = 'request' AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1','3','2')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '3')
 ) AND (open = '1' AND (valid_until IS NULL OR valid_until > '2012-11-30 07:22:42'))[0m
Rendered common/_staples.haml (4.0ms)
  [1m[35mCommunityMembership Load (1.2ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 5 LIMIT 1
  [1m[36mCommunityMembership Load (1.0ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 10 LIMIT 1[0m
  [1m[35mCommunityMembership Load (0.6ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mCommunityMembership Load (0.6ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 4 LIMIT 1[0m
  [1m[35mCommunityMembership Load (0.5ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 3 LIMIT 1
  [1m[36mCommunityMembership Load (0.5ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 6 LIMIT 1[0m
  [1m[35mCommunityMembership Load (0.5ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 7 LIMIT 1
  [1m[36mCommunityMembership Load (0.4ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 8 LIMIT 1[0m
  [1m[35mCommunityMembership Load (0.5ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 9 LIMIT 1
  [1m[36mCommunityMembership Load (1.0ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 2 LIMIT 1[0m
Rendered homepage/_user_communities.haml (78.0ms)
Rendered common/_staples.haml (2.5ms)
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"event_feed_events"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.3ms)[0m  [1mSELECT COUNT(*) FROM "event_feed_events" WHERE ("event_feed_events".community_id = 3)[0m
Rendered common/_staples.haml (2.7ms)
  [1m[35mEventFeedEvent Load (2.3ms)[0m  SELECT "event_feed_events".* FROM "event_feed_events" WHERE ("event_feed_events".community_id = 3) ORDER BY id DESC LIMIT 5
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1[0m
Rendered event_feed_events/_login.haml (5.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1
Rendered event_feed_events/_login.haml (3.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1[0m
Rendered event_feed_events/_login.haml (3.6ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1
Rendered event_feed_events/_login.haml (3.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cPLJhUmKGr4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mCommunity Load (1.4ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 3 LIMIT 1
Rendered event_feed_events/_join.haml (7.3ms)
Rendered homepage/_event_feed_event.haml (45.9ms)
Rendered homepage/_event_feed.haml (54.4ms)
Rendered common/_staples.haml (2.1ms)
Rendered common/_staples.haml (2.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 3) LIMIT 2[0m
Rendered homepage/_news_items.haml (5.2ms)
Rendered common/_staples.haml (2.1ms)
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"polls"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPoll Load (1.4ms)[0m  [1mSELECT "polls".* FROM "polls" WHERE "polls"."active" = 't' AND ("polls".community_id = 3) LIMIT 1[0m
Rendered layouts/_kissmetrics.haml (3.2ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.7ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.1ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (81.5ms)
Rendered communities/default/logo/logo.haml (2.2ms)
Rendered layouts/_no_javascript.haml (16.6ms)
Rendered layouts/_facebook_sdk.haml (2.4ms)
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.8ms)[0m  SELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) AND participations.person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) AND participations.person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')[0m
Rendered layouts/_logged_in_messages_icon.haml (18.9ms)
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.4ms)[0m  [1mSELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')
Rendered layouts/_logged_in_notifications_icon.haml (14.4ms)
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.3ms)[0m  SELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'cUuWlUmJ0r4Oaa3a6HdQnY') AND (acceptance is null)
Rendered layouts/_logged_in_swap_offers_icon.haml (14.8ms)
  [1m[36mCommunityMembership Load (1.1ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."community_id" = 3 AND ("community_memberships".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY') LIMIT 1[0m
Rendered layouts/_logged_in.haml (64.8ms)
Rendered layouts/_notifications.haml (7.2ms)
Rendered layouts/_display_popup.haml (7.5ms)
Rendered homepage/index.haml within layouts/application (29194.4ms)
Completed 200 OK in 30338ms (Views: 29118.6ms | ActiveRecord: 190.5ms | Sphinx: 0.0ms)


Started GET "/en/listings/new/offer" for 127.0.0.1 at 2012-11-30 12:53:25 +0530
  Processing by ListingsController#new as HTML
  Parameters: {"locale"=>"en", "type"=>"offer"}
  [1m[35mPK and serial sequence (6.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.1ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (3.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (3.1ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (3.4ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (2.7ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 3 LIMIT 1[0m
  [1m[35mSQL (1.5ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 3 AND (("community_memberships".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (1.2ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 3 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  BEGIN
  [1m[36mSQL (1.5ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 35
host: !binary |-
 bHZoLm1l
', NULL, '2012-11-30 07:23:26.104180', NULL, NULL, NULL, '2012-11-30 07:23:26.104348', '2012-11-30 07:23:26.104348', NULL) RETURNING "id"[0m
  [1m[35mSQL (19.5ms)[0m  COMMIT
  [1m[36mSQL (0.8ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 3 AND (("community_memberships".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.6ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mSQL (3.5ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (1.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (5.9ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (2.1ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (3.5ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (1.9ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mLocation Load (1.2ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND (location_type = 'person')) LIMIT 1
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"locations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listing_images"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
Rendered listings/form/_javascripts.haml (3.5ms)
Rendered listings/form/_share_type.haml (2.8ms)
Rendered listings/form/_title.haml (2.9ms)
Rendered listings/form/_description.haml (2.6ms)
Rendered listings/form/_receipe.haml (2.5ms)
Rendered listings/form/_portions.haml (2.5ms)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"taggings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mActsAsTaggableOn::Tag Load (2.1ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags".id = "taggings".tag_id WHERE (("taggings".taggable_id = NULL) AND ("taggings".taggable_type = 'Listing')) AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)
Rendered listings/form/_tag_list.haml (12.9ms)
Rendered listings/form/_restriction_list.html.haml (6.0ms)
Rendered listings/form/_valid_until_radio_buttons.haml (7.4ms)
Rendered listings/form/_valid_until.haml (12.6ms)
Rendered listings/form/_origin.haml (4.7ms)
  [1m[36mLocation Load (1.4ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".community_id = 3) LIMIT 1[0m
Rendered listings/form/_googlemap.haml (67.4ms)
Rendered listings/form/_images.haml (11.3ms)
Rendered listings/form/_visibility.haml (3.1ms)
Rendered listings/form/_additional_details.html.haml (4.1ms)
Rendered listings/form/_send_button.haml (3.2ms)
Rendered listings/help_texts/_help_share_type.en.haml (2.2ms)
Rendered listings/help_texts/_help_tags.en.haml (2.1ms)
Rendered listings/help_texts/_help_valid_until.en.haml (2.3ms)
Rendered listings/_help_texts.haml (15.9ms)
Rendered listings/form/_form_content.haml (188.3ms)
Rendered layouts/_kissmetrics.haml (3.5ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (2.2ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.0ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (9.8ms)
Rendered communities/default/logo/logo.haml (2.1ms)
Rendered layouts/_no_javascript.haml (15.5ms)
Rendered layouts/_facebook_sdk.haml (2.8ms)
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (3.4ms)[0m  SELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) AND participations.person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) AND participations.person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')[0m
Rendered layouts/_logged_in_messages_icon.haml (81.8ms)
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.4ms)[0m  [1mSELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')
Rendered layouts/_logged_in_notifications_icon.haml (14.8ms)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.3ms)[0m  SELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'cUuWlUmJ0r4Oaa3a6HdQnY') AND (acceptance is null)
Rendered layouts/_logged_in_swap_offers_icon.haml (11.9ms)
  [1m[36mCommunityMembership Load (1.1ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."community_id" = 3 AND ("community_memberships".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY') LIMIT 1[0m
Rendered layouts/_logged_in.haml (124.2ms)
Rendered layouts/_notifications.haml (4.7ms)
Rendered layouts/_display_popup.haml (6.8ms)
Rendered listings/new.haml within layouts/application (410.8ms)
Completed 200 OK in 1617ms (Views: 396.5ms | ActiveRecord: 114.1ms | Sphinx: 0.0ms)


Started POST "/listings?locale=en" for 127.0.0.1 at 2012-11-30 12:54:00 +0530
  Processing by ListingsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"MKAABxWLUV89OhLUD0CwyvZWwipQBDOde4POrC9BRFg=", "listing"=>{"share_type"=>"trade", "listing_type"=>"offer", "category"=>"item", "title"=>"photo test", "description"=>"description", "link_to_information"=>"", "number_of_portions"=>"3", "tag_list"=>"", "diet_tag_names"=>"", "origin"=>"", "origin_loc_attributes"=>{"address"=>"", "google_address"=>"", "latitude"=>"", "longitude"=>"", "location_type"=>"origin_loc"}, "listing_images_attributes"=>{"0"=>{"image"=>#<ActionDispatch::Http::UploadedFile:0xc4d0ad8 @original_filename="300-the-movie-wallpaper.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"listing[listing_images_attributes][0][image]\"; filename=\"300-the-movie-wallpaper.jpg\"\r\nContent-Type: image/jpeg\r\n", @tempfile=#<File:/tmp/RackMultipart20121130-3638-ja9212>>}}, "visibility"=>"everybody", "current_community_id"=>"3", "story_behind"=>"", "ingredient_list"=>"", "trade_conditions"=>""}, "valid_until_select"=>"for_now", "commit"=>"Save", "locale"=>"en"}
  [1m[35mPK and serial sequence (6.6ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (3.5ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (3.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.5ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (3.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.4ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (3.5ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.3ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 3 LIMIT 1[0m
  [1m[35mSQL (1.5ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 3 AND (("community_memberships".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (1.0ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 3 LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  BEGIN
  [1m[36mSQL (1.5ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 35
host: !binary |-
 bHZoLm1l
', NULL, '2012-11-30 07:24:01.307798', NULL, NULL, NULL, '2012-11-30 07:24:01.308043', '2012-11-30 07:24:01.308043', NULL) RETURNING "id"[0m
  [1m[35mSQL (24.3ms)[0m  COMMIT
  [1m[36mSQL (1.9ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 3 AND (("community_memberships".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.0ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mSQL (1.9ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (3.4ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (6.0ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (3.4ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.2ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags".id = "taggings".tag_id WHERE (("taggings".taggable_id = NULL) AND ("taggings".taggable_type = 'Listing')) AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)
  [1m[36mSQL (1.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listing_images"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
[paperclip] identify -format %wx%h '/tmp/stream20121130-3638-1wfp69w.jpg[0]' 2>/dev/null
[paperclip] convert '/tmp/stream20121130-3638-1wfp69w.jpg[0]' -resize "200x350>" '/tmp/stream20121130-3638-1wfp69w20121130-3638-1pxi9mi' 2>/dev/null
[paperclip] identify -format %wx%h '/tmp/stream20121130-3638-1wfp69w.jpg[0]' 2>/dev/null
[paperclip] convert '/tmp/stream20121130-3638-1wfp69w.jpg[0]' -resize "x85" -crop "85x85+14+0" +repage '/tmp/stream20121130-3638-1wfp69w20121130-3638-o6kcyz' 2>/dev/null
[paperclip] identify -format %wx%h '/tmp/stream20121130-3638-1wfp69w.jpg[0]' 2>/dev/null
[paperclip] convert '/tmp/stream20121130-3638-1wfp69w.jpg[0]' -resize "640x640>" '/tmp/stream20121130-3638-1wfp69w20121130-3638-18zcuxp' 2>/dev/null
  [1m[35mSQL (0.7ms)[0m  BEGIN
  [1m[36mSQL (2.5ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (1.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities_listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.3ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mCommunity Load (1.8ms)[0m  SELECT "communities".* FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE (("community_memberships".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY'))
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.1ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listings"'::regclass
  [1m[36mSQL (61.3ms)[0m  [1mINSERT INTO "listings" ("author_id", "category", "title", "times_viewed", "language", "created_at", "updated_at", "last_modified", "visibility", "listing_type", "description", "origin", "destination", "valid_from", "valid_until", "delta", "open", "share_type", "link_to_information", "number_of_portions", "story_behind", "ingredient_list", "trade_conditions") VALUES ('cUuWlUmJ0r4Oaa3a6HdQnY', 'item', 'photo test', 0, NULL, '2012-11-30 07:24:02.739501', '2012-11-30 07:24:02.739501', NULL, 'everybody', 'offer', 'description', '', NULL, NULL, NULL, 't', 't', 'trade', '', '3', '', '', '') RETURNING "id"[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listing_images"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.1ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_images"'::regclass
[0m
  [1m[35mSQL (16.0ms)[0m  INSERT INTO "listing_images" ("listing_id", "created_at", "updated_at", "image_file_name", "image_content_type", "image_file_size", "image_updated_at") VALUES (13, '2012-11-30 07:24:02.813082', '2012-11-30 07:24:02.813082', '300-the-movie-wallpaper.jpg', 'image/jpeg', 69171, '2012-11-30 07:24:02.160375') RETURNING "id"
[paperclip] Saving attachments.
  [1m[36mSQL (0.8ms)[0m  [1mROLLBACK[0m
Completed 500 Internal Server Error in 64773ms

CloudFiles::Exception::InvalidResponse (Invalid response code 408):
  app/models/person.rb:357:in `create_listing'
  app/controllers/listings_controller.rb:179:in `create'

Rendered /home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/actionpack-3.0.17/lib/action_dispatch/middleware/templates/rescues/_trace.erb (5.3ms)
Rendered /home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/actionpack-3.0.17/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1591.7ms)
Rendered /home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/actionpack-3.0.17/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (1621.1ms)


Started GET "/en/homepage" for 127.0.0.1 at 2012-11-30 12:55:47 +0530
  Processing by HomepageController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[35mPK and serial sequence (7.6ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (3.1ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.4ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (8.6ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (3.6ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (3.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.6ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 3 LIMIT 1[0m
  [1m[35mSQL (1.9ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 3 AND (("community_memberships".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (1.0ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 3 LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  BEGIN
  [1m[36mSQL (1.2ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 35
host: !binary |-
 bHZoLm1l
', NULL, '2012-11-30 07:25:48.434880', NULL, NULL, NULL, '2012-11-30 07:25:48.435046', '2012-11-30 07:25:48.435046', NULL) RETURNING "id"[0m
  [1m[35mSQL (18.8ms)[0m  COMMIT
  [1m[36mSQL (1.5ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 3 AND (("community_memberships".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.0ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
~~~~~~~~~~~~~~~~~~3
  [1m[36mSQL (1.7ms)[0m  [1mSELECT 1 FROM "people" INNER JOIN "community_memberships" ON "people".id = "community_memberships".person_id WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND (("community_memberships".community_id = 3)) LIMIT 1[0m
  [1m[35mSQL (1.9ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (1.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.1ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (3.4ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (4.5ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (2.0ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.7ms)[0m  SELECT "communities".* FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE (("community_memberships".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY'))
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"news_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.2ms)[0m  SELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 3)
  [1m[36mCommunity Load (1.6ms)[0m  [1mSELECT "communities".* FROM "communities"[0m
  [1m[35mSQL (1.1ms)[0m  SELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 3) LIMIT 2
  [1m[36mSQL (3.0ms)[0m  [1mSELECT COUNT(*) FROM "listings" WHERE "listings"."listing_type" = 'offer' AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1','3','2')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '3')
 ) AND (open = '1' AND (valid_until IS NULL OR valid_until > '2012-11-30 07:25:48'))[0m
  [1m[35mListing Load (5.0ms)[0m  SELECT "listings".* FROM "listings" WHERE "listings"."listing_type" = 'offer' AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1','3','2')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '3')
 ) AND (open = '1' AND (valid_until IS NULL OR valid_until > '2012-11-30 07:25:48')) ORDER BY listings.created_at DESC LIMIT 15 OFFSET 0
  [1m[36mListingImage Load (1.6ms)[0m  [1mSELECT "listing_images".* FROM "listing_images" WHERE ("listing_images".listing_id IN (12,8,7,6,2,1))[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listing_images"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.7ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"diet_listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.3ms)[0m  [1mSELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 12)[0m
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"comments"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.4ms)[0m  [1mSELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 12)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 8)[0m
  [1m[35mSQL (0.8ms)[0m  SELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 8)
  [1m[36mPerson Load (1.4ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cPLJhUmKGr4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  SELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 7)
  [1m[36mDietListing Load (0.9ms)[0m  [1mSELECT "diet_listings".* FROM "diet_listings" WHERE ("diet_listings".listing_id = 7)[0m
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"diets"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mDiet Load (1.3ms)[0m  [1mSELECT "diets".* FROM "diets" WHERE "diets"."id" = 2 LIMIT 1[0m
  [1m[35mSQL (1.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"diets"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 7)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cPLJhUmKGr4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 6)[0m
  [1m[35mDietListing Load (0.6ms)[0m  SELECT "diet_listings".* FROM "diet_listings" WHERE ("diet_listings".listing_id = 6)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "diets".* FROM "diets" WHERE "diets"."id" = 2 LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  SELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 6)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  SELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 2)
  [1m[36mDietListing Load (0.3ms)[0m  [1mSELECT "diet_listings".* FROM "diet_listings" WHERE ("diet_listings".listing_id = 2)[0m
  [1m[35mDiet Load (0.4ms)[0m  SELECT "diets".* FROM "diets" WHERE "diets"."id" = 1 LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mSELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 2)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 2)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cPLJhUmKGr4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  SELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 1)
  [1m[36mDietListing Load (0.8ms)[0m  [1mSELECT "diet_listings".* FROM "diet_listings" WHERE ("diet_listings".listing_id = 1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "diets".* FROM "diets" WHERE "diets"."id" = 1 LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 1)[0m
Rendered homepage/_recent_listing.haml (200.5ms)
  [1m[35mSQL (2.2ms)[0m  SELECT COUNT(*) FROM "listings" WHERE "listings"."listing_type" = 'request' AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1','3','2')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '3')
 ) AND (open = '1' AND (valid_until IS NULL OR valid_until > '2012-11-30 07:25:48'))
Rendered common/_staples.haml (2.3ms)
  [1m[36mCommunityMembership Load (1.1ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 5 LIMIT 1[0m
  [1m[35mCommunityMembership Load (1.0ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 10 LIMIT 1
  [1m[36mCommunityMembership Load (1.0ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mCommunityMembership Load (0.5ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 4 LIMIT 1
  [1m[36mCommunityMembership Load (0.9ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 3 LIMIT 1[0m
  [1m[35mCommunityMembership Load (0.8ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 6 LIMIT 1
  [1m[36mCommunityMembership Load (0.8ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 7 LIMIT 1[0m
  [1m[35mCommunityMembership Load (0.9ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 8 LIMIT 1
  [1m[36mCommunityMembership Load (0.9ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 9 LIMIT 1[0m
  [1m[35mCommunityMembership Load (0.9ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 2 LIMIT 1
Rendered homepage/_user_communities.haml (28.6ms)
Rendered common/_staples.haml (3.0ms)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"event_feed_events"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.2ms)[0m  SELECT COUNT(*) FROM "event_feed_events" WHERE ("event_feed_events".community_id = 3)
Rendered common/_staples.haml (70.0ms)
  [1m[36mEventFeedEvent Load (2.2ms)[0m  [1mSELECT "event_feed_events".* FROM "event_feed_events" WHERE ("event_feed_events".community_id = 3) ORDER BY id DESC LIMIT 5[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1
Rendered event_feed_events/_login.haml (4.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1[0m
Rendered event_feed_events/_login.haml (3.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1
Rendered event_feed_events/_login.haml (4.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1[0m
Rendered event_feed_events/_login.haml (3.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cPLJhUmKGr4Oaa3a6HdQnY' LIMIT 1
  [1m[36mCommunity Load (1.7ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 3 LIMIT 1[0m
Rendered event_feed_events/_join.haml (7.8ms)
Rendered homepage/_event_feed_event.haml (44.4ms)
Rendered homepage/_event_feed.haml (51.5ms)
Rendered common/_staples.haml (2.2ms)
Rendered common/_staples.haml (2.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 3) LIMIT 2
Rendered homepage/_news_items.haml (5.2ms)
Rendered common/_staples.haml (2.3ms)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"polls"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPoll Load (1.4ms)[0m  SELECT "polls".* FROM "polls" WHERE "polls"."active" = 't' AND ("polls".community_id = 3) LIMIT 1
Rendered layouts/_kissmetrics.haml (3.1ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.7ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.0ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (10.0ms)
Rendered communities/default/logo/logo.haml (2.4ms)
Rendered layouts/_no_javascript.haml (16.5ms)
Rendered layouts/_facebook_sdk.haml (2.5ms)
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.8ms)[0m  [1mSELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) AND participations.person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) AND participations.person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')
Rendered layouts/_logged_in_messages_icon.haml (17.0ms)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')[0m
Rendered layouts/_logged_in_notifications_icon.haml (12.3ms)
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'cUuWlUmJ0r4Oaa3a6HdQnY') AND (acceptance is null)[0m
Rendered layouts/_logged_in_swap_offers_icon.haml (13.9ms)
  [1m[35mCommunityMembership Load (1.1ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."community_id" = 3 AND ("community_memberships".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY') LIMIT 1
Rendered layouts/_logged_in.haml (59.2ms)
Rendered layouts/_notifications.haml (6.3ms)
Rendered layouts/_display_popup.haml (8.0ms)
Rendered homepage/index.haml within layouts/application (696.1ms)
Completed 200 OK in 1872ms (Views: 627.3ms | ActiveRecord: 171.0ms | Sphinx: 0.0ms)


Started GET "/people/cUuWlUmJ0r4Oaa3a6HdQnY/messages/received" for 127.0.0.1 at 2012-11-30 12:57:00 +0530
  Processing by ConversationsController#received as HTML
  Parameters: {"person_id"=>"cUuWlUmJ0r4Oaa3a6HdQnY"}
  [1m[36mPK and serial sequence (6.4ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (3.6ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (1.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (0.9ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (1.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.1ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (3.5ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.7ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 3 LIMIT 1
  [1m[36mSQL (1.4ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 3 AND (("community_memberships".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (0.9ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 3 LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 35
host: !binary |-
 bHZoLm1l
', NULL, '2012-11-30 07:27:01.662746', NULL, NULL, NULL, '2012-11-30 07:27:01.662889', '2012-11-30 07:27:01.662889', NULL) RETURNING "id"
  [1m[36mSQL (22.2ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (2.1ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 3 AND (("community_memberships".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (1.2ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mPerson Load (1.3ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mSHOW max_identifier_length[0m
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mConversation Load (2.5ms)[0m  SELECT "conversations".* FROM "conversations" INNER JOIN "participations" "participations_conversations" ON "participations_conversations"."conversation_id" = "conversations"."id" INNER JOIN "participations" ON "conversations".id = "participations".conversation_id WHERE (("participations".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) AND (participations.last_received_at IS NOT NULL) ORDER BY participations.last_received_at DESC
  [1m[36mPerson Load (2.4ms)[0m  [1mSELECT "people".* FROM "people" INNER JOIN "participations" ON "people".id = "participations".person_id WHERE (("participations".conversation_id = 4))[0m
  [1m[35mMessage Load (20.3ms)[0m  SELECT "messages".* FROM "messages" WHERE ("messages".conversation_id = 4)
  [1m[36mSQL (1.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"messages"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (1.4ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cPLJhUmKGr4Oaa3a6HdQnY' LIMIT 1
  [1m[36mParticipation Load (1.6ms)[0m  [1mSELECT "participations".* FROM "participations" WHERE ("participations".conversation_id = 4) AND (person_id LIKE 'cUuWlUmJ0r4Oaa3a6HdQnY') LIMIT 1[0m
Rendered conversations/_status.haml (5.1ms)
  [1m[35mPerson Load (2.3ms)[0m  SELECT "people".* FROM "people" INNER JOIN "participations" ON "people".id = "participations".person_id WHERE (("participations".conversation_id = 3))
  [1m[36mMessage Load (0.9ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE ("messages".conversation_id = 3)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cPLJhUmKGr4Oaa3a6HdQnY' LIMIT 1
  [1m[36mParticipation Load (1.0ms)[0m  [1mSELECT "participations".* FROM "participations" WHERE ("participations".conversation_id = 3) AND (person_id LIKE 'cUuWlUmJ0r4Oaa3a6HdQnY') LIMIT 1[0m
  [1m[35mSQL (1.8ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.0ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (3.5ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (6.1ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (3.5ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mListing Load (1.5ms)[0m  SELECT "listings".* FROM "listings" WHERE "listings"."id" = 2 LIMIT 1
Rendered conversations/_status.haml (656.8ms)
  [1m[36mPerson Load (1.9ms)[0m  [1mSELECT "people".* FROM "people" INNER JOIN "participations" ON "people".id = "participations".person_id WHERE (("participations".conversation_id = 2))[0m
  [1m[35mMessage Load (0.7ms)[0m  SELECT "messages".* FROM "messages" WHERE ("messages".conversation_id = 2)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cPLJhUmKGr4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mParticipation Load (0.8ms)[0m  SELECT "participations".* FROM "participations" WHERE ("participations".conversation_id = 2) AND (person_id LIKE 'cUuWlUmJ0r4Oaa3a6HdQnY') LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "listings".* FROM "listings" WHERE "listings"."id" = 2 LIMIT 1[0m
Rendered conversations/_status.haml (5.4ms)
  [1m[35mPerson Load (0.8ms)[0m  SELECT "people".* FROM "people" INNER JOIN "participations" ON "people".id = "participations".person_id WHERE (("participations".conversation_id = 1))
  [1m[36mMessage Load (0.4ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE ("messages".conversation_id = 1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cPLJhUmKGr4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mParticipation Load (0.4ms)[0m  SELECT "participations".* FROM "participations" WHERE ("participations".conversation_id = 1) AND (person_id LIKE 'cUuWlUmJ0r4Oaa3a6HdQnY') LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "listings".* FROM "listings" WHERE "listings"."id" = 2 LIMIT 1[0m
Rendered conversations/_status.haml (5.5ms)
Rendered conversations/_received_conversation.haml (977.7ms)
Rendered layouts/_kissmetrics.haml (3.1ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.6ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.2ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (10.5ms)
Rendered communities/default/logo/logo.haml (2.1ms)
Rendered layouts/_no_javascript.haml (16.2ms)
Rendered layouts/_facebook_sdk.haml (2.3ms)
  [1m[35mSQL (1.5ms)[0m  SELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) AND participations.person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) AND participations.person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')[0m
Rendered layouts/_logged_in_messages_icon.haml (13.6ms)
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')
Rendered layouts/_logged_in_notifications_icon.haml (12.2ms)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'cUuWlUmJ0r4Oaa3a6HdQnY') AND (acceptance is null)
Rendered layouts/_logged_in_swap_offers_icon.haml (10.6ms)
  [1m[36mCommunityMembership Load (1.2ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."community_id" = 3 AND ("community_memberships".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY') LIMIT 1[0m
Rendered layouts/_logged_in.haml (54.9ms)
Rendered layouts/_notifications.haml (5.4ms)
Rendered layouts/_display_popup.haml (8.2ms)
Rendered layouts/application.haml (224.6ms)
Rendered conversations/index.haml within layouts/conversations (1222.4ms)
Completed 200 OK in 1955ms (Views: 1189.3ms | ActiveRecord: 145.6ms | Sphinx: 0.0ms)


Started GET "/people/cUuWlUmJ0r4Oaa3a6HdQnY/messages/notifications" for 127.0.0.1 at 2012-11-30 12:57:12 +0530
  Processing by ConversationsController#notifications as HTML
  Parameters: {"person_id"=>"cUuWlUmJ0r4Oaa3a6HdQnY"}
  [1m[35mPK and serial sequence (7.0ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (3.7ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (3.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.9ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.6ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (3.6ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.8ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 3 LIMIT 1[0m
  [1m[35mSQL (1.6ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 3 AND (("community_memberships".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (1.1ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 3 LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  BEGIN
  [1m[36mSQL (1.5ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 35
host: !binary |-
 bHZoLm1l
', NULL, '2012-11-30 07:27:13.590459', NULL, NULL, NULL, '2012-11-30 07:27:13.590601', '2012-11-30 07:27:13.590601', NULL) RETURNING "id"[0m
  [1m[35mSQL (26.9ms)[0m  COMMIT
  [1m[36mSQL (1.5ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 3 AND (("community_memberships".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (0.5ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mPerson Load (0.7ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mNotification Load (0.9ms)[0m  [1mSELECT "notifications".* FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'cUuWlUmJ0r4Oaa3a6HdQnY') ORDER BY id DESC[0m
  [1m[35mAREL (13.2ms)[0m  UPDATE "notifications" SET is_read = true WHERE (is_read = false AND receiver_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.0ms)[0m  SELECT COUNT(*) FROM "notifications" WHERE ("notifications".receiver_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')
  [1m[36mNotification Load (2.3ms)[0m  [1mSELECT "notifications".* FROM "notifications" WHERE ("notifications".receiver_id = 'cUuWlUmJ0r4Oaa3a6HdQnY') ORDER BY id DESC LIMIT 20 OFFSET 0[0m
  [1m[35mSQL (0.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"comments"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mComment Load (15.5ms)[0m  [1mSELECT "comments".* FROM "comments" WHERE "comments"."id" = 8 LIMIT 1[0m
  [1m[35mSQL (1.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"comments"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cPLJhUmKGr4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (1.3ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (1.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.1ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (3.4ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (6.0ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (3.7ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mListing Load (1.5ms)[0m  [1mSELECT "listings".* FROM "listings" WHERE "listings"."id" = 2 LIMIT 1[0m
Rendered conversations/notifications/_comment_to_own_listing_notification.haml (797.4ms)
  [1m[35mComment Load (1.1ms)[0m  SELECT "comments".* FROM "comments" WHERE "comments"."id" = 7 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cPLJhUmKGr4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "listings".* FROM "listings" WHERE "listings"."id" = 2 LIMIT 1
Rendered conversations/notifications/_comment_to_own_listing_notification.haml (7.3ms)
  [1m[36mComment Load (1.0ms)[0m  [1mSELECT "comments".* FROM "comments" WHERE "comments"."id" = 6 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cPLJhUmKGr4Oaa3a6HdQnY' LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "listings".* FROM "listings" WHERE "listings"."id" = 2 LIMIT 1[0m
Rendered conversations/notifications/_comment_to_own_listing_notification.haml (7.1ms)
  [1m[35mComment Load (1.1ms)[0m  SELECT "comments".* FROM "comments" WHERE "comments"."id" = 5 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cPLJhUmKGr4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "listings".* FROM "listings" WHERE "listings"."id" = 2 LIMIT 1
Rendered conversations/notifications/_comment_to_own_listing_notification.haml (80.9ms)
  [1m[36mComment Load (0.5ms)[0m  [1mSELECT "comments".* FROM "comments" WHERE "comments"."id" = 4 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cPLJhUmKGr4Oaa3a6HdQnY' LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "listings".* FROM "listings" WHERE "listings"."id" = 2 LIMIT 1[0m
Rendered conversations/notifications/_comment_to_own_listing_notification.haml (8.0ms)
  [1m[35mComment Load (0.6ms)[0m  SELECT "comments".* FROM "comments" WHERE "comments"."id" = 3 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cPLJhUmKGr4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "listings".* FROM "listings" WHERE "listings"."id" = 2 LIMIT 1
Rendered conversations/notifications/_comment_to_own_listing_notification.haml (9.5ms)
  [1m[36mComment Load (1.0ms)[0m  [1mSELECT "comments".* FROM "comments" WHERE "comments"."id" = 2 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cPLJhUmKGr4Oaa3a6HdQnY' LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "listings".* FROM "listings" WHERE "listings"."id" = 2 LIMIT 1[0m
Rendered conversations/notifications/_comment_to_own_listing_notification.haml (7.3ms)
  [1m[35mComment Load (1.1ms)[0m  SELECT "comments".* FROM "comments" WHERE "comments"."id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cPLJhUmKGr4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "listings".* FROM "listings" WHERE "listings"."id" = 2 LIMIT 1
Rendered conversations/notifications/_comment_to_own_listing_notification.haml (7.4ms)
Rendered conversations/_notification.haml (962.3ms)
Rendered layouts/_kissmetrics.haml (3.1ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.6ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.2ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (11.5ms)
Rendered communities/default/logo/logo.haml (2.1ms)
Rendered layouts/_no_javascript.haml (16.2ms)
Rendered layouts/_facebook_sdk.haml (2.4ms)
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.8ms)[0m  [1mSELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) AND participations.person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) AND participations.person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')
Rendered layouts/_logged_in_messages_icon.haml (91.1ms)
  [1m[36mSQL (1.0ms)[0m  [1mSELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')[0m
Rendered layouts/_logged_in_notifications_icon.haml (7.4ms)
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.7ms)[0m  [1mSELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'cUuWlUmJ0r4Oaa3a6HdQnY') AND (acceptance is null)[0m
Rendered layouts/_logged_in_swap_offers_icon.haml (13.1ms)
  [1m[35mCommunityMembership Load (1.1ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."community_id" = 3 AND ("community_memberships".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY') LIMIT 1
Rendered layouts/_logged_in.haml (127.5ms)
Rendered layouts/_notifications.haml (6.8ms)
Rendered layouts/_display_popup.haml (7.8ms)
Rendered layouts/application.haml (228.9ms)
Rendered conversations/notifications.haml within layouts/conversations (1305.4ms)
Completed 200 OK in 1896ms (Views: 1247.9ms | ActiveRecord: 154.9ms | Sphinx: 0.0ms)


Started GET "/en/people/cUuWlUmJ0r4Oaa3a6HdQnY/swap_items" for 127.0.0.1 at 2012-11-30 12:57:22 +0530
  Processing by SwapItemsController#index as HTML
  Parameters: {"locale"=>"en", "person_id"=>"cUuWlUmJ0r4Oaa3a6HdQnY"}
  [1m[36mPK and serial sequence (6.1ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (1.6ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (1.3ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.1ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (3.5ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.4ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 3 LIMIT 1
  [1m[36mSQL (1.2ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 3 AND (("community_memberships".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (0.4ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 3 LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 35
host: !binary |-
 bHZoLm1l
', NULL, '2012-11-30 07:27:23.037717', NULL, NULL, NULL, '2012-11-30 07:27:23.037835', '2012-11-30 07:27:23.037835', NULL) RETURNING "id"
  [1m[36mSQL (13.4ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (1.3ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 3 AND (("community_memberships".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (0.5ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mSQL (0.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSwapItem Load (0.8ms)[0m  [1mSELECT "swap_items".* FROM "swap_items" WHERE "swap_items"."receiver_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' ORDER BY id Desc[0m
  [1m[35mSQL (1.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.4ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cPLJhUmKGr4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cPLJhUmKGr4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (1.9ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (0.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (2.3ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (1.3ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (2.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (2.0ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mListing Load (1.3ms)[0m  [1mSELECT "listings".* FROM "listings" WHERE "listings"."id" = 4 LIMIT 1[0m
  [1m[35mListing Load (0.7ms)[0m  SELECT "listings".* FROM "listings" WHERE "listings"."id" = 2 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cPLJhUmKGr4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cPLJhUmKGr4Oaa3a6HdQnY' LIMIT 1
  [1m[36mListing Load (1.5ms)[0m  [1mSELECT "listings".* FROM "listings" WHERE "listings"."id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "listings".* FROM "listings" WHERE "listings"."id" = 2 LIMIT 1
  [1m[36mSwapItem Load (1.0ms)[0m  [1mSELECT "swap_items".* FROM "swap_items" WHERE "swap_items"."offerer_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' ORDER BY id Desc[0m
Rendered layouts/_kissmetrics.haml (3.1ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.6ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.1ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (10.3ms)
Rendered communities/default/logo/logo.haml (2.1ms)
Rendered layouts/_no_javascript.haml (15.3ms)
Rendered layouts/_facebook_sdk.haml (2.3ms)
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.1ms)[0m  SELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) AND participations.person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) AND participations.person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')[0m
Rendered layouts/_logged_in_messages_icon.haml (18.2ms)
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')[0m
Rendered layouts/_logged_in_notifications_icon.haml (11.0ms)
  [1m[35mSQL (0.8ms)[0m  SELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'cUuWlUmJ0r4Oaa3a6HdQnY') AND (acceptance is null)
Rendered layouts/_logged_in_swap_offers_icon.haml (8.8ms)
  [1m[36mCommunityMembership Load (1.4ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."community_id" = 3 AND ("community_memberships".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY') LIMIT 1[0m
Rendered layouts/_logged_in.haml (58.1ms)
Rendered layouts/_notifications.haml (7.5ms)
Rendered layouts/_display_popup.haml (6.9ms)
Rendered swap_items/index.html.haml within layouts/application (1011.5ms)
Completed 200 OK in 1663ms (Views: 994.1ms | ActiveRecord: 83.4ms | Sphinx: 0.0ms)


Started GET "/en/logout" for 127.0.0.1 at 2012-11-30 12:57:39 +0530
  Processing by SessionsController#destroy as HTML
  Parameters: {"method"=>:delete, "locale"=>"en"}
  [1m[35mPK and serial sequence (6.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (3.5ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (1.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (0.8ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (1.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.0ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (3.4ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (1.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.7ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 3 LIMIT 1[0m
  [1m[35mSQL (1.5ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 3 AND (("community_memberships".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (0.8ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 3 LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 35
host: !binary |-
 bHZoLm1l
', NULL, '2012-11-30 07:27:39.894965', NULL, NULL, NULL, '2012-11-30 07:27:39.895080', '2012-11-30 07:27:39.895080', NULL) RETURNING "id"[0m
  [1m[35mSQL (11.6ms)[0m  COMMIT
  [1m[36mLocation Load (0.7ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mSQL (0.5ms)[0m  BEGIN
  [1m[36mAREL (1.2ms)[0m  [1mUPDATE "people" SET "preferences" = '---
email_about_new_messages: true
email_about_new_comments_to_own_listing: true
email_when_conversation_accepted: true
email_when_conversation_rejected: true
email_about_new_badges: true
email_about_new_received_testimonials: true
email_about_accept_reminders: true
email_about_testimonial_reminders: true
email_about_weekly_events: true
' WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY'[0m
[paperclip] Saving attachments.
  [1m[35mSQL (23.0ms)[0m  COMMIT
Redirected to http://lvh.me:3000/en
Completed 302 Found in 679ms


Started GET "/en" for 127.0.0.1 at 2012-11-30 12:57:40 +0530
  Processing by DashboardController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mPK and serial sequence (3.5ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (2.7ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mLocation Load (0.8ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
~~~~~~~~~~~~~~~dashboard#index~~~~~~~~~
  [1m[35mPK and serial sequence (3.3ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (2.8ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Rendered dashboard/_header.haml (7.7ms)
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.0ms)[0m  [1mSELECT COUNT(*) FROM "communities"[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "communities"
  [1m[36mCommunity Load (2.5ms)[0m  [1mSELECT "communities".* FROM "communities" ORDER BY name asc[0m
Rendered dashboard/_community_list.haml (43.1ms)
Rendered dashboard/_footer.haml (8.7ms)
Rendered layouts/_kissmetrics.haml (4.0ms)
Rendered layouts/_dashboard_no_javascript.haml (2.8ms)
Rendered dashboard/index.haml within layouts/dashboard (94.1ms)
Completed 200 OK in 509ms (Views: 92.0ms | ActiveRecord: 89.3ms | Sphinx: 0.0ms)
DEPRECATION WARNING: config.action_view.debug_rjs will be removed in 3.1, from 3.1 onwards you will need to install prototype-rails to continue to use RJS templates . (called from <top (required)> at /home/chaitanya/workArea/ST-to-RGF/config/environment.rb:10)
Starting the New Relic Agent.
NewRelic Agent Developer Mode enabled.
To view performance information, go to http://localhost:3000/newrelic
Installed New Relic Browser Monitoring middleware
  [1m[36mSQL (0.3ms)[0m  [1mSHOW client_min_messages[0m
  [1m[35mSQL (0.2ms)[0m  SET client_min_messages TO 'panic'
  [1m[36mSQL (0.2ms)[0m  [1mSET standard_conforming_strings = on[0m
  [1m[35mSQL (0.2ms)[0m  SET client_min_messages TO 'notice'
  [1m[36mSQL (0.6ms)[0m  [1mSET time zone 'UTC'[0m
  [1m[35mSQL (0.4ms)[0m  SHOW TIME ZONE
  [1m[36mPK and serial sequence (9.6ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.2ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'


Started GET "/en?cid=3" for 127.0.0.1 at 2012-11-30 13:09:42 +0530
  [1m[36mSQL (0.4ms)[0m  [1mSHOW client_min_messages[0m
  [1m[35mSQL (0.3ms)[0m  SET client_min_messages TO 'panic'
  [1m[36mSQL (0.2ms)[0m  [1mSET standard_conforming_strings = on[0m
  [1m[35mSQL (0.2ms)[0m  SET client_min_messages TO 'notice'
  [1m[36mSQL (0.4ms)[0m  [1mSET time zone 'UTC'[0m
  [1m[35mSQL (0.3ms)[0m  SHOW TIME ZONE
  Processing by DashboardController#index as HTML
  Parameters: {"cid"=>"3", "locale"=>"en"}
Redirected to http://lvh.me:3000/en/homepage
Completed 302 Found in 1ms


Started GET "/en/homepage" for 127.0.0.1 at 2012-11-30 13:09:43 +0530
  Processing by HomepageController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mPK and serial sequence (6.4ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (3.4ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (6.1ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (3.6ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (4.6ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (4.7ms)[0m   SELECT tablename
 FROM pg_tables
 WHERE schemaname = ANY (current_schemas(false))
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (2.5ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 3 LIMIT 1
  [1m[36mLocation Load (1.7ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
~~~~~~~~~~~~~~~~~~3
  [1m[35mSQL (1.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"event_feed_events"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.3ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.9ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (3.6ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (6.1ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (3.5ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
DEPRECATION WARNING: RAILS_ROOT is deprecated. Please use ::Rails.root.to_s. (called from <class:ListingImage> at /home/chaitanya/workArea/ST-to-RGF/app/models/listing_image.rb:8)
  [1m[36mSQL (2.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listing_images"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (5.8ms)[0m  SELECT COUNT(DISTINCT "listings"."id") FROM "listings" LEFT OUTER JOIN "listing_images" ON "listing_images"."listing_id" = "listings"."id" WHERE "listings"."listing_type" = 'request' AND (open = '1' AND (valid_until IS NULL OR valid_until > '2012-11-30 07:39:43')) AND (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '3')
 )
  [1m[36mSQL (2.3ms)[0m  [1mSELECT COUNT(DISTINCT "listings"."id") FROM "listings" LEFT OUTER JOIN "listing_images" ON "listing_images"."listing_id" = "listings"."id" WHERE "listings"."listing_type" = 'offer' AND (open = '1' AND (valid_until IS NULL OR valid_until > '2012-11-30 07:39:43')) AND (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '3')
 )[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"news_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.4ms)[0m  [1mSELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 3)[0m
  [1m[35mCommunity Load (1.9ms)[0m  SELECT "communities".* FROM "communities"
  [1m[36mSQL (1.0ms)[0m  [1mSELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 3) LIMIT 2[0m
  [1m[35mSQL (2.1ms)[0m  SELECT COUNT(*) FROM "listings" WHERE "listings"."listing_type" = 'offer' AND (listings.visibility = 'everybody' AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '3')) AND (open = '1' AND (valid_until IS NULL OR valid_until > '2012-11-30 07:39:43'))
  [1m[36mListing Load (4.7ms)[0m  [1mSELECT "listings".* FROM "listings" WHERE "listings"."listing_type" = 'offer' AND (listings.visibility = 'everybody' AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '3')) AND (open = '1' AND (valid_until IS NULL OR valid_until > '2012-11-30 07:39:43')) ORDER BY listings.created_at DESC LIMIT 15 OFFSET 0[0m
  [1m[35mListingImage Load (1.3ms)[0m  SELECT "listing_images".* FROM "listing_images" WHERE ("listing_images".listing_id IN (12,8,7,6,2,1))
  [1m[36mSQL (2.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (22.3ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"diet_listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.3ms)[0m  [1mSELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 12)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 8)[0m
  [1m[35mPerson Load (0.9ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cPLJhUmKGr4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 7)[0m
  [1m[35mDietListing Load (0.9ms)[0m  SELECT "diet_listings".* FROM "diet_listings" WHERE ("diet_listings".listing_id = 7)
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"diets"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mDiet Load (1.4ms)[0m  SELECT "diets".* FROM "diets" WHERE "diets"."id" = 2 LIMIT 1
  [1m[36mSQL (1.6ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"diets"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cPLJhUmKGr4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mSELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 6)[0m
  [1m[35mDietListing Load (0.4ms)[0m  SELECT "diet_listings".* FROM "diet_listings" WHERE ("diet_listings".listing_id = 6)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "diets".* FROM "diets" WHERE "diets"."id" = 2 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mSELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 2)[0m
  [1m[35mDietListing Load (0.8ms)[0m  SELECT "diet_listings".* FROM "diet_listings" WHERE ("diet_listings".listing_id = 2)
  [1m[36mDiet Load (0.9ms)[0m  [1mSELECT "diets".* FROM "diets" WHERE "diets"."id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cPLJhUmKGr4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 1)[0m
  [1m[35mDietListing Load (0.8ms)[0m  SELECT "diet_listings".* FROM "diet_listings" WHERE ("diet_listings".listing_id = 1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "diets".* FROM "diets" WHERE "diets"."id" = 1 LIMIT 1[0m
Rendered homepage/_recent_listing.haml (5395.7ms)
  [1m[35mSQL (1.8ms)[0m  SELECT COUNT(*) FROM "listings" WHERE "listings"."listing_type" = 'request' AND (listings.visibility = 'everybody' AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '3')) AND (open = '1' AND (valid_until IS NULL OR valid_until > '2012-11-30 07:39:43'))
  [1m[36mSQL (0.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"event_feed_events"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.5ms)[0m  SELECT COUNT(*) FROM "event_feed_events" WHERE ("event_feed_events".community_id = 3)
Rendered common/_staples.haml (6.3ms)
  [1m[36mEventFeedEvent Load (1.9ms)[0m  [1mSELECT "event_feed_events".* FROM "event_feed_events" WHERE "event_feed_events"."members_only" = 'f' AND ("event_feed_events".community_id = 3) ORDER BY id DESC LIMIT 5[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1
Rendered event_feed_events/_login.haml (4.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1[0m
Rendered event_feed_events/_login.haml (3.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1
Rendered event_feed_events/_login.haml (5.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1[0m
Rendered event_feed_events/_login.haml (3.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cPLJhUmKGr4Oaa3a6HdQnY' LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 3 LIMIT 1[0m
Rendered event_feed_events/_join.haml (6.6ms)
Rendered homepage/_event_feed_event.haml (44.5ms)
Rendered homepage/_event_feed.haml (54.3ms)
Rendered common/_staples.haml (2.1ms)
Rendered common/_staples.haml (2.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 3) LIMIT 2
Rendered homepage/_news_items.haml (5.6ms)
Rendered common/_staples.haml (2.2ms)
Rendered layouts/_kissmetrics.haml (60.9ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.9ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (6.1ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (121.9ms)
Rendered communities/default/logo/logo.haml (2.2ms)
Rendered layouts/_no_javascript.haml (16.7ms)
Rendered layouts/_facebook_sdk.haml (2.4ms)
Rendered layouts/_logged_in.haml (8.4ms)
Rendered layouts/_notifications.haml (5.8ms)
Rendered layouts/_display_popup.haml (6.1ms)
Rendered homepage/index.haml within layouts/application (23898.8ms)
Completed 200 OK in 25158ms (Views: 23848.7ms | ActiveRecord: 141.4ms | Sphinx: 0.0ms)


Started GET "/en/login" for 127.0.0.1 at 2012-11-30 13:10:13 +0530
  Processing by SessionsController#new as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mPK and serial sequence (7.7ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (3.7ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (7.3ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (3.4ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (1.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (0.6ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 3 LIMIT 1[0m
  [1m[35mLocation Load (0.6ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
Rendered sessions/_password_forgotten.haml (12.7ms)
Rendered sessions/_new.haml (28.5ms)
Rendered layouts/_kissmetrics.haml (3.1ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (59.7ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.3ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (11.2ms)
Rendered communities/default/logo/logo.haml (2.9ms)
Rendered layouts/_no_javascript.haml (19.4ms)
Rendered layouts/_facebook_sdk.haml (2.5ms)
Rendered layouts/_logged_in.haml (7.0ms)
Rendered layouts/_notifications.haml (4.6ms)
Rendered layouts/_display_popup.haml (5.9ms)
Rendered sessions/new.haml within layouts/application (211.1ms)
Completed 200 OK in 625ms (Views: 232.0ms | ActiveRecord: 25.7ms | Sphinx: 0.0ms)


Started POST "/en/sessions" for 127.0.0.1 at 2012-11-30 13:11:38 +0530
  Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"bDTy7ussIjNMoM50UQkELZlF6pND/hp+APgmThHrhp8=", "person"=>{"login"=>"chaitanya", "password"=>"[FILTERED]"}, "community"=>"pune", "commit"=>"Log in", "locale"=>"en"}
  [1m[36mPK and serial sequence (6.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.0ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (6.3ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (3.4ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (3.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.3ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 3 LIMIT 1[0m
  [1m[35mLocation Load (1.0ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mCommunity Load (1.2ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'pune' LIMIT 1[0m
  [1m[35mPerson Load (23.2ms)[0m  SELECT "people".* FROM "people" WHERE (lower(username) = 'chaitanya' OR lower(email) = 'chaitanya') LIMIT 1
  [1m[36mSQL (1.6ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
Completed 401 Unauthorized in 576ms
  Processing by SessionsController#new as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"bDTy7ussIjNMoM50UQkELZlF6pND/hp+APgmThHrhp8=", "person"=>{"login"=>"chaitanya", "password"=>"[FILTERED]"}, "community"=>"pune", "commit"=>"Log in", "locale"=>"en"}
  [1m[35mCACHE (0.0ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 3 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
Rendered sessions/_password_forgotten.haml (5.2ms)
Rendered sessions/_new.haml (17.9ms)
Rendered layouts/_kissmetrics.haml (3.4ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.5ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (1.9ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (9.9ms)
Rendered communities/default/logo/logo.haml (2.1ms)
Rendered layouts/_no_javascript.haml (18.1ms)
Rendered layouts/_facebook_sdk.haml (2.5ms)
Rendered layouts/_logged_in.haml (6.4ms)
Rendered layouts/_notifications.haml (4.8ms)
Rendered layouts/_display_popup.haml (5.7ms)
Rendered sessions/new.haml within layouts/application (130.8ms)
Completed 200 OK in 208ms (Views: 138.9ms | ActiveRecord: 54.8ms | Sphinx: 0.0ms)


Started POST "/en/sessions" for 127.0.0.1 at 2012-11-30 13:11:47 +0530
  Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"bDTy7ussIjNMoM50UQkELZlF6pND/hp+APgmThHrhp8=", "person"=>{"login"=>"chaitanya", "password"=>"[FILTERED]"}, "community"=>"pune", "commit"=>"Log in", "locale"=>"en"}
  [1m[35mPK and serial sequence (3.6ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (2.0ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (6.3ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (3.5ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (1.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (0.7ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 3 LIMIT 1
  [1m[36mLocation Load (0.9ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mCommunity Load (1.5ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."domain" = 'pune' LIMIT 1
  [1m[36mPerson Load (1.5ms)[0m  [1mSELECT "people".* FROM "people" WHERE (lower(username) = 'chaitanya' OR lower(email) = 'chaitanya') LIMIT 1[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.6ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mAREL (2.3ms)[0m  [1mUPDATE "people" SET "last_sign_in_at" = '2012-11-30 06:47:52.390261', "current_sign_in_at" = '2012-11-30 07:41:48.639131', "sign_in_count" = 25, "updated_at" = '2012-11-30 07:41:48.641325', "preferences" = '---
email_about_new_messages: true
email_about_new_comments_to_own_listing: true
email_when_conversation_accepted: true
email_when_conversation_rejected: true
email_about_new_badges: true
email_about_new_received_testimonials: true
email_about_accept_reminders: true
email_about_testimonial_reminders: true
email_about_weekly_events: true
' WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY'[0m
[paperclip] Saving attachments.
  [1m[35mSQL (19.8ms)[0m  COMMIT
  [1m[36mSQL (0.9ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 3 AND (("community_memberships".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (1.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (0.8ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."community_id" = 3 AND ("community_memberships".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY') LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 3 AND (("community_memberships".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (1.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"event_feed_events"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.5ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"event_feed_events"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.1ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"event_feed_events"'::regclass
[0m
  [1m[35mSQL (1.6ms)[0m  INSERT INTO "event_feed_events" ("person1_id", "person2_id", "community_id", "eventable_id", "eventable_type", "category", "members_only", "created_at", "updated_at") VALUES ('cUuWlUmJ0r4Oaa3a6HdQnY', NULL, 3, NULL, NULL, 'login', 'f', '2012-11-30 07:41:48.824798', '2012-11-30 07:41:48.824798') RETURNING "id"
  [1m[36mSQL (8.3ms)[0m  [1mCOMMIT[0m
Redirected to http://lvh.me:3000/en/homepage
Completed 302 Found in 800ms


Started GET "/en/homepage" for 127.0.0.1 at 2012-11-30 13:11:48 +0530
  Processing by HomepageController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[35mPK and serial sequence (3.3ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (2.2ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (3.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (8.3ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (1.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (2.4ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (2.1ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (1.6ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.1ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 3 LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 3 AND (("community_memberships".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (0.4ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 3 LIMIT 1[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"delayed_jobs"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"delayed_jobs"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (3.0ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"delayed_jobs"'::regclass
[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 35
host: !binary |-
 bHZoLm1l
', NULL, '2012-11-30 07:41:49.567058', NULL, NULL, NULL, '2012-11-30 07:41:49.567178', '2012-11-30 07:41:49.567178', NULL) RETURNING "id"
  [1m[36mSQL (3.3ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (1.1ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 3 AND (("community_memberships".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (0.5ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
~~~~~~~~~~~~~~~~~~3
  [1m[35mSQL (1.5ms)[0m  SELECT 1 FROM "people" INNER JOIN "community_memberships" ON "people".id = "community_memberships".person_id WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND (("community_memberships".community_id = 3)) LIMIT 1
  [1m[36mSQL (2.2ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (1.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.0ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (3.4ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (6.1ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (3.4ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (2.2ms)[0m  [1mSELECT "communities".* FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE (("community_memberships".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY'))[0m
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"news_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.8ms)[0m  [1mSELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 3)[0m
  [1m[35mCommunity Load (1.7ms)[0m  SELECT "communities".* FROM "communities"
  [1m[36mSQL (1.0ms)[0m  [1mSELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 3) LIMIT 2[0m
  [1m[35mSQL (2.1ms)[0m  SELECT COUNT(*) FROM "listings" WHERE "listings"."listing_type" = 'offer' AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1','3','2')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '3')
 ) AND (open = '1' AND (valid_until IS NULL OR valid_until > '2012-11-30 07:41:49'))
  [1m[36mListing Load (2.4ms)[0m  [1mSELECT "listings".* FROM "listings" WHERE "listings"."listing_type" = 'offer' AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1','3','2')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '3')
 ) AND (open = '1' AND (valid_until IS NULL OR valid_until > '2012-11-30 07:41:49')) ORDER BY listings.created_at DESC LIMIT 15 OFFSET 0[0m
  [1m[35mListingImage Load (1.4ms)[0m  SELECT "listing_images".* FROM "listing_images" WHERE ("listing_images".listing_id IN (12,8,7,6,2,1))
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listing_images"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (1.4ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"diet_listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.8ms)[0m  SELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 12)
  [1m[36mSQL (1.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"comments"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.8ms)[0m  SELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 12)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  SELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 8)
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 8)[0m
  [1m[35mPerson Load (1.5ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cPLJhUmKGr4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mSELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 7)[0m
  [1m[35mDietListing Load (0.9ms)[0m  SELECT "diet_listings".* FROM "diet_listings" WHERE ("diet_listings".listing_id = 7)
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"diets"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mDiet Load (0.9ms)[0m  SELECT "diets".* FROM "diets" WHERE "diets"."id" = 2 LIMIT 1
  [1m[36mSQL (1.6ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"diets"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.4ms)[0m  SELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 7)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cPLJhUmKGr4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 6)
  [1m[36mDietListing Load (0.8ms)[0m  [1mSELECT "diet_listings".* FROM "diet_listings" WHERE ("diet_listings".listing_id = 6)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "diets".* FROM "diets" WHERE "diets"."id" = 2 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mSELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 6)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mSELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 2)[0m
  [1m[35mDietListing Load (0.6ms)[0m  SELECT "diet_listings".* FROM "diet_listings" WHERE ("diet_listings".listing_id = 2)
  [1m[36mDiet Load (0.8ms)[0m  [1mSELECT "diets".* FROM "diets" WHERE "diets"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.1ms)[0m  SELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 2)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 2)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cPLJhUmKGr4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mSELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 1)[0m
  [1m[35mDietListing Load (0.4ms)[0m  SELECT "diet_listings".* FROM "diet_listings" WHERE ("diet_listings".listing_id = 1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "diets".* FROM "diets" WHERE "diets"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  SELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 1)
Rendered homepage/_recent_listing.haml (127.8ms)
  [1m[36mSQL (1.0ms)[0m  [1mSELECT COUNT(*) FROM "listings" WHERE "listings"."listing_type" = 'request' AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1','3','2')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '3')
 ) AND (open = '1' AND (valid_until IS NULL OR valid_until > '2012-11-30 07:41:49'))[0m
Rendered common/_staples.haml (2.2ms)
  [1m[35mCommunityMembership Load (1.1ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 5 LIMIT 1
  [1m[36mCommunityMembership Load (0.4ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 10 LIMIT 1[0m
  [1m[35mCommunityMembership Load (0.4ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mCommunityMembership Load (0.4ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 4 LIMIT 1[0m
  [1m[35mCommunityMembership Load (0.4ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 3 LIMIT 1
  [1m[36mCommunityMembership Load (0.4ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 6 LIMIT 1[0m
  [1m[35mCommunityMembership Load (0.4ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 7 LIMIT 1
  [1m[36mCommunityMembership Load (0.4ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 8 LIMIT 1[0m
  [1m[35mCommunityMembership Load (0.4ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 9 LIMIT 1
  [1m[36mCommunityMembership Load (0.4ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 2 LIMIT 1[0m
Rendered homepage/_user_communities.haml (22.4ms)
Rendered common/_staples.haml (2.3ms)
  [1m[35mSQL (1.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"event_feed_events"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "event_feed_events" WHERE ("event_feed_events".community_id = 3)[0m
Rendered common/_staples.haml (2.3ms)
  [1m[35mEventFeedEvent Load (1.6ms)[0m  SELECT "event_feed_events".* FROM "event_feed_events" WHERE ("event_feed_events".community_id = 3) ORDER BY id DESC LIMIT 5
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1[0m
Rendered event_feed_events/_login.haml (4.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1
Rendered event_feed_events/_login.haml (3.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1[0m
Rendered event_feed_events/_login.haml (3.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1
Rendered event_feed_events/_login.haml (3.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1[0m
Rendered event_feed_events/_login.haml (3.8ms)
Rendered homepage/_event_feed_event.haml (40.7ms)
Rendered homepage/_event_feed.haml (47.1ms)
Rendered common/_staples.haml (2.1ms)
Rendered common/_staples.haml (2.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 3) LIMIT 2
Rendered homepage/_news_items.haml (5.9ms)
Rendered common/_staples.haml (2.2ms)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"polls"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPoll Load (1.4ms)[0m  SELECT "polls".* FROM "polls" WHERE "polls"."active" = 't' AND ("polls".community_id = 3) LIMIT 1
Rendered layouts/_kissmetrics.haml (3.3ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (2.0ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.2ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (10.9ms)
Rendered communities/default/logo/logo.haml (2.2ms)
Rendered layouts/_no_javascript.haml (16.6ms)
Rendered layouts/_facebook_sdk.haml (2.4ms)
  [1m[36mSQL (2.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.9ms)[0m  [1mSELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) AND participations.person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) AND participations.person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')
Rendered layouts/_logged_in_messages_icon.haml (20.0ms)
  [1m[36mSQL (1.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.8ms)[0m  SELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')
Rendered layouts/_logged_in_notifications_icon.haml (17.5ms)
  [1m[36mSQL (1.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (18.7ms)[0m  SELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'cUuWlUmJ0r4Oaa3a6HdQnY') AND (acceptance is null)
Rendered layouts/_logged_in_swap_offers_icon.haml (27.9ms)
  [1m[36mCommunityMembership Load (0.7ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."community_id" = 3 AND ("community_memberships".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY') LIMIT 1[0m
Rendered layouts/_logged_in.haml (101.1ms)
Rendered layouts/_notifications.haml (5.2ms)
Rendered layouts/_display_popup.haml (7.6ms)
Rendered homepage/index.haml within layouts/application (703.6ms)
Completed 200 OK in 1877ms (Views: 632.6ms | ActiveRecord: 225.8ms | Sphinx: 0.0ms)


Started GET "/en/listings/new/offer" for 127.0.0.1 at 2012-11-30 13:12:06 +0530
  Processing by ListingsController#new as HTML
  Parameters: {"locale"=>"en", "type"=>"offer"}
  [1m[35mPK and serial sequence (6.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (3.6ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (3.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.5ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (4.8ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (3.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.9ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 3 LIMIT 1[0m
  [1m[35mSQL (1.6ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 3 AND (("community_memberships".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (1.1ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 3 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  BEGIN
  [1m[36mSQL (1.2ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 35
host: !binary |-
 bHZoLm1l
', NULL, '2012-11-30 07:42:07.264153', NULL, NULL, NULL, '2012-11-30 07:42:07.264290', '2012-11-30 07:42:07.264290', NULL) RETURNING "id"[0m
  [1m[35mSQL (23.0ms)[0m  COMMIT
  [1m[36mSQL (1.5ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 3 AND (("community_memberships".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.1ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mSQL (1.8ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (1.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.0ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (3.4ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (5.9ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.8ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mLocation Load (1.2ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND (location_type = 'person')) LIMIT 1
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"locations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listing_images"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
Rendered listings/form/_javascripts.haml (4.4ms)
Rendered listings/form/_share_type.haml (3.0ms)
Rendered listings/form/_title.haml (3.0ms)
Rendered listings/form/_description.haml (2.9ms)
Rendered listings/form/_receipe.haml (2.7ms)
Rendered listings/form/_portions.haml (2.7ms)
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"taggings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mActsAsTaggableOn::Tag Load (2.3ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags".id = "taggings".tag_id WHERE (("taggings".taggable_id = NULL) AND ("taggings".taggable_type = 'Listing')) AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)
Rendered listings/form/_tag_list.haml (13.9ms)
Rendered listings/form/_restriction_list.html.haml (7.0ms)
Rendered listings/form/_valid_until_radio_buttons.haml (8.1ms)
Rendered listings/form/_valid_until.haml (15.7ms)
Rendered listings/form/_origin.haml (5.0ms)
  [1m[36mLocation Load (1.4ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".community_id = 3) LIMIT 1[0m
Rendered listings/form/_googlemap.haml (7.1ms)
Rendered listings/form/_images.haml (10.6ms)
Rendered listings/form/_visibility.haml (3.1ms)
Rendered listings/form/_additional_details.html.haml (4.0ms)
Rendered listings/form/_send_button.haml (3.1ms)
Rendered listings/help_texts/_help_share_type.en.haml (2.7ms)
Rendered listings/help_texts/_help_tags.en.haml (2.9ms)
Rendered listings/help_texts/_help_valid_until.en.haml (3.2ms)
Rendered listings/_help_texts.haml (84.8ms)
Rendered listings/form/_form_content.haml (223.7ms)
Rendered layouts/_kissmetrics.haml (3.3ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.9ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (3.4ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (12.0ms)
Rendered communities/default/logo/logo.haml (2.3ms)
Rendered layouts/_no_javascript.haml (17.2ms)
Rendered layouts/_facebook_sdk.haml (2.5ms)
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.9ms)[0m  SELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) AND participations.person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) AND participations.person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')[0m
Rendered layouts/_logged_in_messages_icon.haml (18.3ms)
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')[0m
Rendered layouts/_logged_in_notifications_icon.haml (13.1ms)
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'cUuWlUmJ0r4Oaa3a6HdQnY') AND (acceptance is null)[0m
Rendered layouts/_logged_in_swap_offers_icon.haml (13.6ms)
  [1m[35mCommunityMembership Load (1.0ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."community_id" = 3 AND ("community_memberships".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY') LIMIT 1
Rendered layouts/_logged_in.haml (61.4ms)
Rendered layouts/_notifications.haml (75.2ms)
Rendered layouts/_display_popup.haml (7.4ms)
Rendered listings/new.haml within layouts/application (539.4ms)
Completed 200 OK in 1782ms (Views: 550.3ms | ActiveRecord: 118.9ms | Sphinx: 0.0ms)


Started GET "/en/people/cUuWlUmJ0r4Oaa3a6HdQnY/settings" for 127.0.0.1 at 2012-11-30 13:12:10 +0530
  Processing by SettingsController#show as HTML
  Parameters: {"locale"=>"en", "person_id"=>"cUuWlUmJ0r4Oaa3a6HdQnY"}
  [1m[36mPK and serial sequence (6.1ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (3.5ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (1.3ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.4ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (1.6ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (1.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (0.6ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 3 LIMIT 1
  [1m[36mSQL (1.4ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 3 AND (("community_memberships".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (0.9ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 3 LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 35
host: !binary |-
 bHZoLm1l
', NULL, '2012-11-30 07:42:11.503070', NULL, NULL, NULL, '2012-11-30 07:42:11.503186', '2012-11-30 07:42:11.503186', NULL) RETURNING "id"
  [1m[36mSQL (18.3ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (1.5ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 3 AND (("community_memberships".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (1.0ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mPerson Load (1.8ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1
  [1m[36mLocation Load (1.0ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND (location_type = 'person')) LIMIT 1[0m
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"locations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
WARNING: Can't mass-assign protected attributes: type
  [1m[36mLocation Load (0.6ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE ("locations".community_id = 3) LIMIT 1[0m
  [1m[35mDiet Load (2.2ms)[0m  SELECT "diets".* FROM "diets" INNER JOIN "restrictions" ON "diets".id = "restrictions".diet_id WHERE (("restrictions".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY'))
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"diets"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
Rendered layouts/_kissmetrics.haml (3.2ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.7ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.3ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (11.6ms)
Rendered communities/default/logo/logo.haml (2.3ms)
Rendered layouts/_no_javascript.haml (15.9ms)
Rendered layouts/_facebook_sdk.haml (2.4ms)
  [1m[35mSQL (2.1ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (5.4ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (1.7ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (2.4ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (1.4ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.8ms)[0m  [1mSELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) AND participations.person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) AND participations.person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')
Rendered layouts/_logged_in_messages_icon.haml (789.4ms)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')
Rendered layouts/_logged_in_notifications_icon.haml (14.2ms)
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'cUuWlUmJ0r4Oaa3a6HdQnY') AND (acceptance is null)
Rendered layouts/_logged_in_swap_offers_icon.haml (14.3ms)
  [1m[36mCommunityMembership Load (1.1ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."community_id" = 3 AND ("community_memberships".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY') LIMIT 1[0m
Rendered layouts/_logged_in.haml (834.3ms)
Rendered layouts/_notifications.haml (7.4ms)
Rendered layouts/_display_popup.haml (7.3ms)
Rendered layouts/application.haml (939.2ms)
Rendered settings/profile.haml within layouts/settings (1074.6ms)
Completed 200 OK in 1738ms (Views: 1089.2ms | ActiveRecord: 93.5ms | Sphinx: 0.0ms)


Started GET "/en/people/cUuWlUmJ0r4Oaa3a6HdQnY/settings/avatar" for 127.0.0.1 at 2012-11-30 13:12:15 +0530
  Processing by SettingsController#avatar as HTML
  Parameters: {"locale"=>"en", "person_id"=>"cUuWlUmJ0r4Oaa3a6HdQnY"}
  [1m[35mPK and serial sequence (6.1ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (3.4ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.3ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (5.9ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (3.4ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.6ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.2ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 3 LIMIT 1[0m
  [1m[35mSQL (1.4ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 3 AND (("community_memberships".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (1.0ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 3 LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  BEGIN
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 35
host: !binary |-
 bHZoLm1l
', NULL, '2012-11-30 07:42:16.194765', NULL, NULL, NULL, '2012-11-30 07:42:16.194971', '2012-11-30 07:42:16.194971', NULL) RETURNING "id"[0m
  [1m[35mSQL (13.6ms)[0m  COMMIT
  [1m[36mSQL (1.4ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 3 AND (("community_memberships".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.0ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mPerson Load (1.3ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1[0m
Rendered layouts/_kissmetrics.haml (4.2ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.7ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.1ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (10.1ms)
Rendered communities/default/logo/logo.haml (2.9ms)
Rendered layouts/_no_javascript.haml (17.7ms)
Rendered layouts/_facebook_sdk.haml (2.4ms)
  [1m[35mSQL (2.0ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (1.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.1ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (1.5ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (5.4ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (2.5ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (1.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.0ms)[0m  [1mSELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) AND participations.person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) AND participations.person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')
Rendered layouts/_logged_in_messages_icon.haml (807.4ms)
  [1m[36mSQL (2.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')
Rendered layouts/_logged_in_notifications_icon.haml (14.2ms)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.8ms)[0m  SELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'cUuWlUmJ0r4Oaa3a6HdQnY') AND (acceptance is null)
Rendered layouts/_logged_in_swap_offers_icon.haml (13.2ms)
  [1m[36mCommunityMembership Load (1.1ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."community_id" = 3 AND ("community_memberships".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY') LIMIT 1[0m
Rendered layouts/_logged_in.haml (851.4ms)
Rendered layouts/_notifications.haml (72.6ms)
Rendered layouts/_display_popup.haml (7.2ms)
Rendered layouts/application.haml (1019.9ms)
Rendered settings/avatar.haml within layouts/settings (1101.3ms)
Completed 200 OK in 1640ms (Views: 1073.0ms | ActiveRecord: 88.6ms | Sphinx: 0.0ms)


Started GET "/system/images/cUuWlUmJ0r4Oaa3a6HdQnY/medium/37861-ranbir-kapoor-seeing-his-watch.jpg?1354259487" for 127.0.0.1 at 2012-11-30 13:12:17 +0530

ActionController::RoutingError (No route matches "/system/images/cUuWlUmJ0r4Oaa3a6HdQnY/medium/37861-ranbir-kapoor-seeing-his-watch.jpg"):
  

Rendered /home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/actionpack-3.0.17/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (2.2ms)


Started POST "/en/people/cUuWlUmJ0r4Oaa3a6HdQnY/update_avatar" for 127.0.0.1 at 2012-11-30 13:12:23 +0530
  Processing by PeopleController#update_avatar as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"bDTy7ussIjNMoM50UQkELZlF6pND/hp+APgmThHrhp8=", "person"=>{"image"=>#<ActionDispatch::Http::UploadedFile:0xc7abc94 @original_filename="300_Wallpaper.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"person[image]\"; filename=\"300_Wallpaper.jpg\"\r\nContent-Type: image/jpeg\r\n", @tempfile=#<File:/tmp/RackMultipart20121130-4530-iv2lip>>}, "commit"=>"Save picture", "locale"=>"en", "id"=>"cUuWlUmJ0r4Oaa3a6HdQnY"}
  [1m[35mPK and serial sequence (3.0ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (1.8ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.3ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (1.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (2.3ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (1.3ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (1.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (0.6ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 3 LIMIT 1[0m
  [1m[35mSQL (1.5ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 3 AND (("community_memberships".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (0.6ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 3 LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 35
host: !binary |-
 bHZoLm1l
', NULL, '2012-11-30 07:42:24.143137', NULL, NULL, NULL, '2012-11-30 07:42:24.143413', '2012-11-30 07:42:24.143413', NULL) RETURNING "id"[0m
  [1m[35mSQL (21.0ms)[0m  COMMIT
  [1m[36mSQL (0.8ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 3 AND (("community_memberships".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (0.5ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mPerson Load (1.7ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mLocation Load (1.0ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND (location_type = 'person')) LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.5ms)[0m  SELECT 1 FROM "people" WHERE ("people"."username" = 'chaitanya') AND ("people".id <> 'cUuWlUmJ0r4Oaa3a6HdQnY') LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mSELECT 1 FROM "people" WHERE ("people"."email" = 'chaitanya.saraf1985@gmail.com') AND ("people".id <> 'cUuWlUmJ0r4Oaa3a6HdQnY') LIMIT 1[0m
  [1m[35mAREL (0.8ms)[0m  UPDATE "people" SET "preferences" = '---
email_about_new_messages: true
email_about_new_comments_to_own_listing: true
email_when_conversation_accepted: true
email_when_conversation_rejected: true
email_about_new_badges: true
email_about_new_received_testimonials: true
email_about_accept_reminders: true
email_about_testimonial_reminders: true
email_about_weekly_events: true
' WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY'
[paperclip] Saving attachments.
  [1m[36mSQL (21.4ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (0.5ms)[0m  BEGIN
[paperclip] identify -format %wx%h '/tmp/stream20121130-4530-ufw9hl.jpg[0]' 2>/dev/null
[paperclip] convert '/tmp/stream20121130-4530-ufw9hl.jpg[0]' -resize "200x350>" '/tmp/stream20121130-4530-ufw9hl20121130-4530-i4y175' 2>/dev/null
[paperclip] identify -format %wx%h '/tmp/stream20121130-4530-ufw9hl.jpg[0]' 2>/dev/null
[paperclip] convert '/tmp/stream20121130-4530-ufw9hl.jpg[0]' -resize "x50" -crop "50x50+8+0" +repage '/tmp/stream20121130-4530-ufw9hl20121130-4530-1v4dgk2' 2>/dev/null
[paperclip] identify -format %wx%h '/tmp/stream20121130-4530-ufw9hl.jpg[0]' 2>/dev/null
[paperclip] convert '/tmp/stream20121130-4530-ufw9hl.jpg[0]' -resize "600x800>" '/tmp/stream20121130-4530-ufw9hl20121130-4530-kqapc2' 2>/dev/null
  [1m[36mSQL (1.1ms)[0m  [1mSELECT 1 FROM "people" WHERE ("people"."username" = 'chaitanya') AND ("people".id <> 'cUuWlUmJ0r4Oaa3a6HdQnY') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  SELECT 1 FROM "people" WHERE ("people"."email" = 'chaitanya.saraf1985@gmail.com') AND ("people".id <> 'cUuWlUmJ0r4Oaa3a6HdQnY') LIMIT 1
  [1m[36mAREL (1.3ms)[0m  [1mUPDATE "people" SET "image_file_name" = '300_Wallpaper.jpg', "image_file_size" = 86202, "image_updated_at" = '2012-11-30 07:42:24.418596', "updated_at" = '2012-11-30 07:42:25.169771', "preferences" = '---
email_about_new_messages: true
email_about_new_comments_to_own_listing: true
email_when_conversation_accepted: true
email_when_conversation_rejected: true
email_about_new_badges: true
email_about_new_received_testimonials: true
email_about_accept_reminders: true
email_about_testimonial_reminders: true
email_about_weekly_events: true
' WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY'[0m
[paperclip] Saving attachments.
[paperclip] saving /home/chaitanya/workArea/ST-to-RGF/public/system/images/cUuWlUmJ0r4Oaa3a6HdQnY/original/300_Wallpaper.jpg
[paperclip] saving /home/chaitanya/workArea/ST-to-RGF/public/system/images/cUuWlUmJ0r4Oaa3a6HdQnY/medium/300_Wallpaper.jpg
[paperclip] saving /home/chaitanya/workArea/ST-to-RGF/public/system/images/cUuWlUmJ0r4Oaa3a6HdQnY/thumb/300_Wallpaper.jpg
  [1m[35mSQL (18.4ms)[0m  COMMIT
Redirected to http://lvh.me:3000/en/people/cUuWlUmJ0r4Oaa3a6HdQnY/settings/avatar
Completed 302 Found in 1535ms


Started GET "/en/people/cUuWlUmJ0r4Oaa3a6HdQnY/settings/avatar" for 127.0.0.1 at 2012-11-30 13:12:25 +0530
  Processing by SettingsController#avatar as HTML
  Parameters: {"locale"=>"en", "person_id"=>"cUuWlUmJ0r4Oaa3a6HdQnY"}
  [1m[36mPK and serial sequence (2.3ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (2.8ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (1.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (29.5ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (1.6ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (3.6ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (2.0ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (1.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.6ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (0.7ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 3 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 3 AND (("community_memberships".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (0.5ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 3 LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 35
host: !binary |-
 bHZoLm1l
', NULL, '2012-11-30 07:42:26.011669', NULL, NULL, NULL, '2012-11-30 07:42:26.011785', '2012-11-30 07:42:26.011785', NULL) RETURNING "id"
  [1m[36mSQL (20.2ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (0.8ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 3 AND (("community_memberships".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (1.0ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mPerson Load (1.3ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1
Rendered layouts/_kissmetrics.haml (3.1ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (66.8ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.4ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (12.4ms)
Rendered communities/default/logo/logo.haml (2.3ms)
Rendered layouts/_no_javascript.haml (16.9ms)
Rendered layouts/_facebook_sdk.haml (2.5ms)
  [1m[36mSQL (2.2ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (2.4ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (3.4ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (5.9ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (3.4ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.8ms)[0m  SELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) AND participations.person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) AND participations.person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')[0m
Rendered layouts/_logged_in_messages_icon.haml (806.1ms)
  [1m[35mSQL (1.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')[0m
Rendered layouts/_logged_in_notifications_icon.haml (13.0ms)
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'cUuWlUmJ0r4Oaa3a6HdQnY') AND (acceptance is null)[0m
Rendered layouts/_logged_in_swap_offers_icon.haml (13.3ms)
  [1m[35mCommunityMembership Load (1.1ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."community_id" = 3 AND ("community_memberships".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY') LIMIT 1
Rendered layouts/_logged_in.haml (850.2ms)
Rendered layouts/_notifications.haml (7.5ms)
Rendered layouts/_display_popup.haml (8.5ms)
Rendered layouts/application.haml (1023.5ms)
Rendered settings/avatar.haml within layouts/settings (1039.9ms)
Completed 200 OK in 1720ms (Views: 1009.4ms | ActiveRecord: 203.3ms | Sphinx: 0.0ms)


Started GET "/en/homepage" for 127.0.0.1 at 2012-11-30 13:12:32 +0530
  Processing by HomepageController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mPK and serial sequence (4.5ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (3.4ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (1.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (0.6ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (1.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.8ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.3ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 3 LIMIT 1
  [1m[36mSQL (1.7ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 3 AND (("community_memberships".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (2.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (0.4ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 3 LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 35
host: !binary |-
 bHZoLm1l
', NULL, '2012-11-30 07:42:33.567220', NULL, NULL, NULL, '2012-11-30 07:42:33.567515', '2012-11-30 07:42:33.567515', NULL) RETURNING "id"
  [1m[36mSQL (17.1ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (1.4ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 3 AND (("community_memberships".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (1.0ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
~~~~~~~~~~~~~~~~~~3
  [1m[35mSQL (1.4ms)[0m  SELECT 1 FROM "people" INNER JOIN "community_memberships" ON "people".id = "community_memberships".person_id WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND (("community_memberships".community_id = 3)) LIMIT 1
  [1m[36mSQL (1.9ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (1.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (4.1ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (3.5ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (6.1ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (3.5ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (2.2ms)[0m  [1mSELECT "communities".* FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE (("community_memberships".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY'))[0m
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"news_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 3)[0m
  [1m[35mCommunity Load (1.6ms)[0m  SELECT "communities".* FROM "communities"
  [1m[36mSQL (1.0ms)[0m  [1mSELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 3) LIMIT 2[0m
  [1m[35mSQL (2.4ms)[0m  SELECT COUNT(*) FROM "listings" WHERE "listings"."listing_type" = 'offer' AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1','3','2')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '3')
 ) AND (open = '1' AND (valid_until IS NULL OR valid_until > '2012-11-30 07:42:33'))
  [1m[36mListing Load (3.8ms)[0m  [1mSELECT "listings".* FROM "listings" WHERE "listings"."listing_type" = 'offer' AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1','3','2')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '3')
 ) AND (open = '1' AND (valid_until IS NULL OR valid_until > '2012-11-30 07:42:33')) ORDER BY listings.created_at DESC LIMIT 15 OFFSET 0[0m
  [1m[35mListingImage Load (1.3ms)[0m  SELECT "listing_images".* FROM "listing_images" WHERE ("listing_images".listing_id IN (12,8,7,6,2,1))
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listing_images"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (0.7ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"diet_listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.4ms)[0m  SELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 12)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"comments"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.7ms)[0m  SELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 12)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  SELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 8)
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 8)[0m
  [1m[35mPerson Load (1.5ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cPLJhUmKGr4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mSELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 7)[0m
  [1m[35mDietListing Load (0.8ms)[0m  SELECT "diet_listings".* FROM "diet_listings" WHERE ("diet_listings".listing_id = 7)
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"diets"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mDiet Load (0.9ms)[0m  SELECT "diets".* FROM "diets" WHERE "diets"."id" = 2 LIMIT 1
  [1m[36mSQL (1.6ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"diets"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.0ms)[0m  SELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 7)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cPLJhUmKGr4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  SELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 6)
  [1m[36mDietListing Load (0.8ms)[0m  [1mSELECT "diet_listings".* FROM "diet_listings" WHERE ("diet_listings".listing_id = 6)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "diets".* FROM "diets" WHERE "diets"."id" = 2 LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mSELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 6)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 2)[0m
  [1m[35mDietListing Load (0.9ms)[0m  SELECT "diet_listings".* FROM "diet_listings" WHERE ("diet_listings".listing_id = 2)
  [1m[36mDiet Load (0.8ms)[0m  [1mSELECT "diets".* FROM "diets" WHERE "diets"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  SELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 2)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 2)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cPLJhUmKGr4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mSELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 1)[0m
  [1m[35mDietListing Load (0.8ms)[0m  SELECT "diet_listings".* FROM "diet_listings" WHERE ("diet_listings".listing_id = 1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "diets".* FROM "diets" WHERE "diets"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  SELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 1)
Rendered homepage/_recent_listing.haml (195.6ms)
  [1m[36mSQL (2.0ms)[0m  [1mSELECT COUNT(*) FROM "listings" WHERE "listings"."listing_type" = 'request' AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1','3','2')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '3')
 ) AND (open = '1' AND (valid_until IS NULL OR valid_until > '2012-11-30 07:42:33'))[0m
Rendered common/_staples.haml (2.3ms)
  [1m[35mCommunityMembership Load (1.1ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 5 LIMIT 1
  [1m[36mCommunityMembership Load (0.9ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 10 LIMIT 1[0m
  [1m[35mCommunityMembership Load (1.1ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mCommunityMembership Load (0.9ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 4 LIMIT 1[0m
  [1m[35mCommunityMembership Load (0.9ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 3 LIMIT 1
  [1m[36mCommunityMembership Load (1.1ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 6 LIMIT 1[0m
  [1m[35mCommunityMembership Load (0.9ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 7 LIMIT 1
  [1m[36mCommunityMembership Load (0.9ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 8 LIMIT 1[0m
  [1m[35mCommunityMembership Load (0.9ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 9 LIMIT 1
  [1m[36mCommunityMembership Load (0.9ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 2 LIMIT 1[0m
Rendered homepage/_user_communities.haml (92.6ms)
Rendered common/_staples.haml (2.3ms)
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"event_feed_events"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "event_feed_events" WHERE ("event_feed_events".community_id = 3)[0m
Rendered common/_staples.haml (2.3ms)
  [1m[35mEventFeedEvent Load (1.5ms)[0m  SELECT "event_feed_events".* FROM "event_feed_events" WHERE ("event_feed_events".community_id = 3) ORDER BY id DESC LIMIT 5
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1[0m
Rendered event_feed_events/_login.haml (5.1ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1
Rendered event_feed_events/_login.haml (4.2ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1[0m
Rendered event_feed_events/_login.haml (3.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1
Rendered event_feed_events/_login.haml (4.4ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1[0m
Rendered event_feed_events/_login.haml (3.9ms)
Rendered homepage/_event_feed_event.haml (41.6ms)
Rendered homepage/_event_feed.haml (48.0ms)
Rendered common/_staples.haml (2.1ms)
Rendered common/_staples.haml (2.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 3) LIMIT 2
Rendered homepage/_news_items.haml (5.1ms)
Rendered common/_staples.haml (2.1ms)
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"polls"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPoll Load (1.0ms)[0m  SELECT "polls".* FROM "polls" WHERE "polls"."active" = 't' AND ("polls".community_id = 3) LIMIT 1
Rendered layouts/_kissmetrics.haml (3.2ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.6ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (69.6ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (77.7ms)
Rendered communities/default/logo/logo.haml (2.4ms)
Rendered layouts/_no_javascript.haml (17.2ms)
Rendered layouts/_facebook_sdk.haml (2.5ms)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.1ms)[0m  [1mSELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) AND participations.person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) AND participations.person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')
Rendered layouts/_logged_in_messages_icon.haml (18.2ms)
  [1m[36mSQL (0.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.4ms)[0m  SELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')
Rendered layouts/_logged_in_notifications_icon.haml (8.5ms)
  [1m[36mSQL (0.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.4ms)[0m  SELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'cUuWlUmJ0r4Oaa3a6HdQnY') AND (acceptance is null)
Rendered layouts/_logged_in_swap_offers_icon.haml (8.3ms)
  [1m[36mCommunityMembership Load (0.5ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."community_id" = 3 AND ("community_memberships".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY') LIMIT 1[0m
Rendered layouts/_logged_in.haml (48.3ms)
Rendered layouts/_notifications.haml (4.5ms)
Rendered layouts/_display_popup.haml (6.8ms)
Rendered homepage/index.haml within layouts/application (664.3ms)
Completed 200 OK in 1841ms (Views: 607.4ms | ActiveRecord: 148.6ms | Sphinx: 0.0ms)


Started GET "/en/listings/new/offer" for 127.0.0.1 at 2012-11-30 13:12:37 +0530
  Processing by ListingsController#new as HTML
  Parameters: {"locale"=>"en", "type"=>"offer"}
  [1m[35mPK and serial sequence (7.6ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (3.6ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (3.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.3ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.1ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (2.9ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (1.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (0.7ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 3 LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 3 AND (("community_memberships".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (0.4ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 3 LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  BEGIN
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 35
host: !binary |-
 bHZoLm1l
', NULL, '2012-11-30 07:42:37.812983', NULL, NULL, NULL, '2012-11-30 07:42:37.813100', '2012-11-30 07:42:37.813100', NULL) RETURNING "id"[0m
  [1m[35mSQL (18.2ms)[0m  COMMIT
  [1m[36mSQL (1.7ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 3 AND (("community_memberships".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.1ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mSQL (1.9ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.0ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (3.4ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (6.6ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (4.1ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mLocation Load (1.2ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND (location_type = 'person')) LIMIT 1
  [1m[36mSQL (1.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"locations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listing_images"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
Rendered listings/form/_javascripts.haml (3.4ms)
Rendered listings/form/_share_type.haml (2.4ms)
Rendered listings/form/_title.haml (2.5ms)
Rendered listings/form/_description.haml (68.7ms)
Rendered listings/form/_receipe.haml (2.7ms)
Rendered listings/form/_portions.haml (3.0ms)
  [1m[36mActsAsTaggableOn::Tag Load (1.3ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags".id = "taggings".tag_id WHERE (("taggings".taggable_id = NULL) AND ("taggings".taggable_type = 'Listing')) AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
Rendered listings/form/_tag_list.haml (9.1ms)
Rendered listings/form/_restriction_list.html.haml (5.8ms)
Rendered listings/form/_valid_until_radio_buttons.haml (8.0ms)
Rendered listings/form/_valid_until.haml (13.3ms)
Rendered listings/form/_origin.haml (4.9ms)
  [1m[35mLocation Load (1.3ms)[0m  SELECT "locations".* FROM "locations" WHERE ("locations".community_id = 3) LIMIT 1
Rendered listings/form/_googlemap.haml (6.7ms)
Rendered listings/form/_images.haml (12.0ms)
Rendered listings/form/_visibility.haml (2.9ms)
Rendered listings/form/_additional_details.html.haml (4.1ms)
Rendered listings/form/_send_button.haml (2.1ms)
Rendered listings/help_texts/_help_share_type.en.haml (2.1ms)
Rendered listings/help_texts/_help_tags.en.haml (2.1ms)
Rendered listings/help_texts/_help_valid_until.en.haml (2.2ms)
Rendered listings/_help_texts.haml (15.2ms)
Rendered listings/form/_form_content.haml (187.4ms)
Rendered layouts/_kissmetrics.haml (3.3ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.8ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.5ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (10.8ms)
Rendered communities/default/logo/logo.haml (2.4ms)
Rendered layouts/_no_javascript.haml (17.4ms)
Rendered layouts/_facebook_sdk.haml (2.5ms)
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) AND participations.person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) AND participations.person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')
Rendered layouts/_logged_in_messages_icon.haml (17.6ms)
  [1m[36mSQL (0.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.4ms)[0m  SELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')
Rendered layouts/_logged_in_notifications_icon.haml (9.5ms)
  [1m[36mSQL (0.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.8ms)[0m  SELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'cUuWlUmJ0r4Oaa3a6HdQnY') AND (acceptance is null)
Rendered layouts/_logged_in_swap_offers_icon.haml (9.0ms)
  [1m[36mCommunityMembership Load (1.0ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."community_id" = 3 AND ("community_memberships".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY') LIMIT 1[0m
Rendered layouts/_logged_in.haml (50.5ms)
Rendered layouts/_notifications.haml (4.6ms)
Rendered layouts/_display_popup.haml (6.7ms)
Rendered listings/new.haml within layouts/application (409.9ms)
Completed 200 OK in 1624ms (Views: 405.1ms | ActiveRecord: 98.0ms | Sphinx: 0.0ms)


Started POST "/listings?locale=en" for 127.0.0.1 at 2012-11-30 13:13:22 +0530
  Processing by ListingsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"bDTy7ussIjNMoM50UQkELZlF6pND/hp+APgmThHrhp8=", "listing"=>{"share_type"=>"trade", "listing_type"=>"offer", "category"=>"item", "title"=>"photo test", "description"=>"description", "link_to_information"=>"", "number_of_portions"=>"portions", "tag_list"=>"", "diet_tag_names"=>"", "origin"=>"", "origin_loc_attributes"=>{"address"=>"", "google_address"=>"", "latitude"=>"", "longitude"=>"", "location_type"=>"origin_loc"}, "listing_images_attributes"=>{"0"=>{"image"=>#<ActionDispatch::Http::UploadedFile:0xbc00a48 @original_filename="amazing_flowers-wide.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"listing[listing_images_attributes][0][image]\"; filename=\"amazing_flowers-wide.jpg\"\r\nContent-Type: image/jpeg\r\n", @tempfile=#<File:/tmp/RackMultipart20121130-4530-b4guks>>}}, "visibility"=>"everybody", "current_community_id"=>"3", "story_behind"=>"", "ingredient_list"=>"", "trade_conditions"=>""}, "valid_until_select"=>"for_now", "commit"=>"Save", "locale"=>"en"}
  [1m[35mPK and serial sequence (6.0ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (2.0ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.3ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (5.9ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (3.4ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.6ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.7ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 3 LIMIT 1[0m
  [1m[35mSQL (1.4ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 3 AND (("community_memberships".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (0.9ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 3 LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  BEGIN
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 35
host: !binary |-
 bHZoLm1l
', NULL, '2012-11-30 07:43:23.712676', NULL, NULL, NULL, '2012-11-30 07:43:23.712791', '2012-11-30 07:43:23.712791', NULL) RETURNING "id"[0m
  [1m[35mSQL (39.3ms)[0m  COMMIT
  [1m[36mSQL (1.2ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 3 AND (("community_memberships".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (0.8ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mSQL (1.8ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (3.4ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (5.9ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (3.4ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.4ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags".id = "taggings".tag_id WHERE (("taggings".taggable_id = NULL) AND ("taggings".taggable_type = 'Listing')) AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listing_images"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
[paperclip] identify -format %wx%h '/tmp/stream20121130-4530-lvz2sb.jpg[0]' 2>/dev/null
[paperclip] convert '/tmp/stream20121130-4530-lvz2sb.jpg[0]' -resize "300x640>" '/tmp/stream20121130-4530-lvz2sb20121130-4530-c7469' 2>/dev/null
[paperclip] identify -format %wx%h '/tmp/stream20121130-4530-lvz2sb.jpg[0]' 2>/dev/null
[paperclip] convert '/tmp/stream20121130-4530-lvz2sb.jpg[0]' -resize "x85" -crop "85x85+25+0" +repage '/tmp/stream20121130-4530-lvz2sb20121130-4530-11nyfur' 2>/dev/null
[paperclip] identify -format %wx%h '/tmp/stream20121130-4530-lvz2sb.jpg[0]' 2>/dev/null
[paperclip] convert '/tmp/stream20121130-4530-lvz2sb.jpg[0]' -resize "640x640>" '/tmp/stream20121130-4530-lvz2sb20121130-4530-156uwr9' 2>/dev/null
  [1m[35mSQL (1.0ms)[0m  BEGIN
  [1m[36mSQL (2.8ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities_listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.4ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mCommunity Load (2.0ms)[0m  SELECT "communities".* FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE (("community_memberships".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY'))
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.1ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listings"'::regclass
  [1m[36mSQL (30.0ms)[0m  [1mINSERT INTO "listings" ("author_id", "category", "title", "times_viewed", "language", "created_at", "updated_at", "last_modified", "visibility", "listing_type", "description", "origin", "destination", "valid_from", "valid_until", "delta", "open", "share_type", "link_to_information", "number_of_portions", "story_behind", "ingredient_list", "trade_conditions") VALUES ('cUuWlUmJ0r4Oaa3a6HdQnY', 'item', 'photo test', 0, NULL, '2012-11-30 07:43:25.706211', '2012-11-30 07:43:25.706211', NULL, 'everybody', 'offer', 'description', '', NULL, NULL, NULL, 't', 't', 'trade', '', 'portions', '', '', '') RETURNING "id"[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listing_images"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.3ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_images"'::regclass
[0m
  [1m[35mSQL (1.4ms)[0m  INSERT INTO "listing_images" ("listing_id", "created_at", "updated_at", "image_file_name", "image_content_type", "image_file_size", "image_updated_at") VALUES (14, '2012-11-30 07:43:25.752469', '2012-11-30 07:43:25.752469', 'amazing_flowers-wide.jpg', 'image/jpeg', 126378, '2012-11-30 07:43:24.551418') RETURNING "id"
[paperclip] Saving attachments.
  [1m[36mSQL (0.8ms)[0m  [1mROLLBACK[0m
Completed 500 Internal Server Error in 315370ms

CloudFiles::Exception::Connection (Unable to reconnect to storage101.dfw1.clouddrive.com after 4 attempts):
  app/models/person.rb:357:in `create_listing'
  app/controllers/listings_controller.rb:179:in `create'

Rendered /home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/actionpack-3.0.17/lib/action_dispatch/middleware/templates/rescues/_trace.erb (82.7ms)
Rendered /home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/actionpack-3.0.17/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1527.8ms)
Rendered /home/chaitanya/.rvm/gems/ruby-1.9.3-p194@sharetribe/gems/actionpack-3.0.17/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (1648.3ms)
DEPRECATION WARNING: config.action_view.debug_rjs will be removed in 3.1, from 3.1 onwards you will need to install prototype-rails to continue to use RJS templates . (called from <top (required)> at /home/chaitanya/workArea/ST-to-RGF/config/environment.rb:10)
Starting the New Relic Agent.
NewRelic Agent Developer Mode enabled.
To view performance information, go to http://localhost:3000/newrelic
Installed New Relic Browser Monitoring middleware
  [1m[36mSQL (24.0ms)[0m  [1mSHOW client_min_messages[0m
  [1m[35mSQL (0.6ms)[0m  SET client_min_messages TO 'panic'
  [1m[36mSQL (0.6ms)[0m  [1mSET standard_conforming_strings = on[0m
  [1m[35mSQL (0.5ms)[0m  SET client_min_messages TO 'notice'
  [1m[36mSQL (1.1ms)[0m  [1mSET time zone 'UTC'[0m
  [1m[35mSQL (0.6ms)[0m  SHOW TIME ZONE
  [1m[36mPK and serial sequence (257.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (36.2ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
DEPRECATION WARNING: RAILS_ROOT is deprecated. Please use ::Rails.root.to_s. (called from <class:Person> at /home/chaitanya/workArea/ST-to-RGF/app/models/person.rb:134)
DEPRECATION WARNING: config.action_view.debug_rjs will be removed in 3.1, from 3.1 onwards you will need to install prototype-rails to continue to use RJS templates . (called from <top (required)> at /home/chaitanya/workArea/ST-to-RGF/config/environment.rb:10)
Starting the New Relic Agent.
NewRelic Agent Developer Mode enabled.
To view performance information, go to http://localhost:3000/newrelic
Installed New Relic Browser Monitoring middleware
  [1m[36mSQL (29.0ms)[0m  [1mSHOW client_min_messages[0m
  [1m[35mSQL (0.2ms)[0m  SET client_min_messages TO 'panic'
  [1m[36mSQL (0.5ms)[0m  [1mSET standard_conforming_strings = on[0m
  [1m[35mSQL (0.4ms)[0m  SET client_min_messages TO 'notice'
  [1m[36mSQL (1.0ms)[0m  [1mSET time zone 'UTC'[0m
  [1m[35mSQL (0.5ms)[0m  SHOW TIME ZONE
  [1m[36mPK and serial sequence (564.6ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (92.5ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
DEPRECATION WARNING: RAILS_ROOT is deprecated. Please use ::Rails.root.to_s. (called from <class:Person> at /home/chaitanya/workArea/ST-to-RGF/app/models/person.rb:134)


Started GET "/" for 127.0.0.1 at 2012-11-30 16:23:00 +0530
  [1m[36mSQL (0.4ms)[0m  [1mSHOW client_min_messages[0m
  [1m[35mSQL (0.4ms)[0m  SET client_min_messages TO 'panic'
  [1m[36mSQL (0.4ms)[0m  [1mSET standard_conforming_strings = on[0m
  [1m[35mSQL (0.3ms)[0m  SET client_min_messages TO 'notice'
  [1m[36mSQL (0.5ms)[0m  [1mSET time zone 'UTC'[0m
  [1m[35mSQL (0.4ms)[0m  SHOW TIME ZONE
  Processing by DashboardController#index as HTML
  [1m[36mSQL (164.1ms)[0m  [1m SELECT tablename
 FROM pg_tables
 WHERE schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (55.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (102.2ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mLocation Load (22.3ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
~~~~~~~~~~~~~~~dashboard#index~~~~~~~~~3
  [1m[35mPK and serial sequence (3.5ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (4.2ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Rendered dashboard/_header.haml (18.8ms)
  [1m[35mSQL (3.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (137.9ms)[0m  [1mSELECT COUNT(*) FROM "communities"[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "communities"
  [1m[36mCommunity Load (3.0ms)[0m  [1mSELECT "communities".* FROM "communities" ORDER BY name asc[0m
Rendered dashboard/_community_list.haml (190.2ms)
Rendered dashboard/_footer.haml (14.2ms)
Rendered layouts/_kissmetrics.haml (3.2ms)
Rendered layouts/_dashboard_no_javascript.haml (3.0ms)
Rendered dashboard/index.haml within layouts/dashboard (19034.2ms)
Completed 200 OK in 19619ms (Views: 18916.9ms | ActiveRecord: 500.2ms | Sphinx: 0.0ms)


Started GET "/admin/" for 127.0.0.1 at 2012-11-30 16:23:27 +0530
  Processing by DashboardController#index as HTML
  Parameters: {"locale"=>"admin"}
  [1m[35mPK and serial sequence (6.1ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (2.1ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (4.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (4.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mLocation Load (1.7ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
~~~~~~~~~~~~~~~dashboard#index~~~~~~~~~3
  [1m[35mPK and serial sequence (3.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (3.5ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Rendered dashboard/_header.haml (6.5ms)
  [1m[35mSQL (2.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.8ms)[0m  [1mSELECT COUNT(*) FROM "communities"[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "communities"
  [1m[36mCommunity Load (2.7ms)[0m  [1mSELECT "communities".* FROM "communities" ORDER BY name asc[0m
Rendered dashboard/_community_list.haml (47.9ms)
Rendered dashboard/_footer.haml (8.2ms)
Rendered layouts/_kissmetrics.haml (3.6ms)
Rendered layouts/_dashboard_no_javascript.haml (3.9ms)
Rendered dashboard/index.haml within layouts/dashboard (97.9ms)
Completed 200 OK in 486ms (Views: 94.0ms | ActiveRecord: 34.3ms | Sphinx: 0.0ms)


Started GET "/en/tribes" for 127.0.0.1 at 2012-11-30 16:47:39 +0530
  Processing by CommunitiesController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[35mPK and serial sequence (39.5ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.4ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (1.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (0.6ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mLocation Load (1.0ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mPK and serial sequence (5.4ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (2.2ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Rendered dashboard/_header.haml (8.7ms)
Rendered dashboard/_footer.haml (10.2ms)
Rendered layouts/_kissmetrics.haml (3.8ms)
Rendered layouts/_dashboard_no_javascript.haml (71.2ms)
Rendered communities/index.haml within layouts/dashboard (122.6ms)
Completed 200 OK in 575ms (Views: 145.9ms | ActiveRecord: 56.4ms | Sphinx: 0.0ms)


Started GET "/en/tribes?dataType=json" for 127.0.0.1 at 2012-11-30 16:47:45 +0530
  Processing by CommunitiesController#index as JSON
  Parameters: {"dataType"=>"json", "locale"=>"en"}
  [1m[35mPK and serial sequence (6.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.8ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.4ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mLocation Load (1.0ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mPK and serial sequence (6.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (3.8ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"locations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (2.2ms)[0m  SELECT communities.id, name, settings, domain, members_count, latitude, longitude FROM "communities" INNER JOIN "locations" ON "locations"."community_id" = "communities"."id"
Completed 200 OK in 564ms (Views: 179.3ms | ActiveRecord: 35.0ms | Sphinx: 0.0ms)


Started GET "/en/tribes/10" for 127.0.0.1 at 2012-11-30 16:49:00 +0530
  Processing by CommunitiesController#show as 
  Parameters: {"locale"=>"en", "id"=>"10"}
  [1m[36mPK and serial sequence (5.6ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (2.0ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (1.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (0.7ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (1.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mLocation Load (0.9ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
  [1m[36mPK and serial sequence (5.8ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (1.4ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (1.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (35.1ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 10 LIMIT 1
  [1m[36mSQL (3.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
Rendered communities/_map_bubble.haml (101.9ms)
Completed 200 OK in 554ms (Views: 126.8ms | ActiveRecord: 58.5ms | Sphinx: 0.0ms)


Started GET "/en/tribes/new" for 127.0.0.1 at 2012-11-30 16:55:23 +0530
  Processing by CommunitiesController#new as HTML
  Parameters: {"locale"=>"en"}
  [1m[35mPK and serial sequence (6.4ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (3.4ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.3ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mLocation Load (0.6ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mPK and serial sequence (5.4ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (1.6ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (1.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (12.6ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"locations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
Rendered dashboard/_header.haml (8.6ms)
Rendered dashboard/_notifications.haml (3.0ms)
Rendered communities/_select_tribe_category_form.haml (7.4ms)
Rendered dashboard/_footer.haml (9.9ms)
Rendered layouts/_kissmetrics.haml (3.0ms)
Rendered layouts/_dashboard_no_javascript.haml (3.5ms)
Rendered communities/new.haml within layouts/dashboard (72.4ms)
Completed 200 OK in 920ms (Views: 91.7ms | ActiveRecord: 38.5ms | Sphinx: 0.0ms)


Started GET "/en" for 127.0.0.1 at 2012-11-30 16:57:54 +0530
  Processing by DashboardController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mPK and serial sequence (6.3ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (5.5ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (3.6ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (1.9ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (2.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mLocation Load (1.0ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
~~~~~~~~~~~~~~~dashboard#index~~~~~~~~~3
  [1m[36mPK and serial sequence (6.1ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (3.5ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Rendered dashboard/_header.haml (7.0ms)
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.8ms)[0m  SELECT COUNT(*) FROM "communities"
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "communities"[0m
  [1m[35mCommunity Load (1.9ms)[0m  SELECT "communities".* FROM "communities" ORDER BY name asc
Rendered dashboard/_community_list.haml (39.2ms)
Rendered dashboard/_footer.haml (8.3ms)
Rendered layouts/_kissmetrics.haml (2.9ms)
Rendered layouts/_dashboard_no_javascript.haml (3.0ms)
Rendered dashboard/index.haml within layouts/dashboard (143.9ms)
Completed 200 OK in 550ms (Views: 142.4ms | ActiveRecord: 35.7ms | Sphinx: 0.0ms)


Started GET "/en?cid=3" for 127.0.0.1 at 2012-11-30 16:58:03 +0530
  Processing by DashboardController#index as HTML
  Parameters: {"cid"=>"3", "locale"=>"en"}
Redirected to http://lvh.me:3000/en/homepage
Completed 302 Found in 1ms


Started GET "/en/homepage" for 127.0.0.1 at 2012-11-30 16:58:03 +0530
  Processing by HomepageController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mPK and serial sequence (6.1ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (3.9ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (1.5ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (1.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (5.7ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (1.4ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (1.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (0.7ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 3 LIMIT 1
  [1m[36mSQL (33.2ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 3 AND (("community_memberships".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (2.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (1.7ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 3 LIMIT 1
  [1m[36mSQL (49.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"delayed_jobs"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.6ms)[0m  BEGIN
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"delayed_jobs"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (4.3ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"delayed_jobs"'::regclass
  [1m[36mSQL (128.4ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 35
host: !binary |-
 bHZoLm1l
', NULL, '2012-11-30 11:28:04.004005', NULL, NULL, NULL, '2012-11-30 11:28:04.004129', '2012-11-30 11:28:04.004129', NULL) RETURNING "id"[0m
  [1m[35mSQL (8.1ms)[0m  COMMIT
  [1m[36mSQL (1.5ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 3 AND (("community_memberships".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (0.5ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
~~~~~~~~~~~~~~~~~~3
  [1m[36mSQL (0.7ms)[0m  [1mSELECT 1 FROM "people" INNER JOIN "community_memberships" ON "people".id = "community_memberships".person_id WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND (("community_memberships".community_id = 3)) LIMIT 1[0m
  [1m[35mSQL (1.9ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (1.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (2.3ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (1.3ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (2.8ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (1.6ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.8ms)[0m  SELECT "communities".* FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE (("community_memberships".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY'))
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"news_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.5ms)[0m  SELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 3)
  [1m[36mCommunity Load (1.5ms)[0m  [1mSELECT "communities".* FROM "communities"[0m
  [1m[35mSQL (1.0ms)[0m  SELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 3) LIMIT 2
  [1m[36mSQL (34.1ms)[0m  [1mSELECT COUNT(*) FROM "listings" WHERE "listings"."listing_type" = 'offer' AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1','3','2')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '3')
 ) AND (open = '1' AND (valid_until IS NULL OR valid_until > '2012-11-30 11:28:04'))[0m
  [1m[35mListing Load (24.3ms)[0m  SELECT "listings".* FROM "listings" WHERE "listings"."listing_type" = 'offer' AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1','3','2')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '3')
 ) AND (open = '1' AND (valid_until IS NULL OR valid_until > '2012-11-30 11:28:04')) ORDER BY listings.created_at DESC LIMIT 15 OFFSET 0
  [1m[36mListingImage Load (9.3ms)[0m  [1mSELECT "listing_images".* FROM "listing_images" WHERE ("listing_images".listing_id IN (12,8,7,6,2,1))[0m
  [1m[35mSQL (1.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listing_images"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.2ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (1.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"diet_listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (26.7ms)[0m  [1mSELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 12)[0m
  [1m[35mSQL (17.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"comments"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.3ms)[0m  [1mSELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 12)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (1.0ms)[0m  [1mSELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 8)[0m
  [1m[35mSQL (0.6ms)[0m  SELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 8)
  [1m[36mPerson Load (0.7ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cPLJhUmKGr4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  SELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 7)
  [1m[36mDietListing Load (0.5ms)[0m  [1mSELECT "diet_listings".* FROM "diet_listings" WHERE ("diet_listings".listing_id = 7)[0m
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"diets"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mDiet Load (15.4ms)[0m  [1mSELECT "diets".* FROM "diets" WHERE "diets"."id" = 2 LIMIT 1[0m
  [1m[35mSQL (1.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"diets"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.0ms)[0m  [1mSELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 7)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cPLJhUmKGr4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (1.1ms)[0m  [1mSELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 6)[0m
  [1m[35mDietListing Load (0.8ms)[0m  SELECT "diet_listings".* FROM "diet_listings" WHERE ("diet_listings".listing_id = 6)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "diets".* FROM "diets" WHERE "diets"."id" = 2 LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 6)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  SELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 2)
  [1m[36mDietListing Load (0.9ms)[0m  [1mSELECT "diet_listings".* FROM "diet_listings" WHERE ("diet_listings".listing_id = 2)[0m
  [1m[35mDiet Load (0.4ms)[0m  SELECT "diets".* FROM "diets" WHERE "diets"."id" = 1 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mSELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 2)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 2)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cPLJhUmKGr4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  SELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 1)
  [1m[36mDietListing Load (0.4ms)[0m  [1mSELECT "diet_listings".* FROM "diet_listings" WHERE ("diet_listings".listing_id = 1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "diets".* FROM "diets" WHERE "diets"."id" = 1 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mSELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 1)[0m
Rendered homepage/_recent_listing.haml (7505.4ms)
  [1m[35mSQL (1.7ms)[0m  SELECT COUNT(*) FROM "listings" WHERE "listings"."listing_type" = 'request' AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1','3','2')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '3')
 ) AND (open = '1' AND (valid_until IS NULL OR valid_until > '2012-11-30 11:28:04'))
Rendered common/_staples.haml (5.0ms)
  [1m[36mCommunityMembership Load (1.1ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 5 LIMIT 1[0m
  [1m[35mCommunityMembership Load (0.9ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 10 LIMIT 1
  [1m[36mCommunityMembership Load (0.5ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mCommunityMembership Load (0.8ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 4 LIMIT 1
  [1m[36mCommunityMembership Load (0.4ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 3 LIMIT 1[0m
  [1m[35mCommunityMembership Load (0.4ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 6 LIMIT 1
  [1m[36mCommunityMembership Load (0.4ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 7 LIMIT 1[0m
  [1m[35mCommunityMembership Load (0.3ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 8 LIMIT 1
  [1m[36mCommunityMembership Load (0.3ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 9 LIMIT 1[0m
  [1m[35mCommunityMembership Load (1.3ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 2 LIMIT 1
Rendered homepage/_user_communities.haml (81.1ms)
Rendered common/_staples.haml (2.3ms)
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"event_feed_events"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (30.1ms)[0m  SELECT COUNT(*) FROM "event_feed_events" WHERE ("event_feed_events".community_id = 3)
Rendered common/_staples.haml (3.8ms)
  [1m[36mEventFeedEvent Load (2.3ms)[0m  [1mSELECT "event_feed_events".* FROM "event_feed_events" WHERE ("event_feed_events".community_id = 3) ORDER BY id DESC LIMIT 5[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1
Rendered event_feed_events/_login.haml (4.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1[0m
Rendered event_feed_events/_login.haml (3.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1
Rendered event_feed_events/_login.haml (4.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1[0m
Rendered event_feed_events/_login.haml (4.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1
Rendered event_feed_events/_login.haml (4.0ms)
Rendered homepage/_event_feed_event.haml (41.4ms)
Rendered homepage/_event_feed.haml (49.0ms)
Rendered common/_staples.haml (2.1ms)
Rendered common/_staples.haml (1.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 3) LIMIT 2[0m
Rendered homepage/_news_items.haml (5.1ms)
Rendered common/_staples.haml (2.1ms)
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"polls"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPoll Load (1.4ms)[0m  [1mSELECT "polls".* FROM "polls" WHERE "polls"."active" = 't' AND ("polls".community_id = 3) LIMIT 1[0m
Rendered layouts/_kissmetrics.haml (3.4ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (2.9ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (3.7ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (167.4ms)
Rendered communities/default/logo/logo.haml (2.3ms)
Rendered layouts/_no_javascript.haml (28.5ms)
Rendered layouts/_facebook_sdk.haml (2.5ms)
  [1m[35mSQL (1.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (16.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (67.0ms)[0m  SELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) AND participations.person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) AND participations.person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')[0m
Rendered layouts/_logged_in_messages_icon.haml (103.7ms)
  [1m[35mSQL (1.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.9ms)[0m  [1mSELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')[0m
Rendered layouts/_logged_in_notifications_icon.haml (16.8ms)
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (26.0ms)[0m  [1mSELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'cUuWlUmJ0r4Oaa3a6HdQnY') AND (acceptance is null)[0m
Rendered layouts/_logged_in_swap_offers_icon.haml (46.2ms)
  [1m[35mCommunityMembership Load (1.3ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."community_id" = 3 AND ("community_memberships".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY') LIMIT 1
Rendered layouts/_logged_in.haml (195.8ms)
Rendered layouts/_notifications.haml (14.0ms)
Rendered layouts/_display_popup.haml (7.2ms)
Rendered homepage/index.haml within layouts/application (8589.5ms)
Completed 200 OK in 10343ms (Views: 8310.3ms | ActiveRecord: 593.6ms | Sphinx: 0.0ms)
DEPRECATION WARNING: config.action_view.debug_rjs will be removed in 3.1, from 3.1 onwards you will need to install prototype-rails to continue to use RJS templates . (called from <top (required)> at /home/chaitanya/workArea/ST-to-RGF/config/environment.rb:10)
Starting the New Relic Agent.
NewRelic Agent Developer Mode enabled.
To view performance information, go to http://localhost:3000/newrelic
Installed New Relic Browser Monitoring middleware
  [1m[36mSQL (0.8ms)[0m  [1mSHOW client_min_messages[0m
  [1m[35mSQL (0.4ms)[0m  SET client_min_messages TO 'panic'
  [1m[36mSQL (0.4ms)[0m  [1mSET standard_conforming_strings = on[0m
  [1m[35mSQL (0.4ms)[0m  SET client_min_messages TO 'notice'
  [1m[36mSQL (0.6ms)[0m  [1mSET time zone 'UTC'[0m
  [1m[35mSQL (0.4ms)[0m  SHOW TIME ZONE
  [1m[36mPK and serial sequence (4.6ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (3.4ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
DEPRECATION WARNING: RAILS_ROOT is deprecated. Please use ::Rails.root.to_s. (called from <class:Person> at /home/chaitanya/workArea/ST-to-RGF/app/models/person.rb:134)


Started GET "/en/homepage" for 127.0.0.1 at 2012-11-30 17:48:53 +0530
  [1m[36mSQL (0.4ms)[0m  [1mSHOW client_min_messages[0m
  [1m[35mSQL (0.5ms)[0m  SET client_min_messages TO 'panic'
  [1m[36mSQL (0.4ms)[0m  [1mSET standard_conforming_strings = on[0m
  [1m[35mSQL (0.4ms)[0m  SET client_min_messages TO 'notice'
  [1m[36mSQL (0.6ms)[0m  [1mSET time zone 'UTC'[0m
  [1m[35mSQL (0.4ms)[0m  SHOW TIME ZONE
  Processing by HomepageController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mSQL (6.6ms)[0m  [1m SELECT tablename
 FROM pg_tables
 WHERE schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (6.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (4.3ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (7.6ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (2.4ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (1.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.8ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 3 LIMIT 1[0m
  [1m[35mSQL (1.9ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 3 AND (("community_memberships".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (1.2ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 3 LIMIT 1[0m
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"delayed_jobs"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.5ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"delayed_jobs"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.1ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"delayed_jobs"'::regclass
[0m
  [1m[35mSQL (1.4ms)[0m  INSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 35
host: !binary |-
 bHZoLm1l
', NULL, '2012-11-30 12:18:54.411181', NULL, NULL, NULL, '2012-11-30 12:18:54.411304', '2012-11-30 12:18:54.411304', NULL) RETURNING "id"
  [1m[36mSQL (34.6ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (1.1ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 3 AND (("community_memberships".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (0.8ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
~~~~~~~~~~~~~~~~~~3
  [1m[35mSQL (0.7ms)[0m  SELECT 1 FROM "people" INNER JOIN "community_memberships" ON "people".id = "community_memberships".person_id WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND (("community_memberships".community_id = 3)) LIMIT 1
  [1m[36mSQL (2.5ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (1.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.0ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (3.4ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (2.3ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (1.2ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (2.0ms)[0m  [1mSELECT "communities".* FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE (("community_memberships".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY'))[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"news_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.7ms)[0m  [1mSELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 3)[0m
  [1m[35mCommunity Load (1.7ms)[0m  SELECT "communities".* FROM "communities"
  [1m[36mSQL (0.7ms)[0m  [1mSELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 3) LIMIT 2[0m
  [1m[35mSQL (3.9ms)[0m  SELECT COUNT(*) FROM "listings" WHERE "listings"."listing_type" = 'offer' AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1','3','2')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '3')
 ) AND (open = '1' AND (valid_until IS NULL OR valid_until > '2012-11-30 12:18:54'))
  [1m[36mListing Load (5.2ms)[0m  [1mSELECT "listings".* FROM "listings" WHERE "listings"."listing_type" = 'offer' AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1','3','2')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '3')
 ) AND (open = '1' AND (valid_until IS NULL OR valid_until > '2012-11-30 12:18:54')) ORDER BY listings.created_at DESC LIMIT 15 OFFSET 0[0m
  [1m[35mListingImage Load (1.9ms)[0m  SELECT "listing_images".* FROM "listing_images" WHERE ("listing_images".listing_id IN (12,8,7,6,2,1))
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listing_images"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (2.3ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"diet_listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.2ms)[0m  SELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 12)
  [1m[36mSQL (1.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"comments"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.6ms)[0m  SELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 12)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  SELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 8)
  [1m[36mSQL (0.5ms)[0m  [1mSELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 8)[0m
  [1m[35mPerson Load (0.7ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cPLJhUmKGr4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 7)[0m
  [1m[35mDietListing Load (1.0ms)[0m  SELECT "diet_listings".* FROM "diet_listings" WHERE ("diet_listings".listing_id = 7)
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"diets"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mDiet Load (1.4ms)[0m  SELECT "diets".* FROM "diets" WHERE "diets"."id" = 2 LIMIT 1
  [1m[36mSQL (1.6ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"diets"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.0ms)[0m  SELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 7)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cPLJhUmKGr4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 6)
  [1m[36mDietListing Load (0.8ms)[0m  [1mSELECT "diet_listings".* FROM "diet_listings" WHERE ("diet_listings".listing_id = 6)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "diets".* FROM "diets" WHERE "diets"."id" = 2 LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 6)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 2)[0m
  [1m[35mDietListing Load (0.8ms)[0m  SELECT "diet_listings".* FROM "diet_listings" WHERE ("diet_listings".listing_id = 2)
  [1m[36mDiet Load (0.9ms)[0m  [1mSELECT "diets".* FROM "diets" WHERE "diets"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  SELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 2)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 2)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cPLJhUmKGr4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mSELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 1)[0m
  [1m[35mDietListing Load (0.6ms)[0m  SELECT "diet_listings".* FROM "diet_listings" WHERE ("diet_listings".listing_id = 1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "diets".* FROM "diets" WHERE "diets"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  SELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 1)
Rendered homepage/_recent_listing.haml (7464.5ms)
  [1m[36mSQL (2.0ms)[0m  [1mSELECT COUNT(*) FROM "listings" WHERE "listings"."listing_type" = 'request' AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1','3','2')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '3')
 ) AND (open = '1' AND (valid_until IS NULL OR valid_until > '2012-11-30 12:18:54'))[0m
Rendered common/_staples.haml (2.2ms)
  [1m[35mCommunityMembership Load (1.1ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 5 LIMIT 1
  [1m[36mCommunityMembership Load (0.7ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 10 LIMIT 1[0m
  [1m[35mCommunityMembership Load (0.7ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mCommunityMembership Load (1.7ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 4 LIMIT 1[0m
  [1m[35mCommunityMembership Load (1.0ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 3 LIMIT 1
  [1m[36mCommunityMembership Load (1.0ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 6 LIMIT 1[0m
  [1m[35mCommunityMembership Load (0.9ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 7 LIMIT 1
  [1m[36mCommunityMembership Load (0.9ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 8 LIMIT 1[0m
  [1m[35mCommunityMembership Load (0.9ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 9 LIMIT 1
  [1m[36mCommunityMembership Load (1.0ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 2 LIMIT 1[0m
Rendered homepage/_user_communities.haml (93.5ms)
Rendered common/_staples.haml (2.8ms)
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"event_feed_events"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.3ms)[0m  [1mSELECT COUNT(*) FROM "event_feed_events" WHERE ("event_feed_events".community_id = 3)[0m
Rendered common/_staples.haml (3.1ms)
  [1m[35mEventFeedEvent Load (1.6ms)[0m  SELECT "event_feed_events".* FROM "event_feed_events" WHERE ("event_feed_events".community_id = 3) ORDER BY id DESC LIMIT 5
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1[0m
Rendered event_feed_events/_login.haml (4.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1
Rendered event_feed_events/_login.haml (3.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1[0m
Rendered event_feed_events/_login.haml (3.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1
Rendered event_feed_events/_login.haml (3.6ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1[0m
Rendered event_feed_events/_login.haml (3.6ms)
Rendered homepage/_event_feed_event.haml (40.4ms)
Rendered homepage/_event_feed.haml (50.0ms)
Rendered common/_staples.haml (2.1ms)
Rendered common/_staples.haml (2.3ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 3) LIMIT 2
Rendered homepage/_news_items.haml (5.3ms)
Rendered common/_staples.haml (2.7ms)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"polls"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPoll Load (1.4ms)[0m  SELECT "polls".* FROM "polls" WHERE "polls"."active" = 't' AND ("polls".community_id = 3) LIMIT 1
Rendered layouts/_kissmetrics.haml (3.0ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.5ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.2ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (129.6ms)
Rendered communities/default/logo/logo.haml (2.2ms)
Rendered layouts/_no_javascript.haml (15.8ms)
Rendered layouts/_facebook_sdk.haml (2.7ms)
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.7ms)[0m  [1mSELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) AND participations.person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) AND participations.person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')
Rendered layouts/_logged_in_messages_icon.haml (18.0ms)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.4ms)[0m  SELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')
Rendered layouts/_logged_in_notifications_icon.haml (12.3ms)
  [1m[36mSQL (2.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.4ms)[0m  SELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'cUuWlUmJ0r4Oaa3a6HdQnY') AND (acceptance is null)
Rendered layouts/_logged_in_swap_offers_icon.haml (15.0ms)
  [1m[36mCommunityMembership Load (1.1ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."community_id" = 3 AND ("community_memberships".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY') LIMIT 1[0m
Rendered layouts/_logged_in.haml (60.9ms)
Rendered layouts/_notifications.haml (7.0ms)
Rendered layouts/_display_popup.haml (7.0ms)
Rendered homepage/index.haml within layouts/application (26363.1ms)
Completed 200 OK in 27555ms (Views: 26293.9ms | ActiveRecord: 196.6ms | Sphinx: 0.0ms)


Started GET "/en/homepage" for 127.0.0.1 at 2012-11-30 17:49:50 +0530
  Processing by HomepageController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[35mPK and serial sequence (6.6ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (3.6ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (4.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (6.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (1.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (7.8ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (3.5ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (3.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (4.1ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 3 LIMIT 1[0m
  [1m[35mSQL (2.8ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 3 AND (("community_memberships".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mSQL (2.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (1.3ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 3 LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  BEGIN
  [1m[36mSQL (1.9ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 35
host: !binary |-
 bHZoLm1l
', NULL, '2012-11-30 12:19:51.497398', NULL, NULL, NULL, '2012-11-30 12:19:51.497512', '2012-11-30 12:19:51.497512', NULL) RETURNING "id"[0m
  [1m[35mSQL (35.2ms)[0m  COMMIT
  [1m[36mSQL (1.0ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 3 AND (("community_memberships".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (0.7ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
~~~~~~~~~~~~~~~~~~3
  [1m[36mSQL (0.8ms)[0m  [1mSELECT 1 FROM "people" INNER JOIN "community_memberships" ON "people".id = "community_memberships".person_id WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND (("community_memberships".community_id = 3)) LIMIT 1[0m
  [1m[35mSQL (3.8ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (1.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.7ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (3.5ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (5.9ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (3.3ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (2.3ms)[0m  SELECT "communities".* FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE (("community_memberships".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY'))
  [1m[36mSQL (3.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"news_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.6ms)[0m  SELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 3)
  [1m[36mCommunity Load (2.0ms)[0m  [1mSELECT "communities".* FROM "communities"[0m
  [1m[35mSQL (1.1ms)[0m  SELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 3) LIMIT 2
  [1m[36mSQL (4.9ms)[0m  [1mSELECT COUNT(*) FROM "listings" WHERE "listings"."listing_type" = 'offer' AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1','3','2')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '3')
 ) AND (open = '1' AND (valid_until IS NULL OR valid_until > '2012-11-30 12:19:51'))[0m
  [1m[35mListing Load (5.4ms)[0m  SELECT "listings".* FROM "listings" WHERE "listings"."listing_type" = 'offer' AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1','3','2')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '3')
 ) AND (open = '1' AND (valid_until IS NULL OR valid_until > '2012-11-30 12:19:51')) ORDER BY listings.created_at DESC LIMIT 15 OFFSET 0
  [1m[36mListingImage Load (2.1ms)[0m  [1mSELECT "listing_images".* FROM "listing_images" WHERE ("listing_images".listing_id IN (12,8,7,6,2,1))[0m
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listing_images"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.5ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"diet_listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.2ms)[0m  [1mSELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 12)[0m
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"comments"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.3ms)[0m  [1mSELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 12)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 8)[0m
  [1m[35mSQL (0.8ms)[0m  SELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 8)
  [1m[36mPerson Load (1.5ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cPLJhUmKGr4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (1.0ms)[0m  SELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 7)
  [1m[36mDietListing Load (0.9ms)[0m  [1mSELECT "diet_listings".* FROM "diet_listings" WHERE ("diet_listings".listing_id = 7)[0m
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"diets"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mDiet Load (1.3ms)[0m  [1mSELECT "diets".* FROM "diets" WHERE "diets"."id" = 2 LIMIT 1[0m
  [1m[35mSQL (1.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"diets"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.0ms)[0m  [1mSELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 7)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cPLJhUmKGr4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (1.0ms)[0m  [1mSELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 6)[0m
  [1m[35mDietListing Load (1.3ms)[0m  SELECT "diet_listings".* FROM "diet_listings" WHERE ("diet_listings".listing_id = 6)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "diets".* FROM "diets" WHERE "diets"."id" = 2 LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 6)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 2)
  [1m[36mDietListing Load (0.8ms)[0m  [1mSELECT "diet_listings".* FROM "diet_listings" WHERE ("diet_listings".listing_id = 2)[0m
  [1m[35mDiet Load (0.9ms)[0m  SELECT "diets".* FROM "diets" WHERE "diets"."id" = 1 LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mSELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 2)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 2)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cPLJhUmKGr4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 1)
  [1m[36mDietListing Load (0.8ms)[0m  [1mSELECT "diet_listings".* FROM "diet_listings" WHERE ("diet_listings".listing_id = 1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "diets".* FROM "diets" WHERE "diets"."id" = 1 LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mSELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 1)[0m
Rendered homepage/_recent_listing.haml (192.3ms)
  [1m[35mSQL (2.1ms)[0m  SELECT COUNT(*) FROM "listings" WHERE "listings"."listing_type" = 'request' AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1','3','2')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '3')
 ) AND (open = '1' AND (valid_until IS NULL OR valid_until > '2012-11-30 12:19:51'))
Rendered common/_staples.haml (2.7ms)
  [1m[36mCommunityMembership Load (1.1ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 5 LIMIT 1[0m
  [1m[35mCommunityMembership Load (0.9ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 10 LIMIT 1
  [1m[36mCommunityMembership Load (1.6ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mCommunityMembership Load (0.9ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 4 LIMIT 1
  [1m[36mCommunityMembership Load (0.9ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 3 LIMIT 1[0m
  [1m[35mCommunityMembership Load (0.8ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 6 LIMIT 1
  [1m[36mCommunityMembership Load (0.9ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 7 LIMIT 1[0m
  [1m[35mCommunityMembership Load (0.9ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 8 LIMIT 1
  [1m[36mCommunityMembership Load (0.9ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 9 LIMIT 1[0m
  [1m[35mCommunityMembership Load (1.0ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 2 LIMIT 1
Rendered homepage/_user_communities.haml (31.2ms)
Rendered common/_staples.haml (4.0ms)
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"event_feed_events"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.3ms)[0m  SELECT COUNT(*) FROM "event_feed_events" WHERE ("event_feed_events".community_id = 3)
Rendered common/_staples.haml (3.9ms)
  [1m[36mEventFeedEvent Load (2.2ms)[0m  [1mSELECT "event_feed_events".* FROM "event_feed_events" WHERE ("event_feed_events".community_id = 3) ORDER BY id DESC LIMIT 5[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1
Rendered event_feed_events/_login.haml (4.6ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1[0m
Rendered event_feed_events/_login.haml (3.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1
Rendered event_feed_events/_login.haml (3.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1[0m
Rendered event_feed_events/_login.haml (3.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1
Rendered event_feed_events/_login.haml (3.7ms)
Rendered homepage/_event_feed_event.haml (38.0ms)
Rendered homepage/_event_feed.haml (47.4ms)
Rendered common/_staples.haml (2.1ms)
Rendered common/_staples.haml (60.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 3) LIMIT 2[0m
Rendered homepage/_news_items.haml (6.0ms)
Rendered common/_staples.haml (2.3ms)
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"polls"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPoll Load (1.4ms)[0m  [1mSELECT "polls".* FROM "polls" WHERE "polls"."active" = 't' AND ("polls".community_id = 3) LIMIT 1[0m
Rendered layouts/_kissmetrics.haml (3.0ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.7ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.0ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (10.3ms)
Rendered communities/default/logo/logo.haml (2.1ms)
Rendered layouts/_no_javascript.haml (15.1ms)
Rendered layouts/_facebook_sdk.haml (2.3ms)
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.6ms)[0m  SELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) AND participations.person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) AND participations.person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')[0m
Rendered layouts/_logged_in_messages_icon.haml (19.0ms)
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.4ms)[0m  [1mSELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')[0m
Rendered layouts/_logged_in_notifications_icon.haml (13.6ms)
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.4ms)[0m  [1mSELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'cUuWlUmJ0r4Oaa3a6HdQnY') AND (acceptance is null)[0m
Rendered layouts/_logged_in_swap_offers_icon.haml (10.9ms)
  [1m[35mCommunityMembership Load (1.1ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."community_id" = 3 AND ("community_memberships".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY') LIMIT 1
Rendered layouts/_logged_in.haml (58.3ms)
Rendered layouts/_notifications.haml (6.3ms)
Rendered layouts/_display_popup.haml (69.4ms)
Rendered homepage/index.haml within layouts/application (737.3ms)
Completed 200 OK in 1936ms (Views: 664.6ms | ActiveRecord: 209.3ms | Sphinx: 0.0ms)


Started GET "/en/homepage" for 127.0.0.1 at 2012-11-30 17:54:40 +0530
  Processing by HomepageController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mPK and serial sequence (6.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (3.6ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (1.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (0.7ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (1.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (3.6ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (3.5ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.9ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 3 LIMIT 1
  [1m[36mSQL (1.5ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 3 AND (("community_memberships".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (0.9ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 3 LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.2ms)[0m  INSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 35
host: !binary |-
 bHZoLm1l
', NULL, '2012-11-30 12:24:40.744087', NULL, NULL, NULL, '2012-11-30 12:24:40.744205', '2012-11-30 12:24:40.744205', NULL) RETURNING "id"
  [1m[36mSQL (33.9ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (0.9ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 3 AND (("community_memberships".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (1.2ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
~~~~~~~~~~~~~~~~~~3
  [1m[35mSQL (1.3ms)[0m  SELECT 1 FROM "people" INNER JOIN "community_memberships" ON "people".id = "community_memberships".person_id WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND (("community_memberships".community_id = 3)) LIMIT 1
  [1m[36mSQL (1.3ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.1ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (3.4ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (6.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (2.6ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.7ms)[0m  [1mSELECT "communities".* FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE (("community_memberships".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY'))[0m
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"news_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 3)[0m
  [1m[35mCommunity Load (1.7ms)[0m  SELECT "communities".* FROM "communities"
  [1m[36mSQL (1.0ms)[0m  [1mSELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 3) LIMIT 2[0m
  [1m[35mSQL (2.3ms)[0m  SELECT COUNT(*) FROM "listings" WHERE "listings"."listing_type" = 'offer' AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1','3','2')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '3')
 ) AND (open = '1' AND (valid_until IS NULL OR valid_until > '2012-11-30 12:24:40'))
  [1m[36mListing Load (4.1ms)[0m  [1mSELECT "listings".* FROM "listings" WHERE "listings"."listing_type" = 'offer' AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1','3','2')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '3')
 ) AND (open = '1' AND (valid_until IS NULL OR valid_until > '2012-11-30 12:24:40')) ORDER BY listings.created_at DESC LIMIT 15 OFFSET 0[0m
  [1m[35mListingImage Load (1.3ms)[0m  SELECT "listing_images".* FROM "listing_images" WHERE ("listing_images".listing_id IN (12,8,7,6,2,1))
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listing_images"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (1.5ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (1.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"diet_listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.4ms)[0m  SELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 12)
  [1m[36mSQL (1.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"comments"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.6ms)[0m  SELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 12)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  SELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 8)
  [1m[36mSQL (0.5ms)[0m  [1mSELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 8)[0m
  [1m[35mPerson Load (0.9ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cPLJhUmKGr4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mSELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 7)[0m
  [1m[35mDietListing Load (0.5ms)[0m  SELECT "diet_listings".* FROM "diet_listings" WHERE ("diet_listings".listing_id = 7)
  [1m[36mSQL (1.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"diets"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mDiet Load (0.5ms)[0m  SELECT "diets".* FROM "diets" WHERE "diets"."id" = 2 LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"diets"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.5ms)[0m  SELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 7)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cPLJhUmKGr4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  SELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 6)
  [1m[36mDietListing Load (0.4ms)[0m  [1mSELECT "diet_listings".* FROM "diet_listings" WHERE ("diet_listings".listing_id = 6)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "diets".* FROM "diets" WHERE "diets"."id" = 2 LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mSELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 6)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mSELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 2)[0m
  [1m[35mDietListing Load (1.0ms)[0m  SELECT "diet_listings".* FROM "diet_listings" WHERE ("diet_listings".listing_id = 2)
  [1m[36mDiet Load (1.0ms)[0m  [1mSELECT "diets".* FROM "diets" WHERE "diets"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 2)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 2)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cPLJhUmKGr4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mSELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 1)[0m
  [1m[35mDietListing Load (0.4ms)[0m  SELECT "diet_listings".* FROM "diet_listings" WHERE ("diet_listings".listing_id = 1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "diets".* FROM "diets" WHERE "diets"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  SELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 1)
Rendered homepage/_recent_listing.haml (182.5ms)
  [1m[36mSQL (1.2ms)[0m  [1mSELECT COUNT(*) FROM "listings" WHERE "listings"."listing_type" = 'request' AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1','3','2')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '3')
 ) AND (open = '1' AND (valid_until IS NULL OR valid_until > '2012-11-30 12:24:40'))[0m
Rendered common/_staples.haml (2.3ms)
  [1m[35mCommunityMembership Load (0.7ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 5 LIMIT 1
  [1m[36mCommunityMembership Load (0.6ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 10 LIMIT 1[0m
  [1m[35mCommunityMembership Load (0.6ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mCommunityMembership Load (0.5ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 4 LIMIT 1[0m
  [1m[35mCommunityMembership Load (0.5ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 3 LIMIT 1
  [1m[36mCommunityMembership Load (0.9ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 6 LIMIT 1[0m
  [1m[35mCommunityMembership Load (1.0ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 7 LIMIT 1
  [1m[36mCommunityMembership Load (0.5ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 8 LIMIT 1[0m
  [1m[35mCommunityMembership Load (1.0ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 9 LIMIT 1
  [1m[36mCommunityMembership Load (1.0ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 2 LIMIT 1[0m
Rendered homepage/_user_communities.haml (25.9ms)
Rendered common/_staples.haml (2.3ms)
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"event_feed_events"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.7ms)[0m  [1mSELECT COUNT(*) FROM "event_feed_events" WHERE ("event_feed_events".community_id = 3)[0m
Rendered common/_staples.haml (2.8ms)
  [1m[35mEventFeedEvent Load (0.8ms)[0m  SELECT "event_feed_events".* FROM "event_feed_events" WHERE ("event_feed_events".community_id = 3) ORDER BY id DESC LIMIT 5
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1[0m
Rendered event_feed_events/_login.haml (5.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1
Rendered event_feed_events/_login.haml (4.2ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1[0m
Rendered event_feed_events/_login.haml (3.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1
Rendered event_feed_events/_login.haml (4.5ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1[0m
Rendered event_feed_events/_login.haml (4.5ms)
Rendered homepage/_event_feed_event.haml (43.8ms)
Rendered homepage/_event_feed.haml (50.5ms)
Rendered common/_staples.haml (2.3ms)
Rendered common/_staples.haml (2.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 3) LIMIT 2
Rendered homepage/_news_items.haml (67.5ms)
Rendered common/_staples.haml (2.3ms)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"polls"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPoll Load (0.9ms)[0m  SELECT "polls".* FROM "polls" WHERE "polls"."active" = 't' AND ("polls".community_id = 3) LIMIT 1
Rendered layouts/_kissmetrics.haml (3.1ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.8ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.1ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (10.1ms)
Rendered communities/default/logo/logo.haml (2.2ms)
Rendered layouts/_no_javascript.haml (16.6ms)
Rendered layouts/_facebook_sdk.haml (2.4ms)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.8ms)[0m  [1mSELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) AND participations.person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) AND participations.person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')
Rendered layouts/_logged_in_messages_icon.haml (18.5ms)
  [1m[36mSQL (1.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.5ms)[0m  SELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')
Rendered layouts/_logged_in_notifications_icon.haml (13.4ms)
  [1m[36mSQL (1.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.8ms)[0m  SELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'cUuWlUmJ0r4Oaa3a6HdQnY') AND (acceptance is null)
Rendered layouts/_logged_in_swap_offers_icon.haml (10.0ms)
  [1m[36mCommunityMembership Load (0.5ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."community_id" = 3 AND ("community_memberships".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY') LIMIT 1[0m
Rendered layouts/_logged_in.haml (55.7ms)
Rendered layouts/_notifications.haml (4.8ms)
Rendered layouts/_display_popup.haml (6.8ms)
Rendered homepage/index.haml within layouts/application (663.3ms)
Completed 200 OK in 1902ms (Views: 614.6ms | ActiveRecord: 155.8ms | Sphinx: 0.0ms)


Started GET "/en/homepage" for 127.0.0.1 at 2012-11-30 17:55:29 +0530
  Processing by HomepageController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[35mPK and serial sequence (6.5ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (3.5ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (3.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.4ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (5.5ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (1.9ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (1.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.7ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 3 LIMIT 1[0m
  [1m[35mSQL (1.1ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 3 AND (("community_memberships".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (0.7ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 3 LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 35
host: !binary |-
 bHZoLm1l
', NULL, '2012-11-30 12:25:29.804997', NULL, NULL, NULL, '2012-11-30 12:25:29.805131', '2012-11-30 12:25:29.805131', NULL) RETURNING "id"[0m
  [1m[35mSQL (248.7ms)[0m  COMMIT
  [1m[36mSQL (1.4ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 3 AND (("community_memberships".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.2ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
~~~~~~~~~~~~~~~~~~3
  [1m[36mSQL (1.3ms)[0m  [1mSELECT 1 FROM "people" INNER JOIN "community_memberships" ON "people".id = "community_memberships".person_id WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND (("community_memberships".community_id = 3)) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (3.5ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (6.0ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (3.5ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.9ms)[0m  SELECT "communities".* FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE (("community_memberships".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY'))
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"news_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.8ms)[0m  SELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 3)
  [1m[36mCommunity Load (1.0ms)[0m  [1mSELECT "communities".* FROM "communities"[0m
  [1m[35mSQL (0.5ms)[0m  SELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 3) LIMIT 2
  [1m[36mSQL (1.3ms)[0m  [1mSELECT COUNT(*) FROM "listings" WHERE "listings"."listing_type" = 'offer' AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1','3','2')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '3')
 ) AND (open = '1' AND (valid_until IS NULL OR valid_until > '2012-11-30 12:25:30'))[0m
  [1m[35mListing Load (4.2ms)[0m  SELECT "listings".* FROM "listings" WHERE "listings"."listing_type" = 'offer' AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1','3','2')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '3')
 ) AND (open = '1' AND (valid_until IS NULL OR valid_until > '2012-11-30 12:25:30')) ORDER BY listings.created_at DESC LIMIT 15 OFFSET 0
  [1m[36mListingImage Load (1.3ms)[0m  [1mSELECT "listing_images".* FROM "listing_images" WHERE ("listing_images".listing_id IN (12,8,7,6,2,1))[0m
  [1m[35mSQL (1.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listing_images"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (0.7ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"diet_listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.5ms)[0m  [1mSELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 12)[0m
  [1m[35mSQL (0.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"comments"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.4ms)[0m  [1mSELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 12)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (1.0ms)[0m  [1mSELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 8)[0m
  [1m[35mSQL (0.4ms)[0m  SELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 8)
  [1m[36mPerson Load (0.7ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cPLJhUmKGr4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  SELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 7)
  [1m[36mDietListing Load (0.8ms)[0m  [1mSELECT "diet_listings".* FROM "diet_listings" WHERE ("diet_listings".listing_id = 7)[0m
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"diets"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mDiet Load (0.9ms)[0m  [1mSELECT "diets".* FROM "diets" WHERE "diets"."id" = 2 LIMIT 1[0m
  [1m[35mSQL (1.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"diets"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 7)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cPLJhUmKGr4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mSELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 6)[0m
  [1m[35mDietListing Load (0.5ms)[0m  SELECT "diet_listings".* FROM "diet_listings" WHERE ("diet_listings".listing_id = 6)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "diets".* FROM "diets" WHERE "diets"."id" = 2 LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  SELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 6)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 2)
  [1m[36mDietListing Load (1.2ms)[0m  [1mSELECT "diet_listings".* FROM "diet_listings" WHERE ("diet_listings".listing_id = 2)[0m
  [1m[35mDiet Load (0.8ms)[0m  SELECT "diets".* FROM "diets" WHERE "diets"."id" = 1 LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mSELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 2)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 2)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cPLJhUmKGr4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  SELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 1)
  [1m[36mDietListing Load (0.4ms)[0m  [1mSELECT "diet_listings".* FROM "diet_listings" WHERE ("diet_listings".listing_id = 1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "diets".* FROM "diets" WHERE "diets"."id" = 1 LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mSELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 1)[0m
Rendered homepage/_recent_listing.haml (171.3ms)
  [1m[35mSQL (0.8ms)[0m  SELECT COUNT(*) FROM "listings" WHERE "listings"."listing_type" = 'request' AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1','3','2')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '3')
 ) AND (open = '1' AND (valid_until IS NULL OR valid_until > '2012-11-30 12:25:30'))
Rendered common/_staples.haml (2.2ms)
  [1m[36mCommunityMembership Load (0.7ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 5 LIMIT 1[0m
  [1m[35mCommunityMembership Load (1.0ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 10 LIMIT 1
  [1m[36mCommunityMembership Load (1.0ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mCommunityMembership Load (0.9ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 4 LIMIT 1
  [1m[36mCommunityMembership Load (1.1ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 3 LIMIT 1[0m
  [1m[35mCommunityMembership Load (0.8ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 6 LIMIT 1
  [1m[36mCommunityMembership Load (0.4ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 7 LIMIT 1[0m
  [1m[35mCommunityMembership Load (0.5ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 8 LIMIT 1
  [1m[36mCommunityMembership Load (0.5ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 9 LIMIT 1[0m
  [1m[35mCommunityMembership Load (0.5ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 2 LIMIT 1
Rendered homepage/_user_communities.haml (27.5ms)
Rendered common/_staples.haml (2.2ms)
  [1m[36mSQL (0.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"event_feed_events"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.4ms)[0m  SELECT COUNT(*) FROM "event_feed_events" WHERE ("event_feed_events".community_id = 3)
Rendered common/_staples.haml (2.8ms)
  [1m[36mEventFeedEvent Load (1.1ms)[0m  [1mSELECT "event_feed_events".* FROM "event_feed_events" WHERE ("event_feed_events".community_id = 3) ORDER BY id DESC LIMIT 5[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1
Rendered event_feed_events/_login.haml (5.3ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1[0m
Rendered event_feed_events/_login.haml (4.1ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1
Rendered event_feed_events/_login.haml (3.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1[0m
Rendered event_feed_events/_login.haml (3.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1
Rendered event_feed_events/_login.haml (3.8ms)
Rendered homepage/_event_feed_event.haml (40.7ms)
Rendered homepage/_event_feed.haml (46.5ms)
Rendered common/_staples.haml (2.1ms)
Rendered common/_staples.haml (2.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 3) LIMIT 2[0m
Rendered homepage/_news_items.haml (5.1ms)
Rendered common/_staples.haml (2.1ms)
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"polls"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPoll Load (1.0ms)[0m  [1mSELECT "polls".* FROM "polls" WHERE "polls"."active" = 't' AND ("polls".community_id = 3) LIMIT 1[0m
Rendered layouts/_kissmetrics.haml (3.2ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.6ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.2ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (10.3ms)
Rendered communities/default/logo/logo.haml (2.2ms)
Rendered layouts/_no_javascript.haml (15.7ms)
Rendered layouts/_facebook_sdk.haml (2.3ms)
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.0ms)[0m  SELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) AND participations.person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) AND participations.person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')[0m
Rendered layouts/_logged_in_messages_icon.haml (23.1ms)
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.8ms)[0m  [1mSELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')[0m
Rendered layouts/_logged_in_notifications_icon.haml (12.5ms)
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'cUuWlUmJ0r4Oaa3a6HdQnY') AND (acceptance is null)[0m
Rendered layouts/_logged_in_swap_offers_icon.haml (10.2ms)
  [1m[35mCommunityMembership Load (1.0ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."community_id" = 3 AND ("community_memberships".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY') LIMIT 1
Rendered layouts/_logged_in.haml (61.1ms)
Rendered layouts/_notifications.haml (6.2ms)
Rendered layouts/_display_popup.haml (7.4ms)
Rendered homepage/index.haml within layouts/application (645.7ms)
Completed 200 OK in 2087ms (Views: 593.7ms | ActiveRecord: 374.3ms | Sphinx: 0.0ms)


Started GET "/en/homepage" for 127.0.0.1 at 2012-11-30 17:56:13 +0530
  Processing by HomepageController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mPK and serial sequence (8.5ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (5.5ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (2.1ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (3.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (5.6ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (3.3ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (3.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.6ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.9ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 3 LIMIT 1
  [1m[36mSQL (1.5ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 3 AND (("community_memberships".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (1.4ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 3 LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 35
host: !binary |-
 bHZoLm1l
', NULL, '2012-11-30 12:26:13.840042', NULL, NULL, NULL, '2012-11-30 12:26:13.840324', '2012-11-30 12:26:13.840324', NULL) RETURNING "id"
  [1m[36mSQL (22.2ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (1.5ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 3 AND (("community_memberships".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (1.2ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
~~~~~~~~~~~~~~~~~~3
  [1m[35mSQL (1.3ms)[0m  SELECT 1 FROM "people" INNER JOIN "community_memberships" ON "people".id = "community_memberships".person_id WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND (("community_memberships".community_id = 3)) LIMIT 1
  [1m[36mSQL (2.8ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (1.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (2.4ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (3.7ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (9.0ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (1.8ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.9ms)[0m  [1mSELECT "communities".* FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE (("community_memberships".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY'))[0m
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"news_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.1ms)[0m  [1mSELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 3)[0m
  [1m[35mCommunity Load (1.8ms)[0m  SELECT "communities".* FROM "communities"
  [1m[36mSQL (0.5ms)[0m  [1mSELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 3) LIMIT 2[0m
  [1m[35mSQL (1.8ms)[0m  SELECT COUNT(*) FROM "listings" WHERE "listings"."listing_type" = 'offer' AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1','3','2')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '3')
 ) AND (open = '1' AND (valid_until IS NULL OR valid_until > '2012-11-30 12:26:14'))
  [1m[36mListing Load (4.2ms)[0m  [1mSELECT "listings".* FROM "listings" WHERE "listings"."listing_type" = 'offer' AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1','3','2')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '3')
 ) AND (open = '1' AND (valid_until IS NULL OR valid_until > '2012-11-30 12:26:14')) ORDER BY listings.created_at DESC LIMIT 15 OFFSET 0[0m
  [1m[35mListingImage Load (1.4ms)[0m  SELECT "listing_images".* FROM "listing_images" WHERE ("listing_images".listing_id IN (12,8,7,6,2,1))
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listing_images"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (0.7ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"diet_listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.4ms)[0m  SELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 12)
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"comments"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.8ms)[0m  SELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 12)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 8)
  [1m[36mSQL (0.8ms)[0m  [1mSELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 8)[0m
  [1m[35mPerson Load (1.4ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cPLJhUmKGr4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 7)[0m
  [1m[35mDietListing Load (0.4ms)[0m  SELECT "diet_listings".* FROM "diet_listings" WHERE ("diet_listings".listing_id = 7)
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"diets"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mDiet Load (1.0ms)[0m  SELECT "diets".* FROM "diets" WHERE "diets"."id" = 2 LIMIT 1
  [1m[36mSQL (1.6ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"diets"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 7)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cPLJhUmKGr4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  SELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 6)
  [1m[36mDietListing Load (0.6ms)[0m  [1mSELECT "diet_listings".* FROM "diet_listings" WHERE ("diet_listings".listing_id = 6)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "diets".* FROM "diets" WHERE "diets"."id" = 2 LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mSELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 6)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mSELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 2)[0m
  [1m[35mDietListing Load (0.5ms)[0m  SELECT "diet_listings".* FROM "diet_listings" WHERE ("diet_listings".listing_id = 2)
  [1m[36mDiet Load (0.8ms)[0m  [1mSELECT "diets".* FROM "diets" WHERE "diets"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 2)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 2)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cPLJhUmKGr4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mSELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 1)[0m
  [1m[35mDietListing Load (0.4ms)[0m  SELECT "diet_listings".* FROM "diet_listings" WHERE ("diet_listings".listing_id = 1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "diets".* FROM "diets" WHERE "diets"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  SELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 1)
Rendered homepage/_recent_listing.haml (112.6ms)
  [1m[36mSQL (2.1ms)[0m  [1mSELECT COUNT(*) FROM "listings" WHERE "listings"."listing_type" = 'request' AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1','3','2')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '3')
 ) AND (open = '1' AND (valid_until IS NULL OR valid_until > '2012-11-30 12:26:14'))[0m
Rendered common/_staples.haml (2.2ms)
  [1m[35mCommunityMembership Load (1.2ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 5 LIMIT 1
  [1m[36mCommunityMembership Load (0.9ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 10 LIMIT 1[0m
  [1m[35mCommunityMembership Load (0.7ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mCommunityMembership Load (0.5ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 4 LIMIT 1[0m
  [1m[35mCommunityMembership Load (1.0ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 3 LIMIT 1
  [1m[36mCommunityMembership Load (0.8ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 6 LIMIT 1[0m
  [1m[35mCommunityMembership Load (0.7ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 7 LIMIT 1
  [1m[36mCommunityMembership Load (0.6ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 8 LIMIT 1[0m
  [1m[35mCommunityMembership Load (0.8ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 9 LIMIT 1
  [1m[36mCommunityMembership Load (0.6ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 2 LIMIT 1[0m
Rendered homepage/_user_communities.haml (103.5ms)
Rendered common/_staples.haml (2.4ms)
  [1m[35mSQL (1.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"event_feed_events"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.5ms)[0m  [1mSELECT COUNT(*) FROM "event_feed_events" WHERE ("event_feed_events".community_id = 3)[0m
Rendered common/_staples.haml (2.9ms)
  [1m[35mEventFeedEvent Load (0.9ms)[0m  SELECT "event_feed_events".* FROM "event_feed_events" WHERE ("event_feed_events".community_id = 3) ORDER BY id DESC LIMIT 5
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1[0m
Rendered event_feed_events/_login.haml (6.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1
Rendered event_feed_events/_login.haml (4.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1[0m
Rendered event_feed_events/_login.haml (4.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1
Rendered event_feed_events/_login.haml (5.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1[0m
Rendered event_feed_events/_login.haml (4.0ms)
Rendered homepage/_event_feed_event.haml (45.2ms)
Rendered homepage/_event_feed.haml (51.3ms)
Rendered common/_staples.haml (2.7ms)
Rendered common/_staples.haml (3.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 3) LIMIT 2
Rendered homepage/_news_items.haml (5.8ms)
Rendered common/_staples.haml (2.7ms)
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"polls"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPoll Load (1.0ms)[0m  SELECT "polls".* FROM "polls" WHERE "polls"."active" = 't' AND ("polls".community_id = 3) LIMIT 1
Rendered layouts/_kissmetrics.haml (3.3ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (2.0ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.2ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (11.2ms)
Rendered communities/default/logo/logo.haml (2.3ms)
Rendered layouts/_no_javascript.haml (17.7ms)
Rendered layouts/_facebook_sdk.haml (2.6ms)
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.7ms)[0m  [1mSELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) AND participations.person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) AND participations.person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')
Rendered layouts/_logged_in_messages_icon.haml (17.2ms)
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.0ms)[0m  SELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')
Rendered layouts/_logged_in_notifications_icon.haml (12.4ms)
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.5ms)[0m  SELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'cUuWlUmJ0r4Oaa3a6HdQnY') AND (acceptance is null)
Rendered layouts/_logged_in_swap_offers_icon.haml (12.9ms)
  [1m[36mCommunityMembership Load (1.1ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."community_id" = 3 AND ("community_memberships".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY') LIMIT 1[0m
Rendered layouts/_logged_in.haml (58.6ms)
Rendered layouts/_notifications.haml (5.5ms)
Rendered layouts/_display_popup.haml (7.6ms)
Rendered homepage/index.haml within layouts/application (691.5ms)
Completed 200 OK in 1894ms (Views: 636.0ms | ActiveRecord: 164.7ms | Sphinx: 0.0ms)


Started GET "/en/homepage" for 127.0.0.1 at 2012-11-30 17:57:55 +0530
  Processing by HomepageController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[35mPK and serial sequence (9.6ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (3.7ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.3ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.3ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (1.4ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (1.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.3ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 3 LIMIT 1[0m
  [1m[35mSQL (1.6ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 3 AND (("community_memberships".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (1.1ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 3 LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  BEGIN
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 35
host: !binary |-
 bHZoLm1l
', NULL, '2012-11-30 12:27:55.901667', NULL, NULL, NULL, '2012-11-30 12:27:55.901802', '2012-11-30 12:27:55.901802', NULL) RETURNING "id"[0m
  [1m[35mSQL (20.5ms)[0m  COMMIT
  [1m[36mSQL (1.4ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 3 AND (("community_memberships".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) LIMIT 1[0m
  [1m[35mLocation Load (1.3ms)[0m  SELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)
~~~~~~~~~~~~~~~~~~3
  [1m[36mSQL (1.4ms)[0m  [1mSELECT 1 FROM "people" INNER JOIN "community_memberships" ON "people".id = "community_memberships".person_id WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND (("community_memberships".community_id = 3)) LIMIT 1[0m
  [1m[35mSQL (2.8ms)[0m   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
  [1m[36mSQL (3.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.6ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (3.5ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (6.0ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (4.1ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.3ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (2.0ms)[0m  SELECT "communities".* FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE (("community_memberships".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY'))
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"news_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.8ms)[0m  SELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 3)
  [1m[36mCommunity Load (2.0ms)[0m  [1mSELECT "communities".* FROM "communities"[0m
  [1m[35mSQL (1.0ms)[0m  SELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 3) LIMIT 2
  [1m[36mSQL (2.4ms)[0m  [1mSELECT COUNT(*) FROM "listings" WHERE "listings"."listing_type" = 'offer' AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1','3','2')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '3')
 ) AND (open = '1' AND (valid_until IS NULL OR valid_until > '2012-11-30 12:27:56'))[0m
  [1m[35mListing Load (3.9ms)[0m  SELECT "listings".* FROM "listings" WHERE "listings"."listing_type" = 'offer' AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1','3','2')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '3')
 ) AND (open = '1' AND (valid_until IS NULL OR valid_until > '2012-11-30 12:27:56')) ORDER BY listings.created_at DESC LIMIT 15 OFFSET 0
  [1m[36mListingImage Load (1.4ms)[0m  [1mSELECT "listing_images".* FROM "listing_images" WHERE ("listing_images".listing_id IN (12,8,7,6,2,1))[0m
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listing_images"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.6ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"diet_listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.0ms)[0m  [1mSELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 12)[0m
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"comments"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 12)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (1.0ms)[0m  [1mSELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 8)[0m
  [1m[35mSQL (1.0ms)[0m  SELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 8)
  [1m[36mPerson Load (1.5ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cPLJhUmKGr4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (1.0ms)[0m  SELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 7)
  [1m[36mDietListing Load (1.0ms)[0m  [1mSELECT "diet_listings".* FROM "diet_listings" WHERE ("diet_listings".listing_id = 7)[0m
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"diets"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mDiet Load (1.0ms)[0m  [1mSELECT "diets".* FROM "diets" WHERE "diets"."id" = 2 LIMIT 1[0m
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"diets"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.1ms)[0m  [1mSELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 7)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cPLJhUmKGr4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 6)[0m
  [1m[35mDietListing Load (0.9ms)[0m  SELECT "diet_listings".* FROM "diet_listings" WHERE ("diet_listings".listing_id = 6)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "diets".* FROM "diets" WHERE "diets"."id" = 2 LIMIT 1[0m
  [1m[35mSQL (1.0ms)[0m  SELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 6)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 2)
  [1m[36mDietListing Load (0.8ms)[0m  [1mSELECT "diet_listings".* FROM "diet_listings" WHERE ("diet_listings".listing_id = 2)[0m
  [1m[35mDiet Load (0.9ms)[0m  SELECT "diets".* FROM "diets" WHERE "diets"."id" = 1 LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mSELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 2)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 2)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cPLJhUmKGr4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 1)
  [1m[36mDietListing Load (0.8ms)[0m  [1mSELECT "diet_listings".* FROM "diet_listings" WHERE ("diet_listings".listing_id = 1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "diets".* FROM "diets" WHERE "diets"."id" = 1 LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mSELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 1)[0m
Rendered homepage/_recent_listing.haml (126.1ms)
  [1m[35mSQL (2.1ms)[0m  SELECT COUNT(*) FROM "listings" WHERE "listings"."listing_type" = 'request' AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1','3','2')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '3')
 ) AND (open = '1' AND (valid_until IS NULL OR valid_until > '2012-11-30 12:27:56'))
Rendered common/_staples.haml (3.8ms)
  [1m[36mCommunityMembership Load (1.1ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 5 LIMIT 1[0m
  [1m[35mCommunityMembership Load (1.0ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 10 LIMIT 1
  [1m[36mCommunityMembership Load (1.1ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1[0m
  [1m[35mCommunityMembership Load (0.9ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 4 LIMIT 1
  [1m[36mCommunityMembership Load (0.9ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 3 LIMIT 1[0m
  [1m[35mCommunityMembership Load (0.8ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 6 LIMIT 1
  [1m[36mCommunityMembership Load (0.9ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 7 LIMIT 1[0m
  [1m[35mCommunityMembership Load (0.8ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 8 LIMIT 1
  [1m[36mCommunityMembership Load (0.9ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 9 LIMIT 1[0m
  [1m[35mCommunityMembership Load (1.0ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 2 LIMIT 1
Rendered homepage/_user_communities.haml (94.0ms)
Rendered common/_staples.haml (2.9ms)
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"event_feed_events"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "event_feed_events" WHERE ("event_feed_events".community_id = 3)
Rendered common/_staples.haml (3.1ms)
  [1m[36mEventFeedEvent Load (1.5ms)[0m  [1mSELECT "event_feed_events".* FROM "event_feed_events" WHERE ("event_feed_events".community_id = 3) ORDER BY id DESC LIMIT 5[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1
Rendered event_feed_events/_login.haml (4.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1[0m
Rendered event_feed_events/_login.haml (3.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1
Rendered event_feed_events/_login.haml (3.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1[0m
Rendered event_feed_events/_login.haml (3.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1
Rendered event_feed_events/_login.haml (4.2ms)
Rendered homepage/_event_feed_event.haml (45.5ms)
Rendered homepage/_event_feed.haml (54.4ms)
Rendered common/_staples.haml (2.2ms)
Rendered common/_staples.haml (2.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 3) LIMIT 2[0m
Rendered homepage/_news_items.haml (5.4ms)
Rendered common/_staples.haml (2.2ms)
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"polls"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPoll Load (0.9ms)[0m  [1mSELECT "polls".* FROM "polls" WHERE "polls"."active" = 't' AND ("polls".community_id = 3) LIMIT 1[0m
Rendered layouts/_kissmetrics.haml (70.6ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.8ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.1ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (10.3ms)
Rendered communities/default/logo/logo.haml (2.3ms)
Rendered layouts/_no_javascript.haml (16.0ms)
Rendered layouts/_facebook_sdk.haml (3.0ms)
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.7ms)[0m  SELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) AND participations.person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) AND participations.person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')[0m
Rendered layouts/_logged_in_messages_icon.haml (16.9ms)
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.0ms)[0m  [1mSELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')[0m
Rendered layouts/_logged_in_notifications_icon.haml (13.2ms)
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'cUuWlUmJ0r4Oaa3a6HdQnY') AND (acceptance is null)[0m
Rendered layouts/_logged_in_swap_offers_icon.haml (13.4ms)
  [1m[35mCommunityMembership Load (1.1ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."community_id" = 3 AND ("community_memberships".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY') LIMIT 1
Rendered layouts/_logged_in.haml (58.6ms)
Rendered layouts/_notifications.haml (5.7ms)
Rendered layouts/_display_popup.haml (7.8ms)
Rendered homepage/index.haml within layouts/application (683.7ms)
Completed 200 OK in 1865ms (Views: 616.1ms | ActiveRecord: 172.1ms | Sphinx: 0.0ms)


Started GET "/en/homepage" for 127.0.0.1 at 2012-11-30 17:59:21 +0530
  Processing by HomepageController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mPK and serial sequence (7.6ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (2.5ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (3.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (1.3ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (3.4ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPK and serial sequence (6.1ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (2.9ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (1.7ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.5ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 3 LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mSELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 3 AND (("community_memberships".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunityMembership Load (0.5ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 3 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 35
host: !binary |-
 bHZoLm1l
', NULL, '2012-11-30 12:29:22.279078', NULL, NULL, NULL, '2012-11-30 12:29:22.279197', '2012-11-30 12:29:22.279197', NULL) RETURNING "id"
  [1m[36mSQL (26.7ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (1.6ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 3 AND (("community_memberships".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mLocation Load (0.7ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
~~~~~~~~~~~~~~~~~~3
  [1m[35mSQL (0.6ms)[0m  SELECT 1 FROM "people" INNER JOIN "community_memberships" ON "people".id = "community_memberships".person_id WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND (("community_memberships".community_id = 3)) LIMIT 1
  [1m[36mSQL (2.1ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.6ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.0ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (3.4ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (4.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (3.5ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (1.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.9ms)[0m  [1mSELECT "communities".* FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE (("community_memberships".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY'))[0m
  [1m[35mSQL (1.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"news_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 3)[0m
  [1m[35mCommunity Load (1.6ms)[0m  SELECT "communities".* FROM "communities"
  [1m[36mSQL (1.0ms)[0m  [1mSELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 3) LIMIT 2[0m
  [1m[35mSQL (2.2ms)[0m  SELECT COUNT(*) FROM "listings" WHERE "listings"."listing_type" = 'offer' AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1','3','2')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '3')
 ) AND (open = '1' AND (valid_until IS NULL OR valid_until > '2012-11-30 12:29:22'))
  [1m[36mListing Load (3.8ms)[0m  [1mSELECT "listings".* FROM "listings" WHERE "listings"."listing_type" = 'offer' AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1','3','2')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '3')
 ) AND (open = '1' AND (valid_until IS NULL OR valid_until > '2012-11-30 12:29:22')) ORDER BY listings.created_at DESC LIMIT 15 OFFSET 0[0m
  [1m[35mListingImage Load (1.3ms)[0m  SELECT "listing_images".* FROM "listing_images" WHERE ("listing_images".listing_id IN (12,8,7,6,2,1))
  [1m[36mSQL (1.8ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listing_images"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (1.5ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"diet_listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 12)
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"comments"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 12)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 8)
  [1m[36mSQL (0.8ms)[0m  [1mSELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 8)[0m
  [1m[35mPerson Load (1.8ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cPLJhUmKGr4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 7)[0m
  [1m[35mDietListing Load (1.0ms)[0m  SELECT "diet_listings".* FROM "diet_listings" WHERE ("diet_listings".listing_id = 7)
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"diets"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mDiet Load (1.0ms)[0m  SELECT "diets".* FROM "diets" WHERE "diets"."id" = 2 LIMIT 1
  [1m[36mSQL (1.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"diets"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.0ms)[0m  SELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 7)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cPLJhUmKGr4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 6)
  [1m[36mDietListing Load (0.8ms)[0m  [1mSELECT "diet_listings".* FROM "diet_listings" WHERE ("diet_listings".listing_id = 6)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "diets".* FROM "diets" WHERE "diets"."id" = 2 LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 6)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 2)[0m
  [1m[35mDietListing Load (0.9ms)[0m  SELECT "diet_listings".* FROM "diet_listings" WHERE ("diet_listings".listing_id = 2)
  [1m[36mDiet Load (1.0ms)[0m  [1mSELECT "diets".* FROM "diets" WHERE "diets"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  SELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 2)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 2)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cPLJhUmKGr4Oaa3a6HdQnY' LIMIT 1
  [1m[36mSQL (1.0ms)[0m  [1mSELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 1)[0m
  [1m[35mDietListing Load (0.4ms)[0m  SELECT "diet_listings".* FROM "diet_listings" WHERE ("diet_listings".listing_id = 1)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "diets".* FROM "diets" WHERE "diets"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.0ms)[0m  SELECT COUNT(*) FROM "comments" WHERE ("comments".listing_id = 1)
Rendered homepage/_recent_listing.haml (201.9ms)
  [1m[36mSQL (2.1ms)[0m  [1mSELECT COUNT(*) FROM "listings" WHERE "listings"."listing_type" = 'request' AND (
 (listings.visibility = 'everybody' 
 OR (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (
 SELECT listing_id 
 FROM communities_listings
 WHERE community_id IN ('1','3','2')
 )
 ))
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '3')
 ) AND (open = '1' AND (valid_until IS NULL OR valid_until > '2012-11-30 12:29:22'))[0m
Rendered common/_staples.haml (2.1ms)
  [1m[35mCommunityMembership Load (1.1ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 5 LIMIT 1
  [1m[36mCommunityMembership Load (0.9ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 10 LIMIT 1[0m
  [1m[35mCommunityMembership Load (1.0ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 1 LIMIT 1
  [1m[36mCommunityMembership Load (0.8ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 4 LIMIT 1[0m
  [1m[35mCommunityMembership Load (0.9ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 3 LIMIT 1
  [1m[36mCommunityMembership Load (0.6ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 6 LIMIT 1[0m
  [1m[35mCommunityMembership Load (0.8ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 7 LIMIT 1
  [1m[36mCommunityMembership Load (1.0ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 8 LIMIT 1[0m
  [1m[35mCommunityMembership Load (1.2ms)[0m  SELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 9 LIMIT 1
  [1m[36mCommunityMembership Load (1.3ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 2 LIMIT 1[0m
Rendered homepage/_user_communities.haml (97.4ms)
Rendered common/_staples.haml (2.3ms)
  [1m[35mSQL (2.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"event_feed_events"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.9ms)[0m  [1mSELECT COUNT(*) FROM "event_feed_events" WHERE ("event_feed_events".community_id = 3)[0m
Rendered common/_staples.haml (2.8ms)
  [1m[35mEventFeedEvent Load (1.5ms)[0m  SELECT "event_feed_events".* FROM "event_feed_events" WHERE ("event_feed_events".community_id = 3) ORDER BY id DESC LIMIT 5
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1[0m
Rendered event_feed_events/_login.haml (4.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1
Rendered event_feed_events/_login.haml (4.5ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1[0m
Rendered event_feed_events/_login.haml (3.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1
Rendered event_feed_events/_login.haml (3.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1[0m
Rendered event_feed_events/_login.haml (3.7ms)
Rendered homepage/_event_feed_event.haml (42.0ms)
Rendered homepage/_event_feed.haml (49.4ms)
Rendered common/_staples.haml (2.1ms)
Rendered common/_staples.haml (2.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 3) LIMIT 2
Rendered homepage/_news_items.haml (5.1ms)
Rendered common/_staples.haml (2.1ms)
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"polls"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPoll Load (1.1ms)[0m  SELECT "polls".* FROM "polls" WHERE "polls"."active" = 't' AND ("polls".community_id = 3) LIMIT 1
Rendered layouts/_kissmetrics.haml (3.0ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.7ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.0ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (10.2ms)
Rendered communities/default/logo/logo.haml (2.4ms)
Rendered layouts/_no_javascript.haml (16.2ms)
Rendered layouts/_facebook_sdk.haml (2.4ms)
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"participations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"conversations"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.8ms)[0m  [1mSELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) AND participations.person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "conversations" INNER JOIN "participations" ON "participations"."conversation_id" = "conversations"."id" INNER JOIN "listings" ON "listings"."id" = "conversations"."listing_id" WHERE ((participations.is_read = '0' OR (conversations.status = 'pending' AND listings.author_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) AND participations.person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')
Rendered layouts/_logged_in_messages_icon.haml (18.8ms)
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.1ms)[0m  SELECT COUNT(*) FROM "notifications" WHERE "notifications"."is_read" = 'f' AND ("notifications".receiver_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')
Rendered layouts/_logged_in_notifications_icon.haml (12.0ms)
  [1m[36mSQL (1.5ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"swap_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.9ms)[0m  SELECT COUNT(*) FROM "swap_items" WHERE ("swap_items".receiver_id = 'cUuWlUmJ0r4Oaa3a6HdQnY') AND (acceptance is null)
Rendered layouts/_logged_in_swap_offers_icon.haml (9.6ms)
  [1m[36mCommunityMembership Load (0.9ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."community_id" = 3 AND ("community_memberships".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY') LIMIT 1[0m
Rendered layouts/_logged_in.haml (54.8ms)
Rendered layouts/_notifications.haml (4.5ms)
Rendered layouts/_display_popup.haml (6.8ms)
Rendered homepage/index.haml within layouts/application (686.4ms)
Completed 200 OK in 1904ms (Views: 621.2ms | ActiveRecord: 165.0ms | Sphinx: 0.0ms)


Started GET "/en/logout" for 127.0.0.1 at 2012-11-30 18:16:37 +0530
  Processing by SessionsController#destroy as HTML
  Parameters: {"method"=>:delete, "locale"=>"en"}
  [1m[35mPK and serial sequence (5.7ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (3.4ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (2.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPerson Load (1.4ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' LIMIT 1[0m
  [1m[35mSQL (2.4ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.3ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (3.5ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mSQL (2.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunity Load (1.8ms)[0m  [1mSELECT "communities".* FROM "communities" WHERE "communities"."id" = 3 LIMIT 1[0m
  [1m[35mSQL (1.6ms)[0m  SELECT 1 FROM "communities" INNER JOIN "community_memberships" ON "communities".id = "community_memberships".community_id WHERE "communities"."id" = 3 AND (("community_memberships".person_id = 'cUuWlUmJ0r4Oaa3a6HdQnY')) LIMIT 1
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (1.9ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"community_memberships"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mCommunityMembership Load (1.1ms)[0m  [1mSELECT "community_memberships".* FROM "community_memberships" WHERE "community_memberships"."person_id" = 'cUuWlUmJ0r4Oaa3a6HdQnY' AND "community_memberships"."community_id" = 3 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  BEGIN
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "delayed_jobs" ("priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "created_at", "updated_at", "queue") VALUES (0, 0, '--- !ruby/struct:PageLoadedJob
community_membership_id: 35
host: !binary |-
 bHZoLm1l
', NULL, '2012-11-30 12:46:38.511423', NULL, NULL, NULL, '2012-11-30 12:46:38.511544', '2012-11-30 12:46:38.511544', NULL) RETURNING "id"[0m
  [1m[35mSQL (34.2ms)[0m  COMMIT
  [1m[36mLocation Load (1.2ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
  [1m[35mSQL (0.8ms)[0m  BEGIN
  [1m[36mAREL (0.7ms)[0m  [1mUPDATE "people" SET "preferences" = '---
email_about_new_messages: true
email_about_new_comments_to_own_listing: true
email_when_conversation_accepted: true
email_when_conversation_rejected: true
email_about_new_badges: true
email_about_new_received_testimonials: true
email_about_accept_reminders: true
email_about_testimonial_reminders: true
email_about_weekly_events: true
' WHERE "people"."id" = 'cUuWlUmJ0r4Oaa3a6HdQnY'[0m
[paperclip] Saving attachments.
  [1m[35mSQL (18.8ms)[0m  COMMIT
Redirected to http://lvh.me:3000/en
Completed 302 Found in 789ms


Started GET "/en" for 127.0.0.1 at 2012-11-30 18:16:38 +0530
  Processing by DashboardController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mPK and serial sequence (2.9ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (3.4ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mLocation Load (1.0ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
~~~~~~~~~~~~~~~dashboard#index~~~~~~~~~
  [1m[35mPK and serial sequence (5.1ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (3.4ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
Rendered dashboard/_header.haml (6.4ms)
  [1m[35mSQL (1.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.7ms)[0m  [1mSELECT COUNT(*) FROM "communities"[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "communities"
  [1m[36mCommunity Load (1.9ms)[0m  [1mSELECT "communities".* FROM "communities" ORDER BY name asc[0m
Rendered dashboard/_community_list.haml (113.4ms)
Rendered dashboard/_footer.haml (8.9ms)
Rendered layouts/_kissmetrics.haml (3.1ms)
Rendered layouts/_dashboard_no_javascript.haml (2.9ms)
Rendered dashboard/index.haml within layouts/dashboard (162.5ms)
Completed 200 OK in 635ms (Views: 162.7ms | ActiveRecord: 117.0ms | Sphinx: 0.0ms)


Started GET "/en?cid=4" for 127.0.0.1 at 2012-11-30 18:16:44 +0530
  Processing by DashboardController#index as HTML
  Parameters: {"cid"=>"4", "locale"=>"en"}
Redirected to http://lvh.me:3000/en/homepage
Completed 302 Found in 1ms


Started GET "/en/homepage" for 127.0.0.1 at 2012-11-30 18:16:44 +0530
  Processing by HomepageController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[35mPK and serial sequence (6.0ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
  [1m[36mPK and custom sequence (3.5ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mPK and serial sequence (6.0ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
  [1m[36mPK and custom sequence (3.4ms)[0m  [1m SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
[0m
  [1m[35mSQL (1.1ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.1ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"communities"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mCommunity Load (1.3ms)[0m  SELECT "communities".* FROM "communities" WHERE "communities"."id" = 4 LIMIT 1
  [1m[36mLocation Load (1.4ms)[0m  [1mSELECT "locations".* FROM "locations" WHERE (community_id IS NOT NULL and city IS NULL)[0m
~~~~~~~~~~~~~~~~~~4
  [1m[35mSQL (2.2ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"event_feed_events"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (1.9ms)[0m  [1m SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'listings'
 AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35mSQL (2.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mPK and serial sequence (6.0ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"communities_listings"'::regclass
[0m
  [1m[35mPK and custom sequence (3.8ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"communities_listings"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
  [1m[36mPK and serial sequence (6.2ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"listing_followers"'::regclass
[0m
  [1m[35mPK and custom sequence (3.5ms)[0m   SELECT attr.attname,
 CASE
 WHEN split_part(def.adsrc, '''', 2) ~ '.' THEN
 substr(split_part(def.adsrc, '''', 2),
 strpos(split_part(def.adsrc, '''', 2), '.')+1)
 ELSE split_part(def.adsrc, '''', 2)
 END
 FROM pg_class t
 JOIN pg_attribute attr ON (t.oid = attrelid)
 JOIN pg_attrdef def ON (adrelid = attrelid AND adnum = attnum)
 JOIN pg_constraint cons ON (conrelid = adrelid AND adnum = conkey[1])
 WHERE t.oid = '"listing_followers"'::regclass
 AND cons.contype = 'p'
 AND def.adsrc ~* 'nextval'
Creating scope :open. Overwriting existing method Listing.open.
Creating scope :public. Overwriting existing method Listing.public.
Creating scope :private. Overwriting existing method Listing.private.
  [1m[36mSQL (2.2ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"notifications"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.3ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (2.0ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"listing_images"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.6ms)[0m  SELECT COUNT(DISTINCT "listings"."id") FROM "listings" LEFT OUTER JOIN "listing_images" ON "listing_images"."listing_id" = "listings"."id" WHERE "listings"."listing_type" = 'request' AND (open = '1' AND (valid_until IS NULL OR valid_until > '2012-11-30 12:46:45')) AND (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '4')
 )
  [1m[36mSQL (2.2ms)[0m  [1mSELECT COUNT(DISTINCT "listings"."id") FROM "listings" LEFT OUTER JOIN "listing_images" ON "listing_images"."listing_id" = "listings"."id" WHERE "listings"."listing_type" = 'offer' AND (open = '1' AND (valid_until IS NULL OR valid_until > '2012-11-30 12:46:45')) AND (
 listings.visibility IN ('communities','this_community') 
 AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '4')
 )[0m
  [1m[35mSQL (1.5ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"news_items"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.7ms)[0m  [1mSELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 4)[0m
  [1m[35mCommunity Load (1.0ms)[0m  SELECT "communities".* FROM "communities"
  [1m[36mSQL (1.0ms)[0m  [1mSELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 4) LIMIT 2[0m
  [1m[35mSQL (2.0ms)[0m  SELECT COUNT(*) FROM "listings" WHERE "listings"."listing_type" = 'offer' AND (listings.visibility = 'everybody' AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '4')) AND (open = '1' AND (valid_until IS NULL OR valid_until > '2012-11-30 12:46:45'))
  [1m[36mListing Load (2.5ms)[0m  [1mSELECT "listings".* FROM "listings" WHERE "listings"."listing_type" = 'offer' AND (listings.visibility = 'everybody' AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '4')) AND (open = '1' AND (valid_until IS NULL OR valid_until > '2012-11-30 12:46:45')) ORDER BY listings.created_at DESC LIMIT 15 OFFSET 0[0m
  [1m[35mListingImage Load (37.3ms)[0m  SELECT "listing_images".* FROM "listing_images" WHERE ("listing_images".listing_id = 5)
  [1m[36mSQL (2.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mPerson Load (11.5ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = 'cMY8ckm8Sr4Oad3a6HdQnY' LIMIT 1
  [1m[36mSQL (2.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"people"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (2.0ms)[0m   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"diet_listings"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
  [1m[36mSQL (0.8ms)[0m  [1mSELECT COUNT(*) FROM "diet_listings" WHERE ("diet_listings".listing_id = 5)[0m
  [1m[35mDietListing Load (0.9ms)[0m  SELECT "diet_listings".* FROM "diet_listings" WHERE ("diet_listings".listing_id = 5)
  [1m[36mSQL (3.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"diets"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mDiet Load (1.0ms)[0m  SELECT "diets".* FROM "diets" WHERE "diets"."id" = 2 LIMIT 1
  [1m[36mSQL (1.7ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"diets"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
Rendered homepage/_recent_listing.haml (105.2ms)
  [1m[35mSQL (1.8ms)[0m  SELECT COUNT(*) FROM "listings" WHERE "listings"."listing_type" = 'request' AND (listings.visibility = 'everybody' AND listings.id IN (SELECT listing_id FROM communities_listings WHERE community_id = '4')) AND (open = '1' AND (valid_until IS NULL OR valid_until > '2012-11-30 12:46:45'))
  [1m[36mSQL (1.9ms)[0m  [1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = '"event_feed_events"'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [1m[35mSQL (0.8ms)[0m  SELECT COUNT(*) FROM "event_feed_events" WHERE ("event_feed_events".community_id = 4)
Rendered common/_staples.haml (3.3ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "news_items" WHERE ("news_items".community_id = 4) LIMIT 2[0m
Rendered homepage/_news_items.haml (8.2ms)
Rendered common/_staples.haml (3.3ms)
Rendered layouts/_kissmetrics.haml (3.1ms)
Rendered communities/default/fb_graph_title/fb_graph_title.haml (1.7ms)
Rendered communities/default/teaser_welcome_text/teaser_welcome_text.haml (2.2ms)
Rendered communities/default/fb_graph_description/fb_graph_description.haml (10.9ms)
Rendered communities/default/logo/logo.haml (2.2ms)
Rendered layouts/_no_javascript.haml (15.9ms)
Rendered layouts/_facebook_sdk.haml (2.4ms)
Rendered layouts/_logged_in.haml (6.8ms)
Rendered layouts/_notifications.haml (4.4ms)
Rendered layouts/_display_popup.haml (6.3ms)
Rendered homepage/index.haml within layouts/application (471.8ms)
Completed 200 OK in 1573ms (Views: 405.3ms | ActiveRecord: 139.8ms | Sphinx: 0.0ms)
